{"version":3,"file":"index.umd.js","sources":["../src/Formex.tsx","../src/utils.ts","../src/Field.tsx","../src/useCreateFormex.tsx"],"sourcesContent":["import React, { useContext } from \"react\";\nimport { FormexController } from \"./types\";\n\nconst FormexContext = React.createContext<FormexController<any>>({} as any);\n\nexport const useFormex = <T extends object>() => useContext<FormexController<T>>(FormexContext);\n\nexport const Formex = FormexContext.Provider;\n","import * as React from \"react\";\n\n/** @private is the value an empty array? */\nexport const isEmptyArray = (value?: any) =>\n    Array.isArray(value) && value.length === 0;\n\n/** @private is the given object a Function? */\nexport const isFunction = (obj: any): obj is Function =>\n    typeof obj === \"function\";\n\n/** @private is the given object an Object? */\nexport const isObject = (obj: any): obj is Object =>\n    obj !== null && typeof obj === \"object\";\n\n/** @private is the given object an integer? */\nexport const isInteger = (obj: any): boolean =>\n    String(Math.floor(Number(obj))) === obj;\n\n/** @private is the given object a string? */\nexport const isString = (obj: any): obj is string =>\n    Object.prototype.toString.call(obj) === \"[object String]\";\n\n/** @private is the given object a NaN? */\n// eslint-disable-next-line no-self-compare\nexport const isNaN = (obj: any): boolean => obj !== obj;\n\n/** @private Does a React component have exactly 0 children? */\nexport const isEmptyChildren = (children: any): boolean =>\n    React.Children.count(children) === 0;\n\n/** @private is the given object/value a promise? */\nexport const isPromise = (value: any): value is PromiseLike<any> =>\n    isObject(value) && isFunction(value.then);\n\n/** @private is the given object/value a type of synthetic event? */\nexport const isInputEvent = (value: any): value is React.SyntheticEvent<any> =>\n    value && isObject(value) && isObject(value.target);\n\n/**\n * Same as document.activeElement but wraps in a try-catch block. In IE it is\n * not safe to call document.activeElement if there is nothing focused.\n *\n * The activeElement will be null only if the document or document body is not\n * yet defined.\n *\n * @param {?Document} doc Defaults to current document.\n * @return {Element | null}\n * @see https://github.com/facebook/fbjs/blob/master/packages/fbjs/src/core/dom/getActiveElement.js\n */\nexport function getActiveElement(doc?: Document): Element | null {\n    doc = doc || (typeof document !== \"undefined\" ? document : undefined);\n    if (typeof doc === \"undefined\") {\n        return null;\n    }\n    try {\n        return doc.activeElement || doc.body;\n    } catch (e) {\n        return doc.body;\n    }\n}\n\n/**\n * Deeply get a value from an object via its path.\n */\nexport function getIn(\n    obj: any,\n    key: string | string[],\n    def?: any,\n    p = 0\n) {\n    const path = toPath(key);\n    while (obj && p < path.length) {\n        obj = obj[path[p++]];\n    }\n\n    // check if path is not in the end\n    if (p !== path.length && !obj) {\n        return def;\n    }\n\n    return obj === undefined ? def : obj;\n}\n\nexport function setIn(obj: any, path: string, value: any): any {\n    const res: any = clone(obj); // this keeps inheritance when obj is a class\n    let resVal: any = res;\n    let i = 0;\n    const pathArray = toPath(path);\n\n    for (; i < pathArray.length - 1; i++) {\n        const currentPath: string = pathArray[i];\n        const currentObj: any = getIn(obj, pathArray.slice(0, i + 1));\n\n        if (currentObj && (isObject(currentObj) || Array.isArray(currentObj))) {\n            resVal = resVal[currentPath] = clone(currentObj);\n        } else {\n            const nextPath: string = pathArray[i + 1];\n            resVal = resVal[currentPath] =\n                isInteger(nextPath) && Number(nextPath) >= 0 ? [] : {};\n        }\n    }\n\n    // Return original object if new value is the same as current\n    if ((i === 0 ? obj : resVal)[pathArray[i]] === value) {\n        return obj;\n    }\n\n    if (value === undefined) {\n        delete resVal[pathArray[i]];\n    } else {\n        resVal[pathArray[i]] = value;\n    }\n\n    // If the path array has a single element, the loop did not run.\n    // Deleting on `resVal` had no effect in this scenario, so we delete on the result instead.\n    if (i === 0 && value === undefined) {\n        delete res[pathArray[i]];\n    }\n\n    return res;\n}\n\n/**\n * Recursively a set the same value for all keys and arrays nested object, cloning\n * @param object\n * @param value\n * @param visited\n * @param response\n */\nexport function setNestedObjectValues<T>(\n    object: any,\n    value: any,\n    visited: any = new WeakMap(),\n    response: any = {}\n): T {\n    for (const k of Object.keys(object)) {\n        const val = object[k];\n        if (isObject(val)) {\n            if (!visited.get(val)) {\n                visited.set(val, true);\n                // In order to keep array values consistent for both dot path  and\n                // bracket syntax, we need to check if this is an array so that\n                // this will output  { friends: [true] } and not { friends: { \"0\": true } }\n                response[k] = Array.isArray(val) ? [] : {};\n                setNestedObjectValues(val, value, visited, response[k]);\n            }\n        } else {\n            response[k] = value;\n        }\n    }\n\n    return response;\n}\n\nfunction clone(value: any) {\n    if (Array.isArray(value)) {\n        return [...value];\n    } else if (typeof value === \"object\" && value !== null) {\n        return { ...value };\n    } else {\n        return value; // This is for primitive types which do not need cloning.\n    }\n}\n\nfunction toPath(value: string | string[]) {\n    if (Array.isArray(value)) return value; // Already in path array form.\n    // Replace brackets with dots, remove leading/trailing dots, then split by dot.\n    return value.replace(/\\[(\\d+)]/g, \".$1\").replace(/^\\./, \"\").replace(/\\.$/, \"\").split(\".\");\n}\n","import * as React from \"react\";\nimport { useFormex } from \"./Formex\";\nimport { getIn, isFunction, isObject } from \"./utils\";\nimport { FormexController } from \"./types\";\n\nexport interface FieldInputProps<Value> {\n    /** Value of the field */\n    value: Value;\n    /** Name of the field */\n    name: string;\n    /** Multiple select? */\n    multiple?: boolean;\n    /** Is the field checked? */\n    checked?: boolean;\n    /** Change event handler */\n    onChange: (event: React.SyntheticEvent) => void,\n    /** Blur event handler */\n    onBlur: (event: React.FocusEvent) => void,\n}\n\nexport interface FormexFieldProps<Value = any, FormValues extends object = any> {\n    field: FieldInputProps<Value>;\n    form: FormexController<FormValues>;\n}\n\nexport type FieldValidator = (\n    value: any\n) => string | void | Promise<string | void>;\n\nexport interface FieldConfig<Value, C extends React.ElementType | undefined = undefined> {\n\n    /**\n     * Component to render. Can either be a string e.g. 'select', 'input', or 'textarea', or a component.\n     */\n    as?:\n        | C\n        | string\n        | React.ForwardRefExoticComponent<any>;\n\n    /**\n     * Children render function <Field name>{props => ...}</Field>)\n     */\n    children?: ((props: FormexFieldProps<Value>) => React.ReactNode) | React.ReactNode;\n\n    /**\n     * Validate a single field value independently\n     */\n    // validate?: FieldValidator;\n\n    /**\n     * Used for 'select' and related input types.\n     */\n    multiple?: boolean;\n\n    /**\n     * Field name\n     */\n    name: string;\n\n    /** HTML input type */\n    type?: string;\n\n    /** Field value */\n    value?: any;\n\n    /** Inner ref */\n    innerRef?: (instance: any) => void;\n\n}\n\nexport type FieldProps<T, C extends React.ElementType | undefined> = {\n    as?: C;\n} & (C extends React.ElementType ? (React.ComponentProps<C> & FieldConfig<T, C>) : FieldConfig<T, C>);\n\nexport function Field<T, C extends React.ElementType | undefined = undefined>({\n                                                                                  validate,\n                                                                                  name,\n                                                                                  children,\n                                                                                  as: is, // `as` is reserved in typescript lol\n                                                                                  // component,\n                                                                                  className,\n                                                                                  ...props\n                                                                              }: FieldProps<T, C>) {\n    const formex = useFormex();\n\n    const field = getFieldProps({ name, ...props }, formex);\n\n    if (isFunction(children)) {\n        return children({ field, form: formex });\n    }\n\n    // if (component) {\n    //     if (typeof component === \"string\") {\n    //         const { innerRef, ...rest } = props;\n    //         return React.createElement(\n    //             component,\n    //             { ref: innerRef, ...field, ...rest, className },\n    //             children\n    //         );\n    //     }\n    //     return React.createElement(\n    //         component,\n    //         { field, form: formex, ...props, className },\n    //         children\n    //     );\n    // }\n\n    // default to input here so we can check for both `as` and `children` above\n    const asElement = is || \"input\";\n\n    if (typeof asElement === \"string\") {\n        const { innerRef, ...rest } = props;\n        return React.createElement(\n            asElement,\n            { ref: innerRef, ...field, ...rest, className },\n            children\n        );\n    }\n\n    return React.createElement(asElement, { ...field, ...props, className }, children);\n}\n\nconst getFieldProps = (nameOrOptions: string | FieldConfig<any>, formex: FormexController<any>): FieldInputProps<any> => {\n    const isAnObject = isObject(nameOrOptions);\n    const name = isAnObject\n        ? (nameOrOptions as FieldConfig<any>).name\n        : nameOrOptions;\n    const valueState = getIn(formex.values, name);\n\n    const field: FieldInputProps<any> = {\n        name,\n        value: valueState,\n        onChange: formex.handleChange,\n        onBlur: formex.handleBlur,\n    };\n    if (isAnObject) {\n        const {\n            type,\n            value: valueProp, // value is special for checkboxes\n            as: is,\n            multiple,\n        } = nameOrOptions as FieldConfig<any>;\n\n        if (type === \"checkbox\") {\n            if (valueProp === undefined) {\n                field.checked = !!valueState;\n            } else {\n                field.checked = !!(\n                    Array.isArray(valueState) && ~valueState.indexOf(valueProp)\n                );\n                field.value = valueProp;\n            }\n        } else if (type === \"radio\") {\n            field.checked = valueState === valueProp;\n            field.value = valueProp;\n        } else if (is === \"select\" && multiple) {\n            field.value = field.value || [];\n            field.multiple = true;\n        }\n    }\n    return field;\n};\n","import React, { FormEvent, useEffect, useState } from \"react\";\nimport { getIn, setIn } from \"./utils\";\nimport equal from \"react-fast-compare\"\n\nimport { FormexController, FormexResetProps } from \"./types\";\n\nexport function useCreateFormex<T extends object>({ initialValues, initialErrors, validation, validateOnChange = false, onSubmit, validateOnInitialRender = false }: {\n    initialValues: T,\n    initialErrors?: Record<string, string>,\n    validateOnChange?: boolean,\n    validateOnInitialRender?: boolean,\n    validation?: (values: T) => Record<string, string> | Promise<Record<string, string>> | undefined | void,\n    onSubmit?: (values: T, controller: FormexController<T>) => void | Promise<void>\n}): FormexController<T> {\n\n    const initialValuesRef = React.useRef<T>(initialValues);\n    const valuesRef = React.useRef<T>(initialValues);\n\n    const [values, setValuesInner] = useState<T>(initialValues);\n    const [touchedState, setTouchedState] = useState<Record<string, boolean>>({});\n    const [errors, setErrors] = useState<Record<string, string>>(initialErrors ?? {});\n    const [dirty, setDirty] = useState(false);\n    const [submitCount, setSubmitCount] = useState(0);\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const [isValidating, setIsValidating] = useState(false);\n\n    useEffect(() => {\n        if (validateOnInitialRender) {\n            validate();\n        }\n    }, []);\n\n    const setValues = (newValues: T) => {\n        valuesRef.current = newValues;\n        setValuesInner(newValues);\n        setDirty(equal(initialValuesRef.current, newValues));\n    }\n\n    const validate = async () => {\n        setIsValidating(true);\n        const values = valuesRef.current;\n        const validationErrors = await validation?.(values);\n        setErrors(validationErrors ?? {});\n        setIsValidating(false);\n        return validationErrors;\n    }\n\n    const setFieldValue = (key: string, value: any, shouldValidate?: boolean) => {\n        const newValues = setIn(valuesRef.current, key, value);\n        valuesRef.current = newValues;\n        setValuesInner(newValues);\n        if (!equal(getIn(initialValuesRef.current, key), value)) {\n            setDirty(true);\n        }\n        if (shouldValidate) {\n            validate();\n        }\n    }\n\n    const setFieldError = (key: string, error: string | undefined) => {\n        const newErrors = { ...errors };\n        if (error) {\n            newErrors[key] = error;\n        } else {\n            delete newErrors[key];\n        }\n        setErrors(newErrors);\n    }\n\n    const setFieldTouched = (key: string, touched: boolean, shouldValidate?: boolean | undefined) => {\n        const newTouched = { ...touchedState };\n        newTouched[key] = touched;\n        setTouchedState(newTouched);\n        if (shouldValidate) {\n            validate();\n        }\n    }\n\n    const handleChange = (event: React.SyntheticEvent) => {\n        const target = event.target as HTMLInputElement;\n        const value = target.type === \"checkbox\" ? target.checked : target.value;\n        const name = target.name;\n        setFieldValue(name, value, validateOnChange);\n        setFieldTouched(name, true);\n    }\n\n    const handleBlur = (event: React.FocusEvent) => {\n        const target = event.target as HTMLInputElement;\n        const name = target.name;\n        setFieldTouched(name, true);\n    }\n\n    const submit = async (e?: FormEvent<HTMLFormElement>) => {\n        e?.preventDefault();\n        e?.stopPropagation();\n        setIsSubmitting(true);\n        setSubmitCount(submitCount + 1);\n        const validationErrors = await validation?.(valuesRef.current);\n        if (validationErrors && Object.keys(validationErrors).length > 0) {\n            setErrors(validationErrors);\n        } else {\n            setErrors({});\n            await onSubmit?.(valuesRef.current, controllerRef.current);\n        }\n        setIsSubmitting(false);\n    }\n\n    const resetForm = (props?: FormexResetProps<T>) => {\n        const {\n            submitCount: submitCountProp,\n            values: valuesProp,\n            errors: errorsProp,\n            touched: touchedProp\n        } = props ?? {};\n        initialValuesRef.current = valuesProp ?? initialValues;\n        valuesRef.current = valuesProp ?? initialValues;\n        setValuesInner(valuesProp ?? initialValues);\n        setErrors(errorsProp ?? {});\n        setTouchedState(touchedProp ?? {});\n        setDirty(false);\n        setSubmitCount(submitCountProp ?? 0);\n    }\n\n    const controller: FormexController<T> = {\n        values,\n        initialValues: initialValuesRef.current,\n        handleChange,\n        isSubmitting,\n        setSubmitting: setIsSubmitting,\n        setValues,\n        setFieldValue,\n        errors,\n        setFieldError,\n        touched: touchedState,\n        setFieldTouched,\n        dirty,\n        setDirty,\n        handleSubmit: submit,\n        submitCount,\n        setSubmitCount,\n        handleBlur,\n        validate,\n        isValidating,\n        resetForm\n    };\n\n    const controllerRef = React.useRef<FormexController<T>>(controller);\n    controllerRef.current = controller;\n    return controller\n}\n"],"names":["FormexContext","React","useFormex","useContext","Formex","isEmptyArray","value","isFunction","obj","isObject","isInteger","isString","isNaN","isEmptyChildren","children","isPromise","isInputEvent","getActiveElement","doc","getIn","key","def","p","path","toPath","setIn","res","clone","resVal","i","pathArray","currentPath","currentObj","nextPath","setNestedObjectValues","object","visited","response","k","val","Field","validate","name","is","className","props","formex","field","getFieldProps","asElement","innerRef","rest","nameOrOptions","isAnObject","valueState","type","valueProp","multiple","useCreateFormex","initialValues","initialErrors","validation","validateOnChange","onSubmit","validateOnInitialRender","initialValuesRef","valuesRef","values","setValuesInner","useState","touchedState","setTouchedState","errors","setErrors","dirty","setDirty","submitCount","setSubmitCount","isSubmitting","setIsSubmitting","isValidating","setIsValidating","useEffect","setValues","newValues","equal","validationErrors","setFieldValue","shouldValidate","setFieldError","error","newErrors","setFieldTouched","touched","newTouched","handleChange","event","target","handleBlur","submit","e","controllerRef","resetForm","submitCountProp","valuesProp","errorsProp","touchedProp","controller"],"mappings":"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"}