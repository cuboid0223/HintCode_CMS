{"version":3,"file":"index.es.js","sources":["../src/contexts/SnackbarProvider.tsx","../src/contexts/ModeController.tsx","../src/contexts/AuthControllerContext.tsx","../src/util/navigation_utils.ts","../src/types/entities.ts","../src/util/objects.ts","../src/util/common.tsx","../src/util/entities.ts","../src/util/enums.ts","../src/util/resolutions.ts","../src/util/navigation_from_path.ts","../src/util/collections.ts","../src/util/strings.ts","../src/util/dates.ts","../src/util/paths.ts","../src/util/regexp.ts","../src/util/useDebouncedCallback.ts","../src/util/property_utils.tsx","../src/util/permissions.ts","../src/util/icon_synonyms.ts","../src/util/icon_list.ts","../src/util/hash.ts","../src/util/icons.tsx","../src/util/plurals.ts","../src/util/references.ts","../src/util/flatten_object.ts","../src/util/make_properties_editable.ts","../src/util/join_collections.ts","../src/util/builders.ts","../src/util/useTraceUpdate.tsx","../src/internal/common.tsx","../src/contexts/DataSourceContext.tsx","../src/hooks/data/useDataSource.tsx","../src/contexts/NavigationContext.tsx","../src/hooks/useNavigationController.tsx","../src/hooks/useAuthController.tsx","../src/contexts/SideDialogsControllerContext.tsx","../src/hooks/useSideDialogsController.tsx","../src/contexts/SideEntityControllerContext.tsx","../src/hooks/useSideEntityController.tsx","../src/contexts/StorageSourceContext.tsx","../src/hooks/useStorageSource.tsx","../src/hooks/useSnackbarController.tsx","../src/contexts/UserConfigurationPersistenceContext.tsx","../src/hooks/useUserConfigurationPersistence.tsx","../src/contexts/DialogsProvider.tsx","../src/hooks/useDialogsController.tsx","../src/contexts/CustomizationControllerContext.tsx","../src/hooks/useCustomizationController.tsx","../src/contexts/AnalyticsContext.tsx","../src/hooks/useAnalyticsController.tsx","../src/hooks/useFireCMSContext.tsx","../src/hooks/data/useCollectionFetch.tsx","../src/hooks/data/useEntityFetch.tsx","../src/hooks/data/save.ts","../src/hooks/data/delete.ts","../src/hooks/useResolvedNavigationFrom.tsx","../src/hooks/useModeController.tsx","../src/hooks/useClipboard.tsx","../src/hooks/useLargeLayout.tsx","../src/components/ErrorTooltip.tsx","../src/components/ErrorView.tsx","../src/preview/components/EmptyValue.tsx","../src/preview/util.ts","../src/preview/components/ImagePreview.tsx","../src/preview/components/UrlComponentPreview.tsx","../src/preview/property_previews/SkeletonPropertyComponent.tsx","../src/preview/components/StorageThumbnail.tsx","../src/preview/components/EnumValuesChip.tsx","../src/preview/property_previews/StringPropertyPreview.tsx","../src/preview/property_previews/ArrayPropertyPreview.tsx","../src/components/EntityPreview.tsx","../src/preview/components/ReferencePreview.tsx","../src/preview/property_previews/ArrayOfReferencesPreview.tsx","../src/preview/property_previews/ArrayOfStorageComponentsPreview.tsx","../src/preview/components/ArrayEnumPreview.tsx","../src/preview/property_previews/ArrayPropertyEnumPreview.tsx","../src/preview/property_previews/ArrayOfStringsPreview.tsx","../src/preview/property_previews/ArrayOneOfPreview.tsx","../src/preview/property_previews/MapPropertyPreview.tsx","../src/preview/components/DatePreview.tsx","../src/preview/components/BooleanPreview.tsx","../src/preview/property_previews/NumberPropertyPreview.tsx","../src/preview/PropertyPreview.tsx","../src/preview/property_previews/ArrayOfMapsPreview.tsx","../src/preview/components/AsyncPreviewComponent.tsx","../src/components/EntityView.tsx","../src/components/VirtualTable/fields/VirtualTableInput.tsx","../src/components/VirtualTable/fields/VirtualTableSelect.tsx","../src/components/VirtualTable/fields/VirtualTableNumberInput.tsx","../src/components/VirtualTable/fields/VirtualTableSwitch.tsx","../src/components/VirtualTable/fields/VirtualTableDateField.tsx","../src/components/ErrorBoundary.tsx","../src/util/storage.ts","../src/util/useStorageUploadController.tsx","../src/form/components/StorageUploadProgress.tsx","../src/components/EntityCollectionTable/internal/EntityTableCellActions.tsx","../src/components/EntityCollectionTable/fields/TableStorageUpload.tsx","../src/components/EntityCollectionTable/fields/TableReferenceField.tsx","../src/form/validation.ts","../src/components/VirtualTable/common.tsx","../src/components/EntityCollectionTable/internal/EntityTableCell.tsx","../src/components/SelectableTable/SelectableTableContext.tsx","../src/form/useClearRestoreValue.tsx","../src/components/EntityCollectionTable/PropertyTableCell.tsx","../src/components/EntityCollectionTable/EntityCollectionRowActions.tsx","../src/components/EntityCollectionTable/internal/CollectionTableToolbar.tsx","../src/components/EntityCollectionTable/internal/common.tsx","../src/components/common/useColumnsIds.tsx","../src/components/EntityCollectionTable/column_utils.tsx","../src/components/CircularProgressCenter.tsx","../src/components/VirtualTable/VirtualTableHeader.tsx","../src/components/VirtualTable/VirtualTableHeaderRow.tsx","../src/components/VirtualTable/VirtualTableRow.tsx","../src/components/VirtualTable/VirtualTableCell.tsx","../src/components/VirtualTable/VirtualTable.tsx","../src/components/SelectableTable/filters/ReferenceFilterField.tsx","../src/components/SelectableTable/filters/StringNumberFilterField.tsx","../src/components/SelectableTable/filters/BooleanFilterField.tsx","../src/components/SelectableTable/filters/DateTimeFilterField.tsx","../src/components/SelectableTable/SelectableTable.tsx","../src/components/EntityCollectionTable/EntityCollectionTable.tsx","../src/hooks/data/useDataOrder.ts","../src/components/common/useDebouncedData.ts","../src/components/common/useDataSourceEntityCollectionTableController.tsx","../src/components/EntityCollectionView/useSelectionController.tsx","../src/components/common/useTableSearchHelper.ts","../src/components/ReferenceTable/ReferenceSelectionTable.tsx","../src/util/arrays.ts","../src/components/HomePage/NavigationGroup.tsx","../src/components/HomePage/NavigationCard.tsx","../src/components/HomePage/SmallNavigationCard.tsx","../src/components/HomePage/NavigationCardBinding.tsx","../src/components/HomePage/FavouritesView.tsx","../src/internal/useRestoreScroll.tsx","../src/components/HomePage/DefaultHomePage.tsx","../src/components/EntityCollectionView/EntityCollectionViewActions.tsx","../src/components/EntityCollectionTable/internal/popup_field/useDraggable.tsx","../src/components/EntityCollectionTable/internal/popup_field/useWindowSize.tsx","../src/components/EntityCollectionTable/internal/popup_field/ElementResizeListener.tsx","../src/form/components/FormikArrayContainer.tsx","../src/form/components/FieldHelperText.tsx","../src/form/components/LabelWithIcon.tsx","../src/form/field_bindings/SelectFieldBinding.tsx","../src/form/field_bindings/MultiSelectBinding.tsx","../src/form/field_bindings/ArrayOfReferencesFieldBinding.tsx","../src/form/components/StorageItemPreview.tsx","../src/form/field_bindings/StorageUploadFieldBinding.tsx","../src/form/field_bindings/TextFieldBinding.tsx","../src/form/field_bindings/SwitchFieldBinding.tsx","../src/form/field_bindings/DateTimeFieldBinding.tsx","../src/form/field_bindings/ReadOnlyFieldBinding.tsx","../src/form/field_bindings/ReferenceFieldBinding.tsx","../src/form/PropertyFieldBinding.tsx","../src/form/field_bindings/MapFieldBinding.tsx","../src/form/field_bindings/KeyValueFieldBinding.tsx","../src/form/field_bindings/RepeatFieldBinding.tsx","../src/form/field_bindings/BlockFieldBinding.tsx","../src/form/field_bindings/MarkdownFieldBinding.tsx","../src/form/field_bindings/ArrayCustomShapedFieldBinding.tsx","../src/form/components/ErrorFocus.tsx","../src/form/components/CustomIdField.tsx","../src/components/DeleteEntityDialog.tsx","../src/components/EntityCollectionTable/internal/default_entity_actions.tsx","../src/components/PropertyIdCopyTooltipContent.tsx","../src/form/EntityForm.tsx","../src/components/EntityCollectionTable/internal/popup_field/PopupFormField.tsx","../src/components/ClearFilterSortButton.tsx","../src/components/EntityCollectionView/EntityCollectionViewStartActions.tsx","../src/components/EntityCollectionView/EntityCollectionView.tsx","../src/components/PropertyConfigBadge.tsx","../src/components/NotFoundPage.tsx","../src/components/DeleteConfirmationDialog.tsx","../src/components/FireCMSLogo.tsx","../src/components/FireCMSAppBar.tsx","../src/components/ArrayContainer.tsx","../src/components/ReferenceWidget.tsx","../src/components/SearchIconsView.tsx","../src/components/FieldCaption.tsx","../src/hooks/useReferenceDialog.tsx","../src/hooks/useBrowserTitleAndIcon.tsx","../src/util/parent_references_from_path.ts","../src/hooks/useBuildNavigationController.tsx","../src/hooks/useBuildLocalConfigurationPersistence.tsx","../src/hooks/useBuildModeController.tsx","../src/hooks/useValidateAuthenticator.tsx","../src/core/EntityEditView.tsx","../src/internal/useUnsavedChangesDialog.tsx","../src/core/SideDialogs.tsx","../src/core/EntitySidePanel.tsx","../src/internal/useBuildSideEntityController.tsx","../src/internal/useBuildSideDialogsController.tsx","../src/internal/useBuildDataSource.ts","../src/hooks/useProjectLog.tsx","../src/core/FireCMS.tsx","../src/core/Drawer.tsx","../src/core/Scaffold.tsx","../src/core/field_configs.tsx","../src/core/NavigationRoutes.tsx"],"sourcesContent":["import React, { PropsWithChildren } from \"react\";\nimport { SnackbarProvider as NotistackSnackbarProvider } from \"notistack\";\n\nexport const SnackbarProvider: React.FC<PropsWithChildren<{}>> = ({ children }) => {\n\n    return (\n        <NotistackSnackbarProvider maxSnack={3}\n                                   autoHideDuration={3500}>\n            {children}\n        </NotistackSnackbarProvider>\n    );\n};\n","import React from \"react\";\nimport { ModeController } from \"../hooks\";\n\nconst DEFAULT_MODE_STATE: ModeController = {\n    mode: \"light\",\n    setMode: (mode: \"light\" | \"dark\") => {\n    },\n    toggleMode: () => {\n    }\n};\nexport const ModeControllerContext = React.createContext<ModeController>(DEFAULT_MODE_STATE);\n\nexport const ModeControllerProvider = ModeControllerContext.Provider;\n","import React from \"react\";\nimport { AuthController } from \"../types\";\n\nexport const AuthControllerContext = React.createContext<AuthController<any, any>>({} as AuthController<any, any>);\n","import { EntityCollection } from \"../types\";\n\nexport function removeInitialAndTrailingSlashes(s: string): string {\n    return removeInitialSlash(removeTrailingSlash(s));\n}\n\nexport function removeInitialSlash(s: string) {\n    if (s.startsWith(\"/\"))\n        return s.slice(1);\n    else return s;\n}\n\nexport function removeTrailingSlash(s: string) {\n    if (s.endsWith(\"/\"))\n        return s.slice(0, -1);\n    else return s;\n}\n\nexport function addInitialSlash(s: string) {\n    if (s.startsWith(\"/\"))\n        return s;\n    else return `/${s}`;\n}\n\nexport function getLastSegment(path: string) {\n    const cleanPath = removeInitialAndTrailingSlashes(path);\n    if (cleanPath.includes(\"/\")) {\n        const segments = cleanPath.split(\"/\");\n        return segments[segments.length - 1];\n    }\n    return cleanPath;\n}\n\nexport function resolveCollectionPathIds(path: string, allCollections: EntityCollection[]): string {\n\n    const cleanPath = removeInitialAndTrailingSlashes(path);\n    const subpaths = cleanPath.split(\"/\");\n    if (subpaths.length % 2 === 0) {\n        throw Error(`resolveCollectionPathAliases: Collection paths must have an odd number of segments: ${path}`);\n    }\n\n    const aliasedCollection = allCollections.find((col) => col.id === subpaths[0]);\n    let resolvedAliased;\n    if (aliasedCollection) {\n        resolvedAliased = aliasedCollection.path;\n    }\n\n    if (subpaths.length > 1) {\n        const segmentCollection = getCollectionByPathOrId(resolvedAliased ?? subpaths[0], allCollections);\n        if (!segmentCollection?.subcollections) {\n            return cleanPath;\n        }\n        const restOfThePath = cleanPath.split(\"/\").slice(2).join(\"/\");\n        return (resolvedAliased ?? subpaths[0]) + \"/\" + subpaths[1] + \"/\" + resolveCollectionPathIds(restOfThePath, segmentCollection.subcollections);\n    } else {\n        return resolvedAliased ?? cleanPath;\n    }\n}\n\n/**\n * Find the corresponding view at any depth for a given path.\n * Note that path or segments of the paths can be collection aliases.\n * @param pathOrId\n * @param collections\n */\nexport function getCollectionByPathOrId(pathOrId: string, collections: EntityCollection[]): EntityCollection | undefined {\n\n    const subpaths = removeInitialAndTrailingSlashes(pathOrId).split(\"/\");\n    if (subpaths.length % 2 === 0) {\n        throw Error(`getCollectionByPathOrId: Collection paths must have an odd number of segments: ${pathOrId}`);\n    }\n\n    const subpathCombinations = getCollectionPathsCombinations(subpaths);\n    let result: EntityCollection | undefined;\n    for (let i = 0; i < subpathCombinations.length; i++) {\n        const subpathCombination = subpathCombinations[i];\n        const navigationEntry = collections && collections\n            .sort((a, b) => (a.id ?? \"\").localeCompare(b.id ?? \"\"))\n            .find((entry) => entry.id === subpathCombination || entry.path === subpathCombination);\n\n        if (navigationEntry) {\n\n            if (subpathCombination === pathOrId) {\n                result = navigationEntry;\n            } else if (navigationEntry.subcollections) {\n                const newPath = pathOrId.replace(subpathCombination, \"\").split(\"/\").slice(2).join(\"/\");\n                if (newPath.length > 0)\n                    result = getCollectionByPathOrId(newPath, navigationEntry.subcollections);\n            }\n        }\n        if (result) break;\n    }\n    return result;\n}\n\n/**\n * Get the subcollection combinations from a path:\n * \"sites/es/locales\" => [\"sites/es/locales\", \"sites\"]\n * @param subpaths\n */\nexport function getCollectionPathsCombinations(subpaths: string[]): string[] {\n    const entries = subpaths.length > 0 && subpaths.length % 2 === 0 ? subpaths.splice(0, subpaths.length - 1) : subpaths;\n\n    const length = entries.length;\n    const result: string[] = [];\n    for (let i = length; i > 0; i = i - 2) {\n        result.push(entries.slice(0, i).join(\"/\"));\n    }\n    return result;\n\n}\n","/**\n * New or existing status\n * @group Models\n */\nexport type EntityStatus = \"new\" | \"existing\" | \"copy\";\n\n/**\n * Representation of an entity fetched from the datasource\n * @group Models\n */\nexport interface Entity<M extends object> {\n\n    /**\n     * ID of the entity\n     */\n    id: string;\n\n    /**\n     * A string representing the path of the referenced document (relative\n     * to the root of the database).\n     */\n    path: string;\n\n    /**\n     * Current values\n     */\n    values: EntityValues<M>;\n}\n\n/**\n * This type represents a record of key value pairs as described in an\n * entity collection.\n * @group Models\n */\nexport type EntityValues<M extends object> = M;\n\n/**\n * Class used to create a reference to an entity in a different path\n */\nexport class EntityReference {\n    /**\n     * ID of the entity\n     */\n    readonly id: string;\n    /**\n     * A string representing the path of the referenced document (relative\n     * to the root of the database).\n     */\n    readonly path: string;\n\n    constructor(id: string, path: string) {\n        this.id = id;\n        this.path = path;\n    }\n\n    get pathWithId() {\n        return `${this.path}/${this.id}`;\n    }\n\n    isEntityReference() {\n        return true;\n    }\n}\n\nexport class GeoPoint {\n\n    /**\n     * The latitude of this GeoPoint instance.\n     */\n    readonly latitude: number;\n    /**\n     * The longitude of this GeoPoint instance.\n     */\n    readonly longitude: number;\n\n    constructor(latitude: number, longitude: number) {\n        this.latitude = latitude;\n        this.longitude = longitude;\n    }\n}\n\nexport class Vector {\n    readonly value: number[];\n\n    constructor(value: number[]) {\n        this.value = value;\n    }\n}\n","import hash from \"object-hash\";\nimport { GeoPoint } from \"../types\";\n\nexport const pick: <T>(obj: T, ...args: any[]) => T = (obj: any, ...args: any[]) => ({\n    ...args.reduce((res, key) => ({\n        ...res,\n        [key]: obj[key]\n    }), {})\n});\n\nexport function isObject(item: any) {\n    return item && typeof item === \"object\" && !Array.isArray(item);\n}\n\nexport function mergeDeep<T extends object>(target: T, source: any): T {\n    const targetIsObject = isObject(target);\n    const output: T = targetIsObject ? { ...target } : target;\n    if (targetIsObject && isObject(source)) {\n        Object.keys(source).forEach(key => {\n            if (isObject(source[key])) {\n                if (!(key in target))\n                    Object.assign(output, { [key]: source[key] });\n                else\n                    (output as any)[key] = mergeDeep((target as any)[key], source[key]);\n            } else {\n                Object.assign(output, { [key]: source[key] });\n            }\n        });\n    }\n    return output;\n}\n\n// export function getValueInPath(o: object | undefined, path: string): any {\n//     if (!o) return undefined;\n//     if (typeof o === \"object\") {\n//         if (path in o) {\n//             return (o as any)[path];\n//         }\n//         if (path.includes(\".\")) {\n//             const pathSegments = path.split(\".\");\n//             return getValueInPath((o as any)[pathSegments[0]], pathSegments.slice(1).join(\".\"))\n//         }\n//     }\n//     return undefined;\n// }\n\nexport function getValueInPath(o: object | undefined, path: string): any {\n    if (!o) return undefined;\n    if (typeof o === \"object\") {\n        if (path in o) {\n            return (o as any)[path];\n        }\n        if (path.includes(\".\") || path.includes(\"[\")) {\n            let pathSegments = path.split(/[.[]/);\n            if (path.includes(\"[\")) {\n                pathSegments = pathSegments.map(segment => segment.replace(\"]\", \"\"));\n            }\n            const firstSegment = pathSegments[0];\n            const isArrayAndIndexExists = Array.isArray((o as any)[firstSegment]) && !isNaN(parseInt(pathSegments[1]));\n            const nextObject = isArrayAndIndexExists\n                ? (o as any)[firstSegment][parseInt(pathSegments[1])]\n                : (o as any)[firstSegment];\n\n            const nextPath = pathSegments.slice(isArrayAndIndexExists ? 2 : 1).join(\".\");\n            if (nextPath === \"\")\n                return nextObject;\n            return getValueInPath(nextObject, nextPath)\n        }\n    }\n    return undefined;\n}\n\nexport function removeInPath(o: object, path: string): object | undefined {\n    let currentObject = { ...o };\n    const parts = path.split(\".\");\n    const last = parts.pop();\n    for (const part of parts) {\n        currentObject = (currentObject as any)[part]\n    }\n    if (last)\n        delete (currentObject as any)[last];\n    return currentObject;\n}\n\nexport function removeFunctions(o: object | undefined): any {\n    if (o === undefined) return undefined;\n    if (o === null) return null;\n    if (typeof o === \"object\") {\n        return Object.entries(o)\n            .filter(([_, value]) => typeof value !== \"function\")\n            .map(([key, value]) => {\n                if (Array.isArray(value)) {\n                    return { [key]: value.map(v => removeFunctions(v)) };\n                } else if (typeof value === \"object\") {\n                    return { [key]: removeFunctions(value) };\n                } else return { [key]: value };\n            })\n            .reduce((a, b) => ({ ...a, ...b }), {});\n    }\n    return o;\n}\n\nexport function getHashValue<T>(v: T) {\n    if (!v) return null;\n    if (typeof v === \"object\") {\n        if (\"id\" in v)\n            return (v as any).id;\n        else if (v instanceof Date)\n            return v.toLocaleString();\n        else if (v instanceof GeoPoint)\n            return hash(v as Record<string, unknown>);\n    }\n    return hash(v, { ignoreUnknown: true });\n}\n\nexport function removeUndefined(value: any, removeEmptyStrings?: boolean): any {\n    if (typeof value === \"function\") {\n        return value;\n    }\n    if (Array.isArray(value)) {\n        return value.map((v: any) => removeUndefined(v, removeEmptyStrings));\n    }\n    if (typeof value === \"object\") {\n        const res: object = {};\n        if (value === null)\n            return value;\n        Object.keys(value).forEach((key) => {\n            if (!isEmptyObject(value)) {\n                const childRes = removeUndefined(value[key], removeEmptyStrings);\n                const isString = typeof childRes === \"string\";\n                const shouldKeepIfString = !removeEmptyStrings || (removeEmptyStrings && !isString) || (removeEmptyStrings && isString && childRes !== \"\");\n                if (childRes !== undefined && !isEmptyObject(childRes) && shouldKeepIfString)\n                    (res as any)[key] = childRes;\n            }\n        });\n        return res;\n    }\n    return value;\n}\n\nexport function isEmptyObject(obj: object) {\n    return obj &&\n        Object.getPrototypeOf(obj) === Object.prototype &&\n        Object.keys(obj).length === 0\n}\n\nexport function removePropsIfExisting(source: any, comparison: any) {\n    const isObject = (val: any) => typeof val === \"object\" && val !== null;\n    const isArray = (val: any) => Array.isArray(val);\n\n    if (!isObject(source) || !isObject(comparison)) {\n        return source;\n    }\n\n    const res = isArray(source) ? [...source] : { ...source };\n\n    Object.keys(comparison).forEach(key => {\n        if (key in res) {\n            if (isObject(res[key]) && isObject(comparison[key])) {\n                res[key] = removePropsIfExisting(res[key], comparison[key]);\n            } else if (res[key] === comparison[key]) {\n                isArray(res) ? res.splice(key, 1) : delete res[key];\n            }\n        }\n    });\n\n    return res;\n}\n","export const DEFAULT_ONE_OF_TYPE = \"type\"\nexport const DEFAULT_ONE_OF_VALUE = \"value\"\n","import {\n    CMSType,\n    DataType,\n    Entity,\n    EntityReference,\n    EntityStatus,\n    EntityValues,\n    Properties,\n    PropertiesOrBuilders,\n    Property,\n    PropertyBuilder,\n    PropertyOrBuilder,\n    ResolvedProperties,\n    ResolvedProperty\n} from \"../types\";\nimport { DEFAULT_ONE_OF_TYPE, DEFAULT_ONE_OF_VALUE } from \"./common\";\n\nexport function isReadOnly(property: Property | ResolvedProperty): boolean {\n    if (property.readOnly)\n        return true;\n    if (property.dataType === \"date\") {\n        if (property.autoValue)\n            return true;\n    }\n    if (property.dataType === \"reference\") {\n        return !property.path;\n    }\n    return false;\n}\n\nexport function isHidden(property: Property | ResolvedProperty): boolean {\n    return typeof property.disabled === \"object\" && Boolean(property.disabled.hidden);\n}\n\nexport function isPropertyBuilder<T extends CMSType, M extends Record<string, any>>(propertyOrBuilder?: PropertyOrBuilder<T, M> | Property<T> | ResolvedProperty<T>): propertyOrBuilder is PropertyBuilder<T, M> {\n    return typeof propertyOrBuilder === \"function\";\n}\n\nexport function getDefaultValuesFor<M extends Record<string, any>>(properties: PropertiesOrBuilders<M> | ResolvedProperties<M>): Partial<EntityValues<M>> {\n    if (!properties) return {};\n    return Object.entries(properties)\n        .map(([key, property]) => {\n            const value = getDefaultValueFor(property as PropertyOrBuilder);\n            return value === undefined ? {} : { [key]: value };\n        })\n        .reduce((a, b) => ({ ...a, ...b }), {}) as EntityValues<M>;\n}\n\nexport function getDefaultValueFor(property: PropertyOrBuilder) {\n    if (isPropertyBuilder(property)) return undefined;\n    if (property.dataType === \"map\" && property.properties) {\n        const defaultValuesFor = getDefaultValuesFor(property.properties as Properties);\n        if (Object.keys(defaultValuesFor).length === 0) return undefined;\n        return defaultValuesFor;\n    } else if (property.defaultValue) {\n        return property.defaultValue;\n    } else {\n        return getDefaultValueForDataType(property.dataType);\n    }\n}\n\nexport function getDefaultValueForDataType(dataType: DataType) {\n    if (dataType === \"string\") {\n        return null;\n    } else if (dataType === \"number\") {\n        return null;\n    } else if (dataType === \"boolean\") {\n        return false;\n    } else if (dataType === \"date\") {\n        return null;\n    } else if (dataType === \"array\") {\n        return [];\n    } else if (dataType === \"map\") {\n        return {};\n    } else {\n        return null;\n    }\n}\n\n/**\n * Update the automatic values in an entity before save\n * @group Datasource\n */\nexport function updateDateAutoValues<M extends Record<string, any>>({\n                                                                        inputValues,\n                                                                        properties,\n                                                                        status,\n                                                                        timestampNowValue,\n                                                                        setDateToMidnight\n                                                                    }:\n                                                                        {\n                                                                            inputValues: Partial<EntityValues<M>>,\n                                                                            properties: ResolvedProperties<M>,\n                                                                            status: EntityStatus,\n                                                                            timestampNowValue: any,\n                                                                            setDateToMidnight: (input?: any) => any | undefined\n                                                                        }): EntityValues<M> {\n    return traverseValuesProperties(\n        inputValues,\n        properties,\n        (inputValue, property) => {\n            if (property.dataType === \"date\") {\n                let resultDate;\n                if (status === \"existing\" && property.autoValue === \"on_update\") {\n                    resultDate = timestampNowValue;\n                } else if ((status === \"new\" || status === \"copy\") &&\n                    (property.autoValue === \"on_update\" || property.autoValue === \"on_create\")) {\n                    resultDate = timestampNowValue;\n                } else {\n                    resultDate = inputValue;\n                }\n                if (property.mode === \"date\")\n                    resultDate = setDateToMidnight(resultDate);\n                return resultDate;\n            } else {\n                return inputValue;\n            }\n        }\n    ) ?? {} as M;\n}\n\n/**\n * Add missing required fields, expected in the collection, to the values of an entity\n * @param values\n * @param properties\n * @group Datasource\n */\nexport function sanitizeData<M extends Record<string, any>>\n(\n    values: EntityValues<M>,\n    properties: ResolvedProperties<M>\n) {\n    const result: any = values;\n    Object.entries(properties)\n        .forEach(([key, property]) => {\n            if (values && values[key] !== undefined) result[key] = values[key];\n            else if ((property as Property).validation?.required) result[key] = null;\n        });\n    return result;\n}\n\nexport function getReferenceFrom<M extends Record<string, any>>(entity: Entity<M>): EntityReference {\n    return new EntityReference(entity.id, entity.path);\n}\n\nexport function traverseValuesProperties<M extends Record<string, any>>(\n    inputValues: Partial<EntityValues<M>>,\n    properties: ResolvedProperties<M>,\n    operation: (value: any, property: Property) => any\n): EntityValues<M> | undefined {\n    const updatedValues = Object.entries(properties)\n        .map(([key, property]) => {\n            const inputValue = inputValues && (inputValues)[key];\n            const updatedValue = traverseValueProperty(inputValue, property as Property, operation);\n            if (updatedValue === undefined) return undefined;\n            return ({ [key]: updatedValue });\n        })\n        .reduce((a, b) => ({ ...a, ...b }), {}) as EntityValues<M>;\n    const result = { ...inputValues, ...updatedValues };\n    if (Object.keys(result).length === 0) return undefined;\n    return result;\n}\n\nexport function traverseValueProperty(inputValue: any,\n                                      property: Property,\n                                      operation: (value: any, property: Property) => any): any {\n\n    let value;\n    if (property.dataType === \"map\" && property.properties) {\n        value = traverseValuesProperties(inputValue, property.properties as ResolvedProperties, operation);\n    } else if (property.dataType === \"array\") {\n        if (property.of && Array.isArray(inputValue)) {\n            value = inputValue.map((e) => traverseValueProperty(e, property.of as Property, operation));\n        } else if (property.oneOf && Array.isArray(inputValue)) {\n            const typeField = property.oneOf?.typeField ?? DEFAULT_ONE_OF_TYPE;\n            const valueField = property.oneOf?.valueField ?? DEFAULT_ONE_OF_VALUE;\n            value = inputValue.map((e) => {\n                if (e === null) return null;\n                if (typeof e !== \"object\") return e;\n                const type = e[typeField];\n                const childProperty = property.oneOf?.properties[type];\n                if (!type || !childProperty) return e;\n                return {\n                    [typeField]: type,\n                    [valueField]: traverseValueProperty(e[valueField], childProperty, operation)\n                };\n            });\n        } else {\n            value = inputValue;\n        }\n    } else {\n        value = operation(inputValue, property);\n    }\n\n    return value;\n}\n","import { EnumValueConfig, EnumValues } from \"../types\";\nimport { CHIP_COLORS, ChipColorScheme, getColorSchemeForSeed } from \"@firecms/ui\";\n\nexport function enumToObjectEntries(enumValues: EnumValues): EnumValueConfig[] {\n    if (Array.isArray(enumValues)) {\n        return enumValues;\n    } else {\n        return Object.entries(enumValues).map(([id, value]) => {\n            if (typeof value === \"string\") {\n                return {\n                    id,\n                    label: value\n                }\n            } else {\n                return {\n                    ...value,\n                    id\n                }\n            }\n        });\n    }\n}\n\nexport function getLabelOrConfigFrom(enumValues: EnumValueConfig[], key?: string | number): EnumValueConfig | undefined {\n    if (!key) return undefined;\n    return enumValues.find((entry) => String(entry.id) === String(key));\n}\n\nexport function getColorScheme(enumValues: EnumValueConfig[], key: string | number): ChipColorScheme | undefined {\n    const labelOrConfig = getLabelOrConfigFrom(enumValues, key);\n    if (!labelOrConfig?.color)\n        return getColorSchemeForSeed(key.toString());\n    if (typeof labelOrConfig === \"object\" && \"color\" in labelOrConfig) {\n        if (typeof labelOrConfig.color === \"string\")\n            return CHIP_COLORS[labelOrConfig.color];\n        if (typeof labelOrConfig.color === \"object\")\n            return labelOrConfig.color;\n    }\n    return undefined;\n}\n\nexport function isEnumValueDisabled(labelOrConfig?: string | EnumValueConfig) {\n    return typeof labelOrConfig === \"object\" && (labelOrConfig as EnumValueConfig).disabled;\n}\n\nexport function buildEnumLabel(\n    labelOrConfig?: string | EnumValueConfig\n): string | undefined {\n    if (labelOrConfig === undefined)\n        return undefined;\n    if (typeof labelOrConfig === \"object\") {\n        return labelOrConfig.label;\n    } else {\n        return labelOrConfig;\n    }\n}\n","import {\n    ArrayProperty,\n    CMSType,\n    EntityCollection,\n    EntityCustomView,\n    EntityValues,\n    EnumValueConfig,\n    EnumValues,\n    NumberProperty,\n    Properties,\n    PropertiesOrBuilders,\n    Property,\n    PropertyConfig,\n    PropertyOrBuilder,\n    ResolvedArrayProperty,\n    ResolvedEntityCollection,\n    ResolvedNumberProperty,\n    ResolvedProperties,\n    ResolvedProperty,\n    ResolvedStringProperty,\n    StringProperty,\n    UserConfigurationPersistence\n} from \"../types\";\nimport { getValueInPath, mergeDeep } from \"./objects\";\nimport { getDefaultValuesFor, isPropertyBuilder } from \"./entities\";\nimport { DEFAULT_ONE_OF_TYPE } from \"./common\";\nimport { getIn } from \"@firecms/formex\";\nimport { enumToObjectEntries } from \"./enums\";\nimport { isDefaultFieldConfigId } from \"../core\";\n\n// import util from \"util\";\n\nexport const resolveCollection = <M extends Record<string, any>, >\n({\n     collection,\n     path,\n     entityId,\n     values,\n     previousValues,\n     userConfigPersistence,\n     fields\n }: {\n    collection: EntityCollection<M> | ResolvedEntityCollection<M>;\n    path: string,\n    entityId?: string,\n    values?: Partial<EntityValues<M>>,\n    previousValues?: Partial<EntityValues<M>>,\n    userConfigPersistence?: UserConfigurationPersistence;\n    fields?: Record<string, PropertyConfig>;\n}): ResolvedEntityCollection<M> => {\n\n    const collectionOverride = userConfigPersistence?.getCollectionConfig<M>(path);\n    const storedProperties = getValueInPath(collectionOverride, \"properties\");\n\n    const defaultValues = getDefaultValuesFor(collection.properties);\n    const usedValues = values ?? defaultValues;\n    const usedPreviousValues = previousValues ?? values ?? defaultValues;\n\n    const resolvedProperties = Object.entries(collection.properties)\n        .map(([key, propertyOrBuilder]) => {\n            const propertyValue = usedValues ? getIn(usedValues, key) : undefined;\n            const childResolvedProperty = resolveProperty({\n                propertyKey: key,\n                propertyOrBuilder: propertyOrBuilder as PropertyOrBuilder | ResolvedProperty,\n                values: usedValues,\n                previousValues: usedPreviousValues,\n                path,\n                propertyValue,\n                entityId,\n                fields\n            });\n            if (!childResolvedProperty) return {};\n            return ({\n                [key]: childResolvedProperty\n            });\n        })\n        .filter((a) => a !== null)\n        .reduce((a, b) => ({ ...a, ...b }), {}) as ResolvedProperties<M>;\n\n    const properties: Properties = mergeDeep(resolvedProperties, storedProperties);\n    const cleanedProperties = Object.entries(properties)\n        .filter(([_, property]) => Boolean(property?.dataType))\n        .map(([id, property]) => ({ [id]: property }))\n        .reduce((a, b) => ({ ...a, ...b }), {});\n\n    return {\n        ...collection,\n        properties: cleanedProperties,\n        originalCollection: collection\n    } as ResolvedEntityCollection<M>;\n\n};\n\n/**\n * Resolve property builders, enums and arrays.\n * @param propertyOrBuilder\n * @param propertyValue\n * @param values\n */\nexport function resolveProperty<T extends CMSType = CMSType, M extends Record<string, any> = any>({\n                                                                                                      propertyOrBuilder,\n                                                                                                      propertyValue,\n                                                                                                      fromBuilder = false,\n                                                                                                      ...props\n                                                                                                  }: {\n    propertyKey?: string,\n    propertyOrBuilder: PropertyOrBuilder<T, M> | ResolvedProperty<T>,\n    propertyValue?: unknown,\n    values?: Partial<M>,\n    previousValues?: Partial<M>,\n    path?: string,\n    entityId?: string,\n    index?: number,\n    fromBuilder?: boolean;\n    fields?: Record<string, PropertyConfig<any>>;\n}): ResolvedProperty<T> | null {\n\n    if (typeof propertyOrBuilder === \"object\" && \"resolved\" in propertyOrBuilder) {\n        return propertyOrBuilder as ResolvedProperty<T>;\n    }\n\n    let resolvedProperty: ResolvedProperty<T> | null = null;\n\n    if (!propertyOrBuilder) {\n        return null;\n    } else if (isPropertyBuilder(propertyOrBuilder)) {\n        const path = props.path;\n        if (!path)\n            throw Error(\"Trying to resolve a property builder without specifying the entity path\");\n\n        const result: Property<T> | null = propertyOrBuilder({\n            ...props,\n            path,\n            propertyValue,\n            values: props.values ?? {},\n            previousValues: props.previousValues ?? props.values ?? {}\n        });\n\n        if (!result) {\n            return null;\n        }\n\n        resolvedProperty = resolveProperty({\n            ...props,\n            propertyValue,\n            propertyOrBuilder: result,\n            fromBuilder: true\n        });\n    } else {\n        const property = propertyOrBuilder as Property<T>;\n        if (property.dataType === \"map\" && property.properties) {\n            const properties = resolveProperties({\n                ...props,\n                properties: property.properties,\n                propertyValue\n            });\n            resolvedProperty = {\n                ...property,\n                resolved: true,\n                fromBuilder,\n                properties\n            } as ResolvedProperty<T>;\n        } else if (property.dataType === \"array\") {\n            resolvedProperty = resolveArrayProperty({\n                property,\n                propertyValue,\n                fromBuilder,\n                ...props\n            }) as ResolvedProperty<any>;\n        } else if ((property.dataType === \"string\" || property.dataType === \"number\") && property.enumValues) {\n            resolvedProperty = resolvePropertyEnum(property, fromBuilder) as ResolvedProperty<any>;\n        }\n    }\n\n    if (!resolvedProperty) {\n        resolvedProperty = {\n            ...propertyOrBuilder,\n            resolved: true,\n            fromBuilder\n        } as ResolvedProperty<T>;\n    }\n\n    if (resolvedProperty.propertyConfig && !isDefaultFieldConfigId(resolvedProperty.propertyConfig)) {\n        const cmsFields = props.fields;\n        if (!cmsFields) {\n            throw Error(`Trying to resolve a property with key ${resolvedProperty.propertyConfig} that inherits from a custom property config but no custom property configs were provided. Use the property \\`propertyConfigs\\` in your app config to provide them`);\n        }\n        const customField: PropertyConfig<any> = cmsFields[resolvedProperty.propertyConfig];\n        if (!customField) {\n            console.warn(`Trying to resolve a property with key ${resolvedProperty.propertyConfig} that inherits from a custom property config but no custom property config with that key was found. Check the \\`propertyConfigs\\` in your app config`)\n            console.warn(\"Available property configs\", cmsFields);\n            return null;\n        }\n        if (customField.property) {\n            const configPropertyOrBuilder = customField.property;\n            if (\"propertyConfig\" in configPropertyOrBuilder) {\n                delete configPropertyOrBuilder.propertyConfig;\n            }\n            const customFieldProperty = resolveProperty<any>({\n                propertyOrBuilder: configPropertyOrBuilder,\n                propertyValue,\n                ...props\n            });\n            if (customFieldProperty) {\n                resolvedProperty = mergeDeep(customFieldProperty, resolvedProperty);\n            }\n        }\n\n    }\n\n    return resolvedProperty\n        ? {\n            ...resolvedProperty,\n            resolved: true\n        }\n        : null;\n}\n\nexport function resolveArrayProperty<T extends any[], M>({\n                                                             propertyKey,\n                                                             property,\n                                                             propertyValue,\n                                                             ...props\n                                                         }: {\n    propertyKey?: string,\n    property: ArrayProperty<T> | ResolvedArrayProperty<T>,\n    propertyValue: any,\n    values?: Partial<M>,\n    previousValues?: Partial<M>,\n    path?: string,\n    entityId?: string,\n    index?: number,\n    fromBuilder?: boolean;\n    fields?: Record<string, PropertyConfig>;\n}): ResolvedArrayProperty {\n\n    if (property.of) {\n        if (Array.isArray(property.of)) {\n            return {\n                ...property,\n                resolved: true,\n                fromBuilder: props.fromBuilder,\n                resolvedProperties: property.of.map((p, index) => {\n                    return resolveProperty({\n                        propertyKey: `${propertyKey}.${index}`,\n                        propertyOrBuilder: p as Property<any>,\n                        propertyValue: Array.isArray(propertyValue) ? propertyValue[index] : undefined,\n                        ...props,\n                        index\n                    });\n                })\n            } as ResolvedArrayProperty;\n        } else {\n            const of = property.of;\n            const resolvedProperties: ResolvedProperty[] = Array.isArray(propertyValue)\n                ? propertyValue.map((v: any, index: number) => resolveProperty({\n                    propertyKey: `${propertyKey}.${index}`,\n                    propertyOrBuilder: of,\n                    propertyValue: v,\n                    ...props,\n                    index\n                })).filter(e => Boolean(e)) as ResolvedProperty[]\n                : [];\n            const ofProperty = resolveProperty({\n                propertyKey: `${propertyKey}`,\n                propertyOrBuilder: of,\n                propertyValue: undefined,\n                ...props\n            });\n            if (!ofProperty)\n                throw Error(\"When using a property builder as the 'of' prop of an ArrayProperty, you must return a valid child property\")\n            return {\n                ...property,\n                resolved: true,\n                fromBuilder: props.fromBuilder,\n                of: ofProperty,\n                resolvedProperties\n            } as ResolvedArrayProperty;\n        }\n    } else if (property.oneOf) {\n        const typeField = property.oneOf?.typeField ?? DEFAULT_ONE_OF_TYPE;\n        const resolvedProperties: ResolvedProperty[] = Array.isArray(propertyValue)\n            ? propertyValue.map((v, index) => {\n                const type = v && v[typeField];\n                const childProperty = property.oneOf?.properties[type];\n                if (!type || !childProperty) return null;\n                return resolveProperty({\n                    propertyKey: `${propertyKey}.${index}`,\n                    propertyOrBuilder: childProperty,\n                    propertyValue,\n                    ...props\n                });\n            }).filter(e => Boolean(e)) as ResolvedProperty[]\n            : [];\n        const properties = resolveProperties<any>({\n            properties: property.oneOf.properties,\n            propertyValue: undefined,\n            ...props\n        });\n        return {\n            ...property,\n            resolved: true,\n            oneOf: {\n                ...property.oneOf,\n                properties\n            },\n            fromBuilder: props.fromBuilder,\n            resolvedProperties\n        } as ResolvedArrayProperty;\n    } else if (!property.Field) {\n        throw Error(\"The array property needs to declare an 'of' or a 'oneOf' property, or provide a custom `Field`\")\n    } else {\n        return {\n            ...property,\n            resolved: true,\n            fromBuilder: props.fromBuilder\n        } as ResolvedArrayProperty;\n    }\n\n}\n\n/**\n * Resolve enums and arrays for properties\n * @param properties\n * @param value\n */\nexport function resolveProperties<M extends Record<string, any>>({\n                                                                     properties,\n                                                                     propertyValue,\n                                                                     ...props\n                                                                 }: {\n    properties: PropertiesOrBuilders<M>,\n    propertyValue: unknown,\n    values?: Partial<M>,\n    previousValues?: Partial<M>,\n    path?: string,\n    entityId?: string,\n    index?: number,\n    fromBuilder?: boolean;\n    fields?: Record<string, PropertyConfig>;\n}): ResolvedProperties<M> {\n    return Object.entries<PropertyOrBuilder>(properties as Record<string, PropertyOrBuilder>)\n        .map(([key, property]) => {\n            const thisPropertyValue = propertyValue && typeof propertyValue === \"object\" ? getValueInPath(propertyValue, key) : undefined;\n            const childResolvedProperty = resolveProperty({\n                propertyKey: key,\n                propertyOrBuilder: property,\n                propertyValue: thisPropertyValue,\n                ...props\n            });\n            if (!childResolvedProperty) return {};\n            return {\n                [key]: childResolvedProperty\n            };\n        })\n        .filter((a) => a !== null)\n        .reduce((a, b) => ({ ...a, ...b }), {}) as ResolvedProperties<M>;\n}\n\n/**\n * Resolve enum aliases for a string or number property\n * @param property\n * @param fromBuilder\n */\nexport function resolvePropertyEnum(property: StringProperty | NumberProperty, fromBuilder?: boolean): ResolvedStringProperty | ResolvedNumberProperty {\n    if (typeof property.enumValues === \"object\") {\n        return {\n            ...property,\n            resolved: true,\n            enumValues: enumToObjectEntries(property.enumValues)?.filter((value) => value && value.id && value.label) ?? [],\n            fromBuilder: fromBuilder ?? false\n        }\n    }\n    return property as ResolvedStringProperty | ResolvedNumberProperty;\n}\n\nexport function resolveEnumValues(input: EnumValues): EnumValueConfig[] | undefined {\n    if (typeof input === \"object\") {\n        return Object.entries(input).map(([id, value]) =>\n            (typeof value === \"string\"\n                ? {\n                    id,\n                    label: value\n                }\n                : value));\n    } else if (Array.isArray(input)) {\n        return input as EnumValueConfig[];\n    } else {\n        return undefined;\n    }\n}\n\nexport function resolveEntityView(entityView: string | EntityCustomView<any>, contextEntityViews?: EntityCustomView<any>[]): EntityCustomView<any> | undefined {\n    if (typeof entityView === \"string\") {\n        return contextEntityViews?.find((entry) => entry.key === entityView);\n    } else {\n        return entityView;\n    }\n}\n","import { EntityCollection, EntityCustomView } from \"../types\";\nimport { getCollectionPathsCombinations, removeInitialAndTrailingSlashes } from \"./navigation_utils\";\nimport { resolveEntityView } from \"./resolutions\";\n\nexport type NavigationViewInternal<M extends Record<string, any> = any> =\n    | NavigationViewEntityInternal<M>\n    | NavigationViewCollectionInternal<M>\n    | NavigationViewEntityCustomInternal<M>;\n\nexport interface NavigationViewEntityInternal<M extends Record<string, any>> {\n    type: \"entity\";\n    entityId: string;\n    path: string;\n    parentCollection: EntityCollection<M>;\n}\n\nexport interface NavigationViewCollectionInternal<M extends Record<string, any>> {\n    type: \"collection\";\n    path: string;\n    collection: EntityCollection<M>;\n}\n\nexport interface NavigationViewEntityCustomInternal<M extends Record<string, any>> {\n    type: \"custom_view\";\n    path: string;\n    view: EntityCustomView<M>;\n}\n\nexport function getNavigationEntriesFromPathInternal(props: {\n    path: string,\n    collections: EntityCollection[] | undefined,\n    currentFullPath?: string,\n    contextEntityViews?: EntityCustomView<any>[]\n}): NavigationViewInternal [] {\n\n    const {\n        path,\n        collections = [],\n        currentFullPath\n    } = props;\n\n    const subpaths = removeInitialAndTrailingSlashes(path).split(\"/\");\n    const subpathCombinations = getCollectionPathsCombinations(subpaths);\n\n    const result: NavigationViewInternal[] = [];\n    for (let i = 0; i < subpathCombinations.length; i++) {\n        const subpathCombination = subpathCombinations[i];\n\n        const collection: EntityCollection<any> | undefined = collections && collections.find((entry) => entry.id === subpathCombination || entry.path === subpathCombination);\n\n        if (collection) {\n            const pathOrAlias = collection.id ?? collection.path;\n            const collectionPath = currentFullPath && currentFullPath.length > 0\n                ? (currentFullPath + \"/\" + pathOrAlias)\n                : pathOrAlias;\n\n            result.push({\n                type: \"collection\",\n                path: collectionPath,\n                collection\n            });\n            const restOfThePath = removeInitialAndTrailingSlashes(removeInitialAndTrailingSlashes(path).replace(subpathCombination, \"\"));\n            const nextSegments = restOfThePath.length > 0 ? restOfThePath.split(\"/\") : [];\n            if (nextSegments.length > 0) {\n                const entityId = nextSegments[0];\n                const fullPath = collectionPath + \"/\" + entityId;\n                result.push({\n                    type: \"entity\",\n                    entityId,\n                    path: collectionPath,\n                    parentCollection: collection\n                });\n                if (nextSegments.length > 1) {\n                    const newPath = nextSegments.slice(1).join(\"/\");\n                    if (!collection) {\n                        throw Error(\"collection not found resolving path: \" + collection);\n                    }\n                    const entityViews = collection.entityViews;\n                    const customView = entityViews && entityViews\n                        .map((entry) => resolveEntityView(entry, props.contextEntityViews))\n                        .filter(Boolean)\n                        .find((entry) => entry!.key === newPath);\n                    if (customView) {\n                        const path = currentFullPath && currentFullPath.length > 0\n                            ? (currentFullPath + \"/\" + customView.key)\n                            : customView.key;\n                        result.push({\n                            type: \"custom_view\",\n                            path,\n                            view: customView\n                        });\n                    } else if (collection.subcollections) {\n                        result.push(...getNavigationEntriesFromPathInternal({\n                            path: newPath,\n                            collections: collection.subcollections,\n                            currentFullPath: fullPath,\n                            contextEntityViews: props.contextEntityViews\n                        }));\n                    }\n                }\n            }\n            break;\n        }\n\n    }\n    return result;\n}\n","import {\n    DefaultSelectedViewBuilder,\n    DefaultSelectedViewParams,\n    EntityCollection,\n    PermissionsBuilder,\n    PropertiesOrBuilders,\n    PropertyOrBuilder\n} from \"../types\";\nimport { isPropertyBuilder } from \"./entities\";\n\nexport function sortProperties<M extends Record<string, any>>(properties: PropertiesOrBuilders<M>, propertiesOrder?: (keyof M)[]): PropertiesOrBuilders<M> {\n    try {\n        const propertiesKeys = Object.keys(properties);\n        const allPropertiesOrder = propertiesOrder ?? propertiesKeys;\n        return allPropertiesOrder\n            .map((key) => {\n                if (properties[key as keyof M]) {\n                    const property = properties[key] as PropertyOrBuilder;\n                    if (!isPropertyBuilder(property) && property?.dataType === \"map\" && property.properties) {\n                        return ({\n                            [key]: {\n                                ...property,\n                                properties: sortProperties(property.properties, property.propertiesOrder)\n                            }\n                        });\n                    } else {\n                        return ({ [key]: property });\n                    }\n                } else {\n                    return undefined;\n                }\n            })\n            .filter((a) => a !== undefined)\n            .reduce((a: any, b: any) => ({ ...a, ...b }), {}) as PropertiesOrBuilders<M>;\n    } catch (e) {\n        console.error(\"Error sorting properties\", e);\n        return properties;\n    }\n}\n\nexport function resolveDefaultSelectedView(\n    defaultSelectedView: string | DefaultSelectedViewBuilder | undefined,\n    params: DefaultSelectedViewParams\n) {\n    if (!defaultSelectedView) {\n        return undefined;\n    } else if (typeof defaultSelectedView === \"string\") {\n        return defaultSelectedView;\n    } else {\n        return defaultSelectedView(params);\n    }\n}\n\n/**\n * If a collection is not applying permissions, we apply the given permissionsBuilder.\n * This is used to apply the role permissions to the collections, unless they are already\n * applying permissions.\n * @param collections\n * @param permissionsBuilder\n */\nexport const applyPermissionsFunctionIfEmpty = (collections: EntityCollection[], permissionsBuilder?: PermissionsBuilder<any, any>): EntityCollection[] => {\n\n    return collections.map(collection => {\n        if (collection.permissions) {\n            return collection;\n        }\n        return ({\n            ...collection,\n            permissions: permissionsBuilder\n        });\n    });\n}\n","const kebabCaseRegex = /[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g;\n\nexport const toKebabCase = (str: string) => {\n    const regExpMatchArray = str.match(kebabCaseRegex);\n    if (!regExpMatchArray) return \"\";\n    return regExpMatchArray\n        .map(x => x.toLowerCase())\n        .join(\"-\");\n};\n\nconst snakeCaseRegex = /[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g;\n\nexport const toSnakeCase = (str: string) => {\n    const regExpMatchArray = str.match(snakeCaseRegex);\n    if (!regExpMatchArray) return \"\";\n    return regExpMatchArray\n        .map(x => x.toLowerCase())\n        .join(\"_\");\n};\n\nexport function randomString(strLength = 5) {\n    return Math.random().toString(36).slice(2, 2 + strLength);\n}\n\nexport function randomColor() {\n    return Math.floor(Math.random() * 16777215).toString(16);\n}\n\nexport function slugify(text?: string, separator = \"_\", lowercase = true) {\n    if (!text) return \"\";\n    const from = \"/_,:;-\"\n    const to = `aaaaaeeeeeiiiiooooouuuunc${separator}${separator}${separator}${separator}${separator}${separator}${separator}`;\n\n    for (let i = 0, l = from.length; i < l; i++) {\n        text = text.replace(new RegExp(from.charAt(i), \"g\"), to.charAt(i));\n    }\n\n    text = text\n        .toString() // Cast to string\n        .replace(/\\s+/g, separator) // Replace spaces with separator\n        .replace(/&/g, separator) // Replace & with separator\n        .replace(/[^\\w\\\\-]+/g, \"\") // Remove all non-word chars\n        .replace(new RegExp(\"\\\\\" + separator + \"\\\\\" + separator + \"+\", \"g\"),\n            separator) // Replace multiple separators with single one\n        .trim() // Remove whitespace from both sides of a string\n        .replace(/^\\s+|\\s+$/g, \"\");\n\n    return lowercase\n        ? text.toLowerCase() // Convert the string to lowercase letters\n        : text;\n}\n\nexport function unslugify(slug?: string): string {\n    if (!slug) return \"\";\n    if (slug.includes(\"-\") || slug.includes(\"_\") || !slug.includes(\" \")) {\n        const result = slug.replace(/[-_]/g, \" \");\n        return result.replace(/\\w\\S*/g, function (txt) {\n            return txt.charAt(0).toUpperCase() + txt.substr(1);\n        }).trim();\n    } else {\n        return slug.trim();\n    }\n}\n","export const defaultDateFormat = \"MMMM dd, yyyy, HH:mm:ss\";\n","export const COLLECTION_PATH_SEPARATOR = \"::\";\n\n/**\n * Remove the entity ids from a given path\n * `products/B44RG6APH/locales` => `products::locales`\n * @param path\n */\nexport function stripCollectionPath(path: string): string {\n    return segmentsToStrippedPath(fullPathToCollectionSegments(path));\n}\n\nexport function segmentsToStrippedPath(paths: string[]) {\n    if (paths.length === 1)\n        return paths[0];\n    return paths.reduce((a, b) => `${a}${COLLECTION_PATH_SEPARATOR}${b}`);\n}\n\n/**\n * Extract the collection path routes\n * `products/B44RG6APH/locales` => [`products`, `locales`]\n * @param path\n */\nexport function fullPathToCollectionSegments(path: string): string[] {\n    return path\n        .split(\"/\")\n        .filter((e, i) => i % 2 === 0);\n}\n","export function serializeRegExp(input: RegExp): string {\n    if (!input) return \"\";\n    // const fragments = input.toString().match(/\\/(.*?)\\/([a-z]*)?$/i);\n    // if (fragments) {\n    //     if (fragments[2])\n    //         return input.toString();\n    //     return fragments[1];\n    // }\n    return input.toString();\n}\n\n/**\n * Get a RegExp out of a serialized string\n * @param input\n */\nexport function hydrateRegExp(input?: string): RegExp | undefined {\n    if (!input) return undefined;\n    const fragments = input.match(/\\/(.*?)\\/([a-z]*)?$/i);\n    if (fragments) {\n        return new RegExp(fragments[1], fragments[2] || \"\");\n    } else {\n        return new RegExp(input, \"\");\n    }\n}\n\nexport function isValidRegExp(input: string): boolean {\n    const fullRegexp = input.match(/\\/((?![*+?])(?:[^\\r\\n[/\\\\]|\\\\.|\\[(?:[^\\r\\n\\]\\\\]|\\\\.)*])+)\\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/);\n    if (fullRegexp)\n        return true;\n    const simpleRegexp = input.match(/((?![*+?])(?:[^\\r\\n[/\\\\]|\\\\.|\\[(?:[^\\r\\n\\]\\\\]|\\\\.)*])+)/);\n    return !!simpleRegexp;\n}\n","import React from \"react\";\n\nexport function useDebouncedCallback<T>(value: T, callback: () => void, immediate: boolean, timeoutMs = 300) {\n\n    const pendingUpdate = React.useRef(false);\n    const performUpdate = () => {\n        callback();\n        pendingUpdate.current = false;\n    };\n\n    const handlerRef = React.useRef<number | undefined>(undefined);\n\n    React.useEffect(\n        () => {\n            pendingUpdate.current = true;\n            clearTimeout(handlerRef.current);\n            handlerRef.current = setTimeout(performUpdate, timeoutMs) as any;\n            return () => {\n                if (immediate)\n                    performUpdate();\n            };\n        },\n        [immediate, value]\n    );\n}\n","import React from \"react\";\n\nimport { EntityCollection, PropertiesOrBuilders, PropertyConfig, PropertyOrBuilder, ResolvedProperty } from \"../types\";\nimport { isPropertyBuilder } from \"./entities\";\nimport { resolveProperty } from \"./resolutions\";\nimport { CircleIcon, FunctionsIcon } from \"@firecms/ui\";\nimport { getFieldConfig } from \"../core\";\n\nexport function isReferenceProperty(propertyOrBuilder: PropertyOrBuilder,\n                                    fields: Record<string, PropertyConfig>) {\n    const resolvedProperty = resolveProperty({\n        propertyKey: \"ignore\", // TODO\n        propertyOrBuilder,\n        fields\n    });\n    if (!resolvedProperty) return null;\n    if (resolvedProperty.dataType === \"reference\") {\n        return true;\n    }\n    if (resolvedProperty.dataType === \"array\") {\n        if (Array.isArray(resolvedProperty.of)) return false;\n        else return resolvedProperty.of?.dataType === \"reference\"\n    }\n    return false;\n}\n\nexport function getIdIcon(size: \"small\" | \"medium\" | \"large\"): React.ReactNode {\n    return <CircleIcon size={size}/>;\n}\n\nexport function getIconForWidget(widget: PropertyConfig | undefined,\n                                 size: \"small\" | \"medium\" | \"large\") {\n    const Icon = widget?.Icon ?? CircleIcon;\n    return <Icon size={size}/>;\n}\n\nexport function getIconForProperty(\n    property: PropertyOrBuilder | ResolvedProperty,\n    size: \"small\" | \"medium\" | \"large\" = \"small\",\n    fields: Record<string, PropertyConfig> = {}\n): React.ReactNode {\n\n    if (isPropertyBuilder(property)) {\n        return <FunctionsIcon size={size}/>;\n    } else {\n        const widget = getFieldConfig(property, fields);\n        return getIconForWidget(widget, size);\n    }\n}\n\nexport function getColorForProperty(property: PropertyOrBuilder, fields: Record<string, PropertyConfig>): string {\n    if (isPropertyBuilder(property)) {\n        return \"#888\";\n    } else {\n        const widget = getFieldConfig(property, fields);\n        return widget?.color ?? \"#666\";\n    }\n}\n\n/**\n * Get a property in a property tree from a path like\n * `address.street`\n * @param properties\n * @param path\n */\nexport function getPropertyInPath<M extends Record<string, any>>(properties: PropertiesOrBuilders<M>, path: string): PropertyOrBuilder<any, M> | undefined {\n    if (typeof properties === \"object\") {\n        if (path in properties) {\n            return properties[path];\n        }\n        if (path.includes(\".\")) {\n            const pathSegments = path.split(\".\");\n            const childProperty = properties[pathSegments[0]];\n            if (typeof childProperty === \"object\" && childProperty.dataType === \"map\" && childProperty.properties) {\n                return getPropertyInPath(childProperty.properties, pathSegments.slice(1).join(\".\"))\n            }\n        }\n    }\n    return undefined;\n}\n\nexport function getResolvedPropertyInPath(properties: Record<string, ResolvedProperty>, path: string): ResolvedProperty | undefined {\n    if (typeof properties === \"object\") {\n        if (path in properties) {\n            return properties[path];\n        }\n        if (path.includes(\".\")) {\n            const pathSegments = path.split(\".\");\n            const childProperty = properties[pathSegments[0]];\n            if (childProperty.dataType === \"map\" && childProperty.properties) {\n                return getResolvedPropertyInPath(childProperty.properties, pathSegments.slice(1).join(\".\"))\n            }\n        }\n    }\n    return undefined;\n}\n\n// replace the dot notation with brackets\n// address.street => address[street]\nexport function getBracketNotation(path: string): string {\n    return path.replace(/\\.([^.]*)/g, \"[$1]\");\n}\n\n/**\n * Get properties exclusively indexed by their order\n * @param properties\n * @param propertiesOrder\n */\nexport function getPropertiesWithPropertiesOrder<M extends Record<string, any>>(properties: PropertiesOrBuilders<M>, propertiesOrder?: Extract<keyof M, string>[]): PropertiesOrBuilders<M> {\n    if (!propertiesOrder) return properties;\n    const result: PropertiesOrBuilders<any> = {};\n    propertiesOrder.filter(Boolean).forEach(path => {\n        const property = getPropertyInPath(properties, path);\n        if (typeof property === \"object\" && property.dataType === \"map\" && property.properties) {\n            result[path] = {\n                ...property,\n                properties: getPropertiesWithPropertiesOrder(property.properties, property.propertiesOrder ?? [])\n            }\n        }\n        if (property) {\n            result[path] = property;\n        }\n    });\n    return result;\n}\n\nexport function getDefaultPropertiesOrder(collection: EntityCollection<any>): string[] {\n    if (collection.propertiesOrder) return collection.propertiesOrder;\n    return [...Object.keys(collection.properties), ...(collection.additionalFields ?? []).map(field => field.key)];\n}\n","import { AuthController, Entity, EntityCollection, Permissions, User } from \"../types\";\nimport { fullPathToCollectionSegments } from \"./paths\";\n\nconst DEFAULT_PERMISSIONS = {\n    read: true,\n    edit: true,\n    create: true,\n    delete: true\n};\n\nexport function resolvePermissions<M extends Record<string, any>, UserType extends User>\n(collection: EntityCollection<M>,\n authController: AuthController<UserType>,\n path: string,\n entity: Entity<M> | null): Permissions | undefined {\n\n    const permission = collection.permissions;\n    if (permission === undefined) {\n        return DEFAULT_PERMISSIONS;\n    } else if (typeof permission === \"object\") {\n        return permission as Permissions;\n    } else if (typeof permission === \"function\") {\n        const pathSegments = fullPathToCollectionSegments(path);\n        return permission({\n            entity,\n            path,\n            user: authController.user,\n            authController,\n            collection,\n            pathSegments\n        });\n    }\n    console.error(\"Permissions:\", permission);\n    throw Error(\"New type of permission added and not mapped\");\n}\n\nexport function canEditEntity<M extends Record<string, any>, UserType extends User>\n(\n    collection: EntityCollection<M>,\n    authController: AuthController<UserType>,\n    path: string,\n    entity: Entity<M> | null): boolean {\n    return resolvePermissions(collection, authController, path, entity)?.edit ?? DEFAULT_PERMISSIONS.edit;\n}\n\nexport function canCreateEntity<M extends Record<string, any>, UserType extends User>\n(\n    collection: EntityCollection<M>,\n    authController: AuthController<UserType>,\n    path: string,\n    entity: Entity<M> | null): boolean {\n    return resolvePermissions(collection, authController, path, entity)?.create ?? DEFAULT_PERMISSIONS.create;\n}\n\nexport function canDeleteEntity<M extends Record<string, any>, UserType extends User>\n(\n    collection: EntityCollection<M>,\n    authController: AuthController<UserType>,\n    path: string,\n    entity: Entity<M> | null): boolean {\n    return resolvePermissions(collection, authController, path, entity)?.delete ?? DEFAULT_PERMISSIONS.delete;\n}\n\n// export function resolveCollectionsPermissions(roles: Role[]): Record<string, Permissions> {\n//     const collectionIds = Array.from(new Set(roles.flatMap(role => Object.keys(role.collections))));\n//     return collectionIds\n//         .map((colId) => {\n//             const rolesWithCollection = roles.filter((role) => colId in Object.keys(role.collections));\n//             return {\n//                 [colId]: rolesWithCollection\n//                     .map(role => role.collections[colId])\n//                     .reduce((permA, permB) => {\n//                         return {\n//                             read: permA.read ?? permB.read ?? false,\n//                             create: permA.create ?? permB.create ?? false,\n//                             edit: permA.edit ?? permB.edit ?? false,\n//                             delete: permA.delete ?? permB.delete ?? false\n//                         };\n//                     })\n//             };\n//         })\n//         .reduce((a, b) => ({ ...a, ...b }), {});\n// }\n","export const icon_synonyms = {\n    abc: \"alphabet character font letter symbol text type\",\n    access_alarm: \"clock time\",\n    access_alarms: \"clock time\",\n    accessibility: \"accessible body handicap help human people person user\",\n    accessibility_new: \"accessible arms body handicap help human people person user\",\n    accessible: \"accessibility body handicap help human people person user wheelchair\",\n    accessible_forward: \"accessibility body handicap help human people person wheelchair\",\n    access_time: \"clock time\",\n    account_balance: \"bank bill building card cash coin commerce court credit currency dollars finance money online payment structure temple transaction\",\n    account_balance_wallet: \"bank bill card cash coin commerce credit currency dollars finance money online payment transaction\",\n    account_box: \"avatar face human people person profile square thumbnail user\",\n    account_circle: \"avatar face human people person profile thumbnail user\",\n    account_tree: \"analytics chart connect data diagram flow infographic measure metrics process project sitemap square statistics structure tracking\",\n    ac_unit: \"air cold conditioner freeze snowflake temperature weather winter\",\n    adb: \"android bridge debug\",\n    add: \"+ create item new plus symbol\",\n    add_alarm: \"clock plus time\",\n    add_alert: \"+ active alarm announcement bell callout chime information new notifications notify plus reminder ring sound symbol\",\n    add_a_photo: \"+ camera lens new photography picture plus symbol\",\n    add_box: \"create new plus square symbol\",\n    add_business: \"+ bill building card cash coin commerce company credit currency dollars market money new online payment plus retail shopping storefront symbol\",\n    add_card: \"+ bill cash coin commerce cost credit currency dollars finance money new online payment plus price shopping symbol\",\n    add_chart: \"+ analytics bars data diagram infographic measure metrics new plus statistics symbol tracking\",\n    add_circle: \"+ create new plus\",\n    add_circle_outline: \"+ create new plus\",\n    add_comment: \"+ bubble chat communicate feedback message new plus speech symbol\",\n    add_ic_call: \"+ cell contact device hardware mobile new plus symbol telephone\",\n    add_link: \"attach clip new plus symbol\",\n    add_location: \"+ destination direction gps maps new pin place plus stop symbol\",\n    add_location_alt: \"+ destination direction maps new pin place plus stop symbol\",\n    add_moderator: \"+ certified new plus privacy private protection security shield symbol verified\",\n    add_photo_alternate: \"+ image landscape mountains new photography picture plus symbol\",\n    add_road: \"+ destination direction highway maps new plus stop street symbol traffic\",\n    add_shopping_cart: \"card cash checkout coin commerce credit currency dollars money online payment plus\",\n    add_task: \"+ approve check circle completed increase mark ok plus select tick yes\",\n    add_to_drive: \"+ app backup cloud data files folders gdrive google plus recovery storage\",\n    add_to_home_screen: \"Android add arrow cell device hardware iOS mobile phone tablet to up\",\n    add_to_photos: \"collection image landscape mountains photography picture plus\",\n    add_to_queue: \"+ Android backlog chrome desktop device display hardware iOS lineup mac monitor new plus screen symbol television watch web window\",\n    adf_scanner: \"document feeder machine office\",\n    adjust: \"alter center circles control dot edit filter fix image mix move setting slider sort switch target tune\",\n    admin_panel_settings: \"account avatar certified face human people person privacy private profile protection security shield user verified\",\n    ad_units: \"Android banner cell device hardware iOS mobile notifications phone tablet top\",\n    agriculture: \"automobile cars cultivation farm harvest maps tractor transport travel truck vehicle\",\n    air: \"blowing breeze flow wave weather wind\",\n    airlines: \"airplane airport flight transportation travel trip\",\n    airline_seat_flat: \"bed body business class first human people person rest sleep travel\",\n    airline_seat_flat_angled: \"bed body business class first human people person rest sleep travel\",\n    airline_seat_individual_suite: \"bed body business class first human people person rest sleep travel\",\n    airline_seat_legroom_extra: \"body feet human people person sitting space travel\",\n    airline_seat_legroom_normal: \"body feet human people person sitting space travel\",\n    airline_seat_legroom_reduced: \"body feet human people person sitting space travel\",\n    airline_seat_recline_extra: \"body feet human legroom people person sitting space travel\",\n    airline_seat_recline_normal: \"body extra feet human legroom people person sitting space travel\",\n    airline_stops: \"arrow destination direction layover location maps place transportation travel trip\",\n    airplanemode_active: \"flight flying on signal\",\n    airplanemode_inactive: \"airport disabled enabled flight flying maps offline slash transportation travel\",\n    airplane_ticket: \"airport boarding flight fly maps pass transportation travel\",\n    airplay: \"apple arrow cast connect control desktop device display monitor screen signal television tv\",\n    airport_shuttle: \"automobile bus cars commercial delivery direction maps mini public transportation travel truck van vehicle\",\n    alarm: \"alart bell clock countdown date notification schedule time\",\n    alarm_add: \"+ alart bell clock countdown date new notification plus schedule symbol time\",\n    alarm_off: \"alart bell clock disabled duration enabled notification slash stop timer watch\",\n    alarm_on: \"alart bell checkmark clock disabled duration enabled notification off ready slash start timer watch\",\n    album: \"artist audio bvb cd computer data disk file music play record sound storage track vinyl\",\n    align_horizontal_center: \"alignment format layout lines paragraph rules style text\",\n    align_horizontal_left: \"alignment format layout lines paragraph rules style text\",\n    align_horizontal_right: \"alignment format layout lines paragraph rules style text\",\n    align_vertical_bottom: \"alignment format layout lines paragraph rules style text\",\n    align_vertical_center: \"alignment format layout lines paragraph rules style text\",\n    align_vertical_top: \"alignment format layout lines paragraph rules style text\",\n    all_inbox: \"Inbox delivered delivery email letter message post send\",\n    all_inclusive: \"endless forever infinite infinity loop mobius neverending strip sustainability sustainable\",\n    all_out: \"arrows circle directional expand shape\",\n    alternate_email: \"@ address contact tag\",\n    alt_route: \"alternate alternative arrows direction maps navigation options other routes split symbol\",\n    analytics: \"assessment bar chart data diagram infographic measure metrics statistics tracking\",\n    anchor: \"google logo\",\n    android: \"brand character logo mascot operating system toy\",\n    animation: \"circles film motion movement movie moving sequence video\",\n    announcement: \"! alert attention balloon bubble caution chat comment communicate danger error exclamation feedback important mark message news notification speech symbol warning\",\n    aod: \"Android always device display hardware homescreen iOS mobile phone tablet\",\n    apartment: \"accommodation architecture building city company estate flat home house office places real residence residential shelter units workplace\",\n    api: \"developer development enterprise software\",\n    app_blocking: \"Android applications cancel cell device hardware iOS mobile phone stopped tablet\",\n    apple: \"brand logo\",\n    app_registration: \"apps edit pencil register\",\n    approval: \"apply approvals approve certificate certification disapproval drive file impression ink mark postage stamp\",\n    apps: \"all applications circles collection components dots grid homescreen icons interface squares ui ux\",\n    app_settings_alt: \"Android applications cell device gear hardware iOS mobile phone tablet\",\n    app_shortcut: \"bookmarked favorite highlight important mobile saved software special star\",\n    apps_outage: \"all applications circles collection components dots grid interface squares ui ux\",\n    architecture: \"art compass design drawing engineering geometric tool\",\n    archive: \"inbox mail store\",\n    arrow_back: \"application components direction interface left navigation previous screen ui ux website\",\n    arrow_back_ios: \"application chevron components direction interface left navigation previous screen ui ux website\",\n    arrow_back_ios_new: \"application chevron components direction interface left navigation previous screen ui ux website\",\n    arrow_circle_down: \"direction navigation\",\n    arrow_circle_up: \"direction navigation\",\n    arrow_downward: \"application components direction interface navigation screen ui ux website\",\n    arrow_drop_down: \"application components direction interface navigation screen ui ux website\",\n    arrow_drop_down_circle: \"application components direction interface navigation screen ui ux website\",\n    arrow_drop_up: \"application components direction interface navigation screen ui ux website\",\n    arrow_forward: \"application arrows components direction interface navigation right screen ui ux website\",\n    arrow_forward_ios: \"application chevron components direction interface navigation next right screen ui ux website\",\n    arrow_left: \"application backstack backward components direction interface navigation previous screen ui ux website\",\n    arrow_right: \"application components continue direction forward interface navigation screen ui ux website\",\n    arrow_right_alt: \"arrows direction east navigation pointing shape\",\n    arrow_upward: \"application components direction interface navigation screen submit ui ux website\",\n    article: \"clarify document file news page paper text writing\",\n    art_track: \"album artist audio display format image insert music photography picture sound tracks\",\n    aspect_ratio: \"expand image monitor resize resolution scale screen square\",\n    assessment: \"analytics bars chart data diagram infographic measure metrics report statistics tracking\",\n    assignment: \"article clipboard document task text writing\",\n    assignment_ind: \"account clipboard document face people person profile task user\",\n    assignment_late: \"! alert announcement attention caution clipboard danger document error exclamation important mark notification symbol task warning\",\n    assignment_return: \"arrow back clipboard document left point retun task\",\n    assignment_returned: \"arrow clipboard document down point task\",\n    assignment_turned_in: \"approve checkmark clipboard complete document done finished ok select task tick validate verified yes\",\n    assistant: \"bubble chat comment communicate feedback message recommendation speech star suggestion twinkle\",\n    assistant_direction: \"destination location maps navigate navigation pin place right stop\",\n    assistant_photo: \"flag recommendation smart star suggestion\",\n    assured_workload: \"compliance confidential federal government regulatory secure sensitive\",\n    atm: \"alphabet automated bill card cart cash character coin commerce credit currency dollars font letter machine money online payment shopping symbol teller text type\",\n    attach_email: \"attachment clip compose envelop letter link message send\",\n    attach_file: \"add item link mail media paperclip\",\n    attachment: \"compose file image item link paperclip\",\n    attach_money: \"bill card cash coin commerce cost credit currency dollars finance online payment price profit sale symbol\",\n    attractions: \"amusement entertainment ferris fun maps park places wheel\",\n    attribution: \"attribute body copyright copywriter human people person\",\n    audio_file: \"document key music note sound track\",\n    audiotrack: \"key music note sound\",\n    auto_awesome: \"adjust editing enhance filter image photography photos setting stars\",\n    auto_awesome_mosaic: \"adjust collage editing enhance filter grid image layout photographs photography photos pictures setting\",\n    auto_awesome_motion: \"adjust animation collage editing enhance filter image live photographs photography photos pictures setting video\",\n    auto_delete: \"bin can clock date garbage remove schedule time trash\",\n    auto_fix_high: \"adjust editing enhance erase magic modify pen stars tool wand\",\n    auto_fix_normal: \"edit erase magic modify stars wand\",\n    auto_fix_off: \"disabled edit enabled erase magic modify on slash stars wand\",\n    autofps_select: \"A alphabet character font frame frequency letter per rate seconds symbol text type\",\n    auto_graph: \"analytics chart data diagram infographic line measure metrics stars statistics tracking\",\n    auto_mode: \"around arrows direction inprogress loading navigation nest refresh renew rotate turn\",\n    autorenew: \"around arrows cached direction inprogress loader loading navigation pending refresh rotate status turn\",\n    auto_stories: \"audiobook flipping pages reading story\",\n    av_timer: \"clock countdown duration minutes seconds stopwatch\",\n    baby_changing_station: \"babies bathroom body children father human infant kids mother newborn people person toddler wc young\",\n    backpack: \"bookbag knapsack storage travel\",\n    backspace: \"arrow cancel clear correct delete erase remove\",\n    backup: \"arrow cloud data drive files folders point storage submit upload\",\n    backup_table: \"drive files folders format layout stack storage\",\n    badge: \"account avatar card certified employee face human identification name people person profile security user work\",\n    bakery_dining: \"bread breakfast brunch croissant food\",\n    balance: \"equal equilibrium equity impartiality justice parity stability. steadiness symmetry\",\n    balcony: \"architecture doors estate home house maps outside place real residence residential stay terrace window\",\n    ballot: \"bullet bulllet election list point poll vote\",\n    bar_chart: \"analytics anlytics data diagram infographic measure metrics statistics tracking\",\n    batch_prediction: \"bulb idea light\",\n    bathroom: \"closet home house place plumbing shower sprinkler wash water wc\",\n    bathtub: \"bathing bathroom clean home hotel human person shower travel\",\n    battery_alert: \"! attention caution cell charge danger error exclamation important mark mobile notification power symbol warning\",\n    battery_charging_full: \"cell charge lightening lightning mobile power thunderbolt\",\n    battery_full: \"cell charge mobile power\",\n    battery_saver: \"+ add charge charging new plus power symbol\",\n    battery_std: \"cell charge mobile plus power standard\",\n    battery_unknown: \"? assistance cell charge help information mark mobile power punctuation question support symbol\",\n    beach_access: \"parasol places summer sunny umbrella\",\n    bed: \"bedroom double full furniture home hotel house king night pillows queen rest size sleep\",\n    bedroom_baby: \"babies children home horse house infant kid newborn rocking toddler young\",\n    bedroom_child: \"children furniture home hotel house kid night pillows rest size sleep twin young\",\n    bedroom_parent: \"double full furniture home hotel house king master night pillows queen rest sizem sleep\",\n    bedtime: \"nightime sleep\",\n    bedtime_off: \"nightime sleep\",\n    beenhere: \"approve archive bookmark checkmark complete done favorite label library reading remember ribbon save select tag tick validate verified yes\",\n    bento: \"box dinner food lunch meal restaurant takeout\",\n    bike_scooter: \"automobile cars maps transportation vehicle vespa\",\n    biotech: \"chemistry laboratory microscope research science technology test\",\n    blender: \"appliance cooking electric juicer kitchen machine vitamix\",\n    blinds_closed: \"cover curtains nest shutter sunshade\",\n    block: \"allowed avoid banned cancel close disable entry exit not prohibited quit remove stop\",\n    bloodtype: \"donate droplet emergency hospital medicine negative positive water\",\n    bluetooth: \"cast connection device network paring streaming symbol wireless\",\n    bluetooth_audio: \"connection device music signal sound symbol\",\n    bluetooth_connected: \"cast connection device network paring streaming symbol wireless\",\n    bluetooth_disabled: \"cast connection device enabled network offline paring slash streaming symbol wireless\",\n    bluetooth_drive: \"automobile cars cast connection device maps paring streaming symbol transportation travel vehicle wireless\",\n    bluetooth_searching: \"connection device network paring symbol wireless\",\n    blur_circular: \"circle dots editing effect enhance filter\",\n    blur_linear: \"dots editing effect enhance filter\",\n    blur_off: \"disabled dots editing effect enabled enhance on slash\",\n    blur_on: \"disabled dots editing effect enabled enhance filter off slash\",\n    bolt: \"electric energy fast flash lightning power thunderbolt\",\n    book: \"blog bookmark favorite label library reading remember ribbon save tag\",\n    bookmark: \"archive favorite follow label library reading remember ribbon save tag\",\n    bookmark_add: \"+ favorite plus remember ribbon save symbol\",\n    bookmark_added: \"approve check complete done favorite remember save select tick validate verified yes\",\n    bookmark_border: \"archive favorite label library outline reading remember ribbon save tag\",\n    bookmark_remove: \"delete favorite minus remember ribbon save subtract\",\n    bookmarks: \"favorite label layers library multiple reading remember ribbon save stack tag\",\n    book_online: \"Android admission appointment cell device event hardware iOS mobile pass phone reservation tablet ticket\",\n    border_all: \"doc editing editor spreadsheet stroke text type writing\",\n    border_bottom: \"doc editing editor spreadsheet stroke text type writing\",\n    border_clear: \"doc editing editor spreadsheet stroke text type writing\",\n    border_color: \"all create doc editing editor marker pencil spreadsheet stroke text type writing\",\n    border_horizontal: \"doc editing editor spreadsheet stroke text type writing\",\n    border_inner: \"doc editing editor spreadsheet stroke text type writing\",\n    border_left: \"doc editing editor spreadsheet stroke text type writing\",\n    border_outer: \"doc editing editor spreadsheet stroke text type writing\",\n    border_right: \"doc editing editor spreadsheet stroke text type writing\",\n    border_style: \"color doc editing editor spreadsheet stroke text type writing\",\n    border_top: \"doc editing editor spreadsheet stroke text type writing\",\n    border_vertical: \"doc editing editor spreadsheet stroke text type writing\",\n    boy: \"body gender human male people person social symbol\",\n    branding_watermark: \"components copyright design emblem format identity interface layout logo screen stamp ui ux website window\",\n    breakfast_dining: \"bakery bread butter food toast\",\n    brightness_1: \"circle control crescent cresent level moon screen\",\n    brightness_2: \"circle control crescent cresent level moon night screen\",\n    brightness_3: \"circle control crescent cresent level moon night screen\",\n    brightness_4: \"circle control crescent cresent dark level moon night screen sun\",\n    brightness_5: \"circle control crescent cresent level moon screen sun\",\n    brightness_6: \"circle control crescent cresent level moon screen sun\",\n    brightness_7: \"circle control crescent cresent level light moon screen sun\",\n    brightness_auto: \"A control display level mobile monitor phone screen\",\n    brightness_high: \"auto control mobile monitor phone\",\n    brightness_low: \"auto control mobile monitor phone\",\n    brightness_medium: \"auto control mobile monitor phone\",\n    broken_image: \"corrupt error landscape mountains photography picture torn\",\n    browser_not_supported: \"disabled enabled internet off on page screen slash website www\",\n    browser_updated: \"Android arrow chrome desktop device display download hardware iOS mac monitor screen web window\",\n    brunch_dining: \"breakfast champagne champaign drink food lunch meal\",\n    brush: \"art design draw editing painting tool\",\n    bubble_chart: \"analytics bars data diagram infographic measure metrics statistics tracking\",\n    bug_report: \"animal file fix insect issue problem testing ticket virus warning\",\n    build: \"adjust fix repair spanner tool wrench\",\n    build_circle: \"adjust fix repair tool wrench\",\n    bungalow: \"architecture cottage estate home house maps place real residence residential stay traveling\",\n    burst_mode: \"image landscape mountains multiple photography picture\",\n    bus_alert: \"! attention automobile cars caution danger error exclamation important maps mark notification symbol transportation vehicle warning\",\n    business: \"address apartment architecture building company estate flat home office place real residence residential shelter structure\",\n    business_center: \"baggage briefcase places purse suitcase work\",\n    cabin: \"architecture camping cottage estate home house log maps place real residence residential stay traveling wood\",\n    cable: \"connection device electronics usb wire\",\n    cached: \"around arrows inprogress loader loading refresh reload renew rotate\",\n    cake: \"baked birthday candles celebration dessert food frosting party pastries pastry pie social sweet\",\n    calculate: \"+ - = calculator count finance math\",\n    calendar_today: \"date event month remember reminder schedule week\",\n    calendar_view_day: \"date event format grid layout month remember reminder schedule today week\",\n    calendar_view_month: \"date event format grid layout schedule today\",\n    calendar_view_week: \"date event format grid layout month schedule today\",\n    call: \"cell contact device hardware mobile talk telephone\",\n    call_end: \"cell contact device hardware mobile talk telephone\",\n    call_made: \"arrow device mobile\",\n    call_merge: \"arrow device mobile\",\n    call_missed: \"arrow device mobile\",\n    call_missed_outgoing: \"arrow device mobile\",\n    call_received: \"arrow device mobile\",\n    call_split: \"arrow device mobile\",\n    call_to_action: \"alert bar components cta design information interface layout message notification screen ui ux website window\",\n    camera: \"album aperture lens photography picture record screenshot shutter\",\n    camera_alt: \"image photography picture\",\n    camera_enhance: \"important lens photography picture quality special star\",\n    camera_front: \"body human lens mobile person phone photography portrait selfie\",\n    camera_indoor: \"architecture building estate filming home house image inside motion nest picture place real residence residential shelter videography\",\n    camera_outdoor: \"architecture building estate filming home house image motion nest outside picture place real residence residential shelter videography\",\n    camera_rear: \"front lens mobile phone photography picture portrait selfie\",\n    camera_roll: \"film image library photography\",\n    cameraswitch: \"arrows flip rotate swap view\",\n    campaign: \"alert announcement loud megaphone microphone notification speaker\",\n    cancel: \"circle close cross disable exit status stop\",\n    cancel_presentation: \"close device exit no quit remove screen share slide stop website window\",\n    cancel_schedule_send: \"email no quit remove share stop x\",\n    candlestick_chart: \"analytics data diagram finance infographic measure metrics statistics tracking\",\n    card_giftcard: \"account balance bill cart cash certificate coin commerce creditcard currency dollars money online payment present shopping\",\n    card_membership: \"bill bookmark cash certificate coin commerce cost creditcard currency dollars finance loyalty money online payment shopping subscription\",\n    card_travel: \"bill cash coin commerce cost creditcard currency dollars finance membership miles money online payment trip\",\n    carpenter: \"building construction cutting handyman repair saw tool\",\n    car_rental: \"automobile cars key maps transportation vehicle\",\n    car_repair: \"automobile cars maps transportation vehicle\",\n    cases: \"baggage briefcase business purse suitcase\",\n    casino: \"dice dots entertainment gamble gambling games luck places\",\n    cast: \"Android airplay chromecast connect desktop device display hardware iOS mac monitor screencast streaming television tv web window wireless\",\n    cast_connected: \"Android airplay chromecast desktop device display hardware iOS mac monitor screencast streaming television tv web window wireless\",\n    cast_for_education: \"Android airplay chrome connect desktop device display hardware iOS learning lessons mac monitor screencast streaming teaching television tv web window wireless\",\n    catching_pokemon: \"go pokestop travel\",\n    category: \"categories circle collection items product sort square triangle\",\n    celebration: \"activity birthday event fun party\",\n    cell_tower: \"broadcast casting network signal transmitting wireless\",\n    cell_wifi: \"connection data internet mobile network phone service signal wireless\",\n    center_focus_strong: \"camera image lens photography zoom\",\n    center_focus_weak: \"camera image lens photography zoom\",\n    chair: \"comfort couch decoration furniture home house living lounging loveseat room seating sofa\",\n    chair_alt: \"cahir furniture home house kitchen lounging seating table\",\n    chalet: \"architecture cottage estate home house maps place real residence residential stay traveling\",\n    change_circle: \"around arrows direction navigation rotate\",\n    change_history: \"shape triangle\",\n    charging_station: \"Android battery cell device electric hardware iOS lightning mobile phone tablet thunderbolt\",\n    chat: \"bubble comment communicate feedback message speech talk text\",\n    chat_bubble: \"comment communicate feedback message speech talk text\",\n    chat_bubble_outline: \"comment communicate feedback message speech talk text\",\n    check: \"checkmark complete confirm correct done enter okay purchased select success tick yes\",\n    check_box: \"approved button checkmark component control form ok selected selection square success tick toggle ui yes\",\n    check_box_outline_blank: \"button checkmark component control deselected empty form selection square tick toggle ui\",\n    check_circle: \"approve checkmark complete done download finished ok select success tick upload validate verified yes\",\n    check_circle_outline: \"approve checkmark complete done finished ok select success tick validate verified yes\",\n    checkroom: \"check closet clothes coat hanger\",\n    chevron_left: \"arrows back direction triangle\",\n    chevron_right: \"arrows direction forward triangle\",\n    child_care: \"babies baby children face infant kids newborn toddler young\",\n    child_friendly: \"baby care carriage children infant kid newborn stroller toddler young\",\n    chrome_reader_mode: \"text\",\n    circle: \"bullet button dot full geometry moon period radio\",\n    circle_notifications: \"active alarm alert bell chime notify reminder ring sound\",\n    class: \"archive bookmark category favorite item label library reading remember ribbon save tag\",\n    clean_hands: \"bacteria disinfect germs gesture sanitizer\",\n    cleaning_services: \"dust sweep\",\n    clear: \"allowed back cancel correct cross delete disable erase exit not times\",\n    clear_all: \"delete document erase format lines list notifications wipe\",\n    close: \"allowed cancel cross disable exit not status stop times\",\n    closed_caption: \"accessible alphabet character decoder font language letter media movies subtitles symbol text tv type\",\n    closed_caption_disabled: \"accessible alphabet character decoder enabled font language letter media movies off slash subtitles symbol text tv type\",\n    closed_caption_off: \"accessible alphabet character decoder font language letter media movies outline subtitles symbol text tv type\",\n    close_fullscreen: \"action arrows collapse direction minimize\",\n    cloud: \"connection internet network sky upload weather\",\n    cloud_circle: \"application backup connection drive files folders internet network sky storage upload\",\n    cloud_done: \"application approve backup checkmark complete connection drive files folders internet network ok select sky storage tick upload validate verified yes\",\n    cloud_download: \"application arrow backup connection drive files folders internet network sky storage upload\",\n    cloud_off: \"application backup connection disabled drive enabled files folders internet network offline sky slash storage upload\",\n    cloud_queue: \"connection internet network sky upload\",\n    cloud_sync: \"application around backup connection drive files folders inprogress internet loading network refresh renew rotate sky storage turn upload\",\n    cloud_upload: \"application arrow backup connection download drive files folders internet network sky storage\",\n    co2: \"carbon dioxide gas\",\n    code: \"brackets css developer engineering html parenthesis platform\",\n    code_off: \"brackets css developer disabled enabled engineering html on platform slash\",\n    coffee: \"beverage cup drink mug plate set tea\",\n    coffee_maker: \"appliances beverage cup drink machine mug\",\n    collections: \"album gallery image landscape library mountains photography picture stack\",\n    collections_bookmark: \"album archive favorite gallery label library reading remember ribbon save stack tag\",\n    colorize: \"color dropper extract eye picker pipette tool\",\n    color_lens: \"art paint pallet\",\n    comment: \"bubble chat communicate document feedback message note outline speech\",\n    comment_bank: \"archive bookmark bubble cchat communicate favorite label library message remember ribbon save speech tag\",\n    comments_disabled: \"bubble chat communicate enabled feedback message offline on slash speech\",\n    commit: \"accomplish bind circle dedicate execute line perform pledge\",\n    commute: \"automobile car direction maps public train transportation trip vehicle\",\n    compare: \"adjustment editing edits enhance fix images photography photos scan settings\",\n    compare_arrows: \"collide directional facing left pointing pressure push right together\",\n    compass_calibration: \"connection internet location maps network refresh service signal wifi wireless\",\n    compress: \"arrows collide pressure push together\",\n    computer: \"Android chrome desktop device hardware iOS laptop mac monitor pc web window\",\n    confirmation_number: \"admission entertainment event ticket\",\n    connected_tv: \"Android airplay chrome desktop device display hardware iOS mac monitor screencast streaming television web window wireless\",\n    connecting_airports: \"airplanes flight transportation travel trip\",\n    connect_without_contact: \"communicating distance people signal socialize\",\n    construction: \"build carpenter equipment fix hammer improvement industrial industry repair tools wrench\",\n    contactless: \"applepay bluetooth cash connection connectivity credit device finance payment signal tap transaction wifi wireless\",\n    contact_mail: \"account address avatar communicate email face human information message people person profile user\",\n    contact_page: \"account avatar data document drive face folders human people person profile sheet slide storage user writing\",\n    contact_phone: \"account avatar call communicate face human information message mobile number people person profile user\",\n    contacts: \"account address avatar call cell face human information mobile number people person phone profile user\",\n    contact_support: \"? alert announcement bubble chat comment communicate help information mark message punctuation speech symbol vquestion\",\n    content_copy: \"cut document duplicate file multiple past\",\n    content_cut: \"copy document file past scissors trim\",\n    content_paste: \"clipboard copy cut document file multiple\",\n    content_paste_go: \"clipboard disabled document enabled file slash\",\n    content_paste_off: \"clipboard disabled document enabled file slash\",\n    content_paste_search: \"clipboard document file find trace track\",\n    contrast: \"black editing effect filter grayscale images photography pictures settings white\",\n    control_camera: \"adjust arrows center direction left move right\",\n    control_point: \"+ add circle plus\",\n    control_point_duplicate: \"+ add circle multiple new plus symbol\",\n    co_present: \"arrow co-present presentation screen share slides togather website\",\n    copy_all: \"content cut document file multiple page paper past\",\n    copyright: \"alphabet character circle emblem font legal letter owner symbol text\",\n    coronavirus: \"19 bacteria covid disease germs illness sick social\",\n    corporate_fare: \"architecture building business estate organization place real residence residential shelter\",\n    cottage: \"architecture beach estate home house lake lodge maps place real residence residential stay traveling\",\n    countertops: \"home house kitchen sink table\",\n    create: \"compose editing input item new pencil write writing\",\n    create_new_folder: \"+ add data directory document drive file plus sheet slide storage symbol\",\n    credit_card: \"bill cash charge coin commerce cost creditcard currency dollars finance information money online payment price shopping symbol\",\n    credit_card_off: \"charge commerce cost disabled enabled finance money online payment slash\",\n    credit_score: \"approve bill card cash check coin commerce complete cost currency dollars done finance loan mark money ok online payment select symbol tick validate verified yes\",\n    crib: \"babies baby bassinet bed children cradle infant kid newborn sleeping toddler\",\n    crop: \"adjustments area editing frame images photos rectangle settings size square\",\n    crop_169: \"adjustments area by editing frame images photos picture rectangle settings size square\",\n    crop_32: \"adjustments area by editing frame images photos picture rectangle settings size square\",\n    crop_54: \"adjustments area by editing frame images photos picture rectangle settings size square\",\n    crop_75: \"adjustments area by editing frame images photos picture rectangle settings size square\",\n    crop_din: \"adjustments area editing frame images photos picture rectangle settings size square\",\n    crop_free: \"adjustments barcode editing focus frame image photos qrcode settings size square zoom\",\n    crop_landscape: \"adjustments area editing frame images photos picture settings size square\",\n    crop_original: \"adjustments area editing frame images photos picture settings size square\",\n    crop_portrait: \"adjustments area editing frame images photos picture rectangle settings size square\",\n    crop_rotate: \"adjustments area arrows editing frame images photos settings size turn\",\n    crop_square: \"adjustments area editing frame images photos rectangle settings size\",\n    css: \"alphabet brackets character code developer engineering font html letter platform symbol text type\",\n    currency_exchange: \"360 around arrows cash coin commerce direction dollars inprogress money pay renew rotate sync turn universal\",\n    currency_franc: \"bill card cash coin commerce cost credit dollars finance money online payment price shopping symbol\",\n    currency_lira: \"bill card cash coin commerce cost credit dollars finance money online payment price shopping symbol\",\n    currency_pound: \"bill card cash coin commerce cost credit dollars finance money online payment price shopping symbol\",\n    currency_ruble: \"bill card cash coin commerce cost credit dollars finance money online payment price shopping symbol\",\n    currency_rupee: \"bill card cash coin commerce cost credit dollars finance money online payment price shopping symbol\",\n    currency_yen: \"bill card cash coin commerce cost credit dollars finance money online payment price shopping symbol\",\n    currency_yuan: \"bill card cash coin commerce cost credit dollars finance money online payment price shopping symbol\",\n    curtains: \"blinds cover nest open shutter sunshade\",\n    curtains_closed: \"blinds cover nest shutter sunshade\",\n    dangerous: \"broken fix no sign stop update warning wrong\",\n    dark_mode: \"application device interface moon night silent theme ui ux website\",\n    dashboard: \"cards format layout rectangle shapes square website\",\n    dashboard_customize: \"cards format layout rectangle shapes square website\",\n    data_saver_off: \"analytics bars chart diagram donut infographic measure metrics ring statistics tracking\",\n    data_saver_on: \"+ add analytics chart diagram infographic measure metrics new plus ring statistics symbol tracking\",\n    data_thresholding: \"hidden privacy thresold\",\n    data_usage: \"analytics chart circle diagram infographic measure metrics statistics tracking\",\n    date_range: \"agenda calendar event month remember reminder schedule time today week\",\n    deblur: \"adjust editing enhance face image lines photography sharpen\",\n    deck: \"chairs furniture garden home house outdoors outside patio social terrace umbrella yard\",\n    dehaze: \"adjust editing enhance image lines photography remove\",\n    delete: \"bin garbage junk recycle remove trashcan\",\n    delete_forever: \"bin cancel exit garbage junk recycle remove trashcan\",\n    delete_outline: \"bin can garbage remove trash\",\n    delete_sweep: \"bin garbage junk recycle remove trashcan\",\n    delivery_dining: \"food meal restaurant scooter takeout transportation vehicle vespa\",\n    density_large: \"horizontal lines rules\",\n    density_medium: \"horizontal lines rules\",\n    density_small: \"horizontal lines rules\",\n    departure_board: \"automobile bus cars clock maps public schedule time transportation travel vehicle\",\n    description: \"article bill data document drive file folders invoice item notes page paper sheet slide text writing\",\n    desktop_access_disabled: \"Android apple chrome device display enabled hardware iOS mac monitor offline pc screen slash web window\",\n    desktop_mac: \"Android apple chrome device display hardware iOS monitor pc screen web window\",\n    desktop_windows: \"Android chrome device display hardware iOS mac monitor pc screen television tv web\",\n    details: \"editing enhance image photography sharpen triangle\",\n    developer_board: \"computer development devkit hardware microchip processor\",\n    developer_board_off: \"computer development disabled enabled hardware microchip on processor slash\",\n    developer_mode: \"Android bracket cell code development device engineer hardware iOS mobile phone tablet\",\n    device_hub: \"Android circle computer desktop hardware iOS laptop mobile monitor phone square tablet triangle watch wearable web\",\n    devices: \"Android computer desktop hardware iOS laptop mobile monitor phone tablet watch wearable web\",\n    devices_other: \"Android cell chrome desktop gadget hardware iOS ipad mac mobile monitor phone smartwatch tablet vr wearables window\",\n    device_thermostat: \"celsius fahrenheit temperature thermometer\",\n    device_unknown: \"? Android assistance cell hardware help iOS information mark mobile phone punctuation question support symbol tablet\",\n    dialer_sip: \"alphabet call cell character contact device font hardware initiation internet letter mobile over protocol routing session symbol telephone text type voice\",\n    dialpad: \"buttons call contact device dots mobile numbers phone\",\n    diamond: \"fashion gems jewelry logo retail valuables\",\n    difference: \"compare content copy cut document duplicate file multiple past\",\n    dining: \"cafeteria cutlery diner eating fork room spoon\",\n    dinner_dining: \"breakfast food fork lunch meal restaurant spaghetti utensils\",\n    directions: \"arrow maps naviate right route sign traffic\",\n    directions_bike: \"bicycle human maps person public route transportation\",\n    directions_boat: \"automobile cars ferry maps public transportation vehicle\",\n    directions_boat_filled: \"automobile cars ferry maps public transportation vehicle\",\n    directions_bus: \"automobile cars maps public transportation vehicle\",\n    directions_bus_filled: \"automobile cars maps public transportation vehicle\",\n    directions_car: \"automobile cars maps public transportation vehicle\",\n    directions_car_filled: \"automobile cars maps public transportation vehicle\",\n    directions_off: \"arrow disabled enabled maps right route sign slash traffic\",\n    directions_railway: \"automobile cars maps public train transportation vehicle\",\n    directions_railway_filled: \"automobile cars maps public train transportation vehicle\",\n    directions_run: \"body health human jogging maps people person route running walk\",\n    directions_subway: \"automobile cars maps public rail train transportation vehicle\",\n    directions_subway_filled: \"automobile cars maps public rail train transportation vehicle\",\n    directions_transit: \"automobile cars maps metro public rail subway train transportation vehicle\",\n    directions_transit_filled: \"automobile cars maps public rail subway train transportation vehicle\",\n    directions_walk: \"body human jogging maps people person route run\",\n    dirty_lens: \"camera photography picture splat\",\n    disabled_by_default: \"box cancel close exit no quit remove square stop\",\n    disc_full: \"! alert attention caution cd danger error exclamation important mark music notification storage symbol vinyl warning\",\n    display_settings: \"Android application change chrome desktop details device gear hardware iOS information mac monitor options personal screen service web window\",\n    dns: \"address bars domain information ip list lookup name network server system\",\n    dock: \"Android cell charger charging connector device hardware iOS mobile phone power station tablet\",\n    document_scanner: \"article data drive file folders notes page paper sheet slide text writing\",\n    do_disturb: \"cancel close denied deny remove silence stop\",\n    do_disturb_alt: \"cancel close denied deny remove silence stop\",\n    do_disturb_off: \"cancel close denied deny disabled enabled on remove silence slash stop\",\n    do_disturb_on: \"cancel close denied deny disabled enabled off remove silence slash stop\",\n    domain: \"apartment architecture building business estate home place real residence residential shelter web www\",\n    domain_add: \"+ apartment architecture building business estate home new place plus real residence residential shelter symbol web www\",\n    domain_disabled: \"apartment architecture building business company enabled estate home internet maps office offline on place real residence residential slash website\",\n    domain_verification: \"application approve check complete design desktop done interface internet layout mark ok screen select tick ui ux validate verified website window www yes\",\n    done: \"approve checkmark complete finished ok select success tick validate verified yes\",\n    done_all: \"approve checkmark complete finished layers multiple ok select stack success tick validate verified yes\",\n    done_outline: \"all approve checkmark complete finished ok select success tick validate verified yes\",\n    do_not_disturb: \"cancel close denied deny remove silence stop\",\n    do_not_disturb_alt: \"cancel close denied deny remove silence stop\",\n    do_not_disturb_off: \"cancel close denied deny disabled enabled on remove silence slash stop\",\n    do_not_disturb_on: \"cancel close denied deny disabled enabled off remove silence slash stop\",\n    do_not_disturb_on_total_silence: \"busy mute on quiet total\",\n    do_not_step: \"boot disabled enabled feet foot off on shoe slash sneaker\",\n    do_not_touch: \"disabled enabled fingers gesture hand off on slash\",\n    donut_large: \"analytics chart circle complete data diagram infographic inprogress, measure metrics pie statistics tracking\",\n    donut_small: \"analytics chart circle data diagram infographic inprogress measure metrics pie statistics tracking\",\n    door_back: \"closed doorway entrance exit home house\",\n    doorbell: \"alarm home house ringing\",\n    door_front: \"closed doorway entrance exit home house\",\n    door_sliding: \"automatic doorway double entrance exit glass home house two\",\n    double_arrow: \"arrows chevron direction multiple navigation right\",\n    downhill_skiing: \"athlete athletic body entertainment exercise hobby human people person ski snow social sports travel winter\",\n    download: \"arrow downloads drive install upload\",\n    download_done: \"arrows check downloads drive installed ok tick upload\",\n    download_for_offline: \"arrow circle for install offline upload\",\n    downloading: \"arrow circle downloads install pending progress upload\",\n    drafts: \"document email envelope file letter message read\",\n    drag_handle: \"application components design interface layout lines menu move screen ui ux website window\",\n    drag_indicator: \"application circles components design dots drop interface layout mobile monitor move phone screen shape shift tablet ui ux website window\",\n    drive_eta: \"automobile cars destination direction estimate maps public transportation travel trip vehicle\",\n    drive_file_move: \"arrows data direction document folders right sheet side slide storage\",\n    drive_file_rename_outline: \"compose create draft editing input pencil write writing\",\n    drive_folder_upload: \"arrow data document file sheet slide storage\",\n    dry: \"air bathroom dryer fingers gesture hand wc\",\n    dry_cleaning: \"hanger hotel laundry places service towel\",\n    duo: \"call chat conference device video\",\n    dvr: \"Android audio chrome computer desktop device display electronic hardware iOS laptop list mac monitor recorder screen tv video web window\",\n    dynamic_feed: \"layer live multiple post refresh update\",\n    dynamic_form: \"code electric fast lightning lists questionnaire thunderbolt\",\n    earbuds: \"accessory audio earphone headphone listen music sound\",\n    earbuds_battery: \"accessory audio charging earphone headphone listen music sound\",\n    east: \"arrow directional maps navigation right\",\n    edgesensor_high: \"Android cell device hardware iOS mobile move phone sensitivity tablet vibrate\",\n    edgesensor_low: \"Android cell device hardware iOS mobile move phone sensitivity tablet vibrate\",\n    edit: \"compose create editing input new pencil write writing\",\n    edit_attributes: \"approve attribution check complete done mark ok select tick validate verified yes\",\n    edit_location: \"destination direction gps maps pencil pin place stop write\",\n    edit_location_alt: \"pencil pin\",\n    edit_notifications: \"active alarm alert bell chime compose create draft editing input new notify pencil reminder ring sound write writing\",\n    edit_off: \"compose create disabled draft editing enabled input new offline on pencil slash write writing\",\n    edit_road: \"destination direction highway maps pencil street traffic\",\n    egg: \"breakfast brunch food\",\n    egg_alt: \"breakfast brunch food\",\n    eighteen_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    eight_k: \"8000 8K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    eight_k_plus: \"+ 7000 8K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    eight_mp: \"camera digit font image letters megapixels number quality resolution symbol text type\",\n    eightteen_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    eject: \"arrow disc drive dvd player remove triangle up usb\",\n    elderly: \"body cane human old people person senior\",\n    elderly_woman: \"body cane female gender girl human lady old people person senior social symbol women\",\n    electrical_services: \"charge cord plug power wire\",\n    electric_bike: \"automobile cars electricity maps scooter transportation travel vehicle vespa\",\n    electric_bolt: \"energy fast lightning nest thunderbolt\",\n    electric_car: \"automobile cars electricity maps transportation travel vehicle\",\n    electric_meter: \"energy fast lightning measure nest thunderbolt usage voltage volts\",\n    electric_moped: \"automobile bike cars maps scooter transportation travel vehicle vespa\",\n    electric_rickshaw: \"automobile cars india maps transportation truck vehicle\",\n    electric_scooter: \"automobile bike cars maps transportation vehicle vespa\",\n    elevator: \"body down human people person up\",\n    eleven_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    email: \"envelope letter message note post receive send write\",\n    e_mobiledata: \"alphabet font letter text type\",\n    emoji_emotions: \"emoticon expressions face feelings glad happiness happy like mood person pleased smiley smiling social survey\",\n    emoji_events: \"achievement award chalice champion cup first prize reward sport trophy winner\",\n    emoji_food_beverage: \"coffee cup dring drink mug plate set tea\",\n    emoji_nature: \"animal bee daisy flower honey insect ladybug petals spring summer\",\n    emoji_objects: \"creative idea lamp lightbulb solution thinking\",\n    emoji_people: \"arm body greeting human person social wave waving\",\n    emoji_symbols: \"ampersand character hieroglyph music note percent sign\",\n    emoji_transportation: \"architecture automobile building cars commute company direction estate maps office place public real residence residential shelter travel vehicle\",\n    energy_savings_leaf: \"eco leaves nest usage\",\n    engineering: \"body cogs cogwheel construction fixing gears hat helmet human maintenance people person setting worker\",\n    enhanced_encryption: \"+ add locked new password plus privacy private protection safety secure security symbol\",\n    equalizer: \"adjustment analytics chart data graph measure metrics music noise sound static statistics tracking volume\",\n    error: \"! alert announcement attention caution circle danger exclamation feedback important mark notification problem symbol warning\",\n    error_outline: \"! alert announcement attention caution circle danger exclamation feedback important mark notification problem symbol warning\",\n    escalator: \"down staircase up\",\n    escalator_warning: \"body child human kid parent people person\",\n    euro: \"bill card cash coin commerce cost credit currency dollars euros finance money online payment price profit shopping symbol\",\n    euro_symbol: \"bill card cash coin commerce cost credit currency dollars finance money online payment price profit\",\n    event: \"agenda calendar date item mark month range remember reminder today week\",\n    event_available: \"agenda approve calendar check complete done item mark ok schedule select tick time validate verified yes\",\n    event_busy: \"agenda calendar cancel close date exit item no remove schedule stop time unavailable\",\n    event_note: \"agenda calendar date item schedule text time writing\",\n    event_repeat: \"around calendar date day inprogress loading month refresh renew rotate schedule turn\",\n    event_seat: \"assigned bench chair furniture reservation row section sit\",\n    ev_station: \"automobile cars charge charging electricity filling fuel gasoline maps places power station transportation vehicle\",\n    exit_to_app: \"application arrow back components design export interface layout leave login logout mobile monitor move output phone pointing quit register right screen signin signout signup tablet ux website window\",\n    expand: \"arrows compress enlarge grow move push together\",\n    expand_circle_down: \"arrows chevron collapse direction expandable list more\",\n    expand_less: \"arrows chevron collapse direction expandable list up\",\n    expand_more: \"arrows chevron collapse direction down expandable list\",\n    explicit: \"adult alphabet character content font language letter media movies music parent rating supervision symbol text type\",\n    explore: \"compass destination direction east location maps needle north south travel west\",\n    explore_off: \"compass destination direction disabled east enabled location maps needle north slash south travel west\",\n    exposure: \"add brightness contrast editing effect image minus photography picture plus settings subtract\",\n    extension: \"add-ons app extended game item jigsaw piece plugin puzzle shape\",\n    extension_off: \"disabled enabled extended jigsaw piece puzzle shape slash\",\n    face: \"account avatar emoji eyes human login logout people person profile recognition security social thumbnail unlock user\",\n    facebook: \"brand logo social\",\n    face_retouching_natural: \"editing effect emoji emotion faces image photography settings star tag\",\n    face_retouching_off: \"disabled editing effect emoji emotion enabled faces image natural photography settings slash tag\",\n    fact_check: \"approve complete done list mark ok select tick validate verified yes\",\n    factory: \"industry manufacturing warehouse\",\n    family_restroom: \"bathroom children father kids mother parents wc\",\n    fastfood: \"drink hamburger maps meal places\",\n    fast_forward: \"control ff media music play speed time tv video\",\n    fast_rewind: \"back control media music play speed time tv video\",\n    favorite: \"appreciate health heart like love remember save shape success\",\n    favorite_border: \"health heart like love outline remember save shape success\",\n    fax: \"machine office phone send\",\n    featured_play_list: \"audio collection highlighted item music playlist recommended\",\n    featured_video: \"advertisement advertisment highlighted item play recommended watch,advertised\",\n    feed: \"article headline information newspaper public social timeline\",\n    feedback: \"! alert announcement attention bubble caution chat comment communicate danger error exclamation important mark message notification speech symbol warning\",\n    female: \"gender girl lady social symbol woman women\",\n    fence: \"backyard barrier boundaries boundary home house protection\",\n    festival: \"circus event local maps places tent tour travel\",\n    fiber_dvr: \"alphabet character digital electronics font letter network recorder symbol text tv type video\",\n    fiber_manual_record: \"circle dot play watch\",\n    fiber_new: \"alphabet character font letter network symbol text type\",\n    fiber_pin: \"alphabet character font letter network symbol text type\",\n    fiber_smart_record: \"circle dot play watch\",\n    fifteen_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    file_copy: \"bill clone content cut document duplicate invoice item multiple page past\",\n    file_download: \"arrows downloads drive export install upload\",\n    file_download_done: \"arrows check downloads drive installed tick upload\",\n    file_download_off: \"arrow disabled drive enabled export install on save slash upload\",\n    file_open: \"arrow document drive left page paper\",\n    file_present: \"clip data document drive folders note paper reminder sheet slide storage writing\",\n    file_upload: \"arrows download drive export\",\n    filter: \"editing effect image landscape mountains photography picture settings\",\n    filter_1: \"digit editing effect images multiple number photography pictures settings stack symbol\",\n    filter_2: \"digit editing effect images multiple number photography pictures settings stack symbol\",\n    filter_3: \"digit editing effect images multiple number photography pictures settings stack symbol\",\n    filter_4: \"digit editing effect images multiple number photography pictures settings stack symbol\",\n    filter_5: \"digit editing effect images multiple number photography pictures settings stack symbol\",\n    filter_6: \"digit editing effect images multiple number photography pictures settings stack symbol\",\n    filter_7: \"digit editing effect images multiple number photography pictures settings stack symbol\",\n    filter_8: \"digit editing effect images multiple number photography pictures settings stack symbol\",\n    filter_9: \"digit editing effect images multiple number photography pictures settings stack symbol\",\n    filter_9_plus: \"+ digit editing effect images multiple number photography pictures settings stack symbol\",\n    filter_alt: \"edit funnel options refine sift\",\n    filter_alt_off: \"[offline] disabled edit funnel options refine sift slash\",\n    filter_b_and_w: \"black contrast editing effect grayscale images photography pictures settings white\",\n    filter_center_focus: \"camera dot edit image photography picture\",\n    filter_drama: \"camera cloud editing effect image photography picture sky\",\n    filter_frames: \"boarders border camera center editing effect filters focus image options photography picture\",\n    filter_hdr: \"camera editing effect image mountains photography picture\",\n    filter_list: \"lines organize sort\",\n    filter_list_off: \"[offline] alt disabled edit options refine sift slash\",\n    filter_none: \"multiple stack\",\n    filter_tilt_shift: \"blur center editing effect focus images photography pictures\",\n    filter_vintage: \"editing effect flower images photography pictures\",\n    find_in_page: \"data document drive file folders glass look magnifying paper search see sheet slide writing\",\n    find_replace: \"around arrows glass inprogress loading look magnifying refresh renew rotate search see\",\n    fingerprint: \"biometrics identification identity reader thumbprint touchid verification\",\n    fire_extinguisher: \"emergency water\",\n    fireplace: \"chimney flame home house living pit room warm winter\",\n    first_page: \"arrow back chevron left rewind\",\n    fitbit: \"athlete athletic exercise fitness hobby\",\n    fitness_center: \"athlete dumbbell exercise gym health hobby places sport weights workout\",\n    fit_screen: \"enlarge format layout reduce scale size\",\n    five_g: \"5g alphabet cellular character data digit font letter mobile network number phone signal speed symbol text type wifi\",\n    five_k: \"5000 5K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    five_k_plus: \"+ 5000 5K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    five_mp: \"camera digit font image letters megapixels number quality resolution symbol text type\",\n    fivteen_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    flag: \"country goal mark nation report start\",\n    flag_circle: \"country goal mark nation report round start\",\n    flaky: \"approve check close complete contrast done exit mark no ok options select stop tick verified yes\",\n    flare: \"bright editing effect images lensflare light photography pictures shine sparkle star sun\",\n    flash_auto: \"camera electric fast lightning thunderbolt\",\n    flashlight_off: \"disabled enabled on slash\",\n    flashlight_on: \"disabled enabled off slash\",\n    flash_off: \"camera disabled electric enabled fast lightning on slash thunderbolt\",\n    flash_on: \"camera disabled electric enabled fast lightning off slash thunderbolt\",\n    flatware: \"cafeteria cutlery diner dining eating fork room spoon\",\n    flight: \"airplane airport flying transportation travel trip\",\n    flight_class: \"airplane business first seat transportation travel trip window\",\n    flight_land: \"airplane airport arrival arriving flying landing transportation travel\",\n    flight_takeoff: \"airplane airport departed departing flying landing transportation travel\",\n    flip: \"editing image orientation scanning\",\n    flip_camera_android: \"center editing front image mobile orientation rear reverse rotate turn\",\n    flip_camera_ios: \"android editing front image mobile orientation rear reverse rotate turn\",\n    flip_to_back: \"arrangement format front layout move order sort\",\n    flip_to_front: \"arrangement back format layout move order sort\",\n    flutter_dash: \"bird mascot\",\n    fmd_bad: \"! alert attention caution danger destination direction error exclamation important location maps mark notification pin place symbol warning\",\n    fmd_good: \"destination direction location maps pin place stop\",\n    folder: \"data directory document drive file folders sheet slide storage\",\n    folder_delete: \"bin can data document drive file folders garbage remove sheet slide storage trash\",\n    folder_off: \"[online] data disabled document drive enabled file folders sheet slash slide storage\",\n    folder_open: \"data directory document drive file folders sheet slide storage\",\n    folder_shared: \"account collaboration data directory document drive face human people person profile sheet slide storage team user\",\n    folder_special: \"bookmark data directory document drive favorite file highlight important marked saved shape sheet slide star storage\",\n    folder_zip: \"compress data document drive file folders open sheet slide storage\",\n    follow_the_signs: \"arrow body directional human people person right social\",\n    font_download: \"A alphabet character letter square symbol text type\",\n    font_download_off: \"alphabet character disabled enabled letter slash square symbol text type\",\n    food_bank: \"architecture building charity eat estate fork house knife meal place real residence residential shelter utensils\",\n    forest: \"jungle nature plantation plants trees woodland\",\n    fork_left: \"arrows directions maps navigation path route sign traffic\",\n    fork_right: \"arrows directions maps navigation path route sign traffic\",\n    format_align_center: \"alignment doc editing editor lines spreadsheet text type writing\",\n    format_align_justify: \"alignment density doc editing editor extra lines small spreadsheet text type writing\",\n    format_align_left: \"alignment doc editing editor lines spreadsheet text type writing\",\n    format_align_right: \"alignment doc editing editor lines spreadsheet text type writing\",\n    format_bold: \"B alphabet character doc editing editor font letter spreadsheet styles symbol text type writing\",\n    format_clear: \"T alphabet character disabled doc editing editor enabled font letter off slash spreadsheet style symbol text type writing\",\n    format_color_fill: \"bucket doc editing editor paint spreadsheet style text type writing\",\n    format_color_reset: \"clear disabled doc droplet editing editor enabled fill liquid off on paint slash spreadsheet style text type water writing\",\n    format_color_text: \"doc editing editor fill paint spreadsheet style type writing\",\n    format_indent_decrease: \"alignment doc editing editor indentation paragraph spreadsheet text type writing\",\n    format_indent_increase: \"alignment doc editing editor indentation paragraph spreadsheet text type writing\",\n    format_italic: \"alphabet character doc editing editor font letter spreadsheet style symbol text type writing\",\n    format_line_spacing: \"alignment doc editing editor spreadsheet text type writing\",\n    format_list_bulleted: \"alignment doc editing editor notes spreadsheet task text todo type writing\",\n    format_list_numbered: \"alignment digit doc editing editor notes spreadsheet symbol task text todo type writing\",\n    format_list_numbered_rtl: \"alignment digit doc editing editor notes spreadsheet symbol task text todo type writing\",\n    format_overline: \"alphabet character doc editing editor font letter spreadsheet style symbol text type under writing\",\n    format_paint: \"brush color doc editing editor fill paintroller spreadsheet style text type writing\",\n    format_quote: \"doc editing editor quotation spreadsheet text type writing\",\n    format_shapes: \"alphabet character color doc editing editor fill font letter paint spreadsheet style symbol text type writing\",\n    format_size: \"alphabet character color doc editing editor fill font letter paint spreadsheet style symbol text type writing\",\n    format_strikethrough: \"alphabet character doc editing editor font letter spreadsheet style symbol text type writing\",\n    format_textdirection_l_to_r: \"alignment doc editing editor ltr paragraph spreadsheet type writing\",\n    format_textdirection_r_to_l: \"alignment doc editing editor paragraph rtl spreadsheet type writing\",\n    format_underlined: \"alphabet character doc editing editor font letter spreadsheet style symbol text type writing\",\n    forum: \"bubble chat comment communicate community conversation feedback hub messages speech talk\",\n    forward: \"arrow mail message playback right sent\",\n    forward_10: \"arrow circle controls digit fast music number play rotate seconds speed symbol time video\",\n    forward_30: \"arrow circle controls digit fast music number rotate seconds speed symbol time video\",\n    forward_5: \"10 arrow circle controls digit fast music number rotate seconds speed symbol time video\",\n    forward_to_inbox: \"arrow email envelop letter message send\",\n    foundation: \"architecture base basis building construction estate home house real residential\",\n    four_g_mobiledata: \"alphabet cellular character digit font letter network number phone signal speed symbol text type wifi\",\n    four_g_plus_mobiledata: \"alphabet cellular character digit font letter network number phone signal speed symbol text type wifi\",\n    four_k: \"4000 4K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    four_k_plus: \"+ 4000 4K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    four_mp: \"camera digit font image letters megapixels number quality resolution symbol text type\",\n    fourteen_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    free_breakfast: \"beverage cafe coffee cup drink mug tea\",\n    fullscreen: \"adjust application components interface size ui ux view website\",\n    fullscreen_exit: \"adjust application components interface size ui ux view website\",\n    functions: \"average calculate count doc editing editor math sigma spreadsheet style sum text type writing\",\n    gamepad: \"buttons console controller device gaming playstation video\",\n    games: \"adjust arrows controller direction dpad gaming left move nintendo playstation right xbox\",\n    garage: \"automobile automotive cars direction maps transportation travel vehicle\",\n    gas_meter: \"droplet energy measure nest usage water\",\n    gavel: \"agreement contract court document government hammer judge law mallet official police rules terms\",\n    gesture: \"drawing finger gestures hand line motion\",\n    get_app: \"arrows downloads export install play pointing retrieve upload\",\n    gif: \"alphabet animated animation bitmap character font format graphics interchange letter symbol text type\",\n    gif_box: \"alphabet animated animation bitmap character font format graphics interchange letter symbol text type\",\n    girl: \"body female gender human lady people person social symbol woman women\",\n    gite: \"architecture estate home hostel house maps place real residence residential stay traveling\",\n    git_hub: \"brand code\",\n    g_mobiledata: \"alphabet character font letter network service symbol text type\",\n    golf_course: \"athlete athletic ball club entertainment flag golfer golfing hobby hole places putt sports\",\n    google: \"brand logo\",\n    gpp_bad: \"cancel certified close error exit no privacy private protection remove security shield sim stop verified\",\n    gpp_good: \"certified check ok pass security shield sim tick\",\n    gpp_maybe: \"! alert attention caution certified danger error exclamation important mark notification privacy private protection security shield sim symbol verified warning\",\n    gps_fixed: \"destination direction location maps pin place pointer stop tracking\",\n    gps_not_fixed: \"destination direction disabled enabled fixed location maps not off online place pointer slash tracking\",\n    gps_off: \"destination direction disabled enabled fixed location maps not offline place pointer slash tracking\",\n    grade: \"achievement important likes marked rated rating reward saved shape special star\",\n    gradient: \"color editing effect filter images photography pictures\",\n    grading: \"approve check complete document done feedback grade mark ok reviewed select tick validate verified writing yes\",\n    grain: \"dots editing effect filter images photography pictures\",\n    graphic_eq: \"audio equalizer music recording sound voice\",\n    grass: \"backyard fodder ground home lawn plant turf\",\n    grid3x3: \"layout line space\",\n    grid4x4: \"by layout lines space\",\n    grid_goldenratio: \"layout lines space\",\n    grid_off: \"collage disabled enabled image layout on slash view\",\n    grid_on: \"collage disabled enabled image layout off sheet slash view\",\n    grid_view: \"application blocks components dashboard design interface layout screen square tiles ui ux website window\",\n    group: \"accounts committee face family friends humans network people persons profiles social team users\",\n    group_add: \"accounts committee face family friends humans increase more network people persons plus profiles social team users\",\n    group_remove: \"accounts committee face family friends humans network people persons profiles social team users\",\n    groups: \"body club collaboration crowd gathering human meeting people person social teams\",\n    group_work: \"alliance circle collaboration film partnership reel teamwork together\",\n    g_translate: \"emblem google language logo mark speaking speech translator words\",\n    hail: \"body human people person pick public stop taxi transportation\",\n    handyman: \"build construction fix hammer repair screwdriver tools\",\n    hardware: \"break construction hammer nail repair tool\",\n    hd: \"alphabet character definition display font high letter movies quality resolution screen symbol text tv type video\",\n    hdr_auto: \"A alphabet camera character circle dynamic font high letter photo range symbol text type\",\n    hdr_auto_select: \"+ A alphabet camera character circle dynamic font high letter photo range symbol text type\",\n    hdr_enhanced_select: \"add alphabet character dynamic font high letter plus range symbol text type\",\n    hdr_off: \"alphabet character disabled dynamic enabled enhance font high letter range select slash symbol text type\",\n    hdr_off_select: \"alphabet camera character circle disabled dynamic enabled font high letter photo range slash symbol text type\",\n    hdr_on: \"add alphabet character dynamic enhance font high letter plus range select symbol text type\",\n    hdr_on_select: \"+ alphabet camera character circle dynamic font high letter photo range symbol text type\",\n    hdr_plus: \"+ add alphabet character circle dynamic enhance font high letter range select symbol text type\",\n    hdr_strong: \"circles dots dynamic enhance high range\",\n    hdr_weak: \"circles dots dynamic enhance high range\",\n    headphones: \"accessory audio device earphone headset listen music sound\",\n    headphones_battery: \"accessory audio charging device earphone headset listen music sound\",\n    headset: \"accessory audio device earbuds earmuffs earphone headphones listen music sound\",\n    headset_mic: \"accessory audio chat device earphone headphones listen music sound talk\",\n    headset_off: \"accessory audio chat device disabled earphone enabled headphones listen mic music slash sound talk\",\n    healing: \"bandage bandaid editing emergency fix health hospital image medicine\",\n    health_and_safety: \"+ add certified plus privacy private protection security shield symbol verified\",\n    hearing: \"accessibility accessible aid handicap help impaired listen sound volume\",\n    hearing_disabled: \"accessibility accessible aid enabled handicap help impaired listen off on slash sound volume\",\n    heart_broken: \"break core crush health nucleus split\",\n    heat_pump: \"air conditioner cool energy furnance nest usage\",\n    height: \"arrows color doc down editing editor fill format paint resize spreadsheet stretch style text type up writing\",\n    help: \"? alert announcement assistance circle information mark punctuation question shape support symbol\",\n    help_center: \"? assistance information mark punctuation question support symbol\",\n    help_outline: \"? alert announcement assistance circle information mark punctuation question shape support symbol\",\n    hevc: \"alphabet character coding efficiency font high letter symbol text type video\",\n    hexagon: \"shape sides six\",\n    hide_image: \"disabled enabled landscape mountains off on photography picture slash\",\n    hide_source: \"circle disabled enabled offline on shape slash\",\n    highlight: \"color doc editing editor emphasize fill flashlight format marker paint spreadsheet style text type writing\",\n    highlight_alt: \"arrow box click cursor draw focus pointer selection target\",\n    highlight_off: \"cancel circle clear click close delete disable exit focus no quit remove stop target times\",\n    high_quality: \"alphabet character definition display font hq letter movies resolution screen symbol text tv type\",\n    hiking: \"backpacking bag climbing duffle mountain social sports stick trail travel walking\",\n    history: \"arrow backwards clock date refresh renew reverse revert rotate schedule time turn undo\",\n    history_edu: \"document education feather letter paper pen quill school tools write writing\",\n    history_toggle_off: \"clock date schedule time\",\n    hls: \"alphabet character developer engineering font letter platform symbol text type\",\n    hls_off: \"[offline] alphabet character developer disabled enabled engineering font letter platform slash symbol text type\",\n    h_mobiledata: \"alphabet character font letter network service symbol text type\",\n    holiday_village: \"architecture beach camping cottage estate home house lake lodge maps place real residence residential stay traveling vacation\",\n    home: \"address application--house architecture building components design estate homepage interface layout place real residence residential screen shelter structure unit ux website window\",\n    home_max: \"device gadget hardware internet iot nest smart things\",\n    home_mini: \"Internet device gadget hardware iot nest smart things\",\n    home_repair_service: \"equipment fix kit mechanic repairing toolbox tools workshop\",\n    home_work: \"architecture building estate house office place real residence residential shelter\",\n    horizontal_rule: \"gmail line novitas\",\n    horizontal_split: \"bars format layout lines stacked\",\n    hotel: \"bed body human people person sleep stay travel trip\",\n    hot_tub: \"bathing bathroom bathtub hotel human jacuzzi person shower spa steam travel water\",\n    hourglass_bottom: \"countdown half loading minutes time waiting\",\n    hourglass_disabled: \"clock countdown empty enabled loading minutes off on slash time waiting\",\n    hourglass_empty: \"countdown loading minutes start time waiting\",\n    hourglass_full: \"countdown loading minutes time waiting\",\n    hourglass_top: \"countdown half loading minutes time waiting\",\n    house: \"architecture building estate family homepage places real residence residential shelter\",\n    houseboat: \"architecture beach estate floating home maps place real residence residential sea stay traveling vacation\",\n    house_siding: \"architecture building construction estate exterior facade home real residential\",\n    how_to_reg: \"approve ballot check complete done election mark ok poll register registration select tick to validate verified vote yes\",\n    how_to_vote: \"ballot election poll\",\n    h_plus_mobiledata: \"+ alphabet character font letter network service symbol text type\",\n    html: \"alphabet brackets character code css developer engineering font letter platform symbol text type\",\n    http: \"alphabet character font internet letter network symbol text transfer type url website\",\n    https: \"connection encrypt internet key locked network password privacy private protection safety secure security ssl web\",\n    hub: \"center connection core focal network nucleus point topology\",\n    hvac: \"air conditioning heating ventilation\",\n    icecream: \"dessert food snack\",\n    ice_skating: \"athlete athletic entertainment exercise hobby shoe skates social sports travel\",\n    image: \"disabled enabled frame hide landscape mountains off on photography picture slash\",\n    image_aspect_ratio: \"photography picture rectangle square\",\n    image_not_supported: \"disabled enabled landscape mountains off on photography picture slash\",\n    image_search: \"find glass landscape look magnifying mountains photography picture see\",\n    imagesearch_roller: \"art paint\",\n    important_devices: \"Android cell computer desktop hardware iOS mobile monitor phone star tablet web\",\n    import_contacts: \"address book friends information magazine open\",\n    import_export: \"arrows direction down explort up\",\n    inbox: \"archive email incoming message\",\n    indeterminate_check_box: \"application button components control design form interface minus screen selected selection square toggle ui undetermined ux website\",\n    info: \"about alert announcement announcment assistance bubble circle details help information service support\",\n    input: \"arrow box download login move right\",\n    insert_chart: \"analytics barchart bars data diagram infographic measure metrics statistics tracking\",\n    insert_chart_outlined: \"analytics bars data diagram infographic measure metrics statistics tracking\",\n    insert_comment: \"add bubble chat feedback message\",\n    insert_drive_file: \"bill document format invoice item sheet slide\",\n    insert_emoticon: \"account emoji face happy human like people person profile sentiment smiley user\",\n    insert_invitation: \"agenda calendar date event mark month range remember reminder today week\",\n    insert_link: \"add anchor attach clip file mail media\",\n    insert_page_break: \"document file paper\",\n    insert_photo: \"image landscape mountains photography picture wallpaper\",\n    insights: \"analytics bars chart data diagram infographic measure metrics stars statistics tracking\",\n    instagram: \"brand logo social\",\n    install_desktop: \"Android chrome device display fix hardware iOS mac monitor place pwa screen web window\",\n    install_mobile: \"Android cell device hardware iOS phone pwa tablet\",\n    integration_instructions: \"brackets clipboard code css developer document engineering html platform\",\n    interests: \"circle heart shapes social square triangle\",\n    interpreter_mode: \"language microphone person speaking symbol\",\n    inventory: \"archive box buy check clipboard document e-commerce file list organize packages product purchase shop stock store supply\",\n    inventory2: \"archive box file organize packages product stock storage supply\",\n    invert_colors: \"droplet editing hue inverted liquid palette tone water\",\n    invert_colors_off: \"disabled droplet enabled hue inverted liquid offline opacity palette slash tone water\",\n    ios_share: \"arrows button direction export internet link send sharing social up website\",\n    iron: \"appliance clothes electric ironing machine object\",\n    iso: \"add editing effect image minus photography picture plus sensor shutter speed subtract\",\n    javascript: \"alphabet brackets character code css developer engineering font html letter platform symbol text type\",\n    join_full: \"circle combine command left outter right sql\",\n    join_inner: \"circle command matching sql values\",\n    join_left: \"circle command matching sql values\",\n    join_right: \"circle command matching sql values\",\n    kayaking: \"athlete athletic body canoe entertainment exercise hobby human lake paddle paddling people person rafting river row social sports summer travel water\",\n    key: \"blackout password restricted secret unlock\",\n    keyboard: \"computer device hardware input keypad letter office text type\",\n    keyboard_alt: \"computer device hardware input keypad letter office text type\",\n    keyboard_arrow_down: \"arrows chevron open\",\n    keyboard_arrow_left: \"arrows chevron\",\n    keyboard_arrow_right: \"arrows chevron open start\",\n    keyboard_arrow_up: \"arrows chevron submit\",\n    keyboard_backspace: \"arrow left\",\n    keyboard_capslock: \"arrow up\",\n    keyboard_command_key: \"button command control key\",\n    keyboard_control_key: \"control key\",\n    keyboard_double_arrow_down: \"arrows direction multiple navigation\",\n    keyboard_double_arrow_left: \"arrows direction multiple navigation\",\n    keyboard_double_arrow_right: \"arrows direction multiple navigation\",\n    keyboard_double_arrow_up: \"arrows direction multiple navigation\",\n    keyboard_hide: \"arrow computer device down hardware input keypad text\",\n    keyboard_option_key: \"alt key modifier\",\n    keyboard_return: \"arrow back left\",\n    keyboard_tab: \"arrow next right\",\n    keyboard_voice: \"microphone noise recorder speaker\",\n    key_off: \"[offline] disabled enabled on password slash unlock\",\n    king_bed: \"bedroom double furniture home hotel house night pillows queen rest sleep\",\n    kitchen: \"appliance cabinet cold food freezer fridge home house ice places refrigerator storage\",\n    kitesurfing: \"athlete athletic beach body entertainment exercise hobby human people person social sports travel water\",\n    label: \"badge favorite indent item library mail remember save stamp sticker tag\",\n    label_important: \"badge favorite important. indent item library mail remember save stamp sticker tag wing\",\n    label_off: \"disabled enabled favorite indent library mail on remember save slash stamp sticker tag wing\",\n    lan: \"computer connection data internet network service\",\n    landscape: \"image mountains nature photography picture\",\n    language: \"country earth globe i18n internet l10n planet website world www\",\n    laptop: \"Android chrome computer connect desktop device display hardware iOS link mac monitor smart tv web windows\",\n    laptop_chromebook: \"Android chromebook device display hardware iOS mac monitor screen web window\",\n    laptop_mac: \"Android apple chrome device display hardware iOS monitor screen web window\",\n    laptop_windows: \"Android chrome device display hardware iOS mac monitor screen web\",\n    last_page: \"application arrow chevron components end forward interface right screen ui ux website\",\n    launch: \"application arrow box components core interface internal new open screen ui ux website window\",\n    layers: \"arrange disabled enabled interaction maps off overlay pages slash stack\",\n    layers_clear: \"arrange delete disabled enabled interaction maps off overlay pages slash\",\n    leaderboard: \"analytics bars chart data diagram infographic measure metrics statistics tracking\",\n    leak_add: \"connection data link network service signals synce wireless\",\n    leak_remove: \"connection data disabled enabled link network offline service signals slash synce wireless\",\n    legend_toggle: \"analytics chart data diagram infographic measure metrics monitoring stackdriver statistics tracking\",\n    lens: \"circle full geometry moon\",\n    lens_blur: \"camera dim dot effect foggy fuzzy image photo soften\",\n    library_add: \"+ collection layers multiple music new plus save stacked symbol video\",\n    library_add_check: \"approve collection complete done layers mark multiple music ok select stacked tick validate verified video yes\",\n    library_books: \"add album audio collection reading\",\n    library_music: \"add album audio collection song sounds\",\n    light: \"bulb ceiling hanging inside interior lamp lighting pendent room\",\n    lightbulb: \"alert announcement idea information learning mode\",\n    lightbulb_circle: \"alert announcement idea information\",\n    light_mode: \"brightness day device lighting morning mornng sky sunny\",\n    linear_scale: \"application components design interface layout measure menu screen slider ui ux website window\",\n    line_axis: \"dash horizontal stroke vertical\",\n    line_style: \"dash dotted editor rule spacing\",\n    line_weight: \"editor height size spacing style thickness\",\n    link: \"anchor chain clip connection external hyperlink linked links multimedia unlisted url\",\n    linked_camera: \"connection lens network photography picture signals sync wireless\",\n    linked_in: \"brand logo social\",\n    link_off: \"anchor attached chain clip connection disabled enabled linked links multimedia slash unlink url\",\n    liquor: \"alcohol bar bottle club cocktail drink food party store wine\",\n    list: \"editor file format index menu options playlist task todo\",\n    list_alt: \"box contained editor format lines reorder sheet stacked task title todo\",\n    live_help: \"? alert announcement assistance bubble chat comment communicate faq information mark message punctuation question speech support symbol\",\n    live_tv: \"Android antennas chrome desktop device hardware iOS mac monitor movie play stream television web window\",\n    living: \"chair comfort couch decoration furniture home house lounging loveseat room seating sofa\",\n    local_activity: \"event star things ticket\",\n    local_airport: \"airplane flight flying transportation travel trip\",\n    local_atm: \"bill card cart cash coin commerce credit currency dollars financial money online payment price profit shopping symbol\",\n    local_bar: \"alcohol bottle club cocktail drink food liquor martini wine\",\n    local_cafe: \"bottle coffee cup drink food mug restaurant tea\",\n    local_car_wash: \"automobile cars maps transportation travel vehicle\",\n    local_convenience_store: \"-- 24 bill building business card cash coin commerce company credit currency dollars maps market money new online payment plus shopping storefront symbol\",\n    local_dining: \"cutlery eat food fork knife meal restaurant spoon\",\n    local_drink: \"cup droplet glass liquid park water\",\n    local_fire_department: \"911 firefighter flame hot\",\n    local_florist: \"flower shop\",\n    local_gas_station: \"auto car filling fuel gasoline oil station vehicle\",\n    local_grocery_store: \"market shop\",\n    local_hospital: \"911 aid cross doctor emergency first health medical medicine plus\",\n    local_hotel: \"bed body human people person sleep stay travel trip\",\n    local_laundry_service: \"cleaning clothing dryer hotel washer\",\n    local_library: \"book community learning person read\",\n    local_mall: \"bill building business buy card cart cash coin commerce credit currency dollars handbag money online payment shopping storefront\",\n    local_offer: \"deal discount price shopping store tag\",\n    local_parking: \"alphabet auto car character font garage letter symbol text type vehicle\",\n    local_pharmacy: \"911 aid cross emergency first food hospital medicine places\",\n    local_phone: \"booth call telecommunication\",\n    local_pizza: \"drink fastfood meal\",\n    local_police: \"911 badge law officer protection security shield\",\n    local_post_office: \"delivery email envelop letter message package parcel postal send stamp\",\n    local_printshop: \"draft fax ink machine office paper printer send\",\n    local_see: \"camera lens photography picture\",\n    local_shipping: \"automobile cars delivery letter mail maps office package parcel postal semi send shopping stamp transportation truck vehicle\",\n    local_taxi: \"automobile cab call cars direction lyft maps public transportation uber vehicle yellow\",\n    location_city: \"apartments architecture buildings business company estate home landscape place real residence residential shelter town urban\",\n    location_disabled: \"destination direction enabled maps off pin place pointer slash stop tracking\",\n    location_off: \"destination direction disabled enabled gps maps pin place room slash stop\",\n    location_on: \"destination direction disabled enabled gps maps off pin place room slash stop\",\n    location_searching: \"destination direction maps pin place pointer stop tracking\",\n    lock: \"connection key locked logout padlock password privacy private protection safety secure security signout\",\n    lock_clock: \"date locked password privacy private protection safety schedule secure security time\",\n    lock_open: \"connection key login padlock password privacy private protection register safety secure security signin signup unlocked\",\n    lock_reset: \"around inprogress loading locked password privacy private protection refresh renew rotate safety secure security turn\",\n    login: \"access application arrow components design enter interface left screen ui ux website\",\n    logo_dev: \"dev.to\",\n    logout: \"application arrow components design exit interface leave login right screen ui ux website\",\n    looks: \"circle half rainbow\",\n    looks_3: \"digit numbers square symbol\",\n    looks_4: \"digit numbers square symbol\",\n    looks_5: \"digit numbers square symbol\",\n    looks_6: \"digit numbers square symbol\",\n    looks_one: \"1 digit numbers square symbol\",\n    looks_two: \"2 digit numbers square symbol\",\n    loop: \"around arrows direction inprogress loader loading music navigation refresh renew repeat rotate turn\",\n    loupe: \"+ add details focus glass magnifying new plus symbol\",\n    low_priority: \"arrange arrow backward bottom list move order task todo\",\n    loyalty: \"badge card credit heart love membership miles points program sale subscription tag travel trip\",\n    lte_mobiledata: \"alphabet character font internet letter network speed symbol text type wifi wireless\",\n    lte_plus_mobiledata: \"+ alphabet character font internet letter network speed symbol text type wifi wireless\",\n    luggage: \"airport baggage carry flight hotel on suitcase travel trip\",\n    lunch_dining: \"breakfast dinner drink fastfood hamburger meal\",\n    lyrics: \"audio bubble chat comment communicate feedback key message music note song sound speech track\",\n    mail: \"email envelope inbox letter message send\",\n    mail_lock: \"email envelop letter locked message password privacy private protection safety secure security send\",\n    mail_outline: \"email envelope letter message note post receive send write\",\n    male: \"boy gender man social symbol\",\n    man: \"boy gender male social symbol\",\n    manage_accounts: \"change details face gear options people person profile service-human settings user\",\n    manage_search: \"glass history magnifying text\",\n    map: \"destination direction location maps pin place route stop travel\",\n    maps_home_work: \"building house office\",\n    maps_ugc: \"+ add bubble comment communicate feedback message new plus speech symbol\",\n    margin: \"design layout padding size square\",\n    mark_as_unread: \"envelop letter mail postal receive send\",\n    mark_chat_read: \"approve bubble check comment communicate complete done message ok select sent speech tick verified yes\",\n    mark_chat_unread: \"bubble circle comment communicate message notification speech\",\n    mark_email_read: \"approve check complete done envelop letter message note ok select send sent tick yes\",\n    mark_email_unread: \"check circle envelop letter message note notification send\",\n    markunread: \"email envelope letter message send\",\n    markunread_mailbox: \"deliver envelop letter postal postbox receive send\",\n    masks: \"air cover covid face hospital medical pollution protection respirator sick social\",\n    maximize: \"application components design interface line screen shape ui ux website\",\n    media_bluetooth_off: \"connection connectivity device disabled enabled music note offline paring signal slash symbol wireless\",\n    media_bluetooth_on: \"connection connectivity device disabled enabled music note off online paring signal slash symbol wireless\",\n    mediation: \"alternative arrows compromise direction dots negotiation party right structure\",\n    medical_services: \"aid bag briefcase emergency first kit medicine\",\n    medication: \"doctor drug emergency hospital medicine pharmacy pills prescription\",\n    meeting_room: \"building doorway entrance home house interior logout office open places signout\",\n    memory: \"card chip digital micro processor sd storage\",\n    menu: \"application components hamburger interface lines playlist screen ui ux website\",\n    menu_book: \"dining food meal page restaurant\",\n    menu_open: \"application arrow chevron components hamburger interface left lines screen ui ux website\",\n    merge: \"arrows directions maps navigation path route sign traffic\",\n    merge_type: \"arrow combine direction format text\",\n    message: \"bubble chat comment communicate feedback speech talk text\",\n    mic: \"hearing microphone noise record search sound speech voice\",\n    mic_external_off: \"audio disabled enabled microphone slash sound voice\",\n    mic_external_on: \"audio disabled enabled microphone off slash sound voice\",\n    mic_none: \"hearing microphone noise record sound voice\",\n    mic_off: \"audio disabled enabled hearing microphone noise recording slash sound voice\",\n    microwave: \"appliance cooking electric heat home house kitchen machine\",\n    military_tech: \"army award badge honor medal merit order privilege prize rank reward ribbon soldier star status trophy winner\",\n    minimize: \"application components design interface line screen shape ui ux website\",\n    missed_video_call: \"arrow camera filming hardware image motion picture record videography\",\n    mms: \"bubble chat comment communicate feedback image landscape message mountains multimedia photography picture speech\",\n    mobiledata_off: \"arrow disabled down enabled internet network on slash speed up wifi wireless\",\n    mobile_friendly: \"Android approve cell check complete device done hardware iOS mark ok phone select tablet tick validate verified yes\",\n    mobile_off: \"Android cell device disabled enabled hardware iOS phone silence slash tablet\",\n    mobile_screen_share: \"Android arrow cell device hardware iOS mirror monitor phone screencast streaming tablet tv wireless\",\n    mode: \"compose create draft draw edit pencil write\",\n    mode_comment: \"bubble chat comment communicate feedback message mode speech\",\n    mode_edit: \"compose create draft draw pencil write\",\n    mode_edit_outline: \"compose create draft draw pencil write\",\n    model_training: \"arrow bulb idea inprogress light loading refresh renew restore reverse rotate\",\n    mode_night: \"dark disturb moon sleep weather\",\n    mode_of_travel: \"arrow destination direction location maps pin place stop transportation trip\",\n    mode_standby: \"disturb power sleep target\",\n    monetization_on: \"bill card cash circle coin commerce cost credit currency dollars finance money online payment price profit sale shopping symbol\",\n    money: \"100 bill card cash coin commerce cost credit currency digit dollars finance number online payment price profit shopping symbol\",\n    money_off: \"bill card cart cash coin commerce credit currency disabled dollars enabled finance money online payment price profit shopping slash symbol\",\n    money_off_csred: \"bill card cart cash coin commerce credit currency disabled dollars enabled online payment shopping slash symbol\",\n    monitor: \"Android chrome device display hardware iOS mac screen web window\",\n    monitor_weight: \"body device diet health scale smart\",\n    monochrome_photos: \"black camera image photography picture white\",\n    mood: \"emoji emoticon emotions expressions face feelings glad happiness happy like person pleased smiley smiling social survey\",\n    mood_bad: \"disappointment dislike emoji emoticon emotions expressions face feelings person rating smiley social survey unhappiness unhappy unpleased unsmile unsmiling\",\n    moped: \"automobile bike cars direction maps motorized public scooter transportation vehicle vespa\",\n    more: \"3 archive badge bookmark dots etc favorite indent label remember save stamp sticker tab tag three\",\n    more_horiz: \"3 application components dots etc horizontal interface ios pending screen status three ui ux website\",\n    more_time: \"+ add clock date new plus schedule symbol\",\n    more_vert: \"3 android application components dots etc interface screen three ui ux vertical website\",\n    motion_photos_auto: \"A alphabet animation automatic character circle font gif letter live symbol text type video\",\n    motion_photos_off: \"animation circle disabled enabled slash video\",\n    mouse: \"click computer cursor device hardware wireless\",\n    move_down: \"arrow direction jump navigation transfer\",\n    move_to_inbox: \"archive arrow down email envelop incoming letter message move send to\",\n    move_up: \"arrow direction jump navigation transfer\",\n    movie: \"cinema film media screen show slate tv video watch\",\n    movie_creation: \"clapperboard film movies slate video\",\n    movie_filter: \"clapperboard creation film movies slate stars video\",\n    moving: \"arrow direction navigation travel up\",\n    mp: \"alphabet character font image letter megapixel photography pixels quality resolution symbol text type\",\n    multiline_chart: \"analytics bars data diagram infographic line measure metrics multiple statistics tracking\",\n    multiple_stop: \"arrows directions dots left maps navigation right\",\n    museum: \"architecture attraction building estate event exhibition explore local palces places real see shop store tour\",\n    music_note: \"audiotrack key sound\",\n    music_off: \"audiotrack disabled enabled key note on slash sound\",\n    music_video: \"band mv recording screen tv watch\",\n    my_location: \"destination direction maps navigation pin place point stop\",\n    nat: \"communication\",\n    nature: \"forest outdoor outside park tree wilderness\",\n    nature_people: \"activity body forest human outdoor outside park person tree wilderness\",\n    navigate_before: \"arrows direction left\",\n    navigate_next: \"arrows direction right\",\n    navigation: \"arrow destination direction location maps pin place point stop\",\n    nearby_error: \"! alert attention caution danger exclamation important mark notification symbol warning\",\n    nearby_off: \"disabled enabled on slash\",\n    near_me: \"arrow destination direction location maps navigation pin place point stop\",\n    near_me_disabled: \"destination direction enabled location maps navigation off pin place point slash\",\n    nest_cam_wired_stand: \"camera filming hardware image motion picture videography\",\n    network_cell: \"cellular data internet mobile phone speed wifi wireless\",\n    network_check: \"connection internet meter signal speed tick wifi wireless\",\n    network_locked: \"alert available cellular connection data error internet mobile not privacy private protection restricted safety secure security service signal warning wifi wireless\",\n    network_wifi: \"cellular data internet mobile phone speed wireless\",\n    new_releases: \"! alert announcement attention burst caution danger error exclamation important mark notification star symbol warning\",\n    newspaper: \"article data document drive file folders magazine media notes page sheet slide text writing\",\n    next_plan: \"arrow circle right\",\n    next_week: \"arrow baggage briefcase business suitcase\",\n    nfc: \"communication data field mobile near wireless\",\n    nightlife: \"alcohol bar bottle club cocktail dance drink food glass liquor music note wine\",\n    nightlight: \"dark disturb mode moon sleep weather\",\n    nightlight_round: \"dark half mode moon\",\n    night_shelter: \"architecture bed building estate homeless house place real sleep\",\n    nights_stay: \"cloud crescent dark mode moon phases silence silent sky time weather\",\n    nine_k: \"9000 9K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    nine_k_plus: \"+ 9000 9K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    nine_mp: \"camera digit font image letters megapixels number quality resolution symbol text type\",\n    nineteen_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    no_accounts: \"avatar disabled enabled face human offline people person profile slash thumbnail unavailable unidentifiable unknown user\",\n    no_backpack: \"accessory bookbag knapsack travel\",\n    no_cell: \"Android device disabled enabled hardware iOS mobile off phone slash tablet\",\n    no_drinks: \"alcohol beverage bottle cocktail food liquor wine\",\n    no_encryption: \"disabled enabled lock off password safety security slash\",\n    no_encryption_gmailerrorred: \"disabled enabled locked off slash\",\n    no_flash: \"camera disabled enabled image lightning off on photography picture slash thunderbolt\",\n    no_food: \"disabled drink enabled fastfood hamburger meal off on slash\",\n    no_luggage: \"baggage carry disabled enabled off on slash suitcase travel\",\n    no_meals: \"dining disabled eat enabled food fork knife off restaurant slash spoon utensils\",\n    no_meeting_room: \"building disabled doorway enabled entrance home house interior office on open places slash\",\n    no_photography: \"camera disabled enabled image off on picture slash\",\n    nordic_walking: \"athlete athletic body entertainment exercise hiking hobby human people person social sports travel walker\",\n    north: \"arrow directional maps navigation up\",\n    north_east: \"arrow maps navigation noth right up\",\n    north_west: \"arrow directional left maps navigation up\",\n    no_sim: \"camera card device eject insert memory phone storage\",\n    no_stroller: \"baby care carriage children disabled enabled infant kid newborn off on parents slash toddler young\",\n    not_accessible: \"accessibility body handicap help human person wheelchair\",\n    note: \"bookmark message paper\",\n    note_add: \"+ -doc create data document drive file folders new page paper plus sheet slide symbol writing\",\n    note_alt: \"clipboard document file memo page paper writing\",\n    notes: \"comment document text write writing\",\n    notification_add: \"+ active alarm alert bell chime notifications notify plus reminder ring sound symbol\",\n    notification_important: \"! active alarm alert announcement attention bell caution chime danger error exclamation feedback mark notifications notify problem reminder ring sound symbol warning\",\n    notifications: \"active alarm alert bell chime notify reminder ring sound\",\n    notifications_active: \"alarm alert bell chime notify reminder ringing sound\",\n    notifications_none: \"alarm alert bell notify reminder ring sound\",\n    notifications_off: \"active alarm alert bell chime disabled enabled notify offline reminder ring slash sound\",\n    notifications_paused: \"--- active alarm aleet alert bell chime ignore notify pause quiet reminder ring sleep snooze sound zzz\",\n    not_interested: \"allowed banned cancel circle close disabled dislike exit interested not off prohibited quit remove stop\",\n    not_listed_location: \"? assistance destination direction help information maps pin place punctuation questionmark stop support symbol\",\n    no_transfer: \"automobile bus cars direction disabled enabled maps off public slash transportation vehicle\",\n    not_started: \"circle media pause play video\",\n    offline_bolt: \"circle electric fast flash lightning spark thunderbolt\",\n    offline_pin: \"approve checkmark circle complete done ok select tick validate verified yes\",\n    offline_share: \"Android arrow cell connect device direction hardware iOS link mobile multiple phone right tablet\",\n    oil_barrel: \"droplet gasoline nest water\",\n    ondemand_video: \"Android chrome desktop device hardware iOS mac monitor play television tv web window\",\n    on_device_training: \"arrow bulb call cell contact hardware idea inprogress light loading mobile model refresh renew restore reverse rotate telephone\",\n    one_k: \"1000 1K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    one_kk: \"10000 10K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    one_k_plus: \"+ 1000 1K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    online_prediction: \"bulb connection idea light network signal wireless\",\n    opacity: \"color droplet hue inverted liquid palette tone water\",\n    open_in_browser: \"arrow box new up website window\",\n    open_in_full: \"action arrows expand grow move\",\n    open_in_new: \"application arrow box components interface screen ui ux website window\",\n    open_in_new_off: \"arrow box disabled enabled export on slash window\",\n    open_with: \"arrows directional expand move\",\n    other_houses: \"architecture cottage estate home maps place real residence residential stay traveling\",\n    outbound: \"arrow circle directional right up\",\n    outbox: \"mail send sent\",\n    outdoor_grill: \"barbecue barbeque bbq charcoal cooking home house outside\",\n    outlet: \"connecter electricity plug power\",\n    outlined_flag: \"country goal mark nation report start\",\n    padding: \"design layout margin size square\",\n    pages: \"article gplus paper post star\",\n    pageview: \"document find glass magnifying paper search\",\n    paid: \"circle currency money payment transaction\",\n    palette: \"art colors filters paint\",\n    panorama: \"angle image mountains photography picture view wide\",\n    panorama_fish_eye: \"angle circle image photography picture wide\",\n    panorama_horizontal: \"angle image photography picture wide\",\n    panorama_horizontal_select: \"angle image photography picture wide\",\n    panorama_photosphere: \"angle horizontal image photography picture wide\",\n    panorama_photosphere_select: \"angle horizontal image photography picture wide\",\n    panorama_vertical: \"angle image photography picture wide\",\n    panorama_vertical_select: \"angle image photography picture wide\",\n    panorama_wide_angle: \"image photography picture\",\n    panorama_wide_angle_select: \"image photography picture\",\n    pan_tool: \"drag fingers gesture hands human move scan stop touch wait\",\n    paragliding: \"athlete athletic body entertainment exercise fly hobby human parachute people person skydiving social sports travel\",\n    park: \"attraction fresh local nature outside plant tree\",\n    party_mode: \"camera lens photography picture\",\n    password: \"key login pin security star unlock\",\n    pattern: \"key login password pin security star unlock\",\n    pause: \"controls media music pending player status video wait\",\n    pause_circle: \"controls media music video\",\n    pause_circle_filled: \"controls media music pending status video wait\",\n    pause_circle_outline: \"controls media music pending status video wait\",\n    pause_presentation: \"application desktop device pending screen share slides status wait website window www\",\n    payment: \"bill cash charge coin commerce cost creditcard currency dollars finance financial information money online price shopping symbol\",\n    payments: \"bill card cash coin commerce cost credit currency dollars finance layer money multiple online price shopping symbol\",\n    pedal_bike: \"automobile bicycle cars direction human maps public route scooter transportation vehicle vespa\",\n    pending: \"circle dots loading progress waiting\",\n    pending_actions: \"clipboard clock date document remember schedule time\",\n    pentagon: \"five shape sides\",\n    people: \"accounts committee community face family friends group humans network persons profiles social team users\",\n    people_alt: \"accounts committee face family friends group humans network persons profiles social team users\",\n    people_outline: \"accounts committee face family friends group humans network persons profiles social team users\",\n    percent: \"math number symbol\",\n    perm_camera_mic: \"image microphone min photography picture speaker\",\n    perm_contact_calendar: \"account agenda date face human information people person profile schedule time user\",\n    perm_data_setting: \"cellular configure gear information network settings wifi wireless\",\n    perm_device_information: \"Android alert announcement cell hardware iOS important mobile phone tablet\",\n    perm_identity: \"account avatar face human information people person profile save, thumbnail user\",\n    perm_media: \"collection data directories document file folders images landscape mountains photography picture save storage\",\n    perm_phone_msg: \"bubble call cell chat comment communicate contact device message mobile recording save speech telephone voice\",\n    perm_scan_wifi: \"alert announcement connection information internet network service signal wireless\",\n    person: \"account avatar face human people profile user\",\n    person_add: \"+ account avatar face friend human new people plus profile symbol user\",\n    person_add_alt: \"+ account face human people plus profile user\",\n    person_add_disabled: \"+ account enabled face human new offline people plus profile slash symbol user\",\n    personal_video: \"Android cam chrome desktop device hardware iOS mac monitor television tv web window\",\n    person_off: \"account avatar disabled enabled face human people profile slash user\",\n    person_outline: \"account avatar face human people profile user\",\n    person_pin: \"account avatar destination direction face gps human location maps people place profile stop user\",\n    person_pin_circle: \"account destination direction face gps human location maps people place profile stop user\",\n    person_remove: \"account avatar delete face human minus people profile unfriend user\",\n    person_search: \"account avatar face find glass human look magnifying people profile user\",\n    pest_control: \"bug exterminator insects\",\n    pest_control_rodent: \"exterminator mice\",\n    pets: \"animal cat claw dog hand paw\",\n    phishing: \"fishing fraud hook scam\",\n    phone: \"call cell chat contact device hardware mobile telephone text\",\n    phone_android: \"cell device hardware iOS mobile tablet\",\n    phone_bluetooth_speaker: \"call cell connection connectivity contact device hardware mobile signal symbol telephone wireless\",\n    phone_callback: \"arrow cell contact device down hardware mobile telephone\",\n    phone_disabled: \"call cell contact device enabled hardware mobile offline slash telephone\",\n    phone_enabled: \"call cell contact device hardware mobile telephone\",\n    phone_forwarded: \"arrow call cell contact device direction hardware mobile right telephone\",\n    phone_iphone: \"Android apple cell device hardware iOS mobile tablet\",\n    phonelink: \"Android chrome computer connect desktop device hardware iOS mac mobile sync tablet web windows\",\n    phonelink_erase: \"Android cancel cell close connection device exit hardware iOS mobile no remove stop tablet\",\n    phonelink_lock: \"Android cell connection device erase hardware iOS locked mobile password privacy private protection safety secure security tablet\",\n    phonelink_off: \"Android chrome computer connect desktop device disabled enabled hardware iOS mac mobile slash sync tablet web windows\",\n    phonelink_ring: \"Android cell connection data device hardware iOS mobile network service signal tablet wireless\",\n    phonelink_setup: \"Android call chat device hardware iOS information mobile settings tablet text\",\n    phone_locked: \"call cell contact device hardware mobile password privacy private protection safety secure security telephone\",\n    phone_missed: \"arrow call cell contact device hardware mobile telephone\",\n    phone_paused: \"call cell contact device hardware mobile telephone wait\",\n    photo: \"image mountains photography picture\",\n    photo_album: \"archive bookmark image label library mountains photography picture ribbon save tag\",\n    photo_camera: \"image photography picture\",\n    photo_camera_back: \"image landscape mountains photography picture rear\",\n    photo_camera_front: \"account face human image people person photography picture portrait profile user\",\n    photo_filter: \"filters image photography picture stars\",\n    photo_library: \"album image mountains photography picture\",\n    photo_size_select_actual: \"image mountains photography picture\",\n    photo_size_select_large: \"adjust album editing image library mountains photography picture\",\n    photo_size_select_small: \"adjust album editing image large library mountains photography picture\",\n    php: \"alphabet brackets character code css developer engineering font html letter platform symbol text type\",\n    piano: \"instrument keyboard keys musical social\",\n    piano_off: \"disabled enabled instrument keyboard keys musical on slash social\",\n    picture_as_pdf: \"alphabet character document file font image letter multiple photography symbol text type\",\n    picture_in_picture: \"cropped overlap photo position shape\",\n    picture_in_picture_alt: \"cropped overlap photo position shape\",\n    pie_chart: \"analytics bars data diagram infographic measure metrics statistics tracking\",\n    pie_chart_outline: \"analytics bars data diagram infographic measure metrics statistics tracking\",\n    pie_chart_outlined: \"graph\",\n    pin: \"1 2 3 digit key login logout number password pattern security star symbol unlock\",\n    pinch: \"arrows compress direction finger grasp hand navigation nip squeeze tweak\",\n    pin_drop: \"destination direction gps location maps navigation place stop\",\n    pinterest: \"brand logo social\",\n    pivot_table_chart: \"analytics arrows bars data diagram direction drive editing grid infographic measure metrics rotate sheet statistics tracking\",\n    pix: \"bill brazil card cash commerce credit currency finance money payment\",\n    place: \"destination direction location maps navigation pin point stop\",\n    plagiarism: \"document find glass look magnifying page paper search see\",\n    play_arrow: \"controls media music player start video\",\n    play_circle: \"arrow controls media music video\",\n    play_circle_filled: \"arrow controls media music start video\",\n    play_circle_filled_white: \"start\",\n    play_circle_outline: \"arrow controls media music start video\",\n    play_disabled: \"controls enabled media music off slash video\",\n    play_for_work: \"arrow circle down google half\",\n    play_lesson: \"audio bookmark digital ebook lesson multimedia play reading ribbon\",\n    playlist_add: \"+ collection music new plus symbol task todo\",\n    playlist_add_check: \"approve checkmark collection complete done music ok select task tick todo validate verified yes\",\n    playlist_add_check_circle: \"album artist audio cd collection mark music record sound track\",\n    playlist_add_circle: \"album artist audio cd check collection mark music record sound track\",\n    playlist_play: \"arow arrow collection music\",\n    playlist_remove: \"- collection minus music\",\n    plumbing: \"build construction fix handyman repair tools wrench\",\n    plus_one: \"1 add digit increase number symbol\",\n    podcasts: \"broadcast casting network signal transmitting wireless\",\n    point_of_sale: \"checkout cost machine merchant money payment pos retail system transaction\",\n    policy: \"certified find glass legal look magnifying privacy private protection search security see shield verified\",\n    poll: \"analytics barchart bars data diagram infographic measure metrics statistics survey tracking vote\",\n    pool: \"athlete athletic beach body entertainment exercise hobby human ocean people person places sea sports swimming water\",\n    portable_wifi_off: \"connected connection data device disabled enabled internet network offline service signal slash usage wireless\",\n    portrait: \"account face human people person photo picture profile user\",\n    post_add: \"+ data document drive file folders item page paper plus sheet slide text writing\",\n    power: \"charge cord electrical online outlet plug socket\",\n    power_input: \"dc lines supply\",\n    power_off: \"charge cord disabled electrical enabled on outlet plug slash\",\n    power_settings_new: \"information off save shutdown\",\n    precision_manufacturing: \"arm automatic chain conveyor crane factory industry machinery mechanical production repairing robot supply warehouse\",\n    pregnant_woman: \"baby birth body female human lady maternity mom mother people person user women\",\n    present_to_all: \"arrow presentation screen share slides website\",\n    preview: \"design eye layout reveal screen see show website window www\",\n    price_change: \"arrows bill card cash coin commerce cost credit currency dollars down finance money online payment shopping symbol up\",\n    price_check: \"approve bill card cash coin commerce complete cost credit currency dollars done finance mark money ok online payment select shopping symbol tick validate verified yes\",\n    print: \"draft fax ink machine office paper printer send\",\n    print_disabled: \"enabled off on paper printer slash\",\n    priority_high: \"! alert attention caution danger error exclamation important mark notification symbol warning\",\n    privacy_tip: \"alert announcement announcment assistance certified details help information private protection security service shield support verified\",\n    production_quantity_limits: \"! alert attention bill card cart cash caution coin commerce credit currency danger dollars error exclamation important mark money notification online payment shopping symbol warning\",\n    propane: \"gas nest\",\n    propane_tank: \"bbq gas grill nest\",\n    psychology: \"behavior body brain cognitive function gear head human intellectual mental mind people person preferences psychiatric science settings social therapy thinking thoughts\",\n    public: \"country earth global globe language map network planet social space web world\",\n    public_off: \"disabled earth enabled global globe map network on planet slash social space web world\",\n    publish: \"arrow cloud file import submit upload\",\n    published_with_changes: \"approve arrows check complete done inprogress loading mark ok refresh renew replace rotate select tick validate verified yes\",\n    push_pin: \"location marker place remember save\",\n    qr_code: \"barcode camera media product quick response smartphone urls\",\n    qr_code_2: \"barcode camera media product quick response smartphone urls\",\n    qr_code_scanner: \"barcode camera media product quick response smartphone urls\",\n    query_builder: \"clock date hour minute save schedule time\",\n    query_stats: \"analytics chart data diagram find glass infographic line look magnifying measure metrics search see statistics tracking\",\n    question_answer: \"bubble chat comment communicate conversation converse feedback message speech talk\",\n    question_mark: \"? assistance help information mark punctuation question support symbol\",\n    queue: \"add collection layers multiple music playlist stack stream video\",\n    queue_music: \"add collection playlist stream\",\n    queue_play_next: \"+ add arrow collection desktop device display hardware monitor music new playlist plus screen steam symbol tv video\",\n    quickreply: \"bubble chat comment communicate fast lightning message speech thunderbolt\",\n    quiz: \"? assistance faq help information mark punctuation question support symbol test\",\n    radar: \"detect military near network position scan\",\n    radio: \"antenna audio device frequency hardware listen media music player signal tune\",\n    radio_button_checked: \"application bullet circle components design form interface off point record screen selected toggle ui ux website\",\n    radio_button_unchecked: \"bullet circle deselected form off point record toggle\",\n    railway_alert: \"! attention automobile bike cars caution danger direction error exclamation important maps mark notification public scooter subway symbol train transportation vehicle vespa warning\",\n    ramen_dining: \"breakfast dinner drink fastfood lunch meal noodles restaurant\",\n    ramp_left: \"arrows directions maps navigation path route sign traffic\",\n    ramp_right: \"arrows directions maps navigation path route sign traffic\",\n    rate_review: \"chat comment feedback message pencil stars write\",\n    raw_off: \"alphabet character disabled enabled font image letter original photography slash symbol text type\",\n    raw_on: \"alphabet character disabled enabled font image letter off original photography slash symbol text type\",\n    read_more: \"arrow text\",\n    receipt: \"bill credit invoice paper payment sale transaction\",\n    receipt_long: \"bill check document list paperwork record store transaction\",\n    recent_actors: \"account avatar cards carousel contacts face human layers list people person profile thumbnail user\",\n    recommend: \"approved circle confirm favorite gesture hand like reaction social support thumbs well\",\n    record_voice_over: \"account face human people person profile recording sound speaking speech transcript user\",\n    rectangle: \"four parallelograms polygons quadrilaterals recangle shape sides\",\n    reddit: \"brand logo social\",\n    redeem: \"bill cart cash certificate coin commerce credit currency dollars giftcard money online payment present shopping\",\n    redo: \"arrow backward forward next repeat rotate undo\",\n    reduce_capacity: \"arrow body covid decrease down human people person social\",\n    refresh: \"around arrows direction inprogress loading navigation refresh renew right rotate turn\",\n    remember_me: \"Android avatar device hardware human iOS identity mobile people person phone profile tablet user\",\n    remove: \"can delete line minus negative substract subtract trash\",\n    remove_circle: \"allowed banned block can delete disable minus negative not substract trash\",\n    remove_circle_outline: \"allowed banned block can delete disable minus negative not substract trash\",\n    remove_done: \"approve check complete disabled enabled finished mark multiple off ok select slash tick yes\",\n    remove_from_queue: \"collection desktop device display hardware list monitor screen steam television\",\n    remove_moderator: \"certified disabled enabled off privacy private protection security shield slash verified\",\n    remove_red_eye: \"iris looking preview see sight vision\",\n    remove_road: \"- cancel close destination direction exit highway maps minus new no stop street symbol traffic\",\n    remove_shopping_cart: \"card cash checkout coin commerce credit currency disabled dollars enabled off online payment slash tick\",\n    reorder: \"format lines list stacked\",\n    repeat: \"arrows controls media music video\",\n    repeat_on: \"arrows controls media music video\",\n    repeat_one: \"1 arrows controls digit media music number symbol video\",\n    repeat_one_on: \"arrows controls digit media music number symbol video\",\n    replay: \"arrows controls music refresh reload renew repeat retry rewind undo video\",\n    replay_10: \"arrows controls digit music number refresh renew repeat rewind symbol ten video\",\n    replay_30: \"arrows controls digit music number refresh renew repeat rewind symbol thirty video\",\n    replay_5: \"arrows controls digit five music number refresh renew repeat rewind symbol video\",\n    replay_circle_filled: \"arrows controls music refresh renew repeat video\",\n    reply: \"arrow backward left mail message send share\",\n    reply_all: \"arrows backward group left mail message multiple send share\",\n    report: \"! alert attention caution danger error exclamation important mark notification octagon symbol warning\",\n    report_gmailerrorred: \"! alert attention caution danger exclamation important mark notification octagon symbol warning\",\n    report_off: \"! alert attention caution danger disabled enabled error exclamation important mark notification octagon offline slash symbol warning\",\n    report_problem: \"! alert announcement attention caution danger error exclamation feedback important mark notification symbol triangle warning\",\n    request_quote: \"bill card cash coin commerce cost credit currency dollars finance money online payment price shopping symbol\",\n    reset_tv: \"arrow device hardware monitor television\",\n    restart_alt: \"around arrow inprogress loading reboot refresh renew repeat reset\",\n    restaurant: \"breakfast cutlery dining dinner eat food fork knife local lunch meal places spoon utensils\",\n    restaurant_menu: \"book dining eat food fork knife local meal spoon\",\n    restore: \"arrow backwards clock date history refresh renew reverse rotate schedule time turn undo\",\n    restore_from_trash: \"arrow backwards can clock date delete garbage history refresh remove renew reverse rotate schedule time turn up\",\n    restore_page: \"arrow data doc file history paper refresh rotate sheet storage undo web\",\n    reviews: \"bubble chat comment communicate feedback message rate rating recommendation speech\",\n    rice_bowl: \"dinner food lunch meal restaurant\",\n    ring_volume: \"calling cell contact device hardware incoming mobile ringer sound telephone\",\n    r_mobiledata: \"alphabet character font letter symbol text type\",\n    rocket: \"spaceship\",\n    rocket_launch: \"spaceship takeoff\",\n    roller_shades: \"blinds cover curtains nest open shutter sunshade\",\n    roller_shades_closed: \"blinds cover curtains nest shutter sunshade\",\n    roofing: \"architecture building chimney construction estate home house real residence residential service shelter\",\n    room: \"destination direction gps location maps marker pin place spot stop\",\n    room_preferences: \"building doorway entrance gear home house interior office open settings\",\n    room_service: \"alert bell concierge delivery hotel notify\",\n    rotate_90_degrees_ccw: \"arrows direction editing image photo turn\",\n    rotate_90_degrees_cw: \"arrows ccw direction editing image photo turn\",\n    rotate_left: \"around arrow circle direction inprogress loading refresh reload renew reset turn\",\n    rotate_right: \"around arrow circle direction inprogress loading refresh renew turn\",\n    roundabout_left: \"arrows directions maps navigation path route sign traffic\",\n    roundabout_right: \"arrows directions maps navigation path route sign traffic\",\n    rounded_corner: \"adjust edit shape square transform\",\n    route: \"directions maps path sign traffic\",\n    router: \"box cable connection device hardware internet network signal wifi\",\n    rowing: \"activity boat body canoe human people person sports water\",\n    rss_feed: \"application blog connection data internet network service signal website wifi wireless\",\n    rsvp: \"alphabet character font invitation invite letter plat respond rpondez sil symbol text type vous\",\n    rtt: \"call real rrt text time\",\n    rule: \"approve check done incomplete line mark missing no ok select tick validate verified wrong x yes\",\n    rule_folder: \"approve cancel check close complete data document done drive exit file mark no ok remove select sheet slide storage tick validate verified yes\",\n    run_circle: \"body exercise human people person running\",\n    running_with_errors: \"! alert attention caution danger duration exclamation important mark notification processing symbol time warning\",\n    rv_hookup: \"arrow attach automobile automotive back cars connect direction left maps public right trailer transportation travel truck van vehicle\",\n    safety_divider: \"apart distance separate social space\",\n    sailing: \"entertainment fishing hobby ocean sailboat sea social sports travel water\",\n    sanitizer: \"bacteria bottle clean covid disinfect germs pump\",\n    satellite: \"bluetooth connection connectivity data device image internet landscape location maps mountains network photography picture scan service signal symbol wifi wireless--\",\n    satellite_alt: \"alternative artificial communication space station television\",\n    save: \"data diskette document drive file floppy multimedia storage write\",\n    save_alt: \"arrow diskette document down file floppy multimedia write\",\n    save_as: \"compose create data disk document draft drive editing file floppy input multimedia pencil storage write writing\",\n    saved_search: \"find glass important look magnifying marked see star\",\n    savings: \"bank bill card cash coin commerce cost credit currency dollars finance money online payment piggy symbol\",\n    scale: \"measure monitor weight\",\n    scanner: \"copy device hardware machine\",\n    scatter_plot: \"analytics bars chart circles data diagram dot infographic measure metrics statistics tracking\",\n    schedule: \"calendar clock date mark save time\",\n    schedule_send: \"calendar clock date email letter remember share time\",\n    schema: \"analytics chart data diagram flow infographic measure metrics statistics tracking\",\n    school: \"academy achievement cap class college education graduation hat knowledge learning university\",\n    science: \"beaker chemical chemistry experiment flask glass laboratory research tube\",\n    score: \"2k alphabet analytics bars character chart data diagram digit font infographic letter measure metrics number statistics symbol text tracking type\",\n    screen_lock_landscape: \"Android device hardware iOS mobile phone rotate security tablet\",\n    screen_lock_portrait: \"Android device hardware iOS mobile phone rotate security tablet\",\n    screen_lock_rotation: \"Android arrow device hardware iOS mobile phone rotate tablet turn\",\n    screen_rotation: \"Android arrow device hardware iOS mobile phone rotate tablet turn\",\n    screen_search_desktop: \"Android arrow device hardware iOS lock monitor rotate web\",\n    screen_share: \"Android arrow cast chrome device display hardware iOS laptop mac mirror monitor steam streaming web window\",\n    screenshot: \"Android cell crop device hardware iOS mobile phone tablet\",\n    screenshot_monitor: \"Android chrome desktop device display hardware iOS mac screengrab web window\",\n    sd: \"alphabet camera card character data device digital drive flash font image letter memory photo secure symbol text type\",\n    sd_card: \"camera digital memory photos secure storage\",\n    sd_card_alert: \"! attention camera caution danger digital error exclamation important mark memory notification photos secure storage symbol warning\",\n    sd_storage: \"camera card data digital memory microsd secure\",\n    search: \"filter find glass look magnifying see up\",\n    search_off: \"cancel close disabled enabled find glass look magnifying on see slash stop x\",\n    security: \"certified privacy private protection shield verified\",\n    security_update: \"Android arrow device download hardware iOS mobile phone tablet\",\n    security_update_good: \"Android checkmark device hardware iOS mobile ok phone tablet tick\",\n    security_update_warning: \"! Android alert attention caution danger device download error exclamation hardware iOS important mark mobile notification phone symbol tablet\",\n    segment: \"alignment fonts format lines list paragraph part piece rules style text\",\n    select_all: \"selection square tool\",\n    self_improvement: \"body calm care chi human meditate meditation people person relax sitting wellbeing yoga zen\",\n    sell: \"bill card cart cash coin commerce credit currency dollars money online payment price shopping tag\",\n    send: \"chat email message paper plane reply right share telegram\",\n    send_and_archive: \"arrow download email letter save share\",\n    send_time_extension: \"deliver dispatch envelop mail message schedule\",\n    send_to_mobile: \"Android arrow device export forward hardware iOS phone right share tablet\",\n    sensors: \"connection network scan signal wireless\",\n    sensors_off: \"connection disabled enabled network scan signal slash wireless\",\n    sentiment_dissatisfied: \"angry disappointed dislike emoji emoticon emotions expressions face feelings frown mood person sad smiley survey unhappy unsatisfied upset\",\n    sentiment_neutral: \"emotionless emotions expressions face feelings indifference mood okay person survey\",\n    sentiment_satisfied: \"emoji emoticon emotions expressions face feelings glad happiness happy like mood person pleased smiley smiling survey\",\n    sentiment_satisfied_alt: \"account emoji face happy human people person profile smile user\",\n    sentiment_very_dissatisfied: \"angry disappointed dislike emoji emoticon emotions expressions face feelings mood person sad smiley sorrow survey unhappy unsatisfied upset\",\n    sentiment_very_satisfied: \"emoji emoticon emotions expressions face feelings glad happiness happy like mood person pleased smiley smiling survey\",\n    set_meal: \"chopsticks dinner fish food lunch restaurant teishoku\",\n    settings: \"application change details gear information options personal service\",\n    settings_accessibility: \"body details human information people personal preferences profile user\",\n    settings_applications: \"change details gear information options personal save service\",\n    settings_backup_restore: \"arrow backwards history refresh reverse rotate time undo\",\n    settings_bluetooth: \"connection connectivity device network signal symbol wifi\",\n    settings_brightness: \"dark filter light mode sun\",\n    settings_cell: \"Android cellphone device hardware iOS mobile tablet\",\n    settings_ethernet: \"arrows brackets computer connection connectivity dots internet network parenthesis wifi\",\n    settings_input_antenna: \"airplay arrows computer connection connectivity dots internet network screencast stream wifi wireless\",\n    settings_input_component: \"audio av cables connection connectivity internet plugs points video wifi\",\n    settings_input_composite: \"cable component connection connectivity plugs points\",\n    settings_input_hdmi: \"cable connection connectivity definition high plugin points video wire\",\n    settings_input_svideo: \"cable connection connectivity definition plugin plugs points standard svideo,\",\n    settings_overscan: \"arrows expand image photo picture\",\n    settings_phone: \"call cell contact device hardware mobile telephone\",\n    settings_power: \"information off save shutdown\",\n    settings_remote: \"bluetooth connection connectivity control device signal wifi wireless\",\n    settings_suggest: \"change details gear options recommendation service suggestion system\",\n    settings_system_daydream: \"backup cloud drive storage\",\n    settings_voice: \"microphone recorder speaker\",\n    seven_k: \"7000 7K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    seven_k_plus: \"+ 7000 7K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    seven_mp: \"camera digit font image letters megapixels number quality resolution symbol text type\",\n    seventeen_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    share: \"android connect contect link multimedia multiple network options send shared sharing social\",\n    share_location: \"destination direction gps maps pin place stop tracking\",\n    shield: \"certified privacy private protection secure security verified\",\n    shop: \"arrow bag bill briefcase buy card cart cash coin commerce credit currency dollars google money online payment play purchase shopping store\",\n    shop_2: \"add arrow buy cart google play purchase shopping\",\n    shopping_bag: \"bill business buy card cart cash coin commerce credit currency dollars money online payment storefront\",\n    shopping_basket: \"add bill buy card cart cash checkout coin commerce credit currency dollars money online payment purchase\",\n    shopping_cart: \"add bill buy card cash checkout coin commerce credit currency dollars money online payment purchase\",\n    shopping_cart_checkout: \"arrow cash coin commerce currency dollars money online payment right\",\n    shop_two: \"add arrow briefcase buy cart google play purchase shopping\",\n    shortcut: \"arrow direction forward right\",\n    short_text: \"brief comment document lines note write writing\",\n    show_chart: \"analytics bars chart data diagram infographic line measure metrics presentation show statistics stock tracking\",\n    shower: \"bathroom closet home house place plumbing sprinkler wash water wc\",\n    shuffle: \"arrows controls music random video\",\n    shuffle_on: \"arrows controls music random video\",\n    shutter_speed: \"aperture camera duration image lens photography photos picture setting stop timer watch\",\n    sick: \"covid discomfort emotions expressions face feelings fever flu ill mood pain person survey upset\",\n    signal_cellular_0_bar: \"data internet mobile network phone speed wifi wireless\",\n    signal_cellular_4_bar: \"data internet mobile network phone speed wifi wireless\",\n    signal_cellular_alt: \"analytics bar chart data diagram infographic internet measure metrics mobile network phone statistics tracking wifi wireless\",\n    signal_cellular_connected_no_internet_0_bar: \"! alert attention caution danger data error exclamation important mark mobile network notification phone symbol warning wifi wireless\",\n    signal_cellular_connected_no_internet_1_bar: \"network\",\n    signal_cellular_connected_no_internet_2_bar: \"network\",\n    signal_cellular_connected_no_internet_3_bar: \"network\",\n    signal_cellular_connected_no_internet_4_bar: \"! alert attention caution danger data error exclamation important mark mobile network notification phone symbol warning wifi wireless\",\n    signal_cellular_nodata: \"internet mobile network offline phone quit wifi wireless x\",\n    signal_cellular_no_sim: \"camera card chip device disabled enabled memory network offline phone slash storage\",\n    signal_cellular_null: \"data internet mobile network phone wifi wireless\",\n    signal_cellular_off: \"data disabled enabled internet mobile network offline phone slash wifi wireless\",\n    signal_wifi_bad: \"bar cancel cellular close data exit internet mobile network no phone quit remove stop wireless\",\n    signal_wifi_connected_no_internet4: \"cellular data mobile network offline phone wireless x\",\n    signal_wifi_off: \"cellular data disabled enabled internet mobile network phone slash speed wireless\",\n    signal_wifi_statusbar4_bar: \"cellular data internet mobile network phone speed wireless\",\n    signal_wifi_statusbar_connected_no_internet4: \"! alert attention caution cellular danger data error exclamation important mark mobile network notification phone speed symbol warning wireless\",\n    signal_wifi_statusbar_null: \"cellular data internet mobile network phone speed wireless\",\n    signpost: \"arrow direction left maps right signal signs street traffic\",\n    sim_card: \"camera chip device memory network phone storage\",\n    sim_card_alert: \"! attention camera caution danger digital error exclamation important mark memory notification photos sd secure storage symbol warning\",\n    sim_card_download: \"arrow camera chip device memory phone storage\",\n    single_bed: \"bedroom double furniture home hotel house king night pillows queen rest sleep twin\",\n    sip: \"alphabet call character dialer font initiation internet letter over phone protocol routing session symbol text type voice\",\n    six_k: \"6000 6K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    six_k_plus: \"+ 6000 6K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    six_mp: \"camera digit font image letters megapixels number quality resolution symbol text type\",\n    sixteen_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    sixty_fps: \"camera digit frames number symbol video\",\n    sixty_fps_select: \"camera digits frame frequency numbers per rate seconds video\",\n    skateboarding: \"athlete athletic body entertainment exercise hobby human people person skateboarder social sports\",\n    skip_next: \"arrow back controls forward music play previous transport video\",\n    skip_previous: \"arrow backward controls forward music next play transport video\",\n    sledding: \"athlete athletic body entertainment exercise hobby human people person sledge snow social sports travel winter\",\n    slideshow: \"movie photos play presentation square video view\",\n    slow_motion_video: \"arrow circle controls music play speed time\",\n    smart_button: \"action auto components composer function interface special stars ui ux website\",\n    smart_display: \"airplay chrome connect device screencast stream television tv video wireless\",\n    smartphone: \"Android call cell chat device hardware iOS mobile tablet text\",\n    smart_screen: \"Android airplay cell connect device hardware iOS mobile phone screencast stream tablet video\",\n    smart_toy: \"games robot\",\n    smoke_free: \"cigarette disabled enabled never no off places prohibited slash smoking tobacco warning zone\",\n    smoking_rooms: \"allowed cigarette places smoke tobacco zone\",\n    sms: \"3 bubble chat comment communication conversation dots message more service speech three\",\n    sms_failed: \"! alert attention bubbles caution chat comment communication conversation danger error exclamation important mark message notification service speech symbol warning\",\n    snippet_folder: \"data document drive file sheet slide storage\",\n    snooze: \"alarm bell clock duration notification set timer watch\",\n    snowboarding: \"athlete athletic body entertainment exercise hobby human people person social sports travel winter\",\n    snowmobile: \"automobile car direction skimobile social sports transportation travel vehicle winter\",\n    snowshoeing: \"body human people person sports travel walking winter\",\n    soap: \"bathroom clean fingers gesture hand wash wc\",\n    social_distance: \"6 apart body ft human people person space\",\n    solar_power: \"eco energy heat nest sunny\",\n    sort: \"filter find lines list organize\",\n    sort_by_alpha: \"alphabetize az by character font letters list order organize symbol text type\",\n    soup_kitchen: \"breakfast brunch dining food lunch meal\",\n    source: \"code composer content creation data document file folder mode storage view\",\n    south: \"arrow directional down maps navigation\",\n    south_america: \"america continent landscape place region south\",\n    south_east: \"arrow directional down maps navigation right\",\n    south_west: \"arrow directional down left maps navigation\",\n    spa: \"aromatherapy flower healthcare leaf massage meditation nature petals places relax wellbeing wellness\",\n    space_bar: \"keyboard line\",\n    speaker: \"audio box electronic loud music sound stereo system video\",\n    speaker_group: \"audio box electronic loud multiple music sound stereo system video\",\n    speaker_notes: \"bubble cards chat comment communicate format list message speech text\",\n    speaker_notes_off: \"bubble cards chat comment communicate disabled enabled format list message on slash speech text\",\n    speaker_phone: \"Android cell device hardware iOS mobile sound tablet volume\",\n    speed: \"arrow clock controls dial fast gauge measure motion music slow speedometer test velocity video\",\n    spellcheck: \"alphabet approve character checkmark edit font letter ok processor select symbol text tick type word write yes\",\n    splitscreen: \"grid layout multitasking two\",\n    spoke: \"connection network radius\",\n    sports: \"athlete athletic basketball blowing coach entertainment exercise game hobby instrument live referee soccer social sound trophy warning whistle\",\n    sports_bar: \"alcohol beer drink liquor pint places pub\",\n    sports_baseball: \"athlete athletic entertainment exercise game hobby social\",\n    sports_basketball: \"athlete athletic entertainment exercise game hobby social\",\n    sports_cricket: \"athlete athletic ball bat entertainment exercise game hobby social\",\n    sports_esports: \"controller entertainment gamepad gaming hobby online playstation social video xbox\",\n    sports_football: \"american athlete athletic entertainment exercise game hobby social\",\n    sports_golf: \"athlete athletic ball club entertainment exercise game golfer golfing hobby social\",\n    sports_handball: \"athlete athletic body entertainment exercise game hobby human people person social\",\n    sports_hockey: \"athlete athletic entertainment exercise game hobby ice social sticks\",\n    sports_kabaddi: \"athlete athletic body combat entertainment exercise fighting game hobby human judo martial people person social wrestle wrestling\",\n    sports_martial_arts: \"athlete athletic entertainment exercise hobby human karate people person social\",\n    sports_mma: \"arts athlete athletic boxing combat entertainment exercise fighting game glove hobby martial mixed social\",\n    sports_motorsports: \"athlete athletic automobile bike drive driving entertainment helmet hobby motorcycle protect social vehicle\",\n    sports_rugby: \"athlete athletic ball entertainment exercise game hobby social\",\n    sports_score: \"destination flag goal\",\n    sports_soccer: \"athlete athletic entertainment exercise football game hobby social\",\n    sports_tennis: \"athlete athletic ball bat entertainment exercise game hobby racket social\",\n    sports_volleyball: \"athlete athletic entertainment exercise game hobby social\",\n    square: \"draw four quadrangle shape sides\",\n    square_foot: \"construction feet inches length measurement ruler school set tools\",\n    ssid_chart: \"graph lines network wifi\",\n    stacked_bar_chart: \"analytics chart-chart data diagram infographic measure metrics statistics tracking\",\n    stacked_line_chart: \"analytics data diagram infographic measure metrics statistics tracking\",\n    stadium: \"activity amphitheater arena coliseum event local star things ticket\",\n    stairs: \"down staircase up\",\n    star: \"best bookmark favorite highlight ranking rate rating save toggle\",\n    star_border: \"best bookmark favorite highlight outline ranking rate rating save toggle\",\n    star_border_purple_500: \"best bookmark favorite highlight outline ranking rate rating save toggle\",\n    star_half: \"0.5 1/2 achievement bookmark favorite highlight important marked ranking rate rating reward saved shape special toggle\",\n    star_outline: \"bookmark favorite half highlight ranking rate rating save toggle\",\n    star_purple_500: \"best bookmark favorite highlight ranking rate rating save toggle\",\n    star_rate: \"achievement bookmark favorite highlight important marked ranking rating reward saved shape special\",\n    stars: \"achievement bookmark circle favorite highlight important like love marked ranking rate rating reward saved shape special\",\n    start: \"arrow keyboard next right\",\n    stay_current_landscape: \"Android device hardware iOS mobile phone tablet\",\n    stay_current_portrait: \"Android device hardware iOS mobile phone tablet\",\n    stay_primary_landscape: \"Android current device hardware iOS mobile phone tablet\",\n    stay_primary_portrait: \"Android current device hardware iOS mobile phone tablet\",\n    sticky_note_2: \"bookmark message paper text writing\",\n    stop: \"arrow controls music pause player square video\",\n    stop_circle: \"controls music pause play square video\",\n    stop_screen_share: \"Android arrow cast chrome device disabled display enabled hardware iOS laptop mac mirror monitor offline slash steam streaming web window\",\n    storage: \"computer database drive memory network server\",\n    store: \"bill building business buy card cash coin company credit currency dollars e-commerce market money online payment purchase shopping storefront\",\n    storefront: \"business buy cafe commerce market merchant places restaurant retail sell shopping stall\",\n    store_mall_directory: \"building\",\n    storm: \"forecast hurricane temperature twister weather wind\",\n    straight: \"arrows directions maps navigation path route sign traffic up\",\n    straighten: \"length measurement piano ruler size\",\n    stream: \"cast connected feed live network signal wireless\",\n    streetview: \"gps location maps\",\n    strikethrough_s: \"alphabet character cross doc editing editor font letter out spreadsheet styles symbol text type writing\",\n    stroller: \"baby care carriage children infant kid newborn toddler young\",\n    style: \"booklet cards filters options tags\",\n    subdirectory_arrow_left: \"arrow down navigation\",\n    subdirectory_arrow_right: \"arrow down navigation\",\n    subject: \"alignment document email full justify lines list note text writing\",\n    subscript: \"2 doc editing editor gmail novitas spreadsheet style symbol text writing\",\n    subscriptions: \"enroll media order playlist queue signup subscribe youtube\",\n    subtitles: \"accessibility accessible captions character closed decoder language media movies translate tv\",\n    subtitles_off: \"accessibility accessible caption closed disabled enabled language slash translate video\",\n    subway: \"automobile bike cars maps metro rail scooter train transportation travel tunnel underground vehicle vespa\",\n    summarize: \"document list menu note report summary\",\n    superscript: \"2 doc editing editor gmail novitas spreadsheet style symbol text writing\",\n    supervised_user_circle: \"account avatar control face human parental parents people person profile supervisor\",\n    supervisor_account: \"administrator avatar control face human parental parents people person profile supervised user\",\n    support: \"assist help lifebuoy rescue safety\",\n    support_agent: \"care customer face headphone person representative service\",\n    surfing: \"athlete athletic beach body entertainment exercise hobby human people person sea social sports summer water\",\n    surround_sound: \"audio circle signal speaker system volume volumn wireless\",\n    swap_calls: \"arrows device direction mobile share\",\n    swap_horiz: \"arrows back direction forward horizontal\",\n    swap_horizontal_circle: \"arrows back direction forward\",\n    swap_vert: \"arrows back direction down navigation up vertical\",\n    swap_vertical_circle: \"arrows back direction down horizontal up\",\n    swipe: \"arrows fingers gesture hands touch\",\n    swipe_down: \"arrows direction disable enable finger hands hit navigation strike swing swpie take\",\n    swipe_down_alt: \"arrows direction disable enable finger hands hit navigation strike swing swpie take\",\n    swipe_left: \"arrows finger hand hit navigation reject strike swing take\",\n    swipe_left_alt: \"arrows finger hand hit navigation reject strike swing take\",\n    swipe_right: \"accept arrows direction finger hands hit navigation strike swing swpie take\",\n    swipe_right_alt: \"accept arrows direction finger hands hit navigation strike swing swpie take\",\n    swipe_up: \"arrows direction disable enable finger hands hit navigation strike swing swpie take\",\n    swipe_up_alt: \"arrows direction disable enable finger hands hit navigation strike swing swpie take\",\n    swipe_vertical: \"arrows direction finger hands hit navigation strike swing swpie take verticle\",\n    switch_access_shortcut: \"arrows direction navigation new north star symbol up\",\n    switch_access_shortcut_add: \"+ arrows direction navigation new north plus star symbol up\",\n    switch_account: \"choices face human multiple options people person profile social user\",\n    switch_camera: \"arrows photography picture\",\n    switch_left: \"arrows directional navigation toggle\",\n    switch_right: \"arrows directional navigation toggle\",\n    switch_video: \"arrows camera photography videos\",\n    sync: \"360 around arrows direction inprogress loading refresh renew rotate turn\",\n    sync_alt: \"arrows horizontal internet technology update wifi\",\n    sync_disabled: \"360 around arrows direction enabled inprogress loading off refresh renew rotate slash turn\",\n    sync_lock: \"around arrows locked password privacy private protection renew rotate safety secure security turn\",\n    sync_problem: \"! 360 alert around arrows attention caution danger direction error exclamation important inprogress loading mark notification refresh renew rotate symbol turn warning\",\n    system_security_update: \"Android arrow cell device down hardware iOS mobile phone tablet\",\n    system_security_update_good: \"Android approve cell check complete device done hardware iOS mark mobile ok phone select tablet tick validate verified yes\",\n    system_security_update_warning: \"! Android alert attention caution cell danger device error exclamation hardware iOS important mark mobile notification phone symbol tablet\",\n    system_update: \"Android arrows cell device direction download hardware iOS install mobile phone tablet\",\n    system_update_alt: \"arrow download export\",\n    tab: \"browser computer documents folder internet tabs website windows\",\n    table_chart: \"analytics bars data diagram grid infographic measure metrics statistics tracking\",\n    table_rows: \"grid layout lines stacked\",\n    tablet: \"Android device hardware iOS ipad mobile web\",\n    tablet_android: \"device hardware iOS ipad mobile web\",\n    tablet_mac: \"Android apple device hardware iOS ipad mac mobile tablet web\",\n    table_view: \"format grid group layout multiple\",\n    tab_unselected: \"browser computer documents folder internet tabs website windows\",\n    tag: \"hashtag key media number pound social trend\",\n    tag_faces: \"emoji emotion happy satisfied smile\",\n    takeout_dining: \"box container delivery food meal restaurant\",\n    tap_and_play: \"Android cell connection device hardware iOS internet mobile network nfc phone signal tablet to wifi wireless\",\n    tapas: \"appetizer brunch dinner food lunch restaurant snack\",\n    task: \"approve check complete data document done drive file folders mark ok page paper select sheet slide tick validate verified writing yes\",\n    task_alt: \"approve check circle complete done mark ok select tick validate verified yes\",\n    taxi_alert: \"! attention automobile cab cars caution danger direction error exclamation important lyft maps mark notification public symbol transportation uber vehicle warning yellow\",\n    telegram: \"brand call chat logo messaging voice\",\n    ten_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    terminal: \"application code emulator program software\",\n    terrain: \"geography landscape mountain\",\n    text_decrease: \"- alphabet character font letter minus remove resize subtract symbol type\",\n    text_fields: \"T add alphabet character font input letter symbol type\",\n    text_format: \"A alphabet character font letter square style symbol type\",\n    text_increase: \"+ add alphabet character font letter new plus resize symbol type\",\n    text_rotate_up: \"A alphabet arrow character field font letter move symbol type\",\n    text_rotate_vertical: \"A alphabet arrow character down field font letter move symbol type verticle\",\n    text_rotation_angledown: \"A alphabet arrow character field font letter move rotate symbol type\",\n    text_rotation_angleup: \"A alphabet arrow character field font letter move rotate symbol type\",\n    text_rotation_down: \"A alphabet arrow character field font letter move rotate symbol type\",\n    text_rotation_none: \"A alphabet arrow character field font letter move rotate symbol type\",\n    textsms: \"bubble chat comment communicate dots feedback message speech\",\n    text_snippet: \"data document file notes storage writing\",\n    texture: \"diagonal lines pattern stripes\",\n    theater_comedy: \"broadway event movie musical places show standup tour watch\",\n    theaters: \"film media movies photography showtimes video watch\",\n    thermostat: \"forecast temperature weather\",\n    thermostat_auto: \"A celsius fahrenheit temperature thermometer\",\n    thirteen_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    thirty_fps: \"alphabet camera character digit font frames letter number symbol text type video\",\n    thirty_fps_select: \"camera digits frame frequency image numbers per rate seconds video\",\n    three_d_rotation: \"3d D alphabet arrows av camera character digit font letter number symbol text type vr\",\n    three_g_mobiledata: \"alphabet cellular character digit font letter network number phone signal speed symbol text type wifi\",\n    three_k: \"3000 3K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    three_k_plus: \"+ 3000 3K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    three_mp: \"camera digit font image letters megapixels number quality resolution symbol text type\",\n    three_p: \"account avatar bubble chat comment communicate face human message party people person profile speech user\",\n    three_sixty: \"arrow av camera direction rotate rotation vr\",\n    thumb_down: \"dislike downvote favorite fingers gesture hands ranking rate rating reject up\",\n    thumb_down_alt: \"bad decline disapprove dislike feedback hand hate negative no reject social veto vote\",\n    thumb_down_off_alt: \"bad decline disapprove dislike favorite feedback filled fingers gesture hands hate negative no ranking rate rating reject sad social veto vote\",\n    thumbs_up_down: \"dislike favorite fingers gesture hands rate rating vote\",\n    thumb_up: \"approve dislike down favorite fingers gesture hands ranking rate rating success upvote\",\n    thumb_up_alt: \"agreed approved confirm correct favorite feedback good hand happy like okay positive satisfaction social success vote yes\",\n    thumb_up_off_alt: \"agreed approved confirm correct favorite feedback fingers gesture good hands happy like okay positive ranking rate rating satisfaction social vote yes\",\n    timelapse: \"duration motion photo timer video\",\n    timeline: \"analytics chart data graph history line movement points tracking trending zigzag zigzap\",\n    timer: \"alarm alart bell clock disabled duration enabled notification off slash stopwatch wait\",\n    timer_10: \"digits duration numbers seconds\",\n    timer_10_select: \"alphabet camera character digit font letter number seconds symbol text type\",\n    timer_3: \"digits duration numbers seconds\",\n    timer_3_select: \"alphabet camera character digit font letter number seconds symbol text type\",\n    timer_off: \"alarm alart bell clock disabled duration enabled notification slash stopwatch\",\n    times_one_mobiledata: \"alphabet cellular character digit font letter network number phone signal speed symbol text type wifi\",\n    time_to_leave: \"automobile cars destination direction drive estimate eta maps public transportation travel trip vehicle\",\n    tips_and_updates: \"alert announcement electricity idea information lamp lightbulb stars\",\n    title: \"T alphabet character font header letter subject symbol text type\",\n    toc: \"content format lines list reorder stacked table text titles\",\n    today: \"agenda calendar date event mark month range remember reminder schedule time week\",\n    toggle_off: \"application components configuration control design disable inable inactive interface selection settings slider switch ui ux website\",\n    toggle_on: \"application components configuration control design disable inable inactive interface off selection settings slider switch ui ux website\",\n    token: \"badge hexagon mark shield sign symbol\",\n    toll: \"bill booth card cash circles coin commerce credit currency dollars highway money online payment ticket\",\n    tonality: \"circle editing filter image photography picture\",\n    topic: \"data document drive file folder sheet slide storage\",\n    tornado: \"crisis disaster natural rain storm weather wind\",\n    touch_app: \"arrow command fingers gesture hand press swipe tap\",\n    tour: \"destination flag places travel visit\",\n    toys: \"car fan games kids windmill\",\n    track_changes: \"bullseye circle evolve lines movement radar rotate shift target\",\n    traffic: \"direction light maps signal street\",\n    train: \"automobile cars direction maps public rail subway transportation vehicle\",\n    tram: \"automobile cars direction maps public rail subway train transportation vehicle\",\n    transfer_within_a_station: \"arrows body direction human left maps people person public right route stop transit transportation vehicle walk\",\n    transform: \"adjust crop editing image photo picture\",\n    transgender: \"female lgbt neutral neutrual social symbol\",\n    transit_enterexit: \"arrow direction maps navigation route transportation\",\n    translate: \"alphabet language letter speaking speech text translator words\",\n    travel_explore: \"earth find glass global globe look magnifying map network planet search see social space web world\",\n    trending_down: \"analytics arrow change chart data diagram infographic measure metrics movement rate rating sale statistics tracking\",\n    trending_flat: \"arrow change chart data graph metric movement rate right tracking\",\n    trending_up: \"analytics arrow change chart data diagram infographic measure metrics movement rate rating statistics tracking\",\n    trip_origin: \"circle departure\",\n    try: \"bookmark bubble chat comment communicate favorite feedback highlight important marked message saved shape special speech star\",\n    tty: \"call cell contact deaf device hardware impaired mobile speech talk telephone text\",\n    tune: \"adjust editing options settings sliders\",\n    tungsten: \"electricity indoor lamp lightbulb setting\",\n    turned_in: \"archive bookmark favorite item label library reading remember ribbon save submit tag\",\n    turned_in_not: \"archive bookmark favorite item label library outline reading remember ribbon save submit tag\",\n    turn_left: \"arrows directions maps navigation path route sign traffic\",\n    turn_right: \"arrows directions maps navigation path route sign traffic\",\n    turn_sharp_left: \"arrows directions maps navigation path route sign traffic\",\n    turn_sharp_right: \"arrows directions maps navigation path route sign traffic\",\n    turn_slight_left: \"arrows directions maps navigation path right route sign traffic\",\n    turn_slight_right: \"arrows directions maps navigation path route sharp sign traffic\",\n    tv: \"device display linear living monitor room screencast stream television video wireless\",\n    tv_off: \"Android chrome desktop device disabled enabled hardware iOS mac monitor slash television web window\",\n    twelve_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    twenty_four_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    twenty_one_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    twenty_three_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    twenty_two_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    twenty_zero_mp: \"camera digits font image letters megapixels numbers quality resolution symbol text type\",\n    twitter: \"brand logo social\",\n    two_k: \"2000 2K alphabet character digit display font letter number pixels resolution symbol text type video\",\n    two_k_plus: \"+ alphabet character digit font letter number symbol text type\",\n    two_mp: \"camera digit font image letters megapixels number quality resolution symbol text type\",\n    two_wheeler: \"automobile bicycle cars direction maps moped motorbike motorcycle public ride riding scooter transportation travel twom vehicle wheeler wheels\",\n    umbrella: \"beach protection rain sunny\",\n    unarchive: \"arrow inbox mail store undo up\",\n    undo: \"arrow backward mail previous redo repeat rotate\",\n    unfold_less: \"arrows chevron collapse direction expandable inward list navigation up\",\n    unfold_more: \"arrows chevron collapse direction down expandable list navigation\",\n    unpublished: \"approve check circle complete disabled done enabled mark off ok select slash tick validate verified yes\",\n    unsubscribe: \"cancel close email envelop esubscribe message newsletter off remove send\",\n    upcoming: \"alarm calendar mail message notification\",\n    update: \"arrow backwards clock forward future history load refresh reverse rotate schedule time\",\n    update_disabled: \"arrow backwards clock enabled forward history load off on refresh reverse rotate schedule slash time\",\n    upgrade: \"arrow export instal line replace update\",\n    upload: \"arrows download drive\",\n    upload_file: \"arrow data document download drive folders page paper sheet slide writing\",\n    usb: \"cable connection device wire\",\n    usb_off: \"cable connection device wire\",\n    u_turn_left: \"arrows directions maps navigation path route sign traffic u-turn\",\n    u_turn_right: \"arrows directions maps navigation path route sign traffic u-turn\",\n    vaccines: \"aid covid doctor drug emergency hospital immunity injection medical medication medicine needle pharmacy sick syringe vaccination vial\",\n    verified: \"approve badge burst check complete done mark ok select star tick validate yes\",\n    verified_user: \"approve audit certified checkmark complete done ok privacy private protection security select shield tick validate yes\",\n    vertical_align_bottom: \"alignment arrow doc down editing editor spreadsheet text type writing\",\n    vertical_align_center: \"alignment arrow doc down editing editor spreadsheet text type up writing\",\n    vertical_align_top: \"alignment arrow doc editing editor spreadsheet text type up writing\",\n    vertical_shades: \"blinds cover curtains nest open shutter sunshade\",\n    vertical_shades_closed: \"blinds cover curtains nest roller shutter sunshade\",\n    vertical_split: \"design format grid layout paragraph text website writing\",\n    vibration: \"Android alert cell device hardware iOS mobile mode motion notification phone silence silent tablet vibrate\",\n    video_call: \"+ add camera chat conference filming hardware image motion new picture plus screen symbol videography\",\n    videocam: \"camera chat conference filming hardware image motion picture screen videography\",\n    video_camera_back: \"image landscape mountains photography picture rear\",\n    video_camera_front: \"account face human image people person photography picture profile user\",\n    videocam_off: \"camera chat conference disabled enabled filming hardware image motion offline picture screen slash videography\",\n    video_file: \"camera document filming hardware image motion picture videography\",\n    videogame_asset: \"console controller device gamepad gaming nintendo playstation xbox\",\n    videogame_asset_off: \"console controller device disabled enabled gamepad gaming playstation slash\",\n    video_label: \"device item screen window\",\n    video_library: \"arrow collection play\",\n    video_settings: \"change details gear information options play screen service window\",\n    video_stable: \"filming recording setting stability taping\",\n    view_agenda: \"blocks cards design format grid layout website,stacked\",\n    view_array: \"blocks design format grid layout website\",\n    view_carousel: \"banner blocks cards design format grid images layout website\",\n    view_column: \"blocks design format grid layout vertical website\",\n    view_comfy: \"grid layout pattern squares\",\n    view_comfy_alt: \"cozy design format layout web\",\n    view_compact: \"grid layout pattern squares\",\n    view_compact_alt: \"dense design format layout web\",\n    view_cozy: \"comfy design format layout web\",\n    view_day: \"blocks calendar cards carousel design format grid layout website week\",\n    view_headline: \"blocks design format grid layout paragraph text website\",\n    view_in_ar: \"3d augmented cube daydream headset reality square vr\",\n    view_kanban: \"grid layout pattern squares\",\n    view_list: \"blocks design format grid layout lines reorder stacked title website\",\n    view_module: \"blocks design format grid layout reorder squares stacked title website\",\n    view_quilt: \"blocks design format grid layout reorder squares stacked title website\",\n    view_sidebar: \"design format grid layout web\",\n    view_stream: \"blocks design format grid layout lines list reorder stacked title website\",\n    view_timeline: \"grid layout pattern squares\",\n    view_week: \"bars blocks columns day design format grid layout website\",\n    vignette: \"border editing effect filter gradient image photography setting\",\n    villa: \"architecture beach estate home house maps place real residence residential stay traveling vacation\",\n    visibility: \"eye on password preview reveal see shown visability\",\n    visibility_off: \"disabled enabled eye hidden invisible on password reveal see show slash view visability\",\n    voice_chat: \"bubble camera comment communicate facetime feedback message speech video\",\n    voicemail: \"call device message missed mobile phone recording\",\n    voice_over_off: \"account disabled enabled face human people person profile recording slash speaking speech transcript user\",\n    volume_down: \"audio av control music quieter shh soft sound speaker tv\",\n    volume_mute: \"audio control music sound speaker tv\",\n    volume_off: \"audio av control disabled enabled low music mute slash sound speaker tv\",\n    volume_up: \"audio control music sound speaker tv\",\n    volunteer_activism: \"donation fingers gesture giving hands heart love sharing\",\n    vpn_key: \"login network passcode password register security signin signup unlock\",\n    vpn_key_off: \"[offline] disabled enabled network on passcode password slash unlock\",\n    vpn_lock: \"earth globe locked network password privacy private protection safety secure security virtual world\",\n    vrpano: \"angle image landscape mountains panorama photography picture view wide\",\n    wallpaper: \"background image landscape photography picture\",\n    warehouse: \"garage industry manufacturing storage\",\n    warning: \"! alert announcement attention caution danger error exclamation feedback important mark notification problem symbol triangle\",\n    warning_amber: \"! alert attention caution danger error exclamation important mark notification symbol triangle\",\n    wash: \"bathroom clean fingers gesture hand wc\",\n    watch: \"Android clock gadget iOS smartwatch time vr wearables web wristwatch\",\n    watch_later: \"clock date hour minute schedule time\",\n    watch_off: \"Android clock close gadget iOS shut time vr wearables web wristwatch\",\n    water: \"aqua beach lake ocean river waves weather\",\n    water_damage: \"architecture building droplet estate house leak plumbing real residence residential shelter\",\n    waterfall_chart: \"analytics bar data diagram infographic measure metrics statistics tracking\",\n    waves: \"beach lake ocean pool river sea swim water\",\n    wb_auto: \"A W alphabet automatic balance character editing font image letter photography symbol text type white wp\",\n    wb_cloudy: \"balance editing white wp\",\n    wb_incandescent: \"balance bright editing lamp lightbulb lighting settings white wp\",\n    wb_iridescent: \"balance bright editing lighting settings white wp\",\n    wb_shade: \"balance house lighting white\",\n    wb_sunny: \"balance bright lighting weather white\",\n    wc: \"bathroom closet female gender man person restroom toilet unisex wash water women\",\n    web: \"blocks browser internet page screen website www\",\n    web_asset: \"-website application browser design desktop download image interface internet layout screen ui ux video window www\",\n    web_asset_off: \"browser disabled enabled internet on screen slash webpage website windows www\",\n    webhook: \"api developer development enterprise software\",\n    weekend: \"chair couch furniture home living lounge relax room seat\",\n    west: \"arrow directional left maps navigation\",\n    whatshot: \"arrow circle direction fire frames round trending\",\n    wheelchair_pickup: \"accessibility accessible body handicap help human person\",\n    where_to_vote: \"approve ballot check complete destination direction done election location maps mark ok pin place poll select stop tick validate verified yes\",\n    widgets: \"app blocks box menu setting squares ui\",\n    wifi: \"connection data internet network scan service signal wireless\",\n    wifi_calling: \"cell connection connectivity contact device hardware mobile signal telephone wireless\",\n    wifi_calling_3: \"cellular data internet mobile network phone speed wireless\",\n    wifi_channel: \"(scan) [cellular connection data internet mobile] network service signal wireless\",\n    wifi_find: \"(scan) [cellular connection data detect discover glass internet look magnifying mobile] network notice search service signal wireless\",\n    wifi_lock: \"cellular connection data internet locked mobile network password privacy private protection safety secure security service signal wireless\",\n    wifi_off: \"connection data disabled enabled internet network offline scan service signal slash wireless\",\n    wifi_password: \"(scan) [cellular connection data internet lock mobile] network secure service signal wireless\",\n    wifi_protected_setup: \"around arrows rotate\",\n    wifi_tethering: \"cellular connection data internet mobile network phone scan service signal speed wireless\",\n    wifi_tethering_off: \"cellular connection data disabled enabled internet mobile network offline phone scan service signal slash speed wireless\",\n    window: \"close glass grid home house interior layout outside\",\n    wind_power: \"eco energy nest windy\",\n    wine_bar: \"alcohol cocktail cup drink glass liquor\",\n    work: \"-briefcase baggage business job suitcase\",\n    work_history: \"arrow backwards baggage briefcase business clock date job refresh renew reverse rotate schedule suitcase time turn\",\n    work_off: \"baggage briefcase business disabled enabled job on slash suitcase\",\n    work_outline: \"baggage briefcase business job suitcase\",\n    workspace_premium: \"certification degree ecommerce guarantee medal permit ribbon verification\",\n    workspaces: \"circles collaboration dot filled group team\",\n    wrap_text: \"arrow doc editing editor spreadsheet type write writing\",\n    wrong_location: \"cancel close destination direction exit maps no pin place quit remove stop\",\n    wysiwyg: \"composer mode screen software system text view visibility website window\",\n    yard: \"backyard flower garden home house nature pettle plants\",\n    you_tube: \"brand logo social video\",\n    youtube_searched_for: \"arrow backwards find glass history inprogress loading look magnifying refresh renew restore reverse rotate see yt\",\n    zoom_in: \"bigger find glass grow look magnifier magnifying plus scale search see size\",\n    zoom_in_map: \"arrows destination location maps move place stop\",\n    zoom_out: \"find glass look magnifier magnifying minus negative scale search see size smaller\",\n    zoom_out_map: \"arrows destination location maps move place stop\"\n};\n","import { icon_synonyms } from \"./icon_synonyms\";\nimport { iconKeys } from \"@firecms/ui\";\n\n// @ts-ignore\nimport * as JsSearch from \"js-search\";\n\nexport const iconsSearch = new JsSearch.Search(\"key\");\niconsSearch.addIndex(\"synonyms\");\n\niconsSearch.addDocuments(iconKeys\n    .map((importName) => {\n        return {\n            key: importName,\n            // @ts-ignore\n            synonyms: icon_synonyms[importName] ?? [],\n        }\n    }));\n","export function hashString(str: string): number {\n    let hash = 0;\n    let i;\n    let chr;\n    for (i = 0; i < str.length; i++) {\n        chr = str.charCodeAt(i);\n        hash = ((hash << 5) - hash) + chr;\n        hash |= 0; // Convert to 32bit integer\n    }\n    return Math.abs(hash);\n}\n","import React from \"react\";\nimport { hashString } from \"./hash\";\nimport { coolIconKeys, Icon, iconKeys } from \"@firecms/ui\";\nimport { slugify } from \"./strings\";\nimport equal from \"react-fast-compare\"\n\nexport function getIcon(iconKey?: string, className?: string): React.ReactElement | undefined {\n    if (!iconKey) return undefined;\n    iconKey = slugify(iconKey);\n    if (!(iconKey in iconKeysMap)) {\n        return undefined;\n    }\n    return iconKey in iconKeysMap ? <Icon iconKey={iconKey} size={\"medium\"} className={className}/> : undefined;\n}\n\nexport type IconViewProps = {\n    path: string;\n    name: string;\n    singularName?: string;\n    group?: string;\n    icon?: string;\n}\n\nexport const IconForView = React.memo(\n    function IconForView({ collectionOrView, className }: { collectionOrView?: IconViewProps, className?: string }): React.ReactElement {\n        if (!collectionOrView) return <></>;\n        const icon = getIcon(collectionOrView.icon, className);\n        if (collectionOrView?.icon && icon)\n            return icon;\n\n        let slugName = slugify((\"singularName\" in collectionOrView ? collectionOrView.singularName : undefined) ?? collectionOrView.name);\n\n        let key: string | undefined;\n        if (slugName in iconKeysMap)\n            key = slugName;\n\n        if (!key) {\n            slugName = slugify(collectionOrView.path);\n            if (slugName in iconKeysMap)\n                key = slugName;\n        }\n\n        const iconsCount = coolIconKeys.length;\n\n        if (!key)\n            key = coolIconKeys[hashString(collectionOrView.path) % iconsCount];\n\n        return <Icon iconKey={key} size={\"medium\"} className={className}/>;\n    }, (prevProps, nextProps) => {\n        return equal(prevProps.collectionOrView?.icon, nextProps.collectionOrView?.icon);\n    });\n\nconst iconKeysMap: Record<string, string> = iconKeys.reduce((acc: Record<string, string>, key) => {\n    acc[key] = key;\n    return acc;\n}, {});\n","/**\n * Returns the plural of an English word.\n *\n * @export\n * @param {string} word\n * @param {number} [amount]\n * @returns {string}\n */\nexport function plural(word: string, amount?: number): string {\n    if (amount !== undefined && amount === 1) {\n        return word\n    }\n    const plurals: { [key: string]: string } = {\n        \"(quiz)$\": \"$1zes\",\n        \"^(ox)$\": \"$1en\",\n        \"([m|l])ouse$\": \"$1ice\",\n        \"(matr|vert|ind)ix|ex$\": \"$1ices\",\n        \"(x|ch|ss|sh)$\": \"$1es\",\n        \"([^aeiouy]|qu)y$\": \"$1ies\",\n        \"(hive)$\": \"$1s\",\n        \"(?:([^f])fe|([lr])f)$\": \"$1$2ves\",\n        \"(shea|lea|loa|thie)f$\": \"$1ves\",\n        sis$: \"ses\",\n        \"([ti])um$\": \"$1a\",\n        \"(tomat|potat|ech|her|vet)o$\": \"$1oes\",\n        \"(bu)s$\": \"$1ses\",\n        \"(alias)$\": \"$1es\",\n        \"(octop)us$\": \"$1i\",\n        \"(ax|test)is$\": \"$1es\",\n        \"(us)$\": \"$1es\",\n        \"([^s]+)$\": \"$1s\"\n    }\n    const irregular: { [key: string]: string } = {\n        move: \"moves\",\n        foot: \"feet\",\n        goose: \"geese\",\n        sex: \"sexes\",\n        child: \"children\",\n        man: \"men\",\n        tooth: \"teeth\",\n        person: \"people\"\n    }\n    const uncountable: string[] = [\n        \"sheep\",\n        \"fish\",\n        \"deer\",\n        \"moose\",\n        \"series\",\n        \"species\",\n        \"money\",\n        \"rice\",\n        \"information\",\n        \"equipment\",\n        \"bison\",\n        \"cod\",\n        \"offspring\",\n        \"pike\",\n        \"salmon\",\n        \"shrimp\",\n        \"swine\",\n        \"trout\",\n        \"aircraft\",\n        \"hovercraft\",\n        \"spacecraft\",\n        \"sugar\",\n        \"tuna\",\n        \"you\",\n        \"wood\"\n    ]\n    // save some time in the case that singular and plural are the same\n    if (uncountable.indexOf(word.toLowerCase()) >= 0) {\n        return word;\n    }\n    // check for irregular forms\n    for (const w in irregular) {\n        const pattern = new RegExp(`${w}$`, \"i\")\n        const replace = irregular[w]\n        if (pattern.test(word)) {\n            return word.replace(pattern, replace);\n        }\n    }\n    // check for matches using regular expressions\n    for (const reg in plurals) {\n        const pattern = new RegExp(reg, \"i\")\n        if (pattern.test(word)) {\n            return word.replace(pattern, plurals[reg])\n        }\n    }\n    return word;\n}\n\n/**\n * Returns the singular of an English word.\n *\n * @export\n * @param {string} word\n * @param {number} [amount]\n * @returns {string}\n */\nexport function singular(word: string, amount?: number): string {\n    if (amount !== undefined && amount !== 1) {\n        return word;\n    }\n    const singulars: { [key: string]: string } = {\n        \"(quiz)zes$\": \"$1\",\n        \"(matr)ices$\": \"$1ix\",\n        \"(vert|ind)ices$\": \"$1ex\",\n        \"^(ox)en$\": \"$1\",\n        \"(alias)es$\": \"$1\",\n        \"(octop|vir)i$\": \"$1us\",\n        \"(cris|ax|test)es$\": \"$1is\",\n        \"(shoe)s$\": \"$1\",\n        \"(o)es$\": \"$1\",\n        \"(bus)es$\": \"$1\",\n        \"([m|l])ice$\": \"$1ouse\",\n        \"(x|ch|ss|sh)es$\": \"$1\",\n        \"(m)ovies$\": \"$1ovie\",\n        \"(s)eries$\": \"$1eries\",\n        \"([^aeiouy]|qu)ies$\": \"$1y\",\n        \"([lr])ves$\": \"$1f\",\n        \"(tive)s$\": \"$1\",\n        \"(hive)s$\": \"$1\",\n        \"(li|wi|kni)ves$\": \"$1fe\",\n        \"(shea|loa|lea|thie)ves$\": \"$1f\",\n        \"(^analy)ses$\": \"$1sis\",\n        \"((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$\": \"$1$2sis\",\n        \"([ti])a$\": \"$1um\",\n        \"(n)ews$\": \"$1ews\",\n        \"(h|bl)ouses$\": \"$1ouse\",\n        \"(corpse)s$\": \"$1\",\n        \"(us)es$\": \"$1\",\n        s$: \"\"\n    }\n    const irregular: { [key: string]: string } = {\n        move: \"moves\",\n        foot: \"feet\",\n        goose: \"geese\",\n        sex: \"sexes\",\n        child: \"children\",\n        man: \"men\",\n        tooth: \"teeth\",\n        person: \"people\"\n    }\n    const uncountable: string[] = [\n        \"sheep\",\n        \"fish\",\n        \"deer\",\n        \"moose\",\n        \"series\",\n        \"species\",\n        \"money\",\n        \"rice\",\n        \"information\",\n        \"equipment\",\n        \"bison\",\n        \"cod\",\n        \"offspring\",\n        \"pike\",\n        \"salmon\",\n        \"shrimp\",\n        \"swine\",\n        \"trout\",\n        \"aircraft\",\n        \"hovercraft\",\n        \"spacecraft\",\n        \"sugar\",\n        \"tuna\",\n        \"you\",\n        \"wood\"\n    ]\n    // save some time in the case that singular and plural are the same\n    if (uncountable.indexOf(word.toLowerCase()) >= 0) {\n        return word;\n    }\n    // check for irregular forms\n    for (const w in irregular) {\n        const pattern = new RegExp(`${irregular[w]}$`, \"i\");\n        if (pattern.test(word)) {\n            return word.replace(pattern, w);\n        }\n    }\n    // check for matches using regular expressions\n    for (const reg in singulars) {\n        const pattern = new RegExp(reg, \"i\");\n        if (pattern.test(word)) {\n            return word.replace(pattern, singulars[reg]);\n        }\n    }\n    return word;\n}\n","import { EntityCollection, PropertyConfig, ResolvedEntityCollection } from \"../types\";\nimport { isReferenceProperty } from \"./property_utils\";\nimport { isPropertyBuilder } from \"./entities\";\nimport { getFieldConfig } from \"../core\";\n\nexport function getEntityPreviewKeys(targetCollection: EntityCollection<any>,\n                                     fields: Record<string, PropertyConfig>,\n                                     previewProperties?: string[],\n                                     limit = 3) {\n    const allProperties = Object.keys(targetCollection.properties);\n    let listProperties = previewProperties?.filter(p => allProperties.includes(p as string));\n    if (listProperties && listProperties.length > 0) {\n        return listProperties;\n    } else {\n        listProperties = allProperties;\n        return listProperties.filter(key => {\n            const propertyOrBuilder = targetCollection.properties[key];\n            return propertyOrBuilder && !isPropertyBuilder(propertyOrBuilder) && !isReferenceProperty(propertyOrBuilder, fields);\n        }).slice(0, limit);\n    }\n}\n\nexport function getEntityTitlePropertyKey<M extends Record<string, any>>(collection: EntityCollection<M>, propertyConfigs: Record<string, PropertyConfig<any>>): string | undefined {\n    if (collection.titleProperty) {\n        return collection.titleProperty as string;\n    }\n    // find first text field property\n    for (const key in collection.properties) {\n        const property = collection.properties[key];\n        if (!isPropertyBuilder(property)) {\n            const field = getFieldConfig(property, propertyConfigs);\n            if (field?.key === \"text_field\") {\n                return key;\n            }\n        }\n    }\n    return undefined;\n}\n\nexport function getEntityImagePreviewPropertyKey<M extends object>(collection: ResolvedEntityCollection<M>): string | undefined {\n\n    // find first text field property\n    for (const key in collection.properties) {\n        const property = collection.properties[key];\n        if (property.dataType === \"string\" && property.storage?.acceptedFiles?.includes(\"image/*\")) {\n            return key;\n        }\n\n    }\n    return undefined;\n}\n","export function flattenObject(obj: any, parentKey = \"\") {\n    if (!obj) return obj;\n    return Object.keys(obj).reduce((flatObj, key) => {\n        const newKey = parentKey ? `${parentKey}.${key}` : key;\n\n        if (typeof obj[key] === \"object\" && obj[key] !== null) {\n            if (Array.isArray(obj[key])) {\n                obj[key].forEach((item: any, index: number) => {\n                    Object.assign(flatObj, flattenObject(item, `${newKey}[${index}]`));\n                });\n            } else {\n                Object.assign(flatObj, flattenObject(obj[key], newKey));\n            }\n        } else {\n            flatObj[newKey] = obj[key];\n        }\n\n        return flatObj;\n    }, {} as { [key: string]: any });\n}\n\n\n// map from nested property key like \"a.b.c\" to the maximum array count found in a list of objects for that array\nexport type ArrayValuesCount = Record<string, number>;\n\nexport function getArrayValuesCount(array: any[]): ArrayValuesCount {\n    return array.reduce((acc: ArrayValuesCount, obj: any) => {\n        Object.entries(obj).forEach(([key, value]) => {\n            // proceed only if value is an array\n            if (Array.isArray(value)) {\n                acc[key] = Math.max(acc[key] || 0, value.length);\n            }\n\n            // handle nested object\n            if (typeof value === \"object\" && value !== null) {\n                const nested = getArrayValuesCount([value]);\n                Object.entries(nested).forEach(([nestedKey, nestedCount]) => {\n                    const compoundKey = `${key}.${nestedKey}`;\n                    acc[compoundKey] = Math.max(acc[compoundKey] || 0, nestedCount);\n                });\n            }\n        });\n        return acc;\n    }, {});\n}\n","import { Properties, PropertiesOrBuilders } from \"../types\";\nimport { isPropertyBuilder } from \"./entities\";\n\nexport function makePropertiesEditable(properties: Properties) {\n    Object.keys(properties).forEach((key) => {\n        const property = properties[key];\n        property.editable = true;\n        if (property.dataType === \"map\" && property.properties) {\n            makePropertiesEditable(property.properties as Properties);\n        }\n    });\n    return properties;\n}\n\nexport function makePropertiesNonEditable(properties: PropertiesOrBuilders): PropertiesOrBuilders {\n    return Object.entries(properties).reduce((acc, [key, property]) => {\n        if (!isPropertyBuilder(property) && property.dataType === \"map\" && property.properties) {\n            const updated = { ...property, properties: makePropertiesNonEditable(property.properties as PropertiesOrBuilders) };\n            acc[key] = updated;\n        }\n        if (isPropertyBuilder(property)) {\n            acc[key] = property;\n        } else {\n            acc[key] = { ...property, editable: false };\n        }\n        return acc;\n    }, {} as PropertiesOrBuilders);\n\n}\n","import {\n    EntityCollection,\n    MapProperty,\n    ModifyCollectionProps,\n    PropertiesOrBuilders,\n    Property,\n    PropertyOrBuilder\n} from \"../types\";\nimport { mergeDeep } from \"./objects\";\nimport { sortProperties } from \"./collections\";\nimport { isPropertyBuilder } from \"./entities\";\n\nfunction applyModifyFunction(modifyCollection: ((props: ModifyCollectionProps) => (EntityCollection | void)) | undefined,\n                             collection: EntityCollection,\n                             parentPaths: string[]) {\n    if (modifyCollection) {\n        const modified = modifyCollection({\n            collection,\n            parentPaths\n        });\n        const resCollection = modified ?? collection;\n        if (resCollection.subcollections) {\n            resCollection.subcollections = resCollection.subcollections.map((subcollection) => {\n                return applyModifyFunction(modifyCollection, subcollection, [...parentPaths, collection.path]);\n            });\n        }\n        return resCollection;\n    } else {\n        return collection;\n    }\n}\n\n/**\n *\n */\nexport function joinCollectionLists(targetCollections: EntityCollection[],\n                                    sourceCollections: EntityCollection[] | undefined,\n                                    parentPaths: string[] = [],\n                                    modifyCollection?: (props: ModifyCollectionProps) => EntityCollection | void): EntityCollection[] {\n\n    // merge collections that are in both lists\n    const updatedCollections = (sourceCollections ?? [])\n        .map((sourceCol) => {\n            const targetCol = targetCollections?.find((collection) => {\n                return collection.id === sourceCol.id;\n                // return collection.path === codedCollection.path || collection.id && codedCollection.id;\n            });\n            if (!targetCol) {\n                return applyModifyFunction(modifyCollection, sourceCol, parentPaths);\n            } else {\n                return mergeCollection(targetCol, sourceCol, parentPaths, modifyCollection);\n            }\n        });\n\n    const sourceCollectionIds = updatedCollections.map(c => c.id);\n    // fetched collections that are not in the source collections\n    const resultStoredCollections = targetCollections\n        .filter((col) => {\n            return !sourceCollectionIds.includes(col.id);\n        })\n        .map((col) => {\n            if (modifyCollection) {\n                return applyModifyFunction(modifyCollection, col, parentPaths);\n            } else {\n                return col;\n            }\n        });\n\n    return [...updatedCollections, ...resultStoredCollections];\n}\n\n/**\n *\n */\nexport function mergeCollection(target: EntityCollection,\n                                source: EntityCollection,\n                                parentPaths: string[] = [],\n                                modifyCollection?: (props: ModifyCollectionProps) => EntityCollection | void\n): EntityCollection {\n\n    const subcollectionsMerged = joinCollectionLists(\n        target?.subcollections ?? [],\n        source?.subcollections ?? [],\n        [...parentPaths, target.path],\n        modifyCollection\n    );\n\n    const propertiesMerged: PropertiesOrBuilders = { ...target.properties } as PropertiesOrBuilders;\n    Object.keys(source.properties).forEach((key) => {\n        const property = target.properties[key] as Property;\n        if (property)\n            propertiesMerged[key] = mergePropertyOrBuilder(property, source.properties[key] as PropertyOrBuilder);\n        else\n            propertiesMerged[key] = source.properties[key] as PropertyOrBuilder;\n    });\n\n    const mergedCollection = mergeDeep(target, source);\n    const targetPropertiesOrder = getCollectionKeys(target);\n    const sourcePropertiesOrder = getCollectionKeys(source);\n    const mergedPropertiesOrder = [...new Set([...sourcePropertiesOrder, ...targetPropertiesOrder])];\n    const mergedEntityViews = [...new Set([...(target.entityViews ?? []), ...(source.entityViews ?? [])])];\n\n    let resultCollection: EntityCollection = {\n        ...mergedCollection,\n        subcollections: subcollectionsMerged,\n        properties: sortProperties(propertiesMerged, mergedPropertiesOrder),\n        propertiesOrder: mergedPropertiesOrder,\n        entityViews: mergedEntityViews\n    };\n    if (modifyCollection) {\n        const modifiedCollection = modifyCollection({\n            collection: resultCollection,\n            parentPaths\n        });\n        if (modifiedCollection)\n            resultCollection = modifiedCollection;\n    }\n    return resultCollection\n}\n\nfunction mergePropertyOrBuilder(target: PropertyOrBuilder, source: PropertyOrBuilder): PropertyOrBuilder {\n    if (isPropertyBuilder(source)) {\n        return source;\n    } else if (isPropertyBuilder(target)) {\n        return target;\n    } else {\n        const mergedProperty = mergeDeep(target, source);\n        const targetEditable = Boolean(target.editable);\n        const sourceEditable = Boolean(source.editable);\n        if (source.dataType === \"map\" && source.properties) {\n            const targetProperties = (\"properties\" in target ? target.properties : {}) as PropertiesOrBuilders;\n            const sourceProperties = (\"properties\" in source ? source.properties : {}) as PropertiesOrBuilders;\n            const targetPropertiesOrder = \"propertiesOrder\" in target && target.propertiesOrder ? target.propertiesOrder : Object.keys(targetProperties);\n            const sourcePropertiesOrder = \"propertiesOrder\" in source && source.propertiesOrder ? source.propertiesOrder : (\"properties\" in source ? Object.keys(source.properties) : []);\n            const mergedPropertiesOrder = [...new Set([...targetPropertiesOrder, ...sourcePropertiesOrder])];\n            const mergedProperties: PropertiesOrBuilders = { ...targetProperties } as PropertiesOrBuilders;\n            Object.keys(source.properties).forEach((key) => {\n                const property = targetProperties[key] as Property;\n                if (property)\n                    mergedProperties[key] = mergePropertyOrBuilder(property, sourceProperties[key] as PropertyOrBuilder);\n            });\n            return {\n                ...mergedProperty,\n                editable: targetEditable && sourceEditable,\n                properties: mergedProperties,\n                propertiesOrder: mergedPropertiesOrder\n            } as MapProperty;\n        }\n        return {\n            ...mergedProperty,\n            editable: targetEditable && sourceEditable\n        };\n    }\n}\n\nfunction getCollectionKeys(collection: EntityCollection) {\n    if (collection.propertiesOrder && collection.propertiesOrder.length > 0) {\n        const propertiesOrder = collection.propertiesOrder;\n        if (collection.additionalFields) {\n            collection.additionalFields.forEach((field) => {\n                if (!propertiesOrder.includes(field.key)) {\n                    propertiesOrder.push(field.key);\n                }\n            });\n        }\n        return propertiesOrder;\n    }\n    return [\n        ...Object.keys(collection.properties),\n        ...(collection.additionalFields ?? [])?.map(f => f.key)\n    ];\n}\n","import {\n    AdditionalFieldDelegate,\n    ArrayProperty,\n    BooleanProperty,\n    CMSType,\n    DateProperty,\n    EntityCallbacks,\n    EntityCollection,\n    EnumValueConfig,\n    EnumValues,\n    GeopointProperty,\n    MapProperty,\n    NumberProperty,\n    PropertiesOrBuilders,\n    PropertyBuilder,\n    PropertyConfig,\n    PropertyOrBuilder,\n    ReferenceProperty,\n    StringProperty,\n    User\n} from \"../types\";\n\n/**\n * Identity function we use to defeat the type system of Typescript and build\n * collection views with all its properties\n * @param collection\n * @group Builder\n */\nexport function buildCollection<M extends Record<string, any> = any,\n    UserType extends User = User>(\n    collection: EntityCollection<M, UserType>\n): EntityCollection<M, UserType> {\n    return collection;\n}\n\n/**\n * Identity function we use to defeat the type system of Typescript and preserve\n * the property keys.\n * @param property\n * @group Builder\n */\nexport function buildProperty<T extends CMSType = CMSType, P extends PropertyOrBuilder<T> = PropertyOrBuilder<T>, M extends Record<string, any> = Record<string, any>>(\n    property: P\n):\n    P extends StringProperty ? StringProperty :\n        P extends NumberProperty ? NumberProperty :\n            P extends BooleanProperty ? BooleanProperty :\n                P extends DateProperty ? DateProperty :\n                    P extends GeopointProperty ? GeopointProperty :\n                        P extends ReferenceProperty ? ReferenceProperty :\n                            P extends ArrayProperty ? ArrayProperty :\n                                P extends MapProperty ? MapProperty :\n                                    P extends PropertyBuilder<T, M> ? PropertyBuilder<T, M> : never {\n    return property as any;\n}\n\n/**\n * Identity function we use to defeat the type system of Typescript and preserve\n * the properties keys.\n * @param properties\n * @group Builder\n */\nexport function buildProperties<M extends Record<string, any>>(\n    properties: PropertiesOrBuilders<M>\n): PropertiesOrBuilders<M> {\n    return properties;\n}\n\n/**\n * Identity function we use to defeat the type system of Typescript and preserve\n * the properties keys.\n * @param propertiesOrBuilder\n * @group Builder\n */\nexport function buildPropertiesOrBuilder<M extends Record<string, any>>(\n    propertiesOrBuilder: PropertiesOrBuilders<M>\n): PropertiesOrBuilders<M> {\n    return propertiesOrBuilder;\n}\n\n/**\n * Identity function we use to defeat the type system of Typescript and preserve\n * the properties keys.\n * @param enumValues\n * @group Builder\n */\nexport function buildEnumValues(\n    enumValues: EnumValues\n): EnumValues {\n    return enumValues;\n}\n\n/**\n * Identity function we use to defeat the type system of Typescript and preserve\n * the properties keys.\n * @param enumValueConfig\n * @group Builder\n */\nexport function buildEnumValueConfig(\n    enumValueConfig: EnumValueConfig\n): EnumValueConfig {\n    return enumValueConfig;\n}\n\n/**\n * Identity function we use to defeat the type system of Typescript and preserve\n * the properties keys.\n * @param callbacks\n * @group Builder\n */\nexport function buildEntityCallbacks<M extends Record<string, any> = any>(\n    callbacks: EntityCallbacks<M>\n): EntityCallbacks<M> {\n    return callbacks;\n}\n\n/**\n * Identity function we use to defeat the type system of Typescript and build\n * additional field delegates views with all its properties\n * @param additionalFieldDelegate\n * @group Builder\n */\nexport function buildAdditionalFieldDelegate<M extends Record<string, any>, UserType extends User = User>(\n    additionalFieldDelegate: AdditionalFieldDelegate<M, UserType>\n): AdditionalFieldDelegate<M, UserType> {\n    return additionalFieldDelegate;\n}\n\n/**\n * Identity function we use to defeat the type system of Typescript and build\n * additional field delegates views with all its properties\n * @param propertyConfig\n * @group Builder\n */\nexport function buildFieldConfig<T extends CMSType = CMSType>(\n    propertyConfig: PropertyConfig<T>\n): PropertyConfig<T> {\n    return propertyConfig;\n}\n","import { useEffect, useRef } from \"react\";\n\nexport function printChanged(props: any, prev: any, path: string | undefined = \"\", depth: number | undefined = 0, maxDepth: number | undefined = 10) {\n    if (depth > maxDepth) {\n        return;\n    }\n    if (props && prev && typeof props === \"object\" && typeof prev === \"object\") {\n        Object.keys(props).forEach((key) => {\n            printChanged(props[key], prev[key], path + \".\" + key, depth + 1, maxDepth);\n        });\n    } else if (props !== prev) {\n        console.log(\"Changed props:\", path);\n    }\n\n}\n\nexport function useTraceUpdate(props: any, maxDepth = 3) {\n    const prev = useRef(props);\n    useEffect(() => {\n        console.log(\"Changed props:\");\n        printChanged(props, prev.current, \"\", 0, maxDepth);\n        prev.current = props;\n    });\n}\n","export const CONTAINER_FULL_WIDTH = \"100vw\";\n\nexport const ADDITIONAL_TAB_WIDTH = \"55vw\";\n\nexport const FORM_CONTAINER_WIDTH = \"768px\";\n","import React from \"react\";\nimport { DataSource } from \"../types\";\n\nexport const DataSourceContext = React.createContext<DataSource>({} as DataSource);\n","import { useContext, useMemo } from \"react\";\nimport { DataSource, EntityCollection } from \"../../types\";\nimport { DataSourceContext } from \"../../contexts/DataSourceContext\";\n\n/**\n * Use this hook to get the datasource being used\n * @group Hooks and utilities\n */\nexport const useDataSource = (collection?: EntityCollection<any, any>): DataSource => {\n    const defaultDataSource = useContext(DataSourceContext);\n    if (collection?.overrides?.dataSource)\n        return collection?.overrides.dataSource;\n    return defaultDataSource;\n};\n","import React from \"react\";\nimport { NavigationController } from \"../types\";\n\nexport const NavigationContext = React.createContext<NavigationController>({} as NavigationController);\n","import { useContext } from \"react\";\nimport { NavigationController } from \"../types\";\nimport { NavigationContext } from \"../contexts/NavigationContext\";\n\n/**\n * Use this hook to get the navigation of the app.\n * This controller provides the resolved collections for the CMS as well\n * as utility methods.\n *\n * @group Hooks and utilities\n */\nexport const useNavigationController = (): NavigationController => useContext(NavigationContext);\n","import { AuthController, User } from \"../types\";\nimport { useContext } from \"react\";\nimport { AuthControllerContext } from \"../contexts/AuthControllerContext\";\n\n/**\n * Hook to retrieve the AuthContext.\n *\n * Consider that in order to use this hook you need to have a parent\n * `FireCMS`\n *\n * @see AuthController\n * @group Hooks and utilities\n */\nexport const useAuthController = <UserType extends User = User, AuthControllerType extends AuthController<UserType> = AuthController<UserType>>(): AuthControllerType => useContext(AuthControllerContext) as AuthControllerType;\n","import React from \"react\";\nimport { SideDialogsController } from \"../types\";\n\nexport const SideDialogsControllerContext = React.createContext<SideDialogsController>({} as SideDialogsController);\n","import { SideDialogsController } from \"../types\";\nimport { SideDialogsControllerContext } from \"../contexts/SideDialogsControllerContext\";\nimport { useContext } from \"react\";\n\n/**\n * Hook to retrieve the side dialogs' controller.\n *\n * This hook allows you to open and close side dialogs. This is the mechanism\n * used when open a side entity dialog, or when selecting a reference.\n *\n * If you want to open a side entity dialog, you can use the {@link useSideEntityController}\n * hook.\n *\n * If you want to select a reference, you can use the {@link useReferenceDialog}\n *\n * Consider that in order to use this hook you need to have a parent\n * `FireCMS`\n *\n * @group Hooks and utilities\n */\nexport const useSideDialogsController = (): SideDialogsController => useContext(SideDialogsControllerContext);\n","import React from \"react\";\nimport { SideEntityController } from \"../types\";\n\nexport const SideEntityControllerContext = React.createContext<SideEntityController>({} as SideEntityController);\n","import { SideEntityController } from \"../types\";\nimport { useContext } from \"react\";\nimport { SideEntityControllerContext } from \"../contexts/SideEntityControllerContext\";\n\n/**\n * Use this hook to retrieve an entity controller that allows you to open\n * a side dialog to edit an entity.\n *\n * Consider that in order to use this hook you need to have a parent\n * `FireCMS`\n *\n * @see SideEntityController\n * @group Hooks and utilities\n */\nexport const useSideEntityController = (): SideEntityController => useContext(SideEntityControllerContext);\n","import React from \"react\";\nimport { StorageSource } from \"../types\";\n\nexport const StorageSourceContext = React.createContext<StorageSource>({} as StorageSource);\n","import { EntityCollection, StorageSource } from \"../types\";\nimport { StorageSourceContext } from \"../contexts/StorageSourceContext\";\nimport { useContext } from \"react\";\n\n/**\n * Use this hook to get the storage source being used\n * @group Hooks and utilities\n */\nexport const useStorageSource = (collection?: EntityCollection): StorageSource => {\n    const defaultStorageSource = useContext(StorageSourceContext);\n    if (collection?.overrides?.storageSource)\n        return collection.overrides.storageSource;\n    return defaultStorageSource;\n};\n","import React, { useCallback, useMemo } from \"react\";\nimport { useSnackbar } from \"notistack\";\n\n/**\n * Possible snackbar types\n * @group Hooks and utilities\n */\nexport type SnackbarMessageType = \"success\" | \"info\" | \"warning\" | \"error\";\n\n/**\n * Controller to display snackbars\n * @group Hooks and utilities\n */\nexport interface SnackbarController {\n\n    /**\n     * Close the currently open snackbar\n     */\n    close: () => void;\n\n    /**\n     * Display a new snackbar. You need to specify the type and message.\n     * You can optionally specify a title\n     */\n    open: (props: {\n        type: SnackbarMessageType;\n        message: React.ReactNode;\n        autoHideDuration?: number;\n    }) => void;\n\n}\n\n/**\n * Hook to retrieve the SnackbarContext.\n *\n * Consider that in order to use this hook you need to have a parent\n * `FireCMS`\n *\n * @see SnackbarController\n * @group Hooks and utilities\n */\nexport const useSnackbarController = () => {\n\n    const {\n        enqueueSnackbar,\n        closeSnackbar\n    } = useSnackbar();\n\n    const open = useCallback((props: {\n        type: SnackbarMessageType;\n        message: React.ReactNode;\n        autoHideDuration?: number;\n    }) => {\n        const {\n            type,\n            message,\n            autoHideDuration\n        } = props;\n        enqueueSnackbar({\n            message,\n            variant: type,\n            autoHideDuration\n        })\n    }, []);\n\n    const close = useCallback(() => {\n        closeSnackbar();\n    }, []);\n\n    return useMemo(() => ({\n        open,\n        close\n    }), [open, close]);\n\n};\n","import React from \"react\";\nimport { UserConfigurationPersistence } from \"../types\";\n\nexport const UserConfigurationPersistenceContext = React.createContext<UserConfigurationPersistence | undefined>(undefined);\n","import { UserConfigurationPersistence } from \"../types\";\nimport { useContext } from \"react\";\nimport { UserConfigurationPersistenceContext } from \"../contexts/UserConfigurationPersistenceContext\";\n\n/**\n * Use this controller to access the configuration that is stored externally,\n * and not defined in code\n *\n * @group Hooks and utilities\n */\nexport const useUserConfigurationPersistence = (): UserConfigurationPersistence | undefined => useContext(UserConfigurationPersistenceContext);\n","import React, { PropsWithChildren, useCallback, useRef, useState } from \"react\";\nimport { DialogControllerEntryProps, DialogsController } from \"../types/dialogs_controller\";\n\nexport const DialogsControllerContext = React.createContext<DialogsController>({} as DialogsController);\n\nexport const DialogsProvider: React.FC<PropsWithChildren<{}>> = ({ children }) => {\n\n    const [dialogEntries, setDialogEntries] = useState<DialogControllerEntryProps[]>([]);\n    const dialogEntriesRef = useRef<DialogControllerEntryProps[]>(dialogEntries);\n\n    const updateDialogEntries = (newPanels: DialogControllerEntryProps[]) => {\n        dialogEntriesRef.current = newPanels;\n        setDialogEntries(newPanels);\n    };\n\n    const close = useCallback(() => {\n\n        if (dialogEntries.length === 0)\n            return;\n\n        const updatedPanels = [...dialogEntries.slice(0, -1)];\n        updateDialogEntries(updatedPanels);\n\n    }, [dialogEntries]);\n\n    const open = useCallback((dialogEntry: DialogControllerEntryProps) => {\n\n        const updatedPanels = [...dialogEntries, dialogEntry];\n        updateDialogEntries(updatedPanels);\n\n        return {\n            closeDialog: () => {\n                const updatedPanels = dialogEntriesRef.current.filter(e => e.key !== dialogEntry.key);\n                updateDialogEntries(updatedPanels);\n            }\n        }\n    }, [dialogEntries]);\n\n    return (\n        <DialogsControllerContext.Provider value={{\n            open,\n            close\n        }}>\n            {children}\n            {dialogEntries.map((entry, i) => <entry.Component\n                key={`dialog_${i}`}\n                open={true}\n                closeDialog={close}\n            />)}\n        </DialogsControllerContext.Provider>\n    );\n};\n","import { useContext } from \"react\";\nimport { DialogsController } from \"../types/dialogs_controller\";\nimport { DialogsControllerContext } from \"../contexts/DialogsProvider\";\n\n/**\n * Use this hook to open a dialog imperatively.\n * Alternatively, you can use dialogs declaratively using the `Dialog` component.\n *\n * Consider that in order to use this hook you need to have a parent\n * `FireCMS`\n *\n * @group Hooks and utilities\n */\nexport const useDialogsController = (): DialogsController => useContext(DialogsControllerContext);\n","import React from \"react\";\nimport { CustomizationController } from \"../types/customization_controller\";\n\nexport const CustomizationControllerContext = React.createContext<CustomizationController>({} as CustomizationController);\n","import { useContext } from \"react\";\nimport { CustomizationController } from \"../types/customization_controller\";\nimport { CustomizationControllerContext } from \"../contexts/CustomizationControllerContext\";\n\n/**\n * Use this hook to retrieve the customization controller.\n * This hook includes all the customization options that can be used\n * to customize the CMS.\n *\n * You will likely not need to use this hook directly.\n *\n * @group Hooks and utilities\n */\nexport const useCustomizationController = (): CustomizationController => useContext(CustomizationControllerContext);\n","import React from \"react\";\nimport { AnalyticsController } from \"../types\";\n\nexport const AnalyticsContext = React.createContext<AnalyticsController>({} as AnalyticsController);\n","import { useContext } from \"react\";\nimport { AnalyticsController } from \"../types\";\nimport { AnalyticsContext } from \"../contexts/AnalyticsContext\";\n\n/**\n * @group Hooks and utilities\n */\nexport const useAnalyticsController = (): AnalyticsController => useContext(AnalyticsContext);\n","import { AuthController, FireCMSContext, User } from \"../types\";\nimport { useAuthController } from \"./useAuthController\";\nimport { useSideDialogsController } from \"./useSideDialogsController\";\nimport { useNavigationController } from \"./useNavigationController\";\nimport { useSideEntityController } from \"./useSideEntityController\";\nimport { useDataSource } from \"./data/useDataSource\";\nimport { useStorageSource } from \"./useStorageSource\";\nimport { useSnackbarController } from \"./useSnackbarController\";\nimport { useUserConfigurationPersistence } from \"./useUserConfigurationPersistence\";\nimport { useDialogsController } from \"./useDialogsController\";\nimport { useCustomizationController } from \"./useCustomizationController\";\nimport { useAnalyticsController } from \"./useAnalyticsController\";\nimport React, { useEffect } from \"react\";\n\n/**\n * Hook to retrieve the {@link FireCMSContext}.\n *\n * Consider that in order to use this hook you need to have a parent\n * `FireCMS` component.\n *\n * @see FireCMSContext\n * @group Hooks and utilities\n */\nexport const useFireCMSContext = <UserType extends User = User, AuthControllerType extends AuthController<UserType> = AuthController<UserType>>(): FireCMSContext<UserType, AuthControllerType> => {\n\n    const authController = useAuthController<UserType, AuthControllerType>();\n    const sideDialogsController = useSideDialogsController();\n    const sideEntityController = useSideEntityController();\n    const navigation = useNavigationController();\n    const dataSource = useDataSource();\n    const storageSource = useStorageSource();\n    const snackbarController = useSnackbarController();\n    const userConfigPersistence = useUserConfigurationPersistence();\n    const dialogsController = useDialogsController();\n    const customizationController = useCustomizationController();\n    const analyticsController = useAnalyticsController();\n\n    const fireCMSContextRef = React.useRef<FireCMSContext<UserType, AuthControllerType>>({\n        authController,\n        sideDialogsController,\n        sideEntityController,\n        navigation,\n        dataSource,\n        storageSource,\n        snackbarController,\n        userConfigPersistence,\n        dialogsController,\n        customizationController,\n        analyticsController\n    });\n\n    useEffect(() => {\n        fireCMSContextRef.current = {\n            authController,\n            sideDialogsController,\n            sideEntityController,\n            navigation,\n            dataSource,\n            storageSource,\n            snackbarController,\n            userConfigPersistence,\n            dialogsController,\n            customizationController,\n            analyticsController\n        };\n    }, [authController, dialogsController, navigation, sideDialogsController]);\n\n    return fireCMSContextRef.current;\n}\n\n// export const useFireCMSContext = <UserType extends User = User, AuthControllerType extends AuthController<UserType> = AuthController<UserType>>(): FireCMSContext<UserType, AuthControllerType> => {\n//\n//     const authController = useAuthController<UserType, AuthControllerType>();\n//     const sideDialogsController = useSideDialogsController();\n//     const sideEntityController = useSideEntityController();\n//     const navigation = useNavigationController();\n//     const dataSource = useDataSource();\n//     const storageSource = useStorageSource();\n//     const snackbarController = useSnackbarController();\n//     const userConfigPersistence = useUserConfigurationPersistence();\n//     const dialogsController = useDialogsController();\n//     const customizationController = useCustomizationController();\n//     const analyticsController = useAnalyticsController();\n//\n//     return {\n//         authController,\n//         sideDialogsController,\n//         sideEntityController,\n//         navigation,\n//         dataSource,\n//         storageSource,\n//         snackbarController,\n//         userConfigPersistence,\n//         dialogsController,\n//         customizationController,\n//         analyticsController\n//     };\n//\n// };\n","import { useEffect, useState } from \"react\";\nimport { Entity, EntityCollection, FilterValues, FireCMSContext, User } from \"../../types\";\nimport { useDataSource } from \"./useDataSource\";\nimport { useNavigationController } from \"../useNavigationController\";\nimport { useFireCMSContext } from \"../useFireCMSContext\";\n\n/**\n * @group Hooks and utilities\n */\nexport interface CollectionFetchProps<M extends Record<string, any>> {\n\n    /**\n     * Absolute collection path\n     */\n    path: string;\n\n    /**\n     * collection of the entity displayed by this collection\n     */\n    collection: EntityCollection<M>\n\n    /**\n     * Number of entities to fetch\n     */\n    itemCount?: number;\n\n    /**\n     * Filter the fetched data by the property\n     */\n    filterValues?: FilterValues<Extract<keyof M, string>>;\n\n    /**\n     * Sort the results by\n     */\n    sortBy?: [Extract<keyof M, string>, \"asc\" | \"desc\"];\n\n    /**\n     * Search string\n     */\n    searchString?: string;\n}\n\n/**\n * @group Hooks and utilities\n */\nexport interface CollectionFetchResult<M extends Record<string, any>> {\n    data: Entity<M>[];\n    dataLoading: boolean;\n    noMoreToLoad: boolean;\n    dataLoadingError?: Error;\n}\n\n/**\n * This hook is used to fetch collections using a given collection\n * @param path\n * @param collection\n * @param filterValues\n * @param sortBy\n * @param itemCount\n * @param searchString\n * @group Hooks and utilities\n */\nexport function useCollectionFetch<M extends Record<string, any>, UserType extends User>(\n    {\n        path: inputPath,\n        collection,\n        filterValues,\n        sortBy,\n        itemCount,\n        searchString\n    }: CollectionFetchProps<M>): CollectionFetchResult<M> {\n\n    const dataSource = useDataSource(collection);\n    const navigationController = useNavigationController();\n\n    const path = navigationController.resolveAliasesFrom(inputPath);\n\n    const sortByProperty = sortBy ? sortBy[0] : undefined;\n    const currentSort = sortBy ? sortBy[1] : undefined;\n\n    const context: FireCMSContext<UserType> = useFireCMSContext();\n\n    const [data, setData] = useState<Entity<M>[]>([]);\n\n    const [dataLoading, setDataLoading] = useState<boolean>(false);\n    const [dataLoadingError, setDataLoadingError] = useState<Error | undefined>();\n    const [noMoreToLoad, setNoMoreToLoad] = useState<boolean>(false);\n\n    useEffect(() => {\n\n        setDataLoading(true);\n\n        const onEntitiesUpdate = async (entities: Entity<M>[]) => {\n            if (collection.callbacks?.onFetch) {\n                try {\n                    entities = await Promise.all(\n                        entities.map((entity) =>\n                            collection.callbacks!.onFetch!({\n                                collection,\n                                path,\n                                entity,\n                                context\n                            })));\n                } catch (e: any) {\n                    console.error(e);\n                }\n            }\n            setDataLoading(false);\n            setDataLoadingError(undefined);\n            setData(entities.map(e => ({\n                ...e,\n                // values: sanitizeData(e.values, resolvedCollection.properties)\n            })));\n            setNoMoreToLoad(!itemCount || entities.length < itemCount);\n        };\n\n        const onError = (error: Error) => {\n            console.error(\"ERROR\", error);\n            setDataLoading(false);\n            setData([]);\n            setDataLoadingError(error);\n        };\n\n        if (dataSource.listenCollection) {\n            return dataSource.listenCollection<M>({\n                path,\n                collection,\n                onUpdate: onEntitiesUpdate,\n                onError,\n                searchString,\n                filter: filterValues,\n                limit: itemCount,\n                startAfter: undefined,\n                orderBy: sortByProperty,\n                order: currentSort\n            });\n        } else {\n            dataSource.fetchCollection<M>({\n                path,\n                collection,\n                searchString,\n                filter: filterValues,\n                limit: itemCount,\n                startAfter: undefined,\n                orderBy: sortByProperty,\n                order: currentSort\n            })\n                .then(onEntitiesUpdate)\n                .catch(onError);\n            return () => {\n            };\n        }\n    }, [path, itemCount, currentSort, sortByProperty, filterValues, searchString]);\n\n    return {\n        data,\n        dataLoading,\n        dataLoadingError,\n        noMoreToLoad\n    };\n\n}\n","import { useEffect, useState } from \"react\";\nimport { Entity, EntityCollection, FireCMSContext, User } from \"../../types\";\nimport { useDataSource } from \"./useDataSource\";\nimport { useNavigationController } from \"../useNavigationController\";\nimport { useFireCMSContext } from \"../useFireCMSContext\";\n\n/**\n * @group Hooks and utilities\n */\nexport interface EntityFetchProps<M extends Record<string, any>, UserType extends User = User> {\n    path: string;\n    entityId?: string;\n    collection: EntityCollection<M, UserType>;\n    useCache?: boolean;\n}\n\n/**\n * @group Hooks and utilities\n */\nexport interface EntityFetchResult<M extends Record<string, any>> {\n    entity?: Entity<M>,\n    dataLoading: boolean,\n    dataLoadingError?: Error\n}\n\nconst CACHE: Record<string, Entity<any> | undefined> = {};\n\n/**\n * This hook is used to fetch an entity.\n * It gives real time updates if the datasource supports it.\n * @param path\n * @param collection\n * @param entityId\n * @param useCache\n * @group Hooks and utilities\n */\n\nexport function useEntityFetch<M extends Record<string, any>, UserType extends User>(\n    {\n        path: inputPath,\n        entityId,\n        collection,\n        useCache = false\n    }: EntityFetchProps<M, UserType>): EntityFetchResult<M> {\n\n    const dataSource = useDataSource(collection);\n    const navigationController = useNavigationController();\n\n    const path = navigationController.resolveAliasesFrom(inputPath);\n\n    const context: FireCMSContext<UserType> = useFireCMSContext();\n\n    const [entity, setEntity] = useState<Entity<M> | undefined>();\n    const [dataLoading, setDataLoading] = useState<boolean>(true);\n    const [dataLoadingError, setDataLoadingError] = useState<Error | undefined>();\n\n    useEffect(() => {\n\n        setDataLoading(true);\n\n        const onEntityUpdate = async (updatedEntity: Entity<M> | undefined) => {\n            if (collection.callbacks?.onFetch && updatedEntity) {\n                try {\n                    updatedEntity = await collection.callbacks.onFetch({\n                        collection,\n                        path,\n                        entity: updatedEntity,\n                        context\n                    });\n                } catch (e: any) {\n                    console.error(e);\n                }\n            }\n            CACHE[`${path}/${entityId}`] = updatedEntity;\n            setEntity(updatedEntity);\n            setDataLoading(false);\n            setDataLoadingError(undefined);\n        };\n\n        const onError = (error: Error) => {\n            console.error(\"ERROR fetching entity\", error);\n            setDataLoading(false);\n            setEntity(undefined);\n            setDataLoadingError(error);\n        };\n\n        if (entityId && useCache && CACHE[`${path}/${entityId}`]) {\n            setEntity(CACHE[`${path}/${entityId}`]);\n            setDataLoading(false);\n            setDataLoadingError(undefined);\n            // eslint-disable-next-line @typescript-eslint/no-empty-function\n            return () => {\n            };\n        } else if (entityId && path && collection) {\n            if (dataSource.listenEntity) {\n                return dataSource.listenEntity<M>({\n                    path,\n                    entityId,\n                    collection,\n                    onUpdate: onEntityUpdate,\n                    onError\n                });\n            } else {\n                dataSource.fetchEntity<M>({\n                    path,\n                    entityId,\n                    collection\n                })\n                    .then(onEntityUpdate)\n                    .catch(onError);\n                return () => {\n                };\n            }\n        }\n        // if no entityId is provided we do nothing\n        else {\n            onEntityUpdate(undefined);\n            return () => {\n            };\n        }\n    }, [entityId, path]);\n\n    return {\n        entity,\n        dataLoading,\n        dataLoadingError\n    };\n\n}\n","import {\n    DataSource,\n    Entity,\n    EntityCallbacks,\n    EntityCollection,\n    EntityValues,\n    FireCMSContext,\n    SaveEntityProps,\n    User\n} from \"../../types\";\nimport { useDataSource } from \"./useDataSource\";\nimport { resolveCollection } from \"../../util\";\n\n/**\n * @group Hooks and utilities\n */\nexport type SaveEntityWithCallbacksProps<M extends Record<string, any>> =\n    SaveEntityProps<M> &\n    {\n        callbacks?: EntityCallbacks<M>;\n        onSaveSuccess?: (updatedEntity: Entity<M>) => void,\n        onSaveFailure?: (e: Error) => void,\n        onPreSaveHookError?: (e: Error) => void,\n        onSaveSuccessHookError?: (e: Error) => void\n    }\n\n/**\n * This function is in charge of saving an entity to the datasource.\n * It will run all the save callbacks specified in the collection.\n * It is also possible to attach callbacks on save success or error, and callback\n * errors.\n *\n * If you just want to save the data without running the `onSaveSuccess`,\n * `onSaveFailure` and `onPreSave` callbacks, you can use the `saveEntity` method\n * in the datasource ({@link useDataSource}).\n *\n * @param collection\n * @param path\n * @param entityId\n * @param callbacks\n * @param values\n * @param previousValues\n * @param status\n * @param dataSource\n * @param context\n * @param onSaveSuccess\n * @param onSaveFailure\n * @param onPreSaveHookError\n * @param onSaveSuccessHookError\n * @see useDataSource\n * @group Hooks and utilities\n */\nexport async function saveEntityWithCallbacks<M extends Record<string, any>, UserType extends User>({\n                                                                                                        collection,\n                                                                                                        path,\n                                                                                                        entityId,\n                                                                                                        values,\n                                                                                                        previousValues,\n                                                                                                        status,\n                                                                                                        dataSource,\n                                                                                                        context,\n                                                                                                        onSaveSuccess,\n                                                                                                        onSaveFailure,\n                                                                                                        onPreSaveHookError,\n                                                                                                        onSaveSuccessHookError\n                                                                                                    }: SaveEntityWithCallbacksProps<M> & {\n                                                                                                        collection: EntityCollection<M, UserType>,\n                                                                                                        dataSource: DataSource,\n                                                                                                        context: FireCMSContext<UserType>,\n                                                                                                    }\n): Promise<void> {\n\n    if (status !== \"new\" && !entityId) {\n        throw new Error(\"Entity id must be specified when updating an existing entity\");\n    }\n    let updatedValues: Partial<EntityValues<M>>;\n\n    const customizationController = context.customizationController;\n\n    const resolvedPath = context.navigation.resolveAliasesFrom(path);\n\n    const callbacks = collection.callbacks;\n    if (callbacks?.onPreSave) {\n        try {\n            const resolvedCollection = resolveCollection<M>({\n                collection,\n                path,\n                values: previousValues as EntityValues<M>,\n                entityId,\n                fields: customizationController.propertyConfigs\n            });\n            updatedValues = await callbacks.onPreSave({\n                collection: resolvedCollection,\n                path,\n                resolvedPath,\n                entityId,\n                values,\n                previousValues,\n                status,\n                context\n            });\n        } catch (e: any) {\n            console.error(e);\n            if (onPreSaveHookError)\n                onPreSaveHookError(e);\n            return;\n        }\n    } else {\n        updatedValues = values;\n    }\n\n    return dataSource.saveEntity({\n        collection,\n        path: resolvedPath,\n        entityId,\n        values: updatedValues,\n        previousValues,\n        status\n    }).then((entity) => {\n        try {\n            if (callbacks?.onSaveSuccess) {\n                const resolvedCollection = resolveCollection<M>({\n                    collection,\n                    path,\n                    values: updatedValues as EntityValues<M>,\n                    entityId,\n                    fields: customizationController.propertyConfigs\n                });\n                callbacks.onSaveSuccess({\n                    collection: resolvedCollection,\n                    path,\n                    resolvedPath,\n                    entityId: entity.id,\n                    values: updatedValues,\n                    previousValues,\n                    status,\n                    context\n                });\n            }\n        } catch (e: any) {\n            if (onSaveSuccessHookError)\n                onSaveSuccessHookError(e);\n        }\n        if (onSaveSuccess)\n            onSaveSuccess(entity);\n    })\n        .catch((e) => {\n            console.error(\"!!!\", e);\n            if (callbacks?.onSaveFailure) {\n\n                const resolvedCollection = resolveCollection<M>({\n                    collection,\n                    path,\n                    values: updatedValues as EntityValues<M>,\n                    entityId,\n                    fields: customizationController.propertyConfigs\n                });\n                callbacks.onSaveFailure({\n                    collection: resolvedCollection,\n                    path,\n                    resolvedPath,\n                    entityId,\n                    values: updatedValues,\n                    previousValues,\n                    status,\n                    context\n                });\n            }\n            if (onSaveFailure) onSaveFailure(e);\n        });\n}\n","import {\n    DataSource,\n    DeleteEntityProps,\n    Entity,\n    EntityCallbacks,\n    EntityOnDeleteProps,\n    FireCMSContext,\n    ResolvedEntityCollection,\n    User\n} from \"../../types\";\n\n/**\n * @group Hooks and utilities\n */\nexport type DeleteEntityWithCallbacksProps<M extends Record<string, any>, UserType extends User = User> =\n    DeleteEntityProps<M>\n    & {\n    callbacks?: EntityCallbacks<M, UserType>;\n    onDeleteSuccess?: (entity: Entity<M>) => void;\n    onDeleteFailure?: (entity: Entity<M>, e: Error) => void;\n    onPreDeleteHookError?: (entity: Entity<M>, e: Error) => void;\n    onDeleteSuccessHookError?: (entity: Entity<M>, e: Error) => void;\n}\n\n/**\n * This function is in charge of deleting an entity in the datasource.\n * It will run all the delete callbacks specified in the collection.\n * It is also possible to attach callbacks on save success or error, and callback\n * errors.\n *\n * If you just want to delete any data without running the `onPreDelete`,\n * and `onDelete` callbacks, you can use the `deleteEntity` method\n * in the datasource ({@link useDataSource}).\n *\n * @param dataSource\n * @param entity\n * @param collection\n * @param callbacks\n * @param onDeleteSuccess\n * @param onDeleteFailure\n * @param onPreDeleteHookError\n * @param onDeleteSuccessHookError\n * @param context\n * @group Hooks and utilities\n */\nexport async function deleteEntityWithCallbacks<M extends Record<string, any>, UserType extends User>({\n                                                                                                          dataSource,\n                                                                                                          entity,\n                                                                                                          collection,\n                                                                                                          callbacks,\n                                                                                                          onDeleteSuccess,\n                                                                                                          onDeleteFailure,\n                                                                                                          onPreDeleteHookError,\n                                                                                                          onDeleteSuccessHookError,\n                                                                                                          context\n                                                                                                      }: DeleteEntityWithCallbacksProps<M> & {\n                                                                                                          collection: ResolvedEntityCollection<M>,\n                                                                                                          dataSource: DataSource,\n                                                                                                          context: FireCMSContext<UserType>\n                                                                                                      }\n): Promise<boolean> {\n\n    console.debug(\"Deleting entity\", entity.path, entity.id);\n\n    const entityDeleteProps: EntityOnDeleteProps<M, any> = {\n        entity,\n        collection,\n        entityId: entity.id,\n        path: entity.path,\n        context\n    };\n\n    if (callbacks?.onPreDelete) {\n        try {\n            await callbacks.onPreDelete(entityDeleteProps);\n        } catch (e: any) {\n            console.error(e);\n            if (onPreDeleteHookError)\n                onPreDeleteHookError(entity, e);\n            return false;\n        }\n    }\n    return dataSource.deleteEntity({\n        entity\n    }).then(() => {\n        onDeleteSuccess && onDeleteSuccess(entity);\n        try {\n            if (callbacks?.onDelete) {\n                callbacks.onDelete(entityDeleteProps);\n            }\n            return true;\n        } catch (e: any) {\n            if (onDeleteSuccessHookError)\n                onDeleteSuccessHookError(entity, e);\n            return false;\n        }\n    }).catch((e) => {\n        if (onDeleteFailure) onDeleteFailure(entity, e);\n        return false;\n    });\n}\n","import { Entity, EntityCollection, EntityCustomView, FireCMSContext, User } from \"../types\";\nimport { useEffect, useState } from \"react\";\nimport { getNavigationEntriesFromPathInternal } from \"../util/navigation_from_path\";\nimport { useFireCMSContext } from \"./useFireCMSContext\";\n\n/**\n * @see resolveNavigationFrom\n * @group Hooks and utilities\n */\nexport type ResolvedNavigationEntry<M extends Record<string, any>> =\n    | ResolvedNavigationEntity<M>\n    | ResolvedNavigationCollection<M>\n    | ResolvedNavigationEntityCustom<M>;\n\n/**\n * @see resolveNavigationFrom\n * @group Hooks and utilities\n */\nexport interface ResolvedNavigationEntity<M extends Record<string, any>> {\n    type: \"entity\";\n    entity: Entity<M>;\n    entityId: string;\n    path: string;\n    parentCollection: EntityCollection<M>;\n}\n\n/**\n * @see resolveNavigationFrom\n * @group Hooks and utilities\n */\nexport interface ResolvedNavigationCollection<M extends Record<string, any>> {\n    type: \"collection\";\n    path: string;\n    collection: EntityCollection<M>;\n}\n\n/**\n * @see resolveNavigationFrom\n * @group Hooks and utilities\n */\ninterface ResolvedNavigationEntityCustom<M extends Record<string, any>> {\n    type: \"custom_view\";\n    path: string;\n    view: EntityCustomView<M>;\n}\n\n/**\n * Use this function to retrieve an array of navigation entries (resolved\n * collection, entity or entity custom_view) for the given path. You need to pass the app context\n * that you receive in different callbacks, such as the save hooks.\n *\n * It will take into account the `navigation` provided at the `FireCMS` level.\n *\n * @param path\n * @param context\n * @group Hooks and utilities\n */\nexport function resolveNavigationFrom<M extends Record<string, any>, UserType extends User>({\n                                                                                                path,\n                                                                                                context\n                                                                                            }: {\n    path: string,\n    context: FireCMSContext<UserType>\n}): Promise<ResolvedNavigationEntry<M>[]> {\n\n    const dataSource = context.dataSource;\n    const navigation = context.navigation;\n\n    if (!navigation) {\n        throw Error(\"Calling getNavigationFrom, but main navigation has not yet been initialised\");\n    }\n\n    const navigationEntries = getNavigationEntriesFromPathInternal({\n        path,\n        collections: navigation.collections ?? []\n    });\n\n    const resultPromises: Promise<ResolvedNavigationEntry<any>>[] = navigationEntries\n        .map((entry) => {\n            if (entry.type === \"collection\") {\n                return Promise.resolve(entry);\n            } else if (entry.type === \"entity\") {\n                const collection = navigation.getCollection(entry.path, entry.entityId);\n                if (!collection) {\n                    throw Error(`No collection defined in the navigation for the entity with path ${entry.path}`);\n                }\n                return dataSource.fetchEntity({\n                    path: entry.path,\n                    entityId: entry.entityId,\n                    collection\n                })\n                    .then((entity) => {\n                        if (!entity) return undefined;\n                        return { ...entry, entity };\n                    });\n            } else if (entry.type === \"custom_view\") {\n                return Promise.resolve(entry);\n            } else {\n                throw Error(\"Unmapped element in useEntitiesFromPath\");\n            }\n        })\n        .filter(v => Boolean(v)) as Promise<ResolvedNavigationEntry<any>>[];\n\n    return Promise.all(resultPromises);\n}\n\n/**\n * @group Hooks and utilities\n */\nexport interface NavigationFromProps {\n    path: string;\n}\n\n/**\n * @group Hooks and utilities\n */\nexport interface NavigationFrom<M extends Record<string, any>> {\n    data?: ResolvedNavigationEntry<M>[]\n    dataLoading: boolean,\n    dataLoadingError?: Error\n}\n\n/**\n * Use this hook to retrieve an array of navigation entries (resolved\n * collection or entity) for the given path. You can use this hook\n * in any React component that lives under `FireCMS`\n * @group Hooks and utilities\n */\nexport function useResolvedNavigationFrom<M extends Record<string, any>, UserType extends User>(\n    {\n        path\n    }: NavigationFromProps): NavigationFrom<M> {\n\n    const context: FireCMSContext<UserType> = useFireCMSContext();\n\n    const [data, setData] = useState<ResolvedNavigationEntry<M>[] | undefined>();\n    const [dataLoading, setDataLoading] = useState<boolean>(false);\n    const [dataLoadingError, setDataLoadingError] = useState<Error | undefined>();\n\n    useEffect(() => {\n        const navigation = context.navigation;\n        if (navigation) {\n            setDataLoading(true);\n            setDataLoadingError(undefined);\n            resolveNavigationFrom<M, UserType>({ path, context })\n                .then((res) => {\n                    setData(res);\n                })\n                .catch((e) => setDataLoadingError(e))\n                .finally(() => setDataLoading(false));\n        }\n\n    }, [path, context]);\n\n    if (!context.navigation) {\n        return { dataLoading: true };\n    }\n\n    return { data, dataLoading, dataLoadingError };\n}\n","import { ModeControllerContext } from \"../contexts/ModeController\";\nimport { useContext } from \"react\";\n\n/**\n * Use this controller to change color mode\n * @group Hooks and utilities\n */\nexport interface ModeController {\n    mode: \"light\" | \"dark\";\n    setMode: (mode: \"light\" | \"dark\") => void;\n    toggleMode: () => void;\n}\n\n/**\n * Hook to retrieve the current mode (\"light\" | \"dark\"), and `setMode`\n * or `toggle` functions to change it.\n *\n * Consider that in order to use this hook you need to have a parent\n * `FireCMS`\n *\n * @see ModeController\n * @group Hooks and utilities\n */\nexport const useModeController = () => useContext(ModeControllerContext);\n","// FORKED FROM https://github.com/fayeed/use-clipboard\n\nimport { MutableRefObject, useCallback, useEffect, useRef, useState } from \"react\";\n\nexport interface UseClipboardProps {\n    /**\n     * It's callback function that is called after the `copy` command\n     * is executed.\n     *\n     * @param text: The selected clipboard text.\n     */\n    onSuccess?: (text: string) => void;\n\n    /**\n     * Triggers when the hook encounters an error.\n     * If passed hook won't throw an error.\n     *\n     * @param error: cause of the error\n     */\n    onError?: (error: string) => void;\n\n    /**\n     * Disables the new clipboard API `navigator.clipboard` even if\n     * it is supported.\n     */\n    disableClipboardAPI?: boolean;\n\n    /**\n     * revert back the isCopied flag to false again if a value is set.\n     */\n    copiedDuration?: number;\n}\n\nexport interface useClipboardReturnType {\n    /**\n     * Use ref to pull the text content from.\n     */\n    ref: MutableRefObject<any>;\n\n    /**\n     * Use it to perform the copy operation\n     */\n    copy: (text?: string) => void;\n\n    /**\n     * Use it to perform the cut operation\n     */\n    cut: () => void;\n\n    /**\n     * Indicates wheater the content was successfully copied or not.\n     */\n    isCoppied: boolean;\n\n    /**\n     * Current selected clipboard content.\n     */\n    clipboard: string;\n\n    /**\n     * Clears the user clipboard.\n     */\n    clearClipboard: () => void;\n\n    /**\n     * Check to see if the browser supports the new `navigator.clipboard` API.\n     */\n    isSupported: () => boolean;\n}\n\nexport const useClipboard = (\n    options?: UseClipboardProps\n): useClipboardReturnType => {\n    const { onSuccess, onError, disableClipboardAPI = false, copiedDuration } =\n    options || {};\n    const ref = useRef<any>(null);\n    const [isCoppied, setIsCoppied] = useState(false);\n    const [clipboard, setClipbaord] = useState(\"\");\n\n    useEffect(() => {\n        if (copiedDuration) setTimeout(() => setIsCoppied(false), copiedDuration);\n    }, [isCoppied]);\n\n    const isSupported = () => navigator.clipboard !== undefined;\n\n    const handleError = useCallback((error: string) => {\n        if (onError) onError(error);\n        else throw new Error(error);\n    }, [onError]);\n\n    const handleSuccess = useCallback((text: string) => {\n        if (onSuccess) onSuccess(text);\n        setIsCoppied(true);\n        setClipbaord(text);\n    }, [onSuccess]);\n\n    const copyToClipboard = useCallback((text: string) => {\n        navigator.clipboard\n            .writeText(text)\n            .then(() => handleSuccess(text))\n            .catch((err) => {\n                handleError(err);\n                setIsCoppied(false);\n            });\n    }, [handleError, handleSuccess]);\n\n    const clearClipboard = () => {\n        if (isSupported()) {\n            navigator.clipboard.writeText(\"\");\n        }\n    };\n\n    const copy = (text?: string) =>\n        action(\"copy\", typeof text === \"object\" ? undefined : text);\n\n    const cut = () => action(\"cut\");\n\n    const action = useCallback(\n        (operation = \"copy\", text?: string) => {\n            const element = ref.current as HTMLElement;\n\n            const isInput =\n                element &&\n                (element.tagName === \"INPUT\" || element.tagName === \"TEXTAREA\");\n\n            const input = ref.current as HTMLInputElement;\n\n            if (isSupported() && !disableClipboardAPI) {\n                if (text) {\n                    copyToClipboard(text);\n                } else if (element) {\n                    if (isInput) {\n                        copyToClipboard(input.value);\n\n                        if (operation === \"cut\") {\n                            input.value = \"\";\n                        }\n                    } else {\n                        copyToClipboard(element.innerText);\n                    }\n                } else {\n                    handleError(\"Both the ref & text were undefined\");\n                }\n            }\n        },\n        [disableClipboardAPI, copyToClipboard, handleError]\n    );\n\n    return {\n        ref,\n        isCoppied,\n        clipboard,\n        clearClipboard,\n        isSupported,\n        copy,\n        cut\n    };\n};\n","import { useEffect, useState } from \"react\";\n\ntype LayoutListener = (isLargeLayout: boolean) => void;\n\nconst breakpoints = {\n    xs: 0,\n    sm: 640,\n    md: 768,\n    lg: 1024,\n    xl: 1280,\n    \"2xl\": 1536,\n    \"3xl\": 1920\n}\n\n// Global state and listeners array\nlet isLargeLayoutGlobal = checkLargeLayout(\"lg\"); // Default value\nconst listeners: LayoutListener[] = [];\n\n// Utility to notify all listeners\nconst notifyListeners = () => {\n    listeners.forEach(listener => listener(isLargeLayoutGlobal));\n};\n\n// Listen to resize events once, at a global level\nif (typeof window !== \"undefined\")\n    window.addEventListener(\"resize\", () => {\n        const newIsLargeLayout = checkLargeLayout(\"lg\");\n        if (newIsLargeLayout !== isLargeLayoutGlobal) {\n            isLargeLayoutGlobal = newIsLargeLayout;\n            notifyListeners();\n        }\n    });\n\nexport const useLargeLayout = () => {\n    const [isLargeLayout, setIsLargeLayout] = useState(isLargeLayoutGlobal);\n\n    useEffect(() => {\n        // Listener function to update component state\n        const listener: LayoutListener = (newIsLargeLayout) => {\n            setIsLargeLayout(newIsLargeLayout);\n        };\n\n        // Register listener\n        listeners.push(listener);\n\n        // Initial state\n        setIsLargeLayout(isLargeLayoutGlobal);\n\n        // Clean up by removing the listener\n        return () => {\n            const index = listeners.indexOf(listener);\n            if (index > -1) {\n                listeners.splice(index, 1);\n            }\n        };\n    }, []);\n\n    return isLargeLayout;\n};\n\nfunction checkLargeLayout(breakpoint: \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"2xl\" | \"3xl\" = \"lg\"): boolean {\n    if (typeof window === \"undefined\")\n        return false;\n    return window.matchMedia(`(min-width: ${breakpoints[breakpoint] + 1}px)`).matches;\n}\n\n// import { useEffect, useState } from \"react\";\n//\n// const breakpoints = {\n//     xs: 0,\n//     sm: 640,\n//     md: 768,\n//     lg: 1024,\n//     xl: 1280,\n//     \"2xl\": 1536,\n//     \"3xl\": 1920\n// }\n// export const useLargeLayout = (breakpoint: \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"2xl\" | \"3xl\" = \"lg\"): boolean => {\n//     const [isLargeLayout, setIsLargeLayout] = useState<boolean>(false);\n//\n//     useEffect(() => {\n//         const handleResize = () => {\n//             const matched = window.matchMedia(`(min-width: ${breakpoints[breakpoint] + 1}px)`).matches;\n//             setIsLargeLayout(matched);\n//         };\n//\n//         // Set initial state\n//         handleResize();\n//\n//         // Set up event listener for resize events\n//         window.addEventListener(\"resize\", handleResize);\n//\n//         // Clean up event listener when component unmounts\n//         return () => {\n//             window.removeEventListener(\"resize\", handleResize);\n//         };\n//     }, []);\n//\n//     return isLargeLayout;\n// };\n","import React from \"react\";\nimport { Tooltip, TooltipProps } from \"@firecms/ui\";\n\nexport function ErrorTooltip(props: TooltipProps) {\n    return (\n        <Tooltip {...props}\n                 tooltipClassName={\"!text-red-500 bg-red-50\"}>\n            {props.children}\n        </Tooltip>\n    );\n}\n","import React from \"react\";\nimport { ErrorTooltip } from \"./ErrorTooltip\";\nimport { ErrorIcon, Typography } from \"@firecms/ui\";\n\n/**\n * @group Components\n */\nexport interface ErrorViewProps {\n    title?: string;\n    error: Error | React.ReactElement | string,\n    tooltip?: string\n}\n\n/**\n * Generic error view. Displayed for example when an unexpected value comes\n * from the datasource in a collection view.\n * @param title\n * @param error\n * @param tooltip\n * @constructor\n * @group Components\n */\nexport function ErrorView({\n                              title,\n                              error,\n                              tooltip\n                          }: ErrorViewProps): React.ReactElement {\n    const component = error instanceof Error ? error.message : error;\n    console.error(\"ErrorView\", error)\n\n    const body = (\n        <div\n            className=\"flex items-center m-2\">\n            <ErrorIcon size={\"small\"} color={\"error\"}/>\n            <div className=\"pl-2\">\n                {title && <Typography\n                    variant={\"body2\"}\n                    className=\"font-medium\">{title}</Typography>}\n                <Typography variant={\"body2\"}>{component}</Typography>\n            </div>\n        </div>\n    );\n\n    if (tooltip) {\n        return (\n            <ErrorTooltip title={tooltip}>\n                {body}\n            </ErrorTooltip>\n        );\n    }\n    return body;\n}\n","import React from \"react\";\n\n/**\n * @group Preview components\n */\nexport function EmptyValue() {\n\n    return <div\n        className=\"rounded-full bg-gray-200 bg-opacity-30 dark:bg-opacity-20 w-5 h-2 inline-block\"/>;\n}\n","import { CollectionSize } from \"../types\";\nimport { PreviewSize } from \"./PropertyPreviewProps\";\n\nexport const TINY_THUMBNAIL = 40;\nexport const SMALL_THUMBNAIL = 100;\nexport const REGULAR_THUMBNAIL = 200;\n\nexport function getThumbnailMeasure(size: PreviewSize): number {\n    if (size === \"tiny\")\n        return TINY_THUMBNAIL;\n    else if (size === \"small\")\n        return SMALL_THUMBNAIL;\n    else if (size === \"medium\")\n        return REGULAR_THUMBNAIL;\n    else throw Error(\"Thumbnail size not mapped\");\n}\n\nexport function getPreviewSizeFrom(size: CollectionSize): PreviewSize {\n    switch (size) {\n        case \"xs\":\n        case \"s\":\n            return \"tiny\";\n        case \"m\":\n            return \"small\";\n        case \"l\":\n        case \"xl\":\n            return \"medium\";\n        default:\n            throw Error(\"Missing mapping value in getPreviewSizeFrom: \" + size);\n    }\n}\n","import React, { CSSProperties, useMemo, useState } from \"react\";\n\nimport { getThumbnailMeasure } from \"../util\";\nimport { PreviewSize } from \"../PropertyPreviewProps\";\nimport { ContentCopyIcon, IconButton, OpenInNewIcon, Tooltip } from \"@firecms/ui\";\n\n/**\n * @group Preview components\n */\nexport interface ImagePreviewProps {\n    size: PreviewSize,\n    url: string\n}\n\n/**\n * @group Preview components\n */\nexport function ImagePreview({\n                                 size,\n                                 url\n                             }: ImagePreviewProps) {\n\n    const [onHover, setOnHover] = useState(false);\n\n    const imageSize = useMemo(() => getThumbnailMeasure(size), [size]);\n\n    if (size === \"tiny\") {\n        return (\n            <img src={url}\n                 className={\"rounded-md\"}\n                 key={\"tiny_image_preview_\" + url}\n                 style={{\n                     position: \"relative\",\n                     objectFit: \"cover\",\n                     width: imageSize,\n                     height: imageSize,\n                     maxHeight: \"100%\"\n                 }}/>\n        );\n    }\n\n    const imageStyle: CSSProperties =\n        {\n            maxWidth: \"100%\",\n            maxHeight: \"100%\"\n        };\n\n    return (\n        <div\n            className=\"relative flex items-center justify-center max-w-full max-h-full\"\n            style={{\n                width: imageSize,\n                height: imageSize\n            }}\n            key={\"image_preview_\" + url}\n            onMouseEnter={() => setOnHover(true)}\n            onMouseMove={() => setOnHover(true)}\n            onMouseLeave={() => setOnHover(false)}>\n\n            <img src={url}\n                 className={\"rounded-md\"}\n                 style={imageStyle}/>\n\n            {onHover && <>\n\n                {navigator && <Tooltip title=\"Copy url to clipboard\">\n                    <div\n                        className=\"rounded-full absolute bottom-[-4px] right-8\">\n                        <IconButton\n                            variant={\"filled\"}\n                            size={\"small\"}\n                            onClick={(e) => {\n                                e.stopPropagation();\n                                e.preventDefault();\n                                return navigator.clipboard.writeText(url);\n                            }}>\n                            <ContentCopyIcon className={\"text-gray-500\"}\n                                             size={\"small\"}/>\n                        </IconButton>\n                    </div>\n                </Tooltip>}\n\n                <Tooltip title=\"Open image in new tab\">\n                    <IconButton\n                        variant={\"filled\"}\n                        component={\"a\" as React.ElementType}\n                        style={{\n                            position: \"absolute\",\n                            bottom: -4,\n                            right: -4\n                        }}\n                        href={url}\n                        rel=\"noopener noreferrer\"\n                        target=\"_blank\"\n                        size={\"small\"}\n                        onClick={(e: any) => e.stopPropagation()}\n                    >\n                        <OpenInNewIcon className={\"text-gray-500\"}\n                                       size={\"small\"}/>\n                    </IconButton>\n                </Tooltip>\n            </>\n            }\n        </div>\n    );\n}\n","import React from \"react\";\n\nimport { ImagePreview } from \"./ImagePreview\";\nimport { getThumbnailMeasure } from \"../util\";\nimport { PreviewType } from \"../../types\";\nimport { PreviewSize } from \"../PropertyPreviewProps\";\nimport { DescriptionIcon, OpenInNewIcon, Tooltip, Typography } from \"@firecms/ui\";\nimport { EmptyValue } from \"./EmptyValue\";\n\n/**\n * @group Preview components\n */\nexport function UrlComponentPreview({\n                                        url,\n                                        previewType,\n                                        size,\n                                        hint\n                                    }: {\n    url: string,\n    previewType?: PreviewType,\n    size: PreviewSize,\n    hint?: string\n}): React.ReactElement {\n\n    if (!previewType) {\n        if (!url || !url.trim()) return <EmptyValue/>;\n        return (\n            <a className=\"flex gap-4 break-words items-center font-medium text-primary visited:text-primary dark:visited:text-primary dark:text-primary\"\n               href={url}\n               rel=\"noopener noreferrer\"\n               onMouseDown={(e: React.MouseEvent) => {\n                   e.preventDefault();\n               }}\n               target=\"_blank\">\n                <OpenInNewIcon size={\"small\"}/>\n                {url}\n            </a>\n        );\n    }\n\n    if (previewType === \"image\") {\n        return <ImagePreview url={url}\n                             size={size}/>;\n    } else if (previewType === \"audio\") {\n        return <audio controls\n                      src={url}>\n            Your browser does not support the\n            <code>audio</code> element.\n        </audio>;\n    } else if (previewType === \"video\") {\n        return <video\n            className={`max-w-${size === \"small\" ? \"sm\" : \"md\"}`}\n            controls\n        >\n            <source src={url}/>\n        </video>;\n    } else {\n        return (\n            <a\n                href={url}\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n                onClick={(e) => e.stopPropagation()}\n                className=\"flex flex-col items-center justify-center\"\n                style={{\n                    width: getThumbnailMeasure(size),\n                    height: getThumbnailMeasure(size)\n                }}>\n                <DescriptionIcon className=\"flex-grow\"/>\n                {hint &&\n                    <Tooltip title={hint}>\n                        <Typography\n                            className=\"max-w-full truncate rtl text-left\"\n                            variant={\"caption\"}>{hint}</Typography>\n                    </Tooltip>}\n            </a>\n        );\n    }\n}\n","import {\n    ResolvedArrayProperty,\n    ResolvedMapProperty,\n    ResolvedProperties,\n    ResolvedProperty,\n    ResolvedStringProperty\n} from \"../../types\";\nimport React from \"react\";\nimport { getThumbnailMeasure } from \"../util\";\nimport { PreviewSize } from \"../PropertyPreviewProps\";\nimport { Skeleton } from \"@firecms/ui\";\n\nexport interface SkeletonPropertyComponentProps {\n    property: ResolvedProperty,\n    size: PreviewSize\n}\n\n/**\n * @group Preview components\n */\nexport function SkeletonPropertyComponent({\n                                              property,\n                                              size\n                                          }: SkeletonPropertyComponentProps\n) {\n\n    if (!property) {\n        console.error(\"No property assigned for skeleton component\", property, size);\n    }\n\n    let content: React.ReactNode | any;\n    if (property.dataType === \"string\") {\n        const stringProperty = property as ResolvedStringProperty;\n        if (stringProperty.url) {\n            content = renderUrlComponent(stringProperty, size);\n        } else if (stringProperty.storage) {\n            content = renderSkeletonImageThumbnail(size);\n        } else {\n            content = renderSkeletonText();\n        }\n    } else if (property.dataType === \"array\") {\n        const arrayProperty = property as ResolvedArrayProperty;\n\n        if (arrayProperty.of) {\n            if (Array.isArray(arrayProperty.of)) {\n                content = <>{arrayProperty.of.map((p, i) => renderGenericArrayCell(p, i))} </>;\n            } else {\n                if (arrayProperty.of.dataType === \"map\" && arrayProperty.of.properties) {\n                    content = renderArrayOfMaps(arrayProperty.of.properties, size, arrayProperty.of.previewProperties);\n                } else if (arrayProperty.of.dataType === \"string\") {\n                    if (arrayProperty.of.enumValues) {\n                        content = renderArrayEnumTableCell();\n                    } else if (arrayProperty.of.storage) {\n                        content = renderGenericArrayCell(arrayProperty.of);\n                    } else {\n                        content = renderArrayOfStrings();\n                    }\n                } else {\n                    content = renderGenericArrayCell(arrayProperty.of);\n                }\n            }\n        }\n\n    } else if (property.dataType === \"map\") {\n        content = renderMap(property as ResolvedMapProperty, size);\n    } else if (property.dataType === \"date\") {\n        content = renderSkeletonText();\n    } else if (property.dataType === \"reference\") {\n        content = renderReference();\n    } else if (property.dataType === \"boolean\") {\n        content = renderSkeletonText();\n    } else {\n        content = renderSkeletonText();\n    }\n    return (content || null);\n}\n\nfunction renderMap<T extends Record<string, any>>(property: ResolvedMapProperty<T>, size: PreviewSize) {\n\n    if (!property.properties)\n        return <></>;\n\n    let mapPropertyKeys: string[];\n    if (size === \"medium\") {\n        mapPropertyKeys = Object.keys(property.properties);\n    } else {\n        mapPropertyKeys = (property.previewProperties || Object.keys(property.properties)) as string[];\n        if (size === \"small\")\n            mapPropertyKeys = mapPropertyKeys.slice(0, 3);\n        else if (size === \"tiny\")\n            mapPropertyKeys = mapPropertyKeys.slice(0, 1);\n    }\n\n    if (size !== \"medium\")\n        return (\n            <div\n                className=\"w-full flex flex-col space-y-4\"\n            >\n                {mapPropertyKeys.map((key, index) => (\n                    <div key={`map_${key}`}>\n                        {property.properties && property.properties[key] &&\n                            <SkeletonPropertyComponent\n                                property={property.properties[key]}\n                                size={\"small\"}/>}\n                    </div>\n                ))}\n            </div>\n        );\n\n    return (\n        <table className=\"table-auto\">\n            <tbody>\n            {mapPropertyKeys &&\n                mapPropertyKeys.map((key, index) => {\n                    return (\n                        <tr\n                            key={`map_preview_table__${index}`}\n                            className=\"border-b last:border-b-0\">\n                            <th key={`table-cell-title--${key}`}\n                                className=\"align-top\"\n                                style={{ width: \"30%\" }}>\n                                <p className=\"text-xs text-secondary\">\n                                    {property.properties![key].name}\n                                </p>\n                            </th>\n                            <th key={`table-cell-${key}`}\n                                style={{ width: \"70%\" }}>\n                                {property.properties && property.properties[key] &&\n                                    <SkeletonPropertyComponent\n                                        property={property.properties[key]}\n                                        size={\"small\"}/>}\n                            </th>\n                        </tr>\n                    );\n                })}\n            </tbody>\n        </table>\n    );\n}\n\nfunction renderArrayOfMaps<M extends Record<string, any>>(properties: ResolvedProperties<M>, size: PreviewSize, previewProperties?: string[]) {\n    let tableProperties = previewProperties;\n    if (!tableProperties || !tableProperties.length) {\n        tableProperties = Object.keys(properties) as string[];\n        if (size)\n            tableProperties = tableProperties.slice(0, 3);\n    }\n\n    return (\n        <table className=\"table-auto\">\n            <tbody>\n            {\n                [0, 1, 2].map((value, index) => {\n                    return (\n                        <tr key={`table_${value}_${index}`}>\n                            {tableProperties && tableProperties.map(\n                                (key) => (\n                                    <th\n                                        key={`table-cell-${key}`}\n                                    >\n                                        <SkeletonPropertyComponent\n                                            property={(properties)[key]}\n                                            size={\"small\"}/>\n                                    </th>\n                                )\n                            )}\n                        </tr>\n                    );\n                })}\n            </tbody>\n        </table>\n    );\n}\n\nfunction renderArrayOfStrings() {\n    return (\n        <div className={\"flex flex-col gap-2\"}>\n            {\n                [0, 1].map((value, index) => (\n                    renderSkeletonText(index)\n                ))}\n        </div>\n    );\n}\n\nfunction renderArrayEnumTableCell() {\n    return (\n        <div className={\"flex flex-col gap-2\"}>\n            {\n                [0, 1].map((value, index) =>\n                    <>\n                        {renderSkeletonText(index)}\n                    </>\n                )}\n        </div>\n    );\n}\n\nfunction renderGenericArrayCell(\n    property: ResolvedProperty,\n    index = 0\n) {\n    return (\n\n        <div key={\"array_index_\" + index}\n             className={\"flex flex-col gap-2\"}>\n\n            {\n                [0, 1].map((value, index) =>\n                    <>\n                        <SkeletonPropertyComponent key={`i_${index}`}\n                                                   property={property}\n                                                   size={\"small\"}/>\n                    </>\n                )}\n        </div>\n    );\n}\n\nfunction renderUrlAudioComponent() {\n    return (\n        <Skeleton width={300}\n                  height={100}/>\n    );\n}\n\nexport function renderSkeletonImageThumbnail(size: PreviewSize) {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const imageSize = size === \"tiny\" ? 40 : size === \"small\" ? 100 : 200;\n    return (\n        <Skeleton width={imageSize}\n                  height={imageSize}/>\n    );\n}\n\nfunction renderUrlVideo(size: PreviewSize) {\n\n    return (\n        <Skeleton width={size !== \"medium\" ? 300 : 500}\n                  height={size !== \"medium\" ? 200 : 250}/>\n    );\n}\n\nfunction renderReference() {\n    return <Skeleton width={200} height={100}/>;\n}\n\nfunction renderUrlComponent(property: ResolvedStringProperty, size: PreviewSize = \"medium\") {\n\n    if (typeof property.url === \"boolean\") {\n        return <div style={{\n            display: \"flex\"\n        }}>\n            {renderSkeletonIcon()}\n            {renderSkeletonText()}\n        </div>;\n    }\n\n    return renderUrlFile(size);\n}\n\nfunction renderUrlFile(size: PreviewSize) {\n\n    return (\n        <div\n            className={`w-${getThumbnailMeasure(size)} h-${getThumbnailMeasure(size)}`}>\n            {renderSkeletonIcon()}\n        </div>\n    );\n}\n\nexport function renderSkeletonText(index?: number, width = 120) {\n    return <Skeleton width={width} key={`skeleton_${index}`}/>;\n}\n\nexport function renderSkeletonCaptionText(index?: number) {\n    return <Skeleton\n        height={20}/>;\n}\n\nexport function renderSkeletonIcon() {\n    return <Skeleton width={24} height={24}/>;\n}\n","import React, { useEffect } from \"react\";\n\nimport { renderSkeletonImageThumbnail } from \"../property_previews/SkeletonPropertyComponent\";\nimport { UrlComponentPreview } from \"./UrlComponentPreview\";\nimport { useStorageSource } from \"../../hooks\";\nimport { DownloadConfig, FileType } from \"../../types\";\nimport { PreviewSize } from \"../PropertyPreviewProps\";\nimport { ErrorView } from \"../../components\";\n\ntype StorageThumbnailProps = {\n    storagePathOrDownloadUrl: string;\n    storeUrl: boolean;\n    size: PreviewSize;\n};\n\n/**\n * @group Preview components\n */\nexport const StorageThumbnail = React.memo<StorageThumbnailProps>(StorageThumbnailInternal, areEqual) as React.FunctionComponent<StorageThumbnailProps>;\n\nfunction areEqual(prevProps: StorageThumbnailProps, nextProps: StorageThumbnailProps) {\n    return prevProps.size === nextProps.size &&\n        prevProps.storagePathOrDownloadUrl === nextProps.storagePathOrDownloadUrl &&\n        prevProps.storeUrl === nextProps.storeUrl;\n}\n\nconst URL_CACHE: Record<string, DownloadConfig> = {};\n\nexport function StorageThumbnailInternal({\n                                             storeUrl,\n                                             storagePathOrDownloadUrl,\n                                             size\n                                         }: StorageThumbnailProps) {\n\n    const [error, setError] = React.useState<Error | undefined>(undefined);\n    const storage = useStorageSource();\n\n    const [downloadConfig, setDownloadConfig] = React.useState<DownloadConfig>(URL_CACHE[storagePathOrDownloadUrl]);\n\n    useEffect(() => {\n        if (!storagePathOrDownloadUrl)\n            return;\n        let unmounted = false;\n        storage.getDownloadURL(storagePathOrDownloadUrl)\n            .then(function (downloadConfig) {\n                if (!unmounted) {\n                    setDownloadConfig(downloadConfig);\n                    URL_CACHE[storagePathOrDownloadUrl] = downloadConfig;\n                }\n            }).catch(setError);\n        return () => {\n            unmounted = true;\n        };\n    }, [storagePathOrDownloadUrl]);\n\n    if (!storagePathOrDownloadUrl) return null;\n\n    const filetype = downloadConfig?.metadata ? getFiletype(downloadConfig?.metadata.contentType) : undefined;\n    const previewType = filetype?.startsWith(\"image\")\n        ? \"image\"\n        : (filetype?.startsWith(\"video\")\n            ? \"video\"\n            : (filetype?.startsWith(\"audio\") ? \"audio\" : \"file\"));\n\n    if (downloadConfig?.fileNotFound)\n        return <ErrorView error={\"File not found\"}></ErrorView>\n\n    return downloadConfig?.url\n        ? <UrlComponentPreview previewType={previewType}\n                               url={downloadConfig.url}\n                               size={size}\n                               hint={storagePathOrDownloadUrl}/>\n        : renderSkeletonImageThumbnail(size);\n}\n\nfunction getFiletype(input: string): FileType {\n    if (input.startsWith(\"image\")) return \"image/*\";\n    else if (input.startsWith(\"video\")) return \"video/*\";\n    else if (input.startsWith(\"audio\")) return \"audio/*\";\n    else if (input.startsWith(\"application\")) return \"application/*\";\n    else if (input.startsWith(\"text\")) return \"text/*\";\n    else if (input.startsWith(\"font\")) return \"font/*\";\n    else return input;\n}\n","import React from \"react\";\nimport { EnumValues } from \"../../types\";\nimport { buildEnumLabel, enumToObjectEntries, getColorScheme, getLabelOrConfigFrom } from \"../../util/enums\";\nimport { Chip } from \"@firecms/ui\";\n\nexport interface EnumValuesChipProps {\n    enumValues?: EnumValues;\n    enumKey: string | number;\n    size: \"tiny\" | \"small\" | \"medium\";\n    className?: string;\n    children?: React.ReactNode;\n}\n\n/**\n * @group Preview components\n */\nexport function EnumValuesChip({\n                                   enumValues,\n                                   enumKey,\n                                   size,\n                                   className,\n                                   children\n                               }: EnumValuesChipProps) {\n    if (!enumValues) return null;\n    const enumValuesConfig = enumToObjectEntries(enumValues);\n    const enumValue = enumKey !== undefined ? getLabelOrConfigFrom(enumValuesConfig, enumKey) : undefined;\n    const label = buildEnumLabel(enumValue);\n    const colorScheme = getColorScheme(enumValuesConfig, enumKey);\n    return <Chip\n        className={className}\n        colorScheme={colorScheme}\n        error={!label}\n        outlined={false}\n        size={size}>\n        {children}\n        {!children && (label !== undefined ? label : String(enumKey))}\n    </Chip>;\n}\n","import React from \"react\";\n\nimport { resolvePropertyEnum } from \"../../util\";\nimport { EnumValuesChip } from \"../components/EnumValuesChip\";\nimport { PreviewType } from \"../../types\";\nimport { UrlComponentPreview } from \"../components/UrlComponentPreview\";\nimport { PropertyPreviewProps } from \"../PropertyPreviewProps\";\nimport { ErrorBoundary } from \"../../components\";\nimport { Chip, cn, getColorSchemeForSeed } from \"@firecms/ui\";\n\n/**\n * @group Preview components\n */\nexport function StringPropertyPreview({\n                                          propertyKey,\n                                          value,\n                                          property,\n                                          size\n                                      }: PropertyPreviewProps<string>): React.ReactElement {\n\n    if (property.enumValues) {\n        const enumKey = value;\n        const resolvedProperty = resolvePropertyEnum(property);\n        return <EnumValuesChip\n            enumKey={enumKey}\n            enumValues={resolvedProperty.enumValues}\n            size={size}/>;\n    } else if (property.previewAsTag) {\n        const colorScheme = getColorSchemeForSeed(propertyKey ?? \"\");\n        return (\n            <ErrorBoundary>\n                <Chip\n                    colorScheme={colorScheme}\n                    size={size}>\n                    {value}\n                </Chip>\n            </ErrorBoundary>);\n    } else if (property.url) {\n        return (\n            <UrlComponentPreview size={size}\n                                 url={value}\n                                 previewType={typeof property.url === \"string\" ? property.url as PreviewType : undefined}/>\n        );\n    } else {\n        if (!value) return <></>;\n        const lines = value.split(\"\\n\");\n        return value && value.includes(\"\\n\")\n            ? <div className={cn(\"overflow-x-scroll\", size === \"tiny\" ? \"text-sm\" : \"\")}>\n                {lines.map((str, index) =>\n                    <React.Fragment key={`string_preview_${index}`}>\n                        <span>{str}</span>\n                        {index !== lines.length - 1 && <br/>}\n                    </React.Fragment>)}\n            </div>\n            : (size === \"tiny\"\n                    ? <span className={\"text-sm\"}>{value}</span>\n                    : <>{value}</>\n            );\n    }\n}\n","import React from \"react\";\n\nimport { resolveArrayProperty } from \"../../util\";\nimport { ResolvedProperty } from \"../../types\";\nimport { useCustomizationController } from \"../../hooks\";\nimport { PreviewSize, PropertyPreviewProps } from \"../PropertyPreviewProps\";\nimport { PropertyPreview } from \"../PropertyPreview\";\nimport { cn, defaultBorderMixin } from \"@firecms/ui\";\nimport { ErrorBoundary } from \"../../components\";\n\n/**\n * @group Preview components\n */\nexport function ArrayPropertyPreview({\n                                         propertyKey,\n                                         value,\n                                         property: inputProperty,\n                                         // entity,\n                                         size\n                                     }: PropertyPreviewProps<any[]>) {\n\n    const customizationController = useCustomizationController();\n    const property = resolveArrayProperty({\n        propertyKey,\n        property: inputProperty,\n        propertyValue: value,\n        fields: customizationController.propertyConfigs\n    });\n\n    if (!property.of) {\n        throw Error(`You need to specify an 'of' prop (or specify a custom field) in your array property ${propertyKey}`);\n    }\n\n    if (property.dataType !== \"array\")\n        throw Error(\"Picked wrong preview component ArrayPreview\");\n\n    const values = value;\n\n    if (!values) return null;\n\n    const childSize: PreviewSize = size === \"medium\" ? \"small\" : \"tiny\";\n\n    return (\n        <div className=\"flex flex-col gap-2\">\n            {values &&\n                values.map((value, index) => {\n                        const of: ResolvedProperty = property.resolvedProperties[index] ??\n                            (property.resolvedProperties[index] ?? (Array.isArray(property.of) ? property.of[index] : property.of));\n                        return of\n                            ? <React.Fragment\n                                key={\"preview_array_\" + index}>\n                                <div className={cn(defaultBorderMixin, \"m-1 border-b last:border-b-0\")}>\n                                    <ErrorBoundary>\n                                        <PropertyPreview\n                                            propertyKey={propertyKey}\n                                            // entity={entity}\n                                            value={value}\n                                            property={of}\n                                            size={childSize}/>\n                                    </ErrorBoundary>\n                                </div>\n                            </React.Fragment>\n                            : null;\n                    }\n                )}\n        </div>\n    );\n}\n","import * as React from \"react\";\nimport { useMemo } from \"react\";\n\nimport { Entity, EntityCollection, ResolvedProperty } from \"../types\";\n\nimport {\n    getEntityImagePreviewPropertyKey,\n    getEntityPreviewKeys,\n    getEntityTitlePropertyKey,\n    getValueInPath,\n    resolveCollection\n} from \"../util\";\nimport { cn, defaultBorderMixin, IconButton, KeyboardTabIcon, Skeleton, Tooltip, Typography } from \"@firecms/ui\";\nimport { PreviewSize, PropertyPreview, SkeletonPropertyComponent } from \"../preview\";\nimport { useCustomizationController, useNavigationController, useSideEntityController } from \"../hooks\";\nimport { useAnalyticsController } from \"../hooks/useAnalyticsController\";\n\nexport type EntityPreviewProps = {\n    size: PreviewSize,\n    actions?: React.ReactNode,\n    collection?: EntityCollection,\n    hover?: boolean;\n    previewProperties?: string[],\n    disabled: undefined | boolean,\n    entity: Entity<any>,\n    includeEntityNavigation?: boolean,\n    onClick?: (e: React.SyntheticEvent) => void;\n};\n\n/**\n * This view is used to display a preview of an entity.\n * It is used by default in reference fields and whenever a reference is displayed.\n */\nexport function EntityPreview({\n                                  actions,\n                                  disabled,\n                                  hover,\n                                  collection: collectionProp,\n                                  previewProperties,\n                                  onClick,\n                                  size,\n                                  includeEntityNavigation,\n                                  entity\n                              }: EntityPreviewProps) {\n\n    const analyticsController = useAnalyticsController();\n    const sideEntityController = useSideEntityController();\n    const customizationController = useCustomizationController();\n\n    const navigationController = useNavigationController();\n\n    const collection = collectionProp ?? navigationController.getCollection(entity.path);\n\n    if (!collection) {\n        throw Error(`Couldn't find the corresponding collection view for the path: ${entity.path}`);\n    }\n\n    const resolvedCollection = React.useMemo(() => resolveCollection({\n        collection,\n        path: entity.path,\n        values: entity.values,\n        fields: customizationController.propertyConfigs\n    }), [collection]);\n\n    const listProperties = useMemo(() => getEntityPreviewKeys(resolvedCollection, customizationController.propertyConfigs, previewProperties, size === \"small\" || size === \"medium\" ? 3 : 1),\n        [previewProperties, resolvedCollection, size]);\n\n    const titleProperty = getEntityTitlePropertyKey(resolvedCollection, customizationController.propertyConfigs);\n    const imagePropertyKey = getEntityImagePreviewPropertyKey(resolvedCollection);\n    const imageProperty = imagePropertyKey ? resolvedCollection.properties[imagePropertyKey] : undefined;\n\n    const restProperties = listProperties.filter(p => p !== titleProperty && p !== imagePropertyKey);\n\n    return <EntityPreviewContainer onClick={disabled ? undefined : onClick}\n                                   hover={disabled ? undefined : hover}\n                                   size={size}>\n        {imageProperty && (\n            <div className={cn(\"w-10 h-10 mr-2 shrink-0 grow-0\", size === \"tiny\" ? \"my-0.5\" : \"m-2 self-start\")}>\n                <PropertyPreview property={imageProperty}\n                                 propertyKey={imagePropertyKey as string}\n                                 size={\"tiny\"}\n                                 value={getValueInPath(entity.values, imagePropertyKey as string)}/>\n            </div>\n        )}\n\n        <div className={\"flex flex-col flex-grow w-full m-1\"}>\n\n            {size !== \"tiny\" && (\n                entity\n                    ? <div className={`${\n                        size !== \"medium\"\n                            ? \"block whitespace-nowrap overflow-hidden truncate\"\n                            : \"\"\n                    }`}>\n                        <Typography variant={\"caption\"}\n                                    color={\"disabled\"}\n                                    className={\"font-mono\"}>\n                            {entity.id}\n                        </Typography>\n                    </div>\n                    : <Skeleton/>)}\n\n            {titleProperty && (\n                <div className={\"my-0.5 text-sm font-medium\"}>\n                    {\n                        entity\n                            ? <PropertyPreview\n                                propertyKey={titleProperty as string}\n                                value={getValueInPath(entity.values, titleProperty)}\n                                property={resolvedCollection.properties[titleProperty as string] as ResolvedProperty}\n                                size={\"medium\"}/>\n                            : <SkeletonPropertyComponent\n                                property={resolvedCollection.properties[titleProperty as string] as ResolvedProperty}\n                                size={\"medium\"}/>\n                    }\n                </div>\n            )}\n\n            {restProperties && restProperties.map((key) => {\n                const childProperty = resolvedCollection.properties[key as string];\n                if (!childProperty) return null;\n\n                return (\n                    <div key={\"ref_prev_\" + key}\n                         className={restProperties.length > 1 ? \"my-0.5\" : \"my-0\"}>\n                        {\n                            entity\n                                ? <PropertyPreview\n                                    propertyKey={key as string}\n                                    value={getValueInPath(entity.values, key)}\n                                    property={childProperty as ResolvedProperty}\n                                    size={\"tiny\"}/>\n                                : <SkeletonPropertyComponent\n                                    property={childProperty as ResolvedProperty}\n                                    size={\"tiny\"}/>\n                        }\n                    </div>\n                );\n            })}\n\n        </div>\n\n        {entity && includeEntityNavigation &&\n            <Tooltip title={`See details for ${entity.id}`}\n                     className={size !== \"tiny\" ? \"self-start\" : \"\"}>\n                <IconButton\n                    color={\"inherit\"}\n                    size={\"small\"}\n                    onClick={(e) => {\n                        e.stopPropagation();\n                        analyticsController.onAnalyticsEvent?.(\"entity_click_from_reference\", {\n                            path: entity.path,\n                            entityId: entity.id\n                        });\n                        sideEntityController.open({\n                            entityId: entity.id,\n                            path: entity.path,\n                            collection,\n                            updateUrl: true\n                        });\n                    }}>\n                    <KeyboardTabIcon size={\"small\"}/>\n                </IconButton>\n            </Tooltip>}\n\n        {actions}\n\n    </EntityPreviewContainer>;\n}\n\nexport type EntityPreviewContainerProps = {\n    children: React.ReactNode;\n    hover?: boolean;\n    fullwidth?: boolean;\n    size: PreviewSize;\n    className?: string;\n    style?: React.CSSProperties;\n    onClick?: (e: React.SyntheticEvent) => void;\n};\n\nconst EntityPreviewContainerInner = React.forwardRef<HTMLDivElement, EntityPreviewContainerProps>(({\n                                                                                                       children,\n                                                                                                       hover,\n                                                                                                       onClick,\n                                                                                                       size,\n                                                                                                       style,\n                                                                                                       className,\n                                                                                                       fullwidth = true,\n                                                                                                       ...props\n                                                                                                   }, ref) => {\n    return <div\n        ref={ref}\n        style={{\n            ...style,\n            // @ts-ignore\n            tabindex: 0\n        }}\n        className={cn(\n            \"bg-white dark:bg-gray-900\",\n            fullwidth ? \"w-full\" : \"\",\n            \"items-center\",\n            hover ? \"hover:bg-slate-50 dark:hover:bg-gray-800 group-hover:bg-slate-50 dark:group-hover:bg-gray-800\" : \"\",\n            size === \"tiny\" ? \"p-1\" : \"p-2\",\n            \"flex border rounded-lg\",\n            onClick ? \"cursor-pointer\" : \"\",\n            defaultBorderMixin,\n            className)}\n        onClick={(event) => {\n            if (onClick) {\n                event.preventDefault();\n                onClick(event);\n            }\n        }}\n        {...props}>\n        {children}\n    </div>;\n});\n\nEntityPreviewContainerInner.displayName = \"EntityPreviewContainer\";\n\nexport const EntityPreviewContainer = React.memo(EntityPreviewContainerInner) as React.FC<EntityPreviewContainerProps>;\n","import * as React from \"react\";\n\nimport { Entity, EntityCollection, EntityReference } from \"../../types\";\nimport {\n    useCustomizationController,\n    useEntityFetch,\n    useNavigationController,\n    useSideEntityController\n} from \"../../hooks\";\nimport { PreviewSize } from \"../PropertyPreviewProps\";\nimport { IconButton, KeyboardTabIcon, Skeleton, Tooltip } from \"@firecms/ui\";\nimport { ErrorView } from \"../../components\";\nimport { useAnalyticsController } from \"../../hooks/useAnalyticsController\";\nimport { EntityPreview, EntityPreviewContainer } from \"../../components/EntityPreview\";\n\nexport type ReferencePreviewProps = {\n    disabled?: boolean;\n    reference: EntityReference,\n    size: PreviewSize;\n    previewProperties?: string[];\n    onClick?: (e: React.SyntheticEvent) => void;\n    hover?: boolean;\n    allowEntityNavigation?: boolean;\n};\n\n/**\n * @group Preview components\n */\nexport const ReferencePreview = React.memo<ReferencePreviewProps>(function ReferencePreview(props: ReferencePreviewProps) {\n    const reference = props.reference;\n    if (!(typeof reference === \"object\" && \"isEntityReference\" in reference && reference.isEntityReference())) {\n        console.warn(\"Reference preview received value of type\", typeof reference);\n        return <EntityPreviewContainer\n            onClick={props.onClick}\n            size={props.size}>\n            <ErrorView error={\"Unexpected value. Click to edit\"}\n                       tooltip={JSON.stringify(reference)}/>\n        </EntityPreviewContainer>;\n    }\n    return <ReferencePreviewInternal {...props} />;\n}, areEqual) as React.FunctionComponent<ReferencePreviewProps>;\n\nfunction areEqual(prevProps: ReferencePreviewProps, nextProps: ReferencePreviewProps) {\n    return prevProps.disabled === nextProps.disabled &&\n        prevProps.size === nextProps.size &&\n        prevProps.hover === nextProps.hover &&\n        prevProps.reference?.id === nextProps.reference?.id &&\n        prevProps.reference?.path === nextProps.reference?.path &&\n        prevProps.allowEntityNavigation === nextProps.allowEntityNavigation\n        ;\n}\n\nfunction ReferencePreviewInternal<M extends Record<string, any>>({\n                                                                     disabled,\n                                                                     reference,\n                                                                     previewProperties,\n                                                                     size,\n                                                                     hover,\n                                                                     onClick,\n                                                                     allowEntityNavigation = true\n                                                                 }: ReferencePreviewProps) {\n\n    const customizationController = useCustomizationController();\n\n    const navigationController = useNavigationController();\n\n    const collection = navigationController.getCollection(reference.path);\n    if (!collection) {\n        if (customizationController.components?.missingReference) {\n            return <customizationController.components.missingReference path={reference.path}/>;\n        } else {\n            throw Error(`Couldn't find the corresponding collection view for the path: ${reference.path}`);\n        }\n    }\n\n    return <ReferencePreviewExisting\n        reference={reference}\n        collection={collection}\n        previewProperties={previewProperties}\n        size={size}\n        disabled={disabled}\n        allowEntityNavigation={allowEntityNavigation}\n        onClick={onClick}\n        hover={hover}/>\n}\n\nfunction ReferencePreviewExisting<M extends Record<string, any> = any>({\n                                                                           reference,\n                                                                           collection,\n                                                                           previewProperties,\n                                                                           size,\n                                                                           disabled,\n                                                                           allowEntityNavigation,\n                                                                           onClick,\n                                                                           hover\n                                                                       }: ReferencePreviewProps & {\n    collection: EntityCollection<M>\n}) {\n\n    const {\n        entity,\n        dataLoading,\n        dataLoadingError\n    } = useEntityFetch({\n        path: reference.path,\n        entityId: reference.id,\n        collection,\n        useCache: true\n    });\n\n    if (entity) {\n        referencesCache.set(reference.pathWithId, entity);\n    }\n\n    const usedEntity = entity ?? referencesCache.get(reference.pathWithId);\n\n    let body: React.ReactNode;\n\n    if (!reference) {\n        body = <ErrorView error={\"Reference not set\"}/>;\n    } else if (usedEntity && !usedEntity.values) {\n        body = <ErrorView error={\"Reference does not exist\"}\n                          tooltip={reference.path}/>;\n    }\n    if (body) {\n\n        return (\n            <EntityPreviewContainer onClick={disabled ? undefined : onClick}\n                                    hover={disabled ? undefined : hover}\n                                    size={size}>\n                {body}\n            </EntityPreviewContainer>\n        );\n    }\n\n    if (dataLoading && !usedEntity) {\n        return (\n            <EntityPreviewContainer onClick={disabled ? undefined : onClick}\n                                    hover={disabled ? undefined : hover}\n                                    size={size}>\n                <Skeleton/>\n            </EntityPreviewContainer>\n        );\n    }\n\n    if (!usedEntity) {\n        return (\n            <EntityPreviewContainer onClick={disabled ? undefined : onClick}\n                                    hover={disabled ? undefined : hover}\n                                    size={size}>\n                <ErrorView error={\"Entity not found\"}/>\n            </EntityPreviewContainer>\n        );\n    }\n    return <EntityPreview size={size}\n                          previewProperties={previewProperties}\n                          disabled={disabled}\n                          entity={usedEntity}\n                          collection={collection}\n                          onClick={onClick}\n                          includeEntityNavigation={allowEntityNavigation}\n                          hover={hover}/>;\n\n}\n\nconst referencesCache = new Map<string, Entity<any>>();\n","import { ResolvedReferenceProperty } from \"../../types\";\nimport { resolveArrayProperty } from \"../../util\";\nimport { useCustomizationController } from \"../../hooks\";\nimport { PreviewSize, PropertyPreviewProps } from \"../PropertyPreviewProps\";\nimport { ReferencePreview } from \"../components/ReferencePreview\";\n\n/**\n * @group Preview components\n */\nexport function ArrayOfReferencesPreview({\n                                             propertyKey,\n                                             value,\n                                             property: inputProperty,\n                                             size\n                                         }: PropertyPreviewProps<any[]>) {\n\n    const customizationController = useCustomizationController();\n    const property = resolveArrayProperty({\n        propertyKey,\n        property: inputProperty,\n        propertyValue: value,\n        fields: customizationController.propertyConfigs\n    });\n\n    if (Array.isArray(property?.of)) {\n        throw Error(\"Using array properties instead of single one in `of` in ArrayProperty\");\n    }\n\n    if (property?.dataType !== \"array\" || !property.of || property.of.dataType !== \"reference\")\n        throw Error(\"Picked wrong preview component ArrayOfReferencesPreview\");\n\n    const childSize: PreviewSize = size === \"medium\" ? \"small\" : \"tiny\";\n\n    return (\n        <div className=\"flex flex-col w-full\">\n            {value &&\n                value.map((reference, index) => {\n                        const ofProperty = property.of as ResolvedReferenceProperty;\n                        return <div className=\"mt-1 mb-1 w-full\"\n                                    key={`preview_array_ref_${propertyKey}_${index}`}>\n                            <ReferencePreview\n                                disabled={!ofProperty.path}\n                                previewProperties={ofProperty.previewProperties}\n                                size={childSize}\n                                reference={reference}\n                            />\n                        </div>;\n                    }\n                )}\n        </div>\n    );\n}\n","import React from \"react\";\n\nimport { resolveArrayProperty } from \"../../util\";\nimport { ResolvedProperty } from \"../../types\";\n\nimport { useCustomizationController } from \"../../hooks\";\nimport { PreviewSize, PropertyPreviewProps } from \"../PropertyPreviewProps\";\nimport { PropertyPreview } from \"../PropertyPreview\";\nimport { ErrorBoundary } from \"../../components\";\n\n/**\n * @group Preview components\n */\nexport function ArrayOfStorageComponentsPreview({\n                                                    propertyKey,\n                                                    // entity,\n                                                    value,\n                                                    property: inputProperty,\n                                                    size\n                                                }: PropertyPreviewProps<any[]>) {\n\n    const customizationController = useCustomizationController();\n    const property = resolveArrayProperty({\n        propertyKey,\n        property: inputProperty,\n        propertyValue: value,\n        fields: customizationController.propertyConfigs\n    });\n\n    if (Array.isArray(property.of)) {\n        throw Error(\"Using array properties instead of single one in `of` in ArrayProperty\");\n    }\n\n    if (property.dataType !== \"array\" || !property.of || property.of.dataType !== \"string\")\n        throw Error(\"Picked wrong preview component ArrayOfStorageComponentsPreview\");\n\n    const childSize: PreviewSize = size === \"medium\" ? \"small\" : \"tiny\";\n\n    return (\n        <div className={\"flex flex-wrap gap-2\"}>\n            {value &&\n                value.map((v, index) =>\n                    <ErrorBoundary key={`preview_array_storage_${propertyKey}_${index}`}>\n                        <PropertyPreview\n                            propertyKey={propertyKey}\n                            value={v}\n                            // entity={entity}\n                            property={property.of as ResolvedProperty<string>}\n                            size={childSize}/>\n                    </ErrorBoundary>\n                )}\n        </div>\n    );\n}\n","import React from \"react\";\n\nimport { EnumValueConfig } from \"../../types\";\nimport { EnumValuesChip } from \"./EnumValuesChip\";\nimport { PreviewSize } from \"../PropertyPreviewProps\";\nimport { ErrorBoundary } from \"../../components\";\n\n/**\n * @group Preview components\n */\nexport function ArrayEnumPreview({\n                                     name,\n                                     value,\n                                     enumValues,\n                                     size\n                                 }: {\n    value: string[] | number[],\n    name: string | undefined,\n    enumValues: EnumValueConfig[],\n    size: PreviewSize\n}) {\n\n    return (\n        <div className=\"flex flex-wrap gap-1.5\">\n            {value && value.map((enumKey, index) => {\n                    return (\n                        <ErrorBoundary\n                            key={`preview_array_ref_${name}_${index}`}>\n                            <EnumValuesChip\n                                enumKey={enumKey}\n                                enumValues={enumValues}\n                                size={size !== \"medium\" ? \"small\" : \"medium\"}/>\n                        </ErrorBoundary>\n                    );\n                }\n            )}\n        </div>\n    );\n}\n","import { ResolvedNumberProperty, ResolvedStringProperty } from \"../../types\";\nimport { ArrayEnumPreview } from \"../components/ArrayEnumPreview\";\nimport { PropertyPreviewProps } from \"../PropertyPreviewProps\";\n\n/**\n * @group Preview components\n */\nexport function ArrayPropertyEnumPreview({\n                                             propertyKey,\n                                             value,\n                                             property,\n                                             size\n                                         }: PropertyPreviewProps<string[] | number[]>) {\n\n    if (property.dataType !== \"array\")\n        throw Error(\"Picked wrong preview component ArrayEnumPreview\");\n\n    const ofProperty = property.of as ResolvedStringProperty | ResolvedNumberProperty;\n    if (!ofProperty.enumValues)\n        throw Error(\"Picked wrong preview component ArrayEnumPreview\");\n\n    if (!value) return null;\n\n    return <ArrayEnumPreview name={propertyKey}\n                             value={value}\n                             enumValues={ofProperty.enumValues}\n                             size={size}/>;\n}\n","import React from \"react\";\nimport { ResolvedStringProperty } from \"../../types\";\n\nimport { resolveArrayProperty } from \"../../util\";\nimport { PropertyPreviewProps, StringPropertyPreview } from \"../../preview\";\nimport { useCustomizationController } from \"../../hooks\";\nimport { ErrorBoundary } from \"../../components\";\n\n/**\n * @group Preview components\n */\nexport function ArrayOfStringsPreview({\n                                          propertyKey,\n                                          value,\n                                          property: inputProperty,\n                                          // entity,\n                                          size\n                                      }: PropertyPreviewProps<string[]>) {\n\n    const customizationController = useCustomizationController();\n    const property = resolveArrayProperty({\n        propertyKey,\n        property: inputProperty,\n        propertyValue: value,\n        fields: customizationController.propertyConfigs\n    });\n\n    if (Array.isArray(property.of)) {\n        throw Error(\"Using array properties instead of single one in `of` in ArrayProperty\");\n    }\n    if (!property.of || property.dataType !== \"array\" || property.of.dataType !== \"string\")\n        throw Error(\"Picked wrong preview component ArrayOfStringsPreview\");\n\n    if (value && !Array.isArray(value)) {\n        return <div>{`Unexpected value: ${value}`}</div>;\n    }\n    const stringProperty = property.of as ResolvedStringProperty;\n\n    return (\n        <div className=\"flex flex-col gap-2\">\n            {value &&\n                value.map((v, index) =>\n                    <div key={`preview_array_strings_${propertyKey}_${index}`}>\n                        <ErrorBoundary>\n                            <StringPropertyPreview propertyKey={propertyKey}\n                                                   property={stringProperty}\n                                                   value={v}\n                                // entity={entity}\n                                                   size={size}/>\n                        </ErrorBoundary>\n                    </div>\n                )}\n        </div>\n    );\n}\n","import React from \"react\";\nimport { resolveArrayProperty } from \"../../util\";\nimport { ResolvedProperty } from \"../../types\";\nimport { useCustomizationController } from \"../../hooks\";\nimport { PreviewSize, PropertyPreviewProps } from \"../PropertyPreviewProps\";\nimport { PropertyPreview } from \"../PropertyPreview\";\nimport { cn, defaultBorderMixin } from \"@firecms/ui\";\nimport { DEFAULT_ONE_OF_TYPE, DEFAULT_ONE_OF_VALUE } from \"../../util/common\";\nimport { ErrorBoundary } from \"../../components\";\n\n/**\n * @group Preview components\n */\nexport function ArrayOneOfPreview({\n                                      propertyKey,\n                                      value,\n                                      property: inputProperty,\n                                      size,\n                                      // entity\n                                  }: PropertyPreviewProps<any[]>) {\n\n    const customizationController = useCustomizationController();\n    const property = resolveArrayProperty({\n        propertyKey,\n        property: inputProperty,\n        propertyValue: value,\n        fields: customizationController.propertyConfigs\n    });\n\n    if (property?.dataType !== \"array\")\n        throw Error(\"Picked wrong preview component ArrayPreview\");\n\n    if (!property?.oneOf) {\n        throw Error(`You need to specify an 'of' or 'oneOf' prop (or specify a custom field) in your array property ${propertyKey}`);\n    }\n\n    const values = value;\n\n    if (!values) return null;\n\n    const childSize: PreviewSize = size === \"medium\" ? \"small\" : \"tiny\";\n\n    const typeField = property.oneOf.typeField ?? DEFAULT_ONE_OF_TYPE;\n    const valueField = property.oneOf.valueField ?? DEFAULT_ONE_OF_VALUE;\n    const properties = property.oneOf.properties;\n\n    return (\n        <div className={\"flex flex-col\"}>\n            {values &&\n                values.map((value, index) =>\n                    <React.Fragment\n                        key={\"preview_array_\" + value + \"_\" + index}>\n                        <div className={cn(defaultBorderMixin, \"m-1 border-b last:border-b-0\")}>\n                            <ErrorBoundary>\n                                {value && <PropertyPreview\n                                    propertyKey={propertyKey}\n                                    value={value[valueField]}\n                                    // entity={entity}\n                                    property={(property.resolvedProperties[index] ?? properties[value[typeField]]) as ResolvedProperty<any>}\n                                    size={childSize}/>}\n                            </ErrorBoundary>\n                        </div>\n                    </React.Fragment>\n                )}\n        </div>\n    );\n}\n","import React from \"react\";\n\nimport { ResolvedMapProperty } from \"../../types\";\nimport { PropertyPreviewProps } from \"../PropertyPreviewProps\";\nimport { PropertyPreview } from \"../PropertyPreview\";\nimport { cn, defaultBorderMixin, Typography } from \"@firecms/ui\";\nimport { ErrorBoundary } from \"../../components\";\nimport { EmptyValue } from \"../components/EmptyValue\";\n\n/**\n * @group Preview components\n */\nexport function MapPropertyPreview<T extends Record<string, any> = Record<string, any>>({\n                                                                                            propertyKey,\n                                                                                            value,\n                                                                                            property,\n                                                                                            // entity,\n                                                                                            size\n                                                                                        }: PropertyPreviewProps<T>) {\n\n    if (property.dataType !== \"map\") {\n        throw Error(\"Picked wrong preview component MapPropertyPreview\");\n    }\n\n    const mapProperty = property as ResolvedMapProperty;\n\n    if (!mapProperty.properties || Object.keys(mapProperty.properties ?? {}).length === 0) {\n        return (\n            <KeyValuePreview value={value}/>\n        );\n    }\n\n    if (!value) return null;\n\n    const mapPropertyKeys: string[] = Object.keys(mapProperty.properties)\n\n    if (size === \"tiny\")\n        return (\n            <div className=\"w-full flex flex-col space-y-1 md:space-y-2\">\n                {mapPropertyKeys.map((key, index) => (\n                    <div key={`map_${key}`}>\n                        <ErrorBoundary\n                            key={\"map_preview_\" + mapProperty.name + key + index}>\n                            <PropertyPreview propertyKey={key}\n                                             value={(value)[key]}\n                                             property={mapProperty.properties![key]}\n                                // entity={entity}\n                                             size={size}/>\n                        </ErrorBoundary>\n                    </div>\n                ))}\n            </div>\n        );\n\n    return (\n        <div\n            className=\"flex flex-col gap-1 w-full\">\n            {mapPropertyKeys &&\n                mapPropertyKeys.map((key, index) => {\n                    const childProperty = mapProperty.properties![key];\n                    return (\n                        <div\n                            key={`map_preview_table_${key}}`}\n                            className={cn(defaultBorderMixin, \"last:border-b-0 border-b\")}>\n                            <div\n                                className={\"flex flex-row pt-0.5 pb-0.5 gap-2\"}>\n                                <div\n                                    className=\"min-w-[140px] w-[25%] py-1\">\n                                    <Typography variant={\"caption\"}\n                                                className={\"font-mono break-words\"}\n                                                color={\"secondary\"}>\n                                        {childProperty.name}\n                                    </Typography>\n                                </div>\n                                <div\n                                    className=\"flex-grow max-w-[75%]\">\n                                    <ErrorBoundary>\n                                        {!(childProperty.dataType === \"map\" || childProperty === \"array\") &&\n                                            <PropertyPreview\n                                                propertyKey={key}\n                                                value={(value)[key]}\n                                                property={childProperty}\n                                                // entity={entity}\n                                                size={size}/>}\n                                    </ErrorBoundary>\n                                </div>\n                            </div>\n\n                            {(childProperty.dataType === \"map\" || childProperty === \"array\") &&\n                                <div className={cn(defaultBorderMixin, \"border-l pl-4 ml-2 my-2\")}>\n                                    <PropertyPreview\n                                        propertyKey={key}\n                                        value={(value)[key]}\n                                        property={childProperty}\n                                        // entity={entity}\n                                        size={size}/>\n                                </div>\n                            }\n                        </div>\n                    );\n                })}\n        </div>\n    );\n\n}\n\nexport function KeyValuePreview({ value }: { value: any }) {\n    if (typeof value !== \"object\") return null;\n    if (!value) return <EmptyValue/>;\n    return <div\n        className=\"flex flex-col gap-1 w-full\">\n        {\n            Object.entries(value).map(([key, childValue]) => (\n                <div\n                    key={`map_preview_table_${key}}`}\n                    className={cn(defaultBorderMixin, \"last:border-b-0 border-b\")}>\n                    <div\n                        className={\"flex flex-row pt-0.5 pb-0.5 gap-2\"}>\n                        <div\n                            key={`table-cell-title-${key}-${key}`}\n                            className=\"min-w-[140px] w-[25%] py-1\">\n                            <Typography variant={\"caption\"}\n                                        className={\"font-mono break-words\"}\n                                        color={\"secondary\"}>\n                                {key}\n                            </Typography>\n                        </div>\n                        <div\n                            className=\"flex-grow max-w-[75%]\">\n                            {typeof childValue !== \"object\" && <Typography>\n                                <ErrorBoundary>\n                                    {childValue && childValue.toString()}\n                                </ErrorBoundary>\n                            </Typography>}\n                        </div>\n                    </div>\n                    {typeof childValue === \"object\" &&\n                        <div className={cn(defaultBorderMixin, \"border-l pl-4\")}>\n                            <KeyValuePreview value={childValue}/>\n                        </div>\n                    }\n                </div>\n            ))\n        }\n    </div>;\n}\n","import React from \"react\";\n\nimport { format } from \"date-fns\";\nimport * as locales from \"date-fns/locale\";\nimport { useCustomizationController } from \"../../hooks\";\nimport { defaultDateFormat } from \"../../util\";\n\n/**\n * @group Preview components\n */\nexport function DatePreview({\n                                date\n                            }: { date: Date }): React.ReactElement {\n\n    const customizationController = useCustomizationController();\n    // @ts-ignore\n    const dateUtilsLocale = customizationController?.locale ? locales[customizationController?.locale] : undefined;\n    const dateFormat: string = customizationController?.dateTimeFormat ?? defaultDateFormat;\n    const formattedDate = date ? format(date, dateFormat, { locale: dateUtilsLocale }) : \"\";\n\n    return (\n        <>\n            {formattedDate}\n        </>\n    );\n}\n","import React from \"react\";\nimport { Checkbox, cn } from \"@firecms/ui\";\nimport { PreviewSize } from \"../PropertyPreviewProps\";\nimport { Property } from \"../../types\";\n\n/**\n * @group Preview components\n */\nexport function BooleanPreview({\n                                   value,\n                                   size,\n                                   property\n                               }: {\n    value: boolean,\n    size: PreviewSize,\n    property: Property,\n}): React.ReactElement {\n    return <div className={\"flex flex-row gap-2 items-center\"}>\n        <Checkbox checked={value}\n                  padding={false}\n                  size={size}\n                  color={\"secondary\"}/>\n        {property.name && <span\n            className={cn(\"text-text-secondary dark:text-text-secondary-dark\", size === \"tiny\" ? \"text-sm\" : \"\")}>{property.name}</span>}\n    </div>;\n}\n","import React from \"react\";\n\nimport { EnumValuesChip, PropertyPreviewProps } from \"../../preview\";\nimport { enumToObjectEntries } from \"../../util\";\n\n/**\n * @group Preview components\n */\nexport function NumberPropertyPreview({\n                                          value,\n                                          property,\n                                          size\n                                      }: PropertyPreviewProps<number>): React.ReactElement {\n\n    if (property.enumValues) {\n        const enumKey = value;\n        const enumValues = enumToObjectEntries(property.enumValues);\n        if (!enumValues)\n            return <>{value}</>;\n        return <EnumValuesChip\n            enumKey={enumKey}\n            enumValues={enumValues}\n            size={size !== \"medium\" ? \"small\" : \"medium\"}/>;\n    } else {\n        return <>{value}</>;\n    }\n}\n","import React, { createElement } from \"react\";\nimport equal from \"react-fast-compare\"\n\nimport {\n    CMSType,\n    EntityReference,\n    ResolvedArrayProperty,\n    ResolvedMapProperty,\n    ResolvedNumberProperty,\n    ResolvedStringProperty\n} from \"../types\";\n\nimport { resolveProperty } from \"../util\";\n\nimport { PropertyPreviewProps } from \"./PropertyPreviewProps\";\nimport { useCustomizationController } from \"../hooks\";\nimport { EmptyValue } from \"./components/EmptyValue\";\nimport { UrlComponentPreview } from \"./components/UrlComponentPreview\";\nimport { StorageThumbnail } from \"./components/StorageThumbnail\";\nimport { Markdown } from \"@firecms/ui\";\nimport { StringPropertyPreview } from \"./property_previews/StringPropertyPreview\";\nimport { ArrayPropertyPreview } from \"./property_previews/ArrayPropertyPreview\";\nimport { ArrayOfReferencesPreview } from \"./property_previews/ArrayOfReferencesPreview\";\nimport { ArrayOfStorageComponentsPreview } from \"./property_previews/ArrayOfStorageComponentsPreview\";\nimport { ArrayPropertyEnumPreview } from \"./property_previews/ArrayPropertyEnumPreview\";\nimport { ArrayOfStringsPreview } from \"./property_previews/ArrayOfStringsPreview\";\nimport { ArrayOneOfPreview } from \"./property_previews/ArrayOneOfPreview\";\nimport { MapPropertyPreview } from \"./property_previews/MapPropertyPreview\";\nimport { ReferencePreview } from \"./components/ReferencePreview\";\nimport { DatePreview } from \"./components/DatePreview\";\nimport { BooleanPreview } from \"./components/BooleanPreview\";\nimport { NumberPropertyPreview } from \"./property_previews/NumberPropertyPreview\";\nimport { ErrorView } from \"../components\";\n\n/**\n * @group Preview components\n */\nexport const PropertyPreview = React.memo(function PropertyPreview<T extends CMSType>(props: PropertyPreviewProps<T>) {\n\n    const customizationController = useCustomizationController();\n\n    let content: React.ReactNode | any;\n    const {\n        property: inputProperty,\n        propertyKey,\n        value,\n        size,\n        height,\n        width,\n        // entity\n    } = props;\n\n    const property = resolveProperty({\n        propertyKey,\n        propertyOrBuilder: inputProperty,\n        propertyValue: value,\n        fields: customizationController.propertyConfigs\n    });\n\n    if (value === undefined || property === null) {\n        content = <EmptyValue/>;\n    } else if (property.Preview) {\n        content = createElement(property.Preview as React.ComponentType<PropertyPreviewProps>,\n            {\n                propertyKey,\n                value,\n                property,\n                size,\n                height,\n                width,\n                // entity,\n                customProps: property.customProps\n            });\n    } else if (value === null) {\n        content = <EmptyValue/>;\n    } else if (property.dataType === \"string\") {\n        const stringProperty = property as ResolvedStringProperty;\n        if (typeof value === \"string\") {\n            if (stringProperty.url) {\n                if (typeof stringProperty.url === \"boolean\")\n                    content =\n                        <UrlComponentPreview size={props.size}\n                                             url={value}/>;\n                else if (typeof stringProperty.url === \"string\")\n                    content =\n                        <UrlComponentPreview size={props.size}\n                                             url={value}\n                                             previewType={stringProperty.url}/>;\n            } else if (stringProperty.storage) {\n                content = <StorageThumbnail\n                    storeUrl={property.storage?.storeUrl ?? false}\n                    size={props.size}\n                    storagePathOrDownloadUrl={value}/>;\n            } else if (stringProperty.markdown) {\n                content = <Markdown source={value} size={\"small\"}/>;\n            } else {\n                content = <StringPropertyPreview {...props}\n                                                 property={stringProperty}\n                                                 value={value}/>;\n            }\n        } else {\n            content = buildWrongValueType(propertyKey, property.dataType, value);\n        }\n    } else if (property.dataType === \"array\") {\n        if (value instanceof Array) {\n            const arrayProperty = property as ResolvedArrayProperty;\n            if (!arrayProperty.of && !arrayProperty.oneOf) {\n                throw Error(`You need to specify an 'of' or 'oneOf' prop (or specify a custom field) in your array property ${propertyKey}`);\n            }\n\n            if (arrayProperty.of) {\n                if (Array.isArray(arrayProperty.of)) {\n                    content = <ArrayPropertyPreview {...props}\n                                                    value={value}\n                                                    property={property as ResolvedArrayProperty}/>;\n                } else if (arrayProperty.of.dataType === \"reference\") {\n                    content = <ArrayOfReferencesPreview {...props}\n                                                        value={value}\n                                                        property={property as ResolvedArrayProperty}/>;\n                } else if (arrayProperty.of.dataType === \"string\") {\n                    if (arrayProperty.of.enumValues) {\n                        content = <ArrayPropertyEnumPreview\n                            {...props}\n                            value={value as string[]}\n                            property={property as ResolvedArrayProperty}/>;\n                    } else if (arrayProperty.of.storage) {\n                        content = <ArrayOfStorageComponentsPreview\n                            {...props}\n                            value={value}\n                            property={property as ResolvedArrayProperty}/>;\n                    } else {\n                        content = <ArrayOfStringsPreview\n                            {...props}\n                            value={value as string[]}\n                            property={property as ResolvedArrayProperty}/>;\n                    }\n                } else if (arrayProperty.of.dataType === \"number\" && arrayProperty.of.enumValues) {\n                    content = <ArrayPropertyEnumPreview\n                        {...props}\n                        value={value as string[]}\n                        property={property as ResolvedArrayProperty}/>;\n                } else {\n                    content = <ArrayPropertyPreview {...props}\n                                                    value={value}\n                                                    property={property as ResolvedArrayProperty}/>;\n                }\n            } else if (arrayProperty.oneOf) {\n                content = <ArrayOneOfPreview {...props}\n                                             value={value}\n                                             property={property as ResolvedArrayProperty}/>;\n            }\n        } else {\n            content = buildWrongValueType(propertyKey, property.dataType, value);\n        }\n    } else if (property.dataType === \"map\") {\n        if (typeof value === \"object\") {\n            content =\n                <MapPropertyPreview {...props}\n                                    property={property as ResolvedMapProperty}/>;\n        } else {\n            content = buildWrongValueType(propertyKey, property.dataType, value);\n        }\n    } else if (property.dataType === \"date\") {\n        if (value instanceof Date) {\n            content = <DatePreview date={value}/>;\n        } else {\n            content = buildWrongValueType(propertyKey, property.dataType, value);\n        }\n    } else if (property.dataType === \"reference\") {\n        if (typeof property.path === \"string\") {\n            if (typeof value === \"object\" && \"isEntityReference\" in value && value.isEntityReference()) {\n                content = <ReferencePreview\n                    disabled={!property.path}\n                    previewProperties={property.previewProperties}\n                    size={props.size}\n                    // onClick={props.onClick}\n                    reference={value as EntityReference}\n                />;\n            } else {\n                content = buildWrongValueType(propertyKey, property.dataType, value);\n            }\n        } else {\n            content = <EmptyValue/>;\n        }\n\n    } else if (property.dataType === \"boolean\") {\n        if (typeof value === \"boolean\") {\n            content = <BooleanPreview value={value} size={size} property={property}/>;\n        } else {\n            content = buildWrongValueType(propertyKey, property.dataType, value);\n        }\n    } else if (property.dataType === \"number\") {\n        if (typeof value === \"number\") {\n            content = <NumberPropertyPreview {...props}\n                                             value={value}\n                                             property={property as ResolvedNumberProperty}/>;\n        } else {\n            content = buildWrongValueType(propertyKey, property.dataType, value);\n        }\n    } else {\n        content = JSON.stringify(value);\n    }\n\n    return content === undefined || content === null || (Array.isArray(content) && content.length === 0)\n        ? <EmptyValue/>\n        : content;\n}, equal);\n\nfunction buildWrongValueType(name: string | undefined, dataType: string, value: any) {\n    console.warn(`Unexpected value for property ${name}, of type ${dataType}`, value);\n    return (\n        <ErrorView title={\"Unexpected value\"}\n                   error={`${JSON.stringify(value)}`}/>\n    );\n}\n","import React from \"react\";\nimport { ErrorBoundary } from \"../../components\";\nimport { useCustomizationController } from \"../../hooks\";\nimport { PropertyPreviewProps } from \"../PropertyPreviewProps\";\nimport { PropertyPreview } from \"../PropertyPreview\";\nimport { resolveArrayProperty } from \"../../util\";\n\n/**\n * @group Preview components\n */\nexport function ArrayOfMapsPreview({\n                                       propertyKey,\n                                       value,\n                                       property: inputProperty,\n                                       size,\n                                       // entity\n                                   }: PropertyPreviewProps<Record<string, any>[]>) {\n\n    const customizationController = useCustomizationController();\n    const property = resolveArrayProperty({\n        propertyKey,\n        property: inputProperty,\n        propertyValue: value,\n        fields: customizationController.propertyConfigs\n    });\n\n    if (Array.isArray(property?.of)) {\n        throw Error(\"Using array properties instead of single one in `of` in ArrayProperty\");\n    }\n\n    if (property?.dataType !== \"array\" || !property.of || property.of.dataType !== \"map\")\n        throw Error(\"Picked wrong preview component ArrayOfMapsPreview\");\n\n    const mapProperty = property.of;\n    const properties = mapProperty.properties;\n    if (!properties) {\n        throw Error(`You need to specify a 'properties' prop (or specify a custom field) in your map property ${propertyKey}`);\n    }\n    const values = value;\n    const previewProperties: string[] | undefined = mapProperty.previewProperties;\n\n    if (!values) return null;\n\n    let mapProperties = previewProperties;\n    if (!mapProperties || !mapProperties.length) {\n        mapProperties = Object.keys(properties);\n        if (size)\n            mapProperties = mapProperties.slice(0, 3);\n    }\n\n    return (\n        <div className=\"table-auto text-xs\">\n            <div>\n                {values &&\n                    values.map((v, index) => {\n                        return (\n                            <div key={`table_${v}_${index}`}\n                                 className=\"border-b last:border-b-0\">\n                                {mapProperties && mapProperties.map(\n                                    (key) => (\n                                        <div\n                                            key={`table-cell-${key as string}`}\n                                            className=\"table-cell\"\n                                        >\n                                            <ErrorBoundary>\n                                                <PropertyPreview\n                                                    propertyKey={key as string}\n                                                    value={(v)[key]}\n                                                    property={properties[key as string]}\n                                                    // entity={entity}\n                                                    size={\"small\"}/>\n                                            </ErrorBoundary>\n                                        </div>\n                                    )\n                                )}\n                            </div>\n                        );\n                    })}\n            </div>\n        </div>\n    );\n}\n","import * as React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { Skeleton } from \"@firecms/ui\";\n\nexport interface AsyncPreviewComponentProps {\n    builder: Promise<React.ReactNode>;\n}\n\n/**\n * Utility component used to render the result of an async execution.\n * It shows a loading indicator while at it.\n *\n * @group Preview components\n */\nexport const AsyncPreviewComponent = React.memo(function AsyncPreviewComponentInternal<M extends Record<string, any>>(\n        {\n            builder\n        }: AsyncPreviewComponentProps) {\n\n        const [loading, setLoading] = useState<boolean>(true);\n        const [result, setResult] = useState<React.ReactNode>(null);\n\n        useEffect(() => {\n            let unmounted = false;\n            builder\n                .then((res) => {\n                    if (!unmounted) {\n                        setLoading(false);\n                        setResult(res);\n                    }\n                })\n                .catch(error => {\n                    setLoading(false);\n                    console.error(error);\n                });\n            return () => {\n                unmounted = true;\n            };\n        }, [builder]);\n\n        if (loading)\n            return <Skeleton/>;\n\n        return <React.Fragment>{result}</React.Fragment>;\n\n    }\n);\n","import React, { useMemo } from \"react\";\nimport { PropertyPreview } from \"../preview\";\nimport { Entity, EntityCollection, ResolvedEntityCollection, ResolvedProperties } from \"../types\";\nimport { resolveCollection } from \"../util\";\nimport { cn, defaultBorderMixin, IconButton, OpenInNewIcon } from \"@firecms/ui\";\nimport { CustomizationController } from \"../types/customization_controller\";\nimport { useCustomizationController } from \"../hooks/useCustomizationController\";\n\n/**\n * @group Components\n */\nexport interface EntityViewProps<M extends Record<string, any>> {\n    entity: Entity<M>;\n    collection: EntityCollection<M>;\n    path: string;\n    className?: string;\n}\n\nexport function EntityView<M extends Record<string, any>>(\n    {\n        entity,\n        collection,\n        path,\n        className\n    }: EntityViewProps<M>) {\n\n    const customizationController: CustomizationController = useCustomizationController();\n    const resolvedCollection: ResolvedEntityCollection<M> = useMemo(() => resolveCollection<M>({\n        collection,\n        path,\n        entityId: entity.id,\n        values: entity.values,\n        fields: customizationController.propertyConfigs\n    }), [collection, path, entity]);\n\n    const properties: ResolvedProperties = resolvedCollection.properties;\n\n    return (\n        <div className={\"w-full \" + className}>\n            <div className={\"w-full mb-4\"}>\n                <div className={cn(defaultBorderMixin, \"flex justify-between py-2 border-b last:border-b-0\")}>\n                    <div className=\"flex items-center w-1/4\">\n                        <span className=\"pl-2 text-sm text-gray-600\">Id</span>\n                    </div>\n                    <div\n                        className=\"flex-grow p-2 ml-2 w-3/4 text-gray-900 dark:text-white min-h-[56px] flex items-center\">\n                        <span className=\"flex-grow mr-2\">{entity.id}</span>\n                        {customizationController?.entityLinkBuilder &&\n                            <a href={customizationController.entityLinkBuilder({ entity })}\n                               rel=\"noopener noreferrer\"\n                               target=\"_blank\">\n                                <IconButton>\n                                    <OpenInNewIcon\n                                        size={\"small\"}/>\n                                </IconButton>\n                            </a>}\n                    </div>\n                </div>\n                {Object.entries(properties)\n                    .map(([key, property]) => {\n                        const value = entity.values?.[key];\n                        return (\n                            <div\n                                key={`reference_previews_${key}`}\n                                className={cn(defaultBorderMixin, \"flex justify-between py-2 border-b last:border-b-0\")}>\n                                <div className=\"flex items-center w-1/4\">\n                                    <span className=\"pl-2 text-sm text-gray-600\">{property.name}</span>\n                                </div>\n                                <div\n                                    className=\"flex-grow p-2 ml-2 w-3/4 text-gray-900 dark:text-white min-h-[56px] flex items-center\">\n                                    <PropertyPreview\n                                        propertyKey={key}\n                                        value={value}\n                                        // entity={entity}\n                                        property={property}\n                                        size={\"medium\"}/>\n                                </div>\n                            </div>\n                        )\n                    })}\n            </div>\n        </div>\n    );\n}\n","import React, { useEffect, useRef, useState } from \"react\";\n\nimport { useDebouncedCallback } from \"../../../util\";\nimport { TextareaAutosize } from \"@firecms/ui\";\n\nexport function VirtualTableInput(props: {\n    error: Error | undefined;\n    value: string;\n    multiline: boolean;\n    focused: boolean;\n    disabled: boolean;\n    updateValue: (newValue: (string | null)) => void;\n}) {\n\n    const ref = React.useRef<HTMLTextAreaElement>(null);\n\n    const {\n        disabled,\n        value,\n        multiline,\n        updateValue,\n        focused\n    } = props;\n\n    const prevValue = useRef<string | null>(value);\n\n    const [internalValue, setInternalValue] = useState<typeof value>(value);\n    const focusedState = useRef<boolean>(false);\n\n    useEffect(() => {\n        if (prevValue.current !== value && value !== internalValue)\n            setInternalValue(value);\n        prevValue.current = value;\n    }, [value]);\n\n    const doUpdate = React.useCallback(() => {\n        const emptyInitialValue = !value;\n        if (emptyInitialValue && !internalValue)\n            return;\n        if (internalValue !== value) {\n            prevValue.current = internalValue;\n            updateValue(internalValue);\n        }\n    }, [internalValue, updateValue, value]);\n\n    useDebouncedCallback(internalValue, doUpdate, !focused, 2000);\n\n    useEffect(() => {\n        if (ref.current && focused && !focusedState.current) {\n            focusedState.current = true;\n            ref.current.focus({ preventScroll: true });\n            ref.current.selectionStart = ref.current.value.length;\n            ref.current.selectionEnd = ref.current.value.length;\n        } else {\n            focusedState.current = focused;\n        }\n    }, [focused, ref]);\n\n    return (\n        <TextareaAutosize\n            ref={ref}\n            style={{\n                padding: 0,\n                margin: 0,\n                width: \"100%\",\n                color: \"unset\",\n                fontWeight: \"unset\",\n                lineHeight: \"unset\",\n                fontSize: \"unset\",\n                fontFamily: \"unset\",\n                background: \"unset\",\n                border: \"unset\",\n                resize: \"none\",\n                outline: \"none\"\n            }}\n            value={internalValue ?? \"\"}\n            onChange={(evt) => {\n                const newValue = evt.target.value as string;\n                if (multiline || !newValue.endsWith(\"\\n\"))\n                    setInternalValue(newValue);\n            }}\n            onFocus={() => {\n                focusedState.current = true;\n            }}\n            onBlur={() => {\n                focusedState.current = false;\n                doUpdate();\n            }}\n        />\n    );\n}\n","import { EnumValueConfig } from \"../../../types\";\nimport { ArrayEnumPreview, EnumValuesChip } from \"../../../preview\";\nimport React, { useCallback, useEffect } from \"react\";\nimport { MultiSelect, MultiSelectItem, Select, SelectItem } from \"@firecms/ui\";\n\nexport function VirtualTableSelect(props: {\n    name: string;\n    enumValues: EnumValueConfig[];\n    error: Error | undefined;\n    multiple: boolean;\n    disabled: boolean;\n    small: boolean;\n    internalValue: string | number | string[] | number[] | undefined;\n    valueType: \"string\" | \"number\";\n    updateValue: (newValue: (string | number | string[] | number[] | null)) => void;\n    focused: boolean;\n    onBlur?: React.FocusEventHandler<HTMLInputElement | HTMLTextAreaElement>;\n}) {\n\n    const {\n        name,\n        enumValues,\n        error,\n        internalValue,\n        disabled,\n        small,\n        focused,\n        updateValue,\n        multiple,\n        valueType\n    } = props;\n\n    const validValue = (Array.isArray(internalValue) && multiple) ||\n        (!Array.isArray(internalValue) && !multiple);\n\n    const ref = React.useRef<HTMLButtonElement>(null);\n    useEffect(() => {\n        if (ref.current && focused) {\n            ref.current?.focus({ preventScroll: true });\n        }\n    }, [focused, ref]);\n\n    const onChange = useCallback((updatedValue: string | string[]) => {\n        if (valueType === \"number\") {\n            if (multiple) {\n                const newValue = (updatedValue as string[]).map((v) => parseFloat(v));\n                updateValue(newValue);\n            } else {\n                updateValue(parseFloat(updatedValue as string));\n            }\n        } else if (valueType === \"string\") {\n            if (!updatedValue)\n                updateValue(null)\n            else\n                updateValue(updatedValue);\n        } else {\n            throw Error(\"Missing mapping in TableSelect\");\n        }\n    }, [multiple, updateValue, valueType]);\n\n    const renderValue = (enumKey: string | number, index: number) => {\n        if (multiple && Array.isArray(enumKey)) {\n            return <ArrayEnumPreview\n                key={`${enumKey}-${index}`}\n                value={enumKey}\n                name={name}\n                enumValues={enumValues}\n                size={small ? \"small\" : \"medium\"}/>;\n        } else {\n            return <EnumValuesChip\n                key={`${enumKey}-${index}`}\n                enumKey={enumKey}\n                enumValues={enumValues}\n                size={small ? \"small\" : \"medium\"}/>;\n        }\n    };\n    return (\n        multiple\n            ? <MultiSelect\n                inputRef={ref}\n                containerClassName=\"w-full h-full\"\n                className=\"w-full h-full p-0 bg-transparent\"\n                position={\"item-aligned\"}\n                disabled={disabled}\n                padding={false}\n                includeFocusOutline={false}\n                value={validValue\n                    ? ((internalValue as any[]).map(v => v.toString()))\n                    : ([])}\n                onMultiValueChange={onChange}\n                renderValue={renderValue}>\n                {enumValues?.map((enumConfig) => (\n                    <MultiSelectItem\n                        key={enumConfig.id}\n                        value={String(enumConfig.id)}>\n                        <EnumValuesChip\n                            enumKey={enumConfig.id}\n                            enumValues={enumValues}\n                            size={small ? \"small\" : \"medium\"}/>\n                    </MultiSelectItem>\n                ))}\n            </MultiSelect>\n            : <Select\n                inputRef={ref}\n                className=\"w-full h-full p-0 bg-transparent\"\n                position={\"item-aligned\"}\n                disabled={disabled}\n                multiple={multiple}\n                padding={false}\n                includeFocusOutline={false}\n                value={validValue\n                    ? (multiple ? (internalValue as any[]).map(v => v.toString()) : internalValue?.toString())\n                    : (multiple ? [] : \"\")}\n                onValueChange={onChange}\n                onMultiValueChange={onChange}\n                renderValue={renderValue}>\n                {enumValues?.map((enumConfig) => (\n                    <SelectItem\n                        key={enumConfig.id}\n                        value={String(enumConfig.id)}>\n                        <EnumValuesChip\n                            enumKey={enumConfig.id}\n                            enumValues={enumValues}\n                            size={small ? \"small\" : \"medium\"}/>\n                    </SelectItem>\n                ))}\n            </Select>\n\n    );\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { useDebouncedCallback } from \"../../../util\";\n\nexport function VirtualTableNumberInput(props: {\n    error: Error | undefined;\n    value: number;\n    align: \"right\" | \"left\" | \"center\";\n    updateValue: (newValue: (number | null)) => void;\n    focused: boolean;\n    disabled: boolean;\n}) {\n\n    const {\n        align,\n        value,\n        updateValue,\n        focused,\n    } = props;\n    const propStringValue = (value && typeof value === \"number\") ? value.toString() : \"\";\n    const [internalValue, setInternalValue] = useState<string | null>(propStringValue);\n\n    const prevValue = useRef<number | null>(value);\n\n    useEffect(() => {\n        if (prevValue.current !== value && String(value) !== internalValue)\n            setInternalValue(value ? value.toString() : null);\n        prevValue.current = value;\n    }, [value]);\n\n    const doUpdate = React.useCallback(() => {\n        if (internalValue !== propStringValue) {\n            if (internalValue !== undefined && internalValue !== null) {\n                const numberValue = parseFloat(internalValue);\n                if (isNaN(numberValue))\n                    return;\n                if (numberValue !== undefined && numberValue !== null)\n                    updateValue(numberValue);\n            } else {\n                updateValue(null);\n            }\n        }\n\n    }, [internalValue, value]);\n\n    useDebouncedCallback(internalValue, doUpdate, !focused, 2000);\n\n    useEffect(\n        () => {\n            if (!focused && propStringValue !== internalValue)\n                setInternalValue(value !== undefined && value !== null ? value.toString() : null);\n        },\n        [value, focused]\n    );\n\n    const ref = React.useRef<HTMLInputElement>(null);\n\n    useEffect(() => {\n        if (ref.current && focused) {\n            ref.current.focus({ preventScroll: true });\n        }\n    }, [focused, ref]);\n\n    const regexp = /^-?[0-9]+[,.]?[0-9]*$/;\n\n    return (\n        <input\n            ref={ref}\n            className=\"w-full text-right p-0 m-0 bg-transparent border-none resize-none outline-none font-normal leading-normal text-unset\"\n            style={{\n                textAlign: align\n            }}\n            value={internalValue ?? \"\"}\n            onChange={(evt) => {\n                const newValue = evt.target.value.replace(\",\", \".\");\n                if (newValue.length === 0)\n                    setInternalValue(null);\n                if (regexp.test(newValue) || newValue.startsWith(\"-\"))\n                    setInternalValue(newValue);\n            }}\n        />\n    );\n}\n","import React, { useEffect } from \"react\";\nimport { BooleanSwitch } from \"@firecms/ui\";\n\nexport function VirtualTableSwitch(props: {\n    error: Error | undefined;\n    internalValue?: boolean;\n    focused: boolean;\n    disabled: boolean;\n    updateValue: (newValue: (boolean | null)) => void;\n}) {\n    const {\n        internalValue,\n        updateValue,\n        focused\n    } = props;\n    const ref = React.useRef<HTMLButtonElement>(null);\n\n    useEffect(() => {\n        if (ref.current && focused) {\n            ref.current.focus({ preventScroll: true });\n        }\n    }, [focused, ref]);\n\n    return (\n        <BooleanSwitch\n            ref={ref}\n            size={\"small\"}\n            value={Boolean(internalValue)}\n            onValueChange={updateValue}\n        />\n    );\n}\n","import React from \"react\";\nimport { DateTimeField } from \"@firecms/ui\";\nimport { useCustomizationController } from \"../../../hooks\";\n\nexport function VirtualTableDateField(props: {\n    name: string;\n    error: Error | undefined;\n    mode?: \"date\" | \"date_time\";\n    internalValue: Date | undefined | null;\n    updateValue: (newValue: (Date | null)) => void;\n    focused: boolean;\n    disabled: boolean;\n    onBlur?: React.FocusEventHandler<HTMLInputElement | HTMLTextAreaElement>;\n}) {\n\n    const { locale } = useCustomizationController();\n    const {\n        disabled,\n        error,\n        mode,\n        internalValue,\n        updateValue\n    } = props;\n\n    return (\n        <DateTimeField\n            value={internalValue ?? undefined}\n            onChange={(dateValue) => updateValue(dateValue ?? null)}\n            size={\"medium\"}\n            invisible={true}\n            className={\"w-full h-full\"}\n            inputClassName={\"w-full h-full\"}\n            mode={mode}\n            locale={locale}\n        />\n    );\n}\n","import React, { ErrorInfo, PropsWithChildren } from \"react\";\n\nimport { ErrorIcon, Typography } from \"@firecms/ui\";\n\nexport class ErrorBoundary extends React.Component<PropsWithChildren<Record<string, unknown>>, {\n    error: Error | null\n}> {\n    constructor(props: any) {\n        super(props);\n        this.state = { error: null };\n    }\n\n    // eslint-disable-next-line n/handle-callback-err\n    static getDerivedStateFromError(error: Error) {\n        return { error };\n    }\n\n    componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n        console.error(error);\n        // logErrorToMyService(error, errorInfo);\n    }\n\n    render() {\n        if (this.state.error) {\n            return (\n                <div className=\"flex flex-col m-2\">\n                    <div className=\"flex items-center m-2\">\n                        <ErrorIcon color={\"error\"} size={\"small\"}/>\n                        <div className=\"ml-4\">Error</div>\n                    </div>\n                    <Typography variant={\"caption\"}>\n                        {this.state.error?.message ?? \"See the error in the console\"}\n                    </Typography>\n                </div>\n            );\n        }\n\n        return this.props.children;\n    }\n}\n","import {\n    EntityValues,\n    ResolvedArrayProperty,\n    ResolvedStringProperty,\n    StorageConfig,\n    UploadedFileContext\n} from \"../types\";\nimport { randomString } from \"./strings\";\n\nexport async function resolveFilenameString<M extends object>(\n    input: string | ((context: UploadedFileContext) => Promise<string> | string),\n    storage: StorageConfig,\n    values: EntityValues<M>,\n    entityId: string,\n    path: string,\n    property: ResolvedStringProperty | ResolvedArrayProperty<string[]>,\n    file: File,\n    propertyKey: string): Promise<string> {\n    let result;\n    if (typeof input === \"function\") {\n        result = await input({\n            path,\n            entityId,\n            values,\n            property,\n            file,\n            storage,\n            propertyKey\n        });\n        if (!result)\n            console.warn(\"Storage callback returned empty result. Using default name value\")\n    } else {\n        result = replacePlaceholders(file, input, entityId, propertyKey, path);\n    }\n\n    if (!result)\n        result = randomString() + \"_\" + file.name;\n\n    return result;\n}\n\nexport function resolveStoragePathString<M extends object>(\n    input: string | ((context: UploadedFileContext) => string),\n    storage: StorageConfig,\n    values: EntityValues<M>,\n    entityId: string,\n    path: string,\n    property: ResolvedStringProperty | ResolvedArrayProperty<string[]>,\n    file: File,\n    propertyKey: string): string {\n    let result;\n    if (typeof input === \"function\") {\n        result = input({\n            path,\n            entityId,\n            values,\n            property,\n            file,\n            storage,\n            propertyKey\n        });\n        if (!result)\n            console.warn(\"Storage callback returned empty result. Using default name value\")\n    } else {\n        result = replacePlaceholders(file, input, entityId, propertyKey, path);\n    }\n\n    if (!result)\n        result = randomString() + \"_\" + file.name;\n\n    return result;\n}\n\nfunction replacePlaceholders(file: File, input: string, entityId: string, propertyKey: string, path: string) {\n    const ext = file.name.split(\".\").pop();\n    let result = input.replace(\"{entityId}\", entityId)\n        .replace(\"{propertyKey}\", propertyKey)\n        .replace(\"{rand}\", randomString())\n        .replace(\"{file}\", file.name)\n        .replace(\"{file.type}\", file.type)\n        .replace(\"{path}\", path);\n    if (ext) {\n        result = result.replace(\"{file.ext}\", ext);\n        const name = file.name.replace(`.${ext}`, \"\");\n        result = result.replace(\"{file.name}\", name)\n    }\n\n    if (!result)\n        result = randomString() + \"_\" + file.name;\n\n    return result;\n}\n","import Resizer from \"react-image-file-resizer\";\nimport equal from \"react-fast-compare\";\n\nimport {\n    EntityValues,\n    ImageCompression,\n    Property,\n    ResolvedArrayProperty,\n    ResolvedStringProperty,\n    StorageConfig,\n    StorageSource,\n    StringProperty\n} from \"../types\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { PreviewSize } from \"../preview\";\nimport { randomString } from \"./strings\";\nimport { resolveFilenameString, resolveStoragePathString } from \"./storage\";\n\n/**\n * Internal representation of an item in the storage\n * It can have two states, having a storagePathOrDownloadUrl set,\n * which means the file has been uploaded, and it is rendered as a preview\n * Or have a pending file being uploaded.\n */\nexport interface StorageFieldItem {\n    id: number; // generated on the fly for internal use only\n    storagePathOrDownloadUrl?: string;\n    file?: File;\n    fileName?: string;\n    metadata?: any,\n    size: PreviewSize\n}\n\nexport function useStorageUploadController<M extends object>({\n                                                                 entityId,\n                                                                 entityValues,\n                                                                 path,\n                                                                 value,\n                                                                 property,\n                                                                 propertyKey,\n                                                                 storageSource,\n                                                                 disabled,\n                                                                 onChange\n                                                             }:\n                                                                 {\n                                                                     entityId: string,\n                                                                     entityValues: EntityValues<M>,\n                                                                     value: string | string[] | null;\n                                                                     path: string,\n                                                                     propertyKey: string,\n                                                                     property: ResolvedStringProperty | ResolvedArrayProperty<string[]>,\n                                                                     storageSource: StorageSource,\n                                                                     disabled: boolean,\n                                                                     onChange: (value: string | string[] | null) => void\n                                                                 }) {\n\n    const storage: StorageConfig | undefined = property.dataType === \"string\"\n        ? property.storage\n        : property.dataType === \"array\" &&\n        (property.of as Property).dataType === \"string\"\n            ? (property.of as StringProperty).storage\n            : undefined;\n\n    const multipleFilesSupported = property.dataType === \"array\";\n\n    if (!storage)\n        throw Error(\"Storage meta must be specified\");\n\n    const metadata: Record<string, any> | undefined = storage?.metadata;\n    const size = multipleFilesSupported ? \"small\" : \"medium\";\n\n    const compression: ImageCompression | undefined = storage?.imageCompression;\n\n    const internalInitialValue: StorageFieldItem[] =\n        (multipleFilesSupported\n            ? (value ?? []) as string[]\n            : value ? [value as string] : []).map(entry => (\n            {\n                id: getRandomId(),\n                storagePathOrDownloadUrl: entry,\n                metadata,\n                size\n            }\n        ));\n\n    const [initialValue, setInitialValue] = useState<string | string[] | null>(value);\n    const [internalValue, setInternalValue] = useState<StorageFieldItem[]>(internalInitialValue);\n\n    useEffect(() => {\n        if (!equal(initialValue, value)) {\n            setInitialValue(value);\n            setInternalValue(internalInitialValue);\n        }\n    }, [internalInitialValue, value, initialValue]);\n\n    const fileNameBuilder = useCallback(async (file: File) => {\n        if (storage.fileName) {\n            const fileName = await resolveFilenameString(storage.fileName, storage, entityValues, entityId, path, property, file, propertyKey);\n            if (!fileName || fileName.length === 0) {\n                throw Error(\"You need to return a valid filename\");\n            }\n            return fileName;\n        }\n        return randomString() + \"_\" + file.name;\n    }, [entityId, entityValues, path, property, propertyKey, storage]);\n\n    const storagePathBuilder = useCallback((file: File) => {\n        return resolveStoragePathString(storage.storagePath, storage, entityValues, entityId, path, property, file, propertyKey) ?? \"/\";\n    }, [entityId, entityValues, path, property, propertyKey, storage]);\n\n    const onFileUploadComplete = useCallback(async (uploadedPath: string,\n                                                    entry: StorageFieldItem,\n                                                    metadata?: any) => {\n\n        console.debug(\"onFileUploadComplete\", uploadedPath, entry);\n\n        let uploadPathOrDownloadUrl: string | null = uploadedPath;\n        if (storage.storeUrl) {\n            uploadPathOrDownloadUrl = (await storageSource.getDownloadURL(uploadedPath)).url;\n        }\n        if (storage.postProcess && uploadPathOrDownloadUrl) {\n            uploadPathOrDownloadUrl = await storage.postProcess(uploadPathOrDownloadUrl);\n        }\n\n        if (!uploadPathOrDownloadUrl) {\n            console.warn(\"uploadPathOrDownloadUrl is null\")\n            return;\n        }\n\n        let newValue: StorageFieldItem[];\n\n        entry.storagePathOrDownloadUrl = uploadPathOrDownloadUrl;\n        entry.metadata = metadata;\n        newValue = [...internalValue];\n\n        newValue = removeDuplicates(newValue);\n        setInternalValue(newValue);\n\n        const fieldValue = newValue\n            .filter(e => !!e.storagePathOrDownloadUrl)\n            .map(e => e.storagePathOrDownloadUrl as string);\n\n        if (multipleFilesSupported) {\n            onChange(fieldValue);\n        } else {\n            onChange(fieldValue ? fieldValue[0] : null);\n        }\n    }, [internalValue, multipleFilesSupported, onChange, storage, storageSource]);\n\n    const onFilesAdded = useCallback(async (acceptedFiles: File[]) => {\n\n        if (!acceptedFiles.length || disabled)\n            return;\n\n        let newInternalValue: StorageFieldItem[];\n        if (multipleFilesSupported) {\n            newInternalValue = [...internalValue,\n                ...(await Promise.all(acceptedFiles.map(async file => {\n                    if (compression && compressionFormat(file)) {\n                        file = await resizeAndCompressImage(file, compression)\n                    }\n\n                    return {\n                        id: getRandomId(),\n                        file,\n                        fileName: await fileNameBuilder(file),\n                        metadata,\n                        size\n                    } as StorageFieldItem;\n                })))];\n        } else {\n            let file = acceptedFiles[0]\n            if (compression && compressionFormat(file)) {\n                file = await resizeAndCompressImage(file, compression)\n            }\n\n            newInternalValue = [{\n                id: getRandomId(),\n                file,\n                fileName: await fileNameBuilder(file),\n                metadata,\n                size\n            }];\n        }\n\n        // Remove either storage path or file duplicates\n        newInternalValue = removeDuplicates(newInternalValue);\n        setInternalValue(newInternalValue);\n    }, [disabled, fileNameBuilder, internalValue, metadata, multipleFilesSupported, size]);\n\n    return {\n        internalValue,\n        setInternalValue,\n        storage,\n        fileNameBuilder,\n        storagePathBuilder,\n        onFileUploadComplete,\n        onFilesAdded,\n        multipleFilesSupported\n    }\n}\n\nfunction removeDuplicates(items: StorageFieldItem[]) {\n    return items.filter(\n        (item, i) => {\n            return ((items.map((v) => v.storagePathOrDownloadUrl).indexOf(item.storagePathOrDownloadUrl) === i) || !item.storagePathOrDownloadUrl) &&\n                ((items.map((v) => v.file).indexOf(item.file) === i) || !item.file);\n        }\n    );\n}\n\nfunction getRandomId() {\n    return Math.floor(Math.random() * Math.floor(Number.MAX_SAFE_INTEGER));\n}\n\nconst supportedTypes: Record<string, string> = {\n    \"image/jpeg\": \"JPEG\",\n    \"image/png\": \"PNG\",\n    \"image/webp\": \"WEBP\"\n}\nconst compressionFormat = (file: File) => supportedTypes[file.type] ? supportedTypes[file.type] : null;\n\nconst defaultQuality = 100;\nconst resizeAndCompressImage = (file: File, compression: ImageCompression) => new Promise<File>((resolve) => {\n\n    const inputQuality = compression.quality === undefined ? defaultQuality : compression.quality;\n    const quality = inputQuality >= 0 ? inputQuality <= 100 ? inputQuality : 100 : 100;\n\n    const format = compressionFormat(file);\n    if (!format) {\n        throw Error(\"resizeAndCompressImage: Unsupported image format\");\n    }\n    Resizer.imageFileResizer(\n        file,\n        compression.maxWidth || Number.MAX_VALUE,\n        compression.maxHeight || Number.MAX_VALUE,\n        format,\n        quality,\n        0,\n        (file: string | Blob | File | ProgressEvent<FileReader>) => resolve(file as File),\n        \"file\"\n    )\n});\n","import React, { useCallback } from \"react\";\n\nimport { useSnackbarController, useStorageSource } from \"../../hooks\";\nimport { StorageFieldItem } from \"../../util/useStorageUploadController\";\nimport { ErrorView } from \"../../components\";\nimport { cn, paperMixin, Skeleton } from \"@firecms/ui\";\nimport { EntityCollection, StorageSource } from \"../../types\";\n\nexport interface StorageUploadItemProps {\n    storagePath: string;\n    metadata?: any,\n    entry: StorageFieldItem,\n    onFileUploadComplete: (value: string,\n                           entry: StorageFieldItem,\n                           metadata?: any) => Promise<void>;\n    imageSize: number;\n    simple: boolean;\n}\n\nexport function StorageUploadProgress({\n                                          storagePath,\n                                          entry,\n                                          metadata,\n                                          onFileUploadComplete,\n                                          imageSize,\n                                          simple,\n                                      }: StorageUploadItemProps) {\n\n    const storageSource = useStorageSource();\n\n    const snackbarController = useSnackbarController();\n\n    const [error, setError] = React.useState<Error | undefined>();\n    const [loading, setLoading] = React.useState<boolean>(false);\n    const mounted = React.useRef(false);\n    const uploading = React.useRef(false);\n\n    const upload = useCallback((file: File, fileName?: string) => {\n\n        if (uploading.current) return;\n        uploading.current = true;\n        setError(undefined);\n        setLoading(true);\n\n        storageSource.uploadFile({\n            file,\n            fileName,\n            path: storagePath,\n            metadata\n        })\n            .then(async ({ path }) => {\n                console.debug(\"Upload successful\");\n                await onFileUploadComplete(path, entry, metadata);\n                if (mounted.current)\n                    setLoading(false);\n            })\n            .catch((e) => {\n                console.warn(\"Upload error\", e);\n                if (mounted.current) {\n                    setError(e);\n                    setLoading(false);\n                    snackbarController.open({\n                        type: \"error\",\n                        message: \"Error uploading file: \" + e.message\n                    });\n                }\n            })\n            .finally(() => {\n                uploading.current = false;\n            });\n    }, [entry, metadata, onFileUploadComplete, storageSource, storagePath]);\n\n    React.useEffect(() => {\n        mounted.current = true;\n        if (entry.file)\n            upload(entry.file, entry.fileName);\n        return () => {\n            mounted.current = false;\n        };\n    }, [entry.file, entry.fileName, upload]);\n\n    if (simple) {\n        return <div className={`m-4 w-${imageSize} h-${imageSize}`}>\n\n            {loading && <Skeleton className={`w-${imageSize} h-${imageSize}`}/>}\n\n        </div>\n    }\n    return (\n\n        <div className={cn(paperMixin,\n            \"relative m-4 border-box flex items-center justify-center\",\n            `min-w-[${imageSize}px] min-h-[${imageSize}px]`)}>\n\n            {loading &&\n                <Skeleton className=\"w-full h-full\"/>}\n\n            {error && <ErrorView title={\"Error uploading file\"}\n                                 error={error}/>}\n\n        </div>\n\n    );\n\n}\n","import { ErrorOutlineIcon, IconButton } from \"@firecms/ui\";\nimport { ErrorTooltip } from \"../../ErrorTooltip\";\nimport { useCallback, useEffect, useRef } from \"react\";\n\nexport interface EntityTableCellActionsProps {\n    showError: false | Error | undefined;\n    disabled: boolean;\n    showExpandIcon: boolean | undefined;\n    selected: boolean | undefined;\n    openPopup?: (cellRect: DOMRect | undefined) => void;\n    children?: React.ReactNode;\n}\n\nexport function EntityTableCellActions({ showError, disabled, showExpandIcon, selected, openPopup, children }: EntityTableCellActionsProps) {\n\n    const ref = useRef<HTMLDivElement>(null);\n    const doOpenPopup = useCallback(() => {\n        if (openPopup) {\n            const cellRect = ref && ref?.current?.getBoundingClientRect();\n            openPopup(cellRect);\n        }\n    }, []);\n\n    const iconRef = useRef<HTMLButtonElement>();\n    useEffect(() => {\n        if (iconRef.current && selected) {\n            iconRef.current.focus({ preventScroll: true });\n        }\n    }, [selected]);\n\n    return <>\n        {(showError || (!disabled && showExpandIcon)) &&\n            <div ref={ref} className=\"absolute top-0.5 right-0.5 flex items-center\">\n                {selected && children}\n\n                {selected && !disabled && showExpandIcon &&\n                    <IconButton\n                        ref={iconRef}\n                        color={\"inherit\"}\n                        size={\"small\"}\n                        onClick={doOpenPopup}>\n                        <svg\n                            fill={\"#888\"}\n                            width=\"20\"\n                            height=\"20\"\n                            viewBox=\"0 0 24 24\">\n                            <path className=\"cls-2\"\n                                  d=\"M20,5a1,1,0,0,0-1-1L14,4h0a1,1,0,0,0,0,2h2.57L13.29,9.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L18,7.42V10a1,1,0,0,0,1,1h0a1,1,0,0,0,1-1Z\"/>\n                            <path className=\"cls-2\"\n                                  d=\"M10.71,13.29a1,1,0,0,0-1.42,0L6,16.57V14a1,1,0,0,0-1-1H5a1,1,0,0,0-1,1l0,5a1,1,0,0,0,1,1h5a1,1,0,0,0,0-2H7.42l3.29-3.29A1,1,0,0,0,10.71,13.29Z\"/>\n                        </svg>\n                    </IconButton>\n                }\n\n                {showError && <ErrorTooltip\n                    side={\"left\"}\n                    className={\"flex items-center justify-center\"}\n                    style={{ width: 32, height: 32 }}\n                    title={showError.message}>\n                    <ErrorOutlineIcon\n                        size={\"small\"}\n                        color={\"error\"}\n                    />\n                </ErrorTooltip>\n                }\n\n            </div>\n        }\n    </>;\n}\n","import * as React from \"react\";\nimport { useMemo, useState } from \"react\";\n\nimport { Entity, ResolvedArrayProperty, ResolvedStringProperty, StorageConfig } from \"../../../types\";\nimport { useDropzone } from \"react-dropzone\";\nimport { PreviewSize, PropertyPreview } from \"../../../preview\";\nimport { ErrorBoundary } from \"../../ErrorBoundary\";\nimport { useSnackbarController, useStorageSource } from \"../../../hooks\";\nimport { getThumbnailMeasure } from \"../../../preview/util\";\nimport { StorageFieldItem, useStorageUploadController } from \"../../../util/useStorageUploadController\";\nimport { StorageUploadProgress } from \"../../../form/components/StorageUploadProgress\";\nimport { cn, EditIcon, IconButton, Typography } from \"@firecms/ui\";\nimport { EntityTableCellActions } from \"../internal/EntityTableCellActions\";\n\nconst dropZoneClasses = \"max-w-full box-border relative pt-[2px] items-center border border-transparent outline-none rounded-md duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] focus:border-primary-solid\";\nconst activeDropClasses = \"pt-0 border-2 border-solid\"\nconst acceptDropClasses = \"transition-colors duration-200 ease-[cubic-bezier(0,0,0.2,1)] border-2 border-solid border-green-500 bg-green-50 dark:bg-green-900\"\nconst rejectDropClasses = \"transition-colors duration-200 ease-[cubic-bezier(0,0,0.2,1)] border-2 border-solid border-red-500 bg-red-50 dark:bg-red-900\"\n\n/**\n * Field that allows to upload files to Google Cloud Storage.\n *\n * This is one of the internal components that get mapped natively inside forms\n * and tables to the specified properties.\n * @group Form fields\n */\nexport function TableStorageUpload(props: {\n    propertyKey: string;\n    error: Error | undefined;\n    disabled: boolean;\n    value: string | string[] | null;\n    updateValue: (newValue: (string | string[] | null)) => void;\n    selected: boolean;\n    focused: boolean;\n    property: ResolvedStringProperty | ResolvedArrayProperty<string[]>;\n    entity: Entity<any>;\n    path: string;\n    previewSize: PreviewSize;\n    openPopup?: (cellRect?: DOMRect) => void;\n    onBlur?: React.FocusEventHandler<HTMLInputElement | HTMLTextAreaElement>;\n}) {\n\n    const {\n        propertyKey,\n        error,\n        selected,\n        openPopup,\n        value,\n        disabled,\n        property,\n        entity,\n        path,\n        previewSize,\n        updateValue,\n    } = props;\n\n    const storageSource = useStorageSource();\n\n    const {\n        internalValue,\n        setInternalValue,\n        onFilesAdded,\n        storage,\n        onFileUploadComplete,\n        storagePathBuilder,\n        multipleFilesSupported\n    } = useStorageUploadController({\n        entityValues: entity.values,\n        entityId: entity.id,\n        path,\n        property,\n        propertyKey,\n        storageSource,\n        onChange: updateValue,\n        value,\n        disabled\n    });\n\n    return (\n\n        <StorageUpload\n            internalValue={internalValue}\n            setInternalValue={setInternalValue}\n            name={propertyKey}\n            disabled={disabled}\n            autoFocus={false}\n            openPopup={openPopup}\n            error={error}\n            selected={selected}\n            property={property}\n            onChange={updateValue}\n            entity={entity}\n            storagePathBuilder={storagePathBuilder}\n            storage={storage}\n            multipleFilesSupported={multipleFilesSupported}\n            onFilesAdded={onFilesAdded}\n            onFileUploadComplete={onFileUploadComplete}\n            previewSize={previewSize}/>\n\n    );\n}\n\ninterface StorageUploadProps {\n    internalValue: StorageFieldItem[];\n    setInternalValue: (v: StorageFieldItem[]) => void;\n    name: string;\n    error?: Error;\n    property: ResolvedStringProperty | ResolvedArrayProperty<string[]>;\n    onChange: (value: string | string[] | null) => void;\n    multipleFilesSupported: boolean;\n    autoFocus: boolean;\n    selected: boolean;\n    disabled: boolean;\n    entity: Entity<any>;\n    previewSize: PreviewSize;\n    storage: StorageConfig;\n    onFilesAdded: (acceptedFiles: File[]) => void;\n    storagePathBuilder: (file: File) => string;\n    openPopup?: (cellRect?: DOMRect) => void;\n    onFileUploadComplete: (uploadedPath: string, entry: StorageFieldItem, fileMetadata?: any) => Promise<void>;\n}\n\nfunction StorageUpload({\n                           property,\n                           name,\n                           internalValue,\n                           setInternalValue,\n                           openPopup,\n                           entity,\n                           selected,\n                           error,\n                           onChange,\n                           multipleFilesSupported,\n                           previewSize: previewSizeInput,\n                           disabled,\n                           autoFocus,\n                           storage,\n                           onFilesAdded,\n                           onFileUploadComplete,\n                           storagePathBuilder,\n                       }: StorageUploadProps) {\n\n    const [onHover, setOnHover] = useState(false);\n\n    const previewSize = multipleFilesSupported && previewSizeInput === \"medium\" ? \"small\" : previewSizeInput;\n    if (multipleFilesSupported) {\n        const arrayProperty = property as ResolvedArrayProperty<string[]>;\n        if (Array.isArray(arrayProperty.of)) {\n            throw Error(\"Using array properties instead of single one in `of` in ArrayProperty\");\n        }\n        if (arrayProperty.of) {\n            if (arrayProperty.of.dataType !== \"string\") {\n                throw Error(\"Storage field using array must be of data type string\");\n            }\n        } else {\n            throw Error(\"Storage field using array must be of data type string\");\n        }\n    }\n\n    const metadata: any | undefined = storage?.metadata;\n    const hasValue = Boolean(internalValue);\n\n    const snackbarContext = useSnackbarController();\n\n    const {\n        open,\n        getRootProps,\n        getInputProps,\n        isDragActive,\n        isDragAccept,\n        isDragReject\n    } = useDropzone({\n            accept: storage.acceptedFiles ? storage.acceptedFiles.map(e => ({ [e]: [] })).reduce((a, b) => ({ ...a, ...b }), {}) : undefined,\n            disabled,\n            maxSize: storage.maxSize,\n            noClick: true,\n            noKeyboard: true,\n            onDrop: onFilesAdded,\n            onDropRejected: (fileRejections, event) => {\n                for (const fileRejection of fileRejections) {\n                    for (const error of fileRejection.errors) {\n                        snackbarContext.open({\n                            type: \"error\",\n                            message: `Error uploading file: File is larger than ${storage.maxSize} bytes`\n                        });\n                    }\n                }\n            }\n        }\n    );\n\n    const { ...rootProps } = getRootProps();\n\n    const helpText = multipleFilesSupported\n        ? \"Drag 'n' drop some files here, or click here to edit\"\n        : \"Drag 'n' drop a file here, or click here edit\";\n\n    const renderProperty = multipleFilesSupported\n        ? (property as ResolvedArrayProperty<string[]>).of as ResolvedStringProperty\n        : property as ResolvedStringProperty;\n\n    const imageSize = useMemo(() => getThumbnailMeasure(previewSize), [previewSize]);\n    const showError = !disabled && error;\n\n    return (\n        <div {...rootProps}\n             onMouseEnter={() => setOnHover(true)}\n             onMouseMove={() => setOnHover(true)}\n             onMouseLeave={() => setOnHover(false)}\n             className={cn(dropZoneClasses,\n                 \"relative w-full h-full flex\",\n                 `justify-${hasValue ? \"start\" : \"center\"}`,\n                 isDragActive ? activeDropClasses : \"\",\n                 isDragAccept ? acceptDropClasses : \"\",\n                 isDragReject ? rejectDropClasses : \"\"\n             )}\n        >\n\n            <input autoFocus={autoFocus} {...getInputProps()} />\n\n            {internalValue.map((entry, index) => {\n                let child;\n                if (entry.storagePathOrDownloadUrl) {\n                    child = (\n                        <TableStorageItemPreview\n                            key={`storage_preview_${index}`}\n                            property={renderProperty}\n                            value={entry.storagePathOrDownloadUrl}\n                            entity={entity}\n                            size={previewSize}/>\n                    );\n                } else if (entry.file) {\n                    child = (\n                        <StorageUploadProgress\n                            key={`storage_progress_${index}`}\n                            entry={entry}\n                            metadata={metadata}\n                            storagePath={storagePathBuilder(entry.file)}\n                            onFileUploadComplete={onFileUploadComplete}\n                            imageSize={imageSize}\n                            simple={true}\n                        />\n                    );\n                }\n\n                return child;\n            })\n            }\n\n            {!internalValue && <div\n                className=\"flex-grow m-2 max-w-[200px]\"\n                onClick={open}>\n                <Typography\n                    className=\"text-gray-400 dark:text-gray-600\"\n                    variant={\"body2\"}\n                    align={\"center\"}>\n                    {helpText}\n                </Typography>\n            </div>}\n\n            <EntityTableCellActions\n                showError={showError}\n                disabled={disabled}\n                showExpandIcon={true}\n                selected={selected}\n                openPopup={!disabled ? openPopup : undefined}>\n                <IconButton\n                    color={\"inherit\"}\n                    size={\"small\"}\n                    onClick={open}>\n                    <EditIcon size={\"small\"} className={\"text-gray-500\"}/>\n                </IconButton>\n            </EntityTableCellActions>\n\n        </div>\n    );\n\n}\n\ninterface TableStorageItemPreviewProps {\n    property: ResolvedStringProperty;\n    value: string,\n    size: PreviewSize;\n    entity: Entity<any>;\n}\n\nexport function TableStorageItemPreview({\n                                            property,\n                                            value,\n                                            size,\n                                            entity\n                                        }: TableStorageItemPreviewProps) {\n\n    return (\n        <div\n            className={\"relative p-2 max-w-full\"}\n        >\n\n            {value &&\n                <ErrorBoundary>\n                    <PropertyPreview\n                        propertyKey={\"ignore\"} // TODO: Fix this\n                        value={value}\n                        property={property}\n                        // entity={entity}\n                        size={size}/>\n                </ErrorBoundary>\n            }\n\n        </div>\n    );\n\n}\n","import React, { useCallback, useState } from \"react\";\nimport equal from \"react-fast-compare\"\n\nimport { ReferencePreview } from \"../../../preview\";\nimport { CollectionSize, Entity, EntityCollection, EntityReference, FilterValues } from \"../../../types\";\n\nimport { getPreviewSizeFrom } from \"../../../preview/util\";\nimport { getReferenceFrom } from \"../../../util\";\nimport { useCustomizationController, useNavigationController, useReferenceDialog } from \"../../../hooks\";\nimport { ErrorView } from \"../../ErrorView\";\nimport { Button } from \"@firecms/ui\";\nimport { EntityPreviewContainer } from \"../../EntityPreview\";\n\ntype TableReferenceFieldProps = {\n    name: string;\n    disabled: boolean;\n    internalValue: EntityReference | EntityReference[] | undefined | null;\n    updateValue: (newValue: (EntityReference | EntityReference [] | null)) => void;\n    size: CollectionSize;\n    multiselect: boolean;\n    previewProperties?: string[];\n    title?: string;\n    path: string;\n    forceFilter?: FilterValues<string>;\n};\n\nexport function TableReferenceField(props: TableReferenceFieldProps) {\n    const customizationController = useCustomizationController();\n\n    const navigationController = useNavigationController();\n    const { path } = props;\n    const collection = navigationController.getCollection(path);\n    if (!collection) {\n        if (customizationController.components?.missingReference) {\n            return <customizationController.components.missingReference path={path}/>;\n        } else {\n            throw Error(`Couldn't find the corresponding collection view for the path: ${path}`);\n        }\n    }\n    return <TableReferenceFieldSuccess {...props} collection={collection}/>;\n}\n\nexport const TableReferenceFieldSuccess = React.memo(\n    function TableReferenceFieldSuccess(props: TableReferenceFieldProps & {\n        collection: EntityCollection;\n    }) {\n        const {\n            name,\n            internalValue,\n            updateValue,\n            multiselect,\n            path,\n            size,\n            previewProperties,\n            title,\n            disabled,\n            forceFilter,\n            collection\n        } = props;\n\n        const onSingleEntitySelected = useCallback((entity: Entity<any>) => {\n            updateValue(entity ? getReferenceFrom(entity) : null);\n        }, [updateValue]);\n\n        const onMultipleEntitiesSelected = useCallback((entities: Entity<any>[]) => {\n            updateValue(entities.map((e) => getReferenceFrom(e)));\n        }, [updateValue]);\n\n        const selectedEntityIds = internalValue\n            ? (Array.isArray(internalValue)\n                ? internalValue.map((ref) => ref.id)\n                : internalValue.id ? [internalValue.id] : [])\n            : [];\n\n        const referenceDialogController = useReferenceDialog({\n                multiselect,\n                path,\n                collection,\n                onMultipleEntitiesSelected,\n                onSingleEntitySelected,\n                selectedEntityIds,\n                forceFilter\n            }\n        );\n\n        const handleOpen = useCallback(() => {\n            if (disabled)\n                return;\n            referenceDialogController.open();\n        }, [disabled, referenceDialogController]);\n\n        const valueNotSet = !internalValue || (Array.isArray(internalValue) && internalValue.length === 0);\n\n        const buildSingleReferenceField = () => {\n            if (internalValue && !Array.isArray(internalValue) && internalValue.isEntityReference && internalValue.isEntityReference())\n                return <ReferencePreview\n                    onClick={disabled ? undefined : handleOpen}\n                    size={getPreviewSizeFrom(size)}\n                    reference={internalValue as EntityReference}\n                    hover={!disabled}\n                    disabled={!path}\n                    previewProperties={previewProperties}\n                />;\n            else\n                return <EntityPreviewContainer\n                    onClick={disabled ? undefined : handleOpen}\n                    size={getPreviewSizeFrom(size)}>\n                    <ErrorView title=\"Value is not a reference.\" error={\"Click to edit\"}/>\n                </EntityPreviewContainer>;\n        };\n\n        const buildMultipleReferenceField = () => {\n            if (Array.isArray(internalValue))\n                return <>\n                    {internalValue.map((reference, index) =>\n                        <div className=\"w-full my-0.5\"\n                             key={`preview_array_ref_${name}_${index}`}>\n                            <ReferencePreview\n                                onClick={disabled ? undefined : handleOpen}\n                                size={\"tiny\"}\n                                reference={reference}\n                                hover={!disabled}\n                                disabled={!path}\n                                previewProperties={previewProperties}\n                            />\n                        </div>\n                    )\n                    }\n                </>;\n            else\n                return <ErrorView error={\"Data is not an array of references\"}/>;\n        };\n\n        if (!collection)\n            return <ErrorView error={\"The specified collection does not exist\"}/>;\n\n        return (\n            <div className=\"w-full group\">\n\n                {internalValue && !multiselect && buildSingleReferenceField()}\n\n                {internalValue && multiselect && buildMultipleReferenceField()}\n\n                {valueNotSet &&\n                    <Button\n                        onClick={handleOpen}\n                        size={\"small\"}\n                        variant=\"outlined\"\n                        color=\"primary\">\n                        Edit {title}\n                    </Button>}\n\n            </div>\n        );\n    }, equal);\n","import {\n    CMSType,\n    EntityReference,\n    GeoPoint,\n    ResolvedArrayProperty,\n    ResolvedMapProperty,\n    ResolvedProperties,\n    ResolvedProperty\n} from \"../types\";\nimport * as yup from \"yup\";\nimport { AnySchema, ArraySchema, BooleanSchema, DateSchema, NumberSchema, ObjectSchema, StringSchema } from \"yup\";\nimport { enumToObjectEntries, getValueInPath, hydrateRegExp, isPropertyBuilder } from \"../util\";\n\n// Add custom unique function for array values\ndeclare module \"yup\" {\n    // tslint:disable-next-line\n    interface ArraySchema<T> {\n        uniqueInArray(mapper: (a: T) => T, message: string): ArraySchema<T>;\n    }\n}\nyup.addMethod(yup.array, \"uniqueInArray\", function (\n    mapper = (a: any) => a,\n    message: string\n) {\n    return this.test(\"uniqueInArray\", message, values => {\n        return !values || values.length === new Set(values.map(mapper)).size;\n    });\n});\n\nexport type CustomFieldValidator = (props: {\n    name: string,\n    value: any,\n    property: ResolvedProperty,\n    entityId?: string,\n    parentProperty?: ResolvedMapProperty | ResolvedArrayProperty,\n}) => Promise<boolean>;\n\ninterface PropertyContext<T extends CMSType> {\n    property: ResolvedProperty<T>,\n    parentProperty?: ResolvedMapProperty | ResolvedArrayProperty,\n    entityId: string,\n    customFieldValidator?: CustomFieldValidator,\n    name?: any\n}\n\nexport function getYupEntitySchema<M extends Record<string, any>>(\n    entityId: string,\n    properties: ResolvedProperties<M>,\n    customFieldValidator?: CustomFieldValidator): ObjectSchema<any> {\n    const objectSchema: any = {};\n    Object.entries(properties as Record<string, ResolvedProperty>)\n        .forEach(([name, property]) => {\n            objectSchema[name] = mapPropertyToYup({\n                property: property as ResolvedProperty<any>,\n                customFieldValidator,\n                name,\n                entityId\n            });\n        });\n    return yup.object().shape(objectSchema);\n}\n\nexport function mapPropertyToYup<T extends CMSType>(propertyContext: PropertyContext<T>): AnySchema<unknown> {\n\n    const property = propertyContext.property;\n    if (isPropertyBuilder(property)) {\n        console.error(\"Error in property\", propertyContext);\n        throw Error(\"Trying to create a yup mapping from a property builder. Please use resolved properties only\");\n    }\n\n    if (property.dataType === \"string\") {\n        return getYupStringSchema(propertyContext as PropertyContext<string>);\n    } else if (property.dataType === \"number\") {\n        return getYupNumberSchema(propertyContext as PropertyContext<number>);\n    } else if (property.dataType === \"boolean\") {\n        return getYupBooleanSchema(propertyContext as PropertyContext<boolean>);\n    } else if (property.dataType === \"map\") {\n        return getYupMapObjectSchema(propertyContext as PropertyContext<object>);\n    } else if (property.dataType === \"array\") {\n        return getYupArraySchema(propertyContext as PropertyContext<any[]>);\n    } else if (property.dataType === \"date\") {\n        return getYupDateSchema(propertyContext as PropertyContext<Date>);\n    } else if (property.dataType === \"geopoint\") {\n        return getYupGeoPointSchema(propertyContext as PropertyContext<GeoPoint>);\n    } else if (property.dataType === \"reference\") {\n        return getYupReferenceSchema(propertyContext as PropertyContext<EntityReference>);\n    }\n    console.error(\"Unsupported data type in yup mapping\", property)\n    throw Error(\"Unsupported data type in yup mapping\");\n}\n\nexport function getYupMapObjectSchema({\n                                                                         property,\n                                                                         entityId,\n                                                                         customFieldValidator,\n                                                                         name\n                                                                     }: PropertyContext<Record<string, any>>): ObjectSchema<any> {\n    const objectSchema: any = {};\n    const validation = property.validation;\n    if (property.properties)\n        Object.entries(property.properties).forEach(([childName, childProperty]: [string, ResolvedProperty]) => {\n            objectSchema[childName] = mapPropertyToYup<any>({\n                property: childProperty,\n                parentProperty: property as ResolvedMapProperty,\n                customFieldValidator,\n                name: `${name}[${childName}]`,\n                entityId\n            });\n        });\n\n    const shape = yup.object().shape(objectSchema);\n    if (validation?.required) {\n        return shape.required(validation?.requiredMessage ? validation.requiredMessage : \"Required\").nullable(true);\n    }\n    return shape.nullable(true);\n    // const object: ObjectSchema<any> = yup.object().shape(objectSchema);\n    // return validation?.required\n    //     ? object.required(validation?.requiredMessage ? validation.requiredMessage : \"Required\").nullable(true)\n    //     : yup.object().optional().default(undefined).notRequired().nullable(true).test(\n    //         \"empty-check\",\n    //         \"Optional map can be empty\",\n    //         (o: any, testContext: any) => {\n    //             try {\n    //                 if (!o || Object.keys(o).length === 0) return true;\n    //                 return object.validateSync(o);\n    //             } catch (e) {\n    //                 testContext.createError(e);\n    //                 console.error(e);\n    //                 return false;\n    //             }\n    //         });\n}\n\nfunction getYupStringSchema({\n                                property,\n                                parentProperty,\n                                customFieldValidator,\n                                name,\n                                entityId\n                            }: PropertyContext<string>): StringSchema {\n    let collection: StringSchema<any> = yup.string();\n    const validation = property.validation;\n    if (property.enumValues) {\n        if (validation?.required)\n            collection = collection.required(validation?.requiredMessage ? validation.requiredMessage : \"Required\");\n        const entries = enumToObjectEntries(property.enumValues);\n        collection = collection.oneOf(\n            (validation?.required ? entries : [...entries, null])\n                .map((enumValueConfig) => enumValueConfig?.id ?? null)\n        ).nullable(true);\n    }\n    if (validation) {\n        collection = validation.required\n            ? collection.required(validation?.requiredMessage ? validation.requiredMessage : \"Required\").nullable(true)\n            : collection.notRequired().nullable(true);\n        if (validation.unique && customFieldValidator && name)\n            collection = collection.test(\"unique\", \"This value already exists and should be unique\",\n                (value, context) =>\n                    customFieldValidator({\n                        name,\n                        property,\n                        parentProperty,\n                        value,\n                        entityId\n                    }));\n        if (validation.min || validation.min === 0) collection = collection.min(validation.min, `${property.name} must be min ${validation.min} characters long`);\n        if (validation.max || validation.max === 0) collection = collection.max(validation.max, `${property.name} must be max ${validation.max} characters long`);\n        if (validation.matches) {\n            const regExp = typeof validation.matches === \"string\" ? hydrateRegExp(validation.matches) : validation.matches;\n            if (regExp) {\n                collection = collection.matches(regExp, validation.matchesMessage ? { message: validation.matchesMessage } : undefined)\n            }\n        }\n        if (validation.trim) collection = collection.trim();\n        if (validation.lowercase) collection = collection.lowercase();\n        if (validation.uppercase) collection = collection.uppercase();\n        if (property.email) collection = collection.email(`${property.name} must be an email`);\n        if (property.url) collection = collection.url(`${property.name} must be a url`);\n    } else {\n        collection = collection.notRequired().nullable(true);\n    }\n    return collection;\n}\n\nfunction getYupNumberSchema({\n                                property,\n                                parentProperty,\n                                customFieldValidator,\n                                name,\n                                entityId\n                            }: PropertyContext<number>): NumberSchema {\n    const validation = property.validation;\n    let collection: NumberSchema<any> = yup.number().typeError(\"Must be a number\");\n    if (validation) {\n        collection = validation.required\n            ? collection.required(validation.requiredMessage ? validation.requiredMessage : \"Required\").nullable(true)\n            : collection.notRequired().nullable(true);\n        if (validation.unique && customFieldValidator && name)\n            collection = collection.test(\"unique\",\n                \"This value already exists and should be unique\",\n                (value) => customFieldValidator({\n                    name,\n                    property,\n                    parentProperty,\n                    value,\n                    entityId\n                }));\n        if (validation.min || validation.min === 0) collection = collection.min(validation.min, `${property.name} must be higher or equal to ${validation.min}`);\n        if (validation.max || validation.max === 0) collection = collection.max(validation.max, `${property.name} must be lower or equal to ${validation.max}`);\n        if (validation.lessThan || validation.lessThan === 0) collection = collection.lessThan(validation.lessThan, `${property.name} must be higher than ${validation.lessThan}`);\n        if (validation.moreThan || validation.moreThan === 0) collection = collection.moreThan(validation.moreThan, `${property.name} must be lower than ${validation.moreThan}`);\n        if (validation.positive) collection = collection.positive(`${property.name} must be positive`);\n        if (validation.negative) collection = collection.negative(`${property.name} must be negative`);\n        if (validation.integer) collection = collection.integer(`${property.name} must be an integer`);\n    } else {\n        collection = collection.notRequired().nullable(true);\n    }\n    return collection;\n}\n\nfunction getYupGeoPointSchema({\n                                  property,\n                                  parentProperty,\n                                  customFieldValidator,\n                                  name,\n                                  entityId\n                              }: PropertyContext<GeoPoint>): AnySchema {\n    let collection: ObjectSchema<any> = yup.object();\n    const validation = property.validation;\n    if (validation?.unique && customFieldValidator && name)\n        collection = collection.test(\"unique\",\n            \"This value already exists and should be unique\",\n            (value) => customFieldValidator({\n                name,\n                property,\n                parentProperty,\n                value,\n                entityId\n            }));\n    if (validation?.required) {\n        collection = collection.required(validation.requiredMessage).nullable(true);\n    } else {\n        collection = collection.notRequired().nullable(true);\n    }\n    return collection;\n}\n\nfunction getYupDateSchema({\n                              property,\n                              parentProperty,\n                              customFieldValidator,\n                              name,\n                              entityId\n                          }: PropertyContext<Date>): AnySchema | DateSchema {\n    if (property.autoValue) {\n        return yup.object().nullable();\n    }\n    let collection: DateSchema<any> = yup.date();\n    const validation = property.validation;\n    if (validation) {\n        collection = validation.required\n            ? collection.required(validation?.requiredMessage ? validation.requiredMessage : \"Required\")\n            : collection.notRequired();\n        if (validation.unique && customFieldValidator && name)\n            collection = collection.test(\"unique\",\n                \"This value already exists and should be unique\",\n                (value) => customFieldValidator({\n                    name,\n                    property,\n                    parentProperty,\n                    value,\n                    entityId\n                }));\n        if (validation.min) collection = collection.min(validation.min, `${property.name} must be after ${validation.min}`);\n        if (validation.max) collection = collection.max(validation.max, `${property.name} must be before ${validation.min}`);\n    } else {\n        collection = collection.notRequired();\n    }\n    return collection\n        .transform((v: any) => (v instanceof Date ? v : null))\n        .nullable();\n}\n\nfunction getYupReferenceSchema({\n                                   property,\n                                   parentProperty,\n                                   customFieldValidator,\n                                   name,\n                                   entityId\n                               }: PropertyContext<EntityReference>): AnySchema {\n    let collection: ObjectSchema<any> = yup.object();\n    const validation = property.validation;\n    if (validation) {\n        collection = validation.required\n            ? collection.required(validation?.requiredMessage ? validation.requiredMessage : \"Required\").nullable(true)\n            : collection.notRequired().nullable(true);\n        if (validation.unique && customFieldValidator && name)\n            collection = collection.test(\"unique\",\n                \"This value already exists and should be unique\",\n                (value) => customFieldValidator({\n                    name,\n                    property,\n                    parentProperty,\n                    value,\n                    entityId\n                }));\n    } else {\n        collection = collection.notRequired().nullable(true);\n    }\n    return collection;\n}\n\nfunction getYupBooleanSchema({\n                                 property,\n                                 parentProperty,\n                                 customFieldValidator,\n                                 name,\n                                 entityId\n                             }: PropertyContext<boolean>): BooleanSchema {\n    let collection: BooleanSchema<any> = yup.boolean();\n    const validation = property.validation;\n    if (validation) {\n        collection = validation.required\n            ? collection.required(validation?.requiredMessage ? validation.requiredMessage : \"Required\").nullable(true)\n            : collection.notRequired().nullable(true);\n        if (validation.unique && customFieldValidator && name)\n            collection = collection.test(\"unique\",\n                \"This value already exists and should be unique\",\n                (value) => customFieldValidator({\n                    name,\n                    property,\n                    parentProperty,\n                    value,\n                    entityId\n                }));\n    } else {\n        collection = collection.notRequired().nullable(true);\n    }\n    return collection;\n}\n\nfunction hasUniqueInArrayModifier(property: ResolvedProperty): boolean | [string, ResolvedProperty][] {\n    if (property.validation?.uniqueInArray) {\n        return true;\n    } else if (property.dataType === \"map\" && property.properties) {\n        return Object.entries(property.properties)\n            .filter(([key, childProperty]) => childProperty.validation?.uniqueInArray);\n    }\n    return false;\n}\n\nfunction getYupArraySchema({\n                               property,\n                               parentProperty,\n                               customFieldValidator,\n                               name,\n                               entityId\n                           }: PropertyContext<any[]>): AnySchema<any> {\n\n    let arraySchema: ArraySchema<any> = yup.array();\n\n    if (property.of) {\n        if (Array.isArray(property.of)) {\n            const yupProperties = (property.of as ResolvedProperty[]).map((p, index) => ({\n                [`${name}[${index}]`]: mapPropertyToYup({\n                    property: p as ResolvedProperty<any>,\n                    parentProperty: property,\n                    entityId\n                })\n            })).reduce((a, b) => ({ ...a, ...b }), {});\n            return yup.array().of(\n                yup.mixed().test(\n                    \"Dynamic object validation\",\n                    \"Dynamic object validation error\",\n                    (object, context) => {\n                        const yupProperty = getValueInPath(yupProperties, context.path);\n                        return yupProperty.validate(object);\n                    }\n                )\n            );\n        } else {\n            arraySchema = arraySchema.of(mapPropertyToYup({\n                property: property.of,\n                parentProperty: property,\n                entityId\n            }));\n            const arrayUniqueFields = hasUniqueInArrayModifier(property.of);\n            if (arrayUniqueFields) {\n                if (typeof arrayUniqueFields === \"boolean\") {\n                    arraySchema = arraySchema.uniqueInArray(v => v, `${property.name} should have unique values within the array`);\n                } else if (Array.isArray(arrayUniqueFields)) {\n                    arrayUniqueFields.forEach(([name, childProperty]) => {\n                            arraySchema = arraySchema.uniqueInArray(v => v && v[name], `${property.name}  ${childProperty.name ?? name}: should have unique values within the array`);\n                        }\n                    );\n                }\n            }\n        }\n    }\n    const validation = property.validation;\n\n    if (validation) {\n        arraySchema = validation.required\n            ? arraySchema.required(validation?.requiredMessage ? validation.requiredMessage : \"Required\").nullable(true)\n            : arraySchema.notRequired().nullable(true);\n        if (validation.min || validation.min === 0) arraySchema = arraySchema.min(validation.min, `${property.name} should be min ${validation.min} entries long`);\n        if (validation.max) arraySchema = arraySchema.max(validation.max, `${property.name} should be max ${validation.max} entries long`);\n    } else {\n        arraySchema = arraySchema.notRequired().nullable(true);\n    }\n    return arraySchema;\n}\n","import { VirtualTableSize } from \"./VirtualTableProps\";\n\nexport function getRowHeight(size: VirtualTableSize): number {\n    switch (size) {\n        case \"xl\":\n            return 400;\n        case \"l\":\n            return 280;\n        case \"m\":\n            return 140;\n        case \"s\":\n            return 80;\n        case \"xs\":\n            return 54;\n        default:\n            throw Error(\"Missing mapping for collection size -> height\");\n    }\n}\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\n\nimport useMeasure from \"react-use-measure\";\n\nimport { VirtualTableSize } from \"../../VirtualTable\";\nimport { getRowHeight } from \"../../VirtualTable/common\";\nimport { cn, RemoveCircleIcon, Tooltip } from \"@firecms/ui\";\nimport { ErrorBoundary } from \"../../../components\";\n\ninterface EntityTableCellProps {\n    children: React.ReactNode;\n    actions?: React.ReactNode;\n    /**\n     * The value is used only to check changes and force re-renders\n     */\n    value?: any;\n    disabled: boolean;\n    saved?: boolean;\n    error?: Error;\n    allowScroll?: boolean;\n    align: \"right\" | \"left\" | \"center\";\n    size: VirtualTableSize;\n    disabledTooltip?: string;\n    width: number;\n    showExpandIcon?: boolean;\n    removePadding?: boolean;\n    fullHeight?: boolean;\n    selected?: boolean;\n    hideOverflow?: boolean;\n    onSelect?: (cellRect: DOMRect | undefined) => void;\n}\n\ntype TableCellInnerProps = {\n    justifyContent: string;\n    scrollable: boolean;\n    faded: boolean;\n    fullHeight: boolean;\n    children: React.ReactNode;\n}\n\nconst TableCellInner = ({\n                            justifyContent,\n                            scrollable,\n                            faded,\n                            fullHeight,\n                            children\n                        }: TableCellInnerProps) => {\n    return (\n        <div\n            className={cn(\"flex flex-col max-h-full w-full\",\n                {\n                    \"items-start\": faded || scrollable\n                })}\n            style={{\n                justifyContent,\n                height: fullHeight ? \"100%\" : undefined,\n                overflow: scrollable ? \"auto\" : undefined,\n                WebkitMaskImage: faded\n                    ? \"linear-gradient(to bottom, black 60%, transparent 100%)\"\n                    : undefined,\n                maskImage: faded\n                    ? \"linear-gradient(to bottom, black 60%, transparent 100%)\"\n                    : undefined\n            }}\n        >\n            {children}\n        </div>\n    );\n};\n\nexport const EntityTableCell = React.memo<EntityTableCellProps>(\n    function EntityTableCell({\n                                 children,\n                                 actions,\n                                 size,\n                                 selected,\n                                 disabled,\n                                 disabledTooltip,\n                                 saved,\n                                 error,\n                                 align,\n                                 allowScroll,\n                                 removePadding,\n                                 fullHeight,\n                                 onSelect,\n                                 width,\n                                 hideOverflow = true,\n                                 showExpandIcon = true\n                             }: EntityTableCellProps) {\n\n        const [measureRef, bounds] = useMeasure();\n        const ref = useRef<HTMLDivElement>(null);\n\n        const maxHeight = useMemo(() => getRowHeight(size), [size]);\n\n        const [onHover, setOnHover] = useState(false);\n        const [internalSaved, setInternalSaved] = useState(saved);\n\n        const showError = !disabled && Boolean(error);\n\n        useEffect(() => {\n            if (saved) {\n                setInternalSaved(true);\n            }\n            const handler = setTimeout(() => {\n                setInternalSaved(false);\n            }, 800);\n            return () => {\n                clearTimeout(handler);\n            };\n        }, [saved]);\n\n        let p = 0;\n        if (!removePadding) {\n            switch (size) {\n                case \"l\":\n                case \"xl\":\n                    p = 4;\n                    break;\n                case \"m\":\n                    p = 2;\n                    break;\n                case \"s\":\n                default:\n                    p = 1;\n                    break;\n            }\n        }\n\n        let justifyContent;\n        switch (align) {\n            case \"right\":\n                justifyContent = \"flex-end\";\n                break;\n            case \"center\":\n                justifyContent = \"center\";\n                break;\n            case \"left\":\n            default:\n                justifyContent = \"flex-start\";\n        }\n\n        // const onClick = useCallback((event: React.MouseEvent<HTMLDivElement>) => {\n        //     if (event.detail === 3) {\n        //         doOpenPopup();\n        //     }\n        // }, [doOpenPopup]);\n\n        const onSelectCallback = useCallback(() => {\n            if (!onSelect) return;\n            const cellRect = ref && ref?.current?.getBoundingClientRect();\n            if (disabled) {\n                onSelect(undefined);\n            } else if (!selected && cellRect) {\n                onSelect(cellRect);\n            }\n        }, [ref, onSelect, selected, disabled]);\n\n        const onFocus = useCallback((event: React.SyntheticEvent<HTMLDivElement>) => {\n            onSelectCallback();\n            event.stopPropagation();\n        }, [onSelectCallback]);\n\n        const isOverflowing = useMemo(() => {\n            if (bounds) {\n                return bounds.height > maxHeight;\n            }\n            return false;\n        }, [bounds, maxHeight]);\n\n        const isSelected = !showError && selected;\n\n        const scrollable = !disabled && allowScroll && isOverflowing;\n        const faded = !disabled && !allowScroll && isOverflowing;\n\n        const setOnHoverTrue = useCallback(() => setOnHover(true), []);\n        const setOnHoverFalse = useCallback(() => setOnHover(false), []);\n\n        const borderClass = showError\n            ? \"border-red-500\"\n            : internalSaved\n                ? \"border-green-500\"\n                : isSelected\n                    ? \"border-primary\"\n                    : \"border-transparent\";\n\n        return (\n            <div\n                className={cn(\n                    \"transition-colors duration-100 ease-in-out\",\n                    `flex relative h-full rounded-md p-${p} border border-4  border-opacity-75`,\n                    onHover && !disabled ? \"bg-gray-50 dark:bg-gray-900\" : \"\",\n                    saved ? \"bg-gray-100 bg-opacity-75 dark:bg-gray-800 dark:bg-opacity-75\" : \"\",\n                    hideOverflow ? \"overflow-hidden\" : \"\",\n                    isSelected ? \"bg-gray-50 dark:bg-gray-900\" : \"\",\n                    borderClass\n                )}\n                ref={ref}\n                style={{\n                    justifyContent,\n                    alignItems: disabled || !isOverflowing ? \"center\" : undefined,\n                    width: width ?? \"100%\",\n                    textAlign: align\n                }}\n                tabIndex={selected || disabled ? undefined : 0}\n                onFocus={onFocus}\n                // onClick={onClick}\n                onMouseEnter={setOnHoverTrue}\n                onMouseMove={setOnHoverTrue}\n                onMouseLeave={setOnHoverFalse}\n                // contain={scrollable ? \"content\" : \"size\"}\n            >\n\n                <ErrorBoundary>\n\n                    {fullHeight && !faded && children}\n\n                    {(!fullHeight || faded) && <TableCellInner\n                        fullHeight={fullHeight ?? false}\n                        justifyContent={justifyContent}\n                        scrollable={scrollable ?? false}\n                        faded={faded}>\n\n                        {!fullHeight && <div ref={measureRef}\n                                             style={{\n                                                 display: \"flex\",\n                                                 width: \"100%\",\n                                                 justifyContent,\n                                                 height: fullHeight ? \"100%\" : undefined\n                                             }}>\n                            {children}\n                        </div>}\n\n                    </TableCellInner>}\n                </ErrorBoundary>\n\n                {actions}\n\n                {disabled && onHover && disabledTooltip &&\n                    <div className=\"absolute top-1 right-1 text-xs\">\n                        <Tooltip title={disabledTooltip}>\n                            <RemoveCircleIcon size={\"smallest\"} color={\"disabled\"} className={\"text-gray-500\"}/>\n                        </Tooltip>\n                    </div>}\n\n            </div>\n        );\n    }, (a, b) => {\n        return a.error === b.error &&\n            a.value === b.value &&\n            a.disabled === b.disabled &&\n            a.saved === b.saved &&\n            a.allowScroll === b.allowScroll &&\n            a.align === b.align &&\n            a.size === b.size &&\n            a.disabledTooltip === b.disabledTooltip &&\n            a.width === b.width &&\n            a.showExpandIcon === b.showExpandIcon &&\n            a.removePadding === b.removePadding &&\n            a.fullHeight === b.fullHeight &&\n            a.selected === b.selected;\n    }) as React.FunctionComponent<EntityTableCellProps>;\n","import React, { useContext } from \"react\";\nimport { EntityCollectionTableController } from \"../common/types\";\n\nexport const SelectableTableContext = React.createContext<EntityCollectionTableController<any>>({} as any);\n\nexport const useSelectableTableController = () => useContext<EntityCollectionTableController<any>>(SelectableTableContext);\n","import { useEffect, useRef } from \"react\";\nimport { CMSType, ResolvedProperty } from \"../types\";\n\n/**\n * Hook we use to restore a value after it has been cleared\n * @param property\n * @param value\n * @param setValue\n * @ignore\n */\nexport function useClearRestoreValue<T extends CMSType>({\n                                                            property,\n                                                            value,\n                                                            setValue\n                                                        }:\n                                                            {\n                                                                property: ResolvedProperty<T>,\n                                                                value: T,\n                                                                setValue: (value: T | null, shouldValidate?: boolean) => void\n                                                            }) {\n\n    const clearedValueRef = useRef<T | null>(null);\n    useEffect(() => {\n        const shouldClearValueIfDisabled = typeof property.disabled === \"object\" && Boolean(property.disabled.clearOnDisabled);\n        if (shouldClearValueIfDisabled) {\n            if (value != null) {\n                clearedValueRef.current = value;\n                setValue(null);\n            }\n        } else if (clearedValueRef.current) {\n            setValue(clearedValueRef.current);\n            clearedValueRef.current = null;\n        }\n    }, [property]);\n}\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport equal from \"react-fast-compare\"\nimport {\n    CMSType,\n    Entity,\n    EntityReference,\n    ResolvedArrayProperty,\n    ResolvedNumberProperty,\n    ResolvedProperty,\n    ResolvedStringProperty\n} from \"../../types\";\n\nimport { VirtualTableInput } from \"../VirtualTable/fields/VirtualTableInput\";\nimport { VirtualTableSelect } from \"../VirtualTable/fields/VirtualTableSelect\";\nimport { VirtualTableNumberInput } from \"../VirtualTable/fields/VirtualTableNumberInput\";\nimport { VirtualTableSwitch } from \"../VirtualTable/fields/VirtualTableSwitch\";\nimport { VirtualTableDateField } from \"../VirtualTable/fields/VirtualTableDateField\";\n\nimport { TableStorageUpload } from \"./fields/TableStorageUpload\";\nimport { TableReferenceField } from \"./fields/TableReferenceField\";\n\nimport { PropertyPreview } from \"../../preview\";\nimport { getPreviewSizeFrom } from \"../../preview/util\";\nimport { isReadOnly } from \"../../util\";\n\nimport { CustomFieldValidator, mapPropertyToYup } from \"../../form/validation\";\nimport { useFireCMSContext } from \"../../hooks\";\n\nimport { EntityTableCell } from \"./internal/EntityTableCell\";\nimport { EntityTableCellActions } from \"./internal/EntityTableCellActions\";\n\nimport { getRowHeight } from \"../VirtualTable/common\";\nimport { useSelectableTableController } from \"../SelectableTable/SelectableTableContext\";\nimport { useClearRestoreValue } from \"../../form/useClearRestoreValue\";\n\nexport interface PropertyTableCellProps<T extends CMSType> {\n    propertyKey: string;\n    columnIndex: number;\n    align: \"right\" | \"left\" | \"center\";\n    customFieldValidator?: CustomFieldValidator;\n    value: T;\n    readonly: boolean;\n    property: ResolvedProperty<T>;\n    height: number;\n    width: number;\n    entity: Entity<any>;\n    path: string;\n    disabled: boolean;\n}\n\nfunction isStorageProperty(property: ResolvedProperty) {\n    if (property.dataType === \"string\" && (property as ResolvedStringProperty).storage)\n        return true;\n    if (property.dataType === \"array\") {\n        if (Array.isArray(property.of)) {\n            return false;\n        } else {\n            return ((property as ResolvedArrayProperty).of as ResolvedProperty)?.dataType === \"string\" &&\n                ((property as ResolvedArrayProperty).of as ResolvedStringProperty)?.storage\n        }\n    }\n    return false;\n}\n\nexport const PropertyTableCell = React.memo<PropertyTableCellProps<any>>(\n    function PropertyTableCell<T extends CMSType, M extends Record<string, any>>({\n                                                                                     propertyKey,\n                                                                                     customFieldValidator,\n                                                                                     value,\n                                                                                     property,\n                                                                                     align,\n                                                                                     width,\n                                                                                     height,\n                                                                                     path,\n                                                                                     entity,\n                                                                                     readonly,\n                                                                                     disabled: disabledProp\n                                                                                 }: PropertyTableCellProps<T>) {\n\n        const context = useFireCMSContext();\n\n        const {\n            onValueChange,\n            size,\n            selectedCell,\n            select,\n            setPopupCell\n        } = useSelectableTableController();\n\n        const selected = selectedCell?.propertyKey === propertyKey &&\n            selectedCell?.entity.path === entity.path &&\n            selectedCell?.entity.id === entity.id;\n\n        const [internalValue, setInternalValue] = useState<any | null>(value);\n        const internalValueRef = useRef(value);\n\n        const [error, setError] = useState<Error | undefined>();\n        const [validationError, setValidationError] = useState<Error | undefined>();\n        const [saved, setSaved] = useState<boolean>(false);\n\n        const onValueUpdated = useCallback(() => {\n            setSaved(true)\n            setTimeout(() => {\n                setSaved(false);\n            }, 100);\n        }, []);\n\n        const customField = Boolean(property.Field);\n        const customPreview = Boolean(property.Preview);\n        const readOnlyProperty = isReadOnly(property);\n        const disabledTooltip: string | undefined = typeof property.disabled === \"object\" ? property.disabled.disabledMessage : undefined;\n        const disabled = readonly || disabledProp || Boolean(property.disabled);\n\n        const validation = useMemo(() => mapPropertyToYup({\n            property,\n            entityId: entity.id,\n            customFieldValidator,\n            name: propertyKey\n        }), [entity.id, property, propertyKey]);\n\n        useEffect(\n            () => {\n                if (!equal(value, internalValueRef.current)) {\n                    setValidationError(undefined);\n                    setInternalValue(value);\n                    internalValueRef.current = value;\n                    onValueUpdated();\n                }\n            },\n            [onValueUpdated, value]\n        );\n\n        const saveValues = (value: any) => {\n            if (equal(value, internalValueRef.current))\n                return;\n            setSaved(false);\n            validation\n                .validate(value)\n                .then(() => {\n                    setValidationError(undefined);\n                    internalValueRef.current = value;\n                    if (onValueChange) {\n                        onValueChange({\n                            value,\n                            propertyKey,\n                            setError,\n                            onValueUpdated,\n                            entity,\n                            fullPath: path,\n                            context\n                        });\n                    }\n                })\n                .catch((e) => {\n                    setValidationError(e);\n                });\n        };\n\n        useEffect(() => {\n            validation\n                .validate(internalValue)\n                .then(() => setValidationError(undefined))\n                .catch(setValidationError);\n        }, [internalValue, validation, propertyKey, property, entity]);\n\n        const updateValue = (newValue: any | null) => {\n\n            let updatedValue: any;\n            if (newValue === undefined) {\n                updatedValue = null;\n            } else {\n                updatedValue = newValue;\n            }\n            setInternalValue(updatedValue);\n            saveValues(updatedValue);\n        };\n\n        useClearRestoreValue<any>({\n            property,\n            value: internalValue,\n            setValue: updateValue\n        });\n\n        const onSelect = useCallback((cellRect: DOMRect | undefined) => {\n            if (!cellRect) {\n                select(undefined);\n            } else {\n                select({\n                    width,\n                    height,\n                    entity,\n                    cellRect,\n                    propertyKey: propertyKey as Extract<keyof M, string>\n                });\n            }\n        }, [entity, height, propertyKey, select, width]);\n\n        const openPopup = (cellRect: DOMRect | undefined) => {\n            if (!setPopupCell)\n                return;\n            if (!cellRect) {\n                setPopupCell(undefined);\n            } else {\n                setPopupCell({\n                    width,\n                    height,\n                    entity,\n                    cellRect,\n                    propertyKey: propertyKey as Extract<keyof M, string>\n                });\n            }\n        };\n\n        let innerComponent: React.ReactNode | undefined;\n        let allowScroll = false;\n        let showExpandIcon = false;\n        let hideOverflow = true;\n        let removePadding = false;\n        let fullHeight = false;\n        let includeActions = true;\n        const showError = !disabled && error;\n\n        if (readonly || readOnlyProperty) {\n            return <EntityTableCell\n                size={size}\n                width={width}\n                saved={saved}\n                key={`${propertyKey}_${entity.path}_${entity.id}`}\n                value={internalValue}\n                align={align ?? \"left\"}\n                fullHeight={false}\n                disabledTooltip={disabledTooltip ?? (readOnlyProperty ? \"Read only\" : undefined)}\n                disabled={true}>\n                <PropertyPreview\n                    width={width}\n                    height={getRowHeight(size)}\n                    propertyKey={propertyKey}\n                    property={property}\n                    value={internalValue}\n                    size={getPreviewSizeFrom(size)}\n                />\n            </EntityTableCell>;\n        }\n\n        if (!customField && (!customPreview || selected)) {\n            const isAStorageProperty = isStorageProperty(property);\n            if (isAStorageProperty) {\n                innerComponent = <TableStorageUpload error={validationError ?? error}\n                                                     disabled={disabled}\n                                                     focused={selected}\n                                                     selected={selected}\n                                                     openPopup={setPopupCell ? openPopup : undefined}\n                                                     property={property as ResolvedStringProperty | ResolvedArrayProperty<string[]>}\n                                                     entity={entity}\n                                                     path={path}\n                                                     value={internalValue}\n                                                     previewSize={getPreviewSizeFrom(size)}\n                                                     updateValue={updateValue}\n                                                     propertyKey={propertyKey as string}\n                />;\n                includeActions = false;\n                showExpandIcon = true;\n                fullHeight = true;\n                removePadding = true;\n            } else if (selected && property.dataType === \"number\") {\n                const numberProperty = property as ResolvedNumberProperty;\n                if (numberProperty.enumValues) {\n                    innerComponent = <VirtualTableSelect name={propertyKey as string}\n                                                         multiple={false}\n                                                         disabled={disabled}\n                                                         focused={selected}\n                                                         valueType={\"number\"}\n                                                         small={getPreviewSizeFrom(size) !== \"medium\"}\n                                                         enumValues={numberProperty.enumValues}\n                                                         error={validationError ?? error}\n                                                         internalValue={internalValue as string | number}\n                                                         updateValue={updateValue}\n                    />;\n                    fullHeight = true;\n                } else {\n                    innerComponent = <VirtualTableNumberInput\n                        align={align}\n                        error={validationError ?? error}\n                        focused={selected}\n                        disabled={disabled}\n                        value={internalValue as number}\n                        updateValue={updateValue}\n                    />;\n                    allowScroll = true;\n                }\n            } else if (selected && property.dataType === \"string\") {\n                const stringProperty = property as ResolvedStringProperty;\n                if (stringProperty.enumValues) {\n                    innerComponent = <VirtualTableSelect name={propertyKey as string}\n                                                         multiple={false}\n                                                         focused={selected}\n                                                         disabled={disabled}\n                                                         valueType={\"string\"}\n                                                         small={getPreviewSizeFrom(size) !== \"medium\"}\n                                                         enumValues={stringProperty.enumValues}\n                                                         error={validationError ?? error}\n                                                         internalValue={internalValue as string | number}\n                                                         updateValue={updateValue}\n                    />;\n                    fullHeight = true;\n                } else if (!stringProperty.storage) {\n                    const multiline = Boolean(stringProperty.multiline) || Boolean(stringProperty.markdown);\n                    innerComponent = <VirtualTableInput error={validationError ?? error}\n                                                        disabled={disabled}\n                                                        multiline={multiline}\n                                                        focused={selected}\n                                                        value={internalValue as string}\n                                                        updateValue={updateValue}\n                    />;\n                    allowScroll = true;\n                }\n            } else if (property.dataType === \"boolean\") {\n                innerComponent = <VirtualTableSwitch error={validationError ?? error}\n                                                     disabled={disabled}\n                                                     focused={selected}\n                                                     internalValue={internalValue as boolean}\n                                                     updateValue={updateValue}\n                />;\n            } else if (property.dataType === \"date\") {\n                innerComponent = <VirtualTableDateField name={propertyKey as string}\n                                                        error={validationError ?? error}\n                                                        disabled={disabled}\n                                                        mode={property.mode}\n                                                        focused={selected}\n                                                        internalValue={internalValue as Date}\n                                                        updateValue={updateValue}\n                />;\n                fullHeight = true;\n                hideOverflow = false;\n                allowScroll = false;\n            } else if (property.dataType === \"reference\") {\n                if (typeof property.path === \"string\") {\n                    innerComponent =\n                        <TableReferenceField name={propertyKey as string}\n                                             internalValue={internalValue as EntityReference}\n                                             updateValue={updateValue}\n                                             disabled={disabled}\n                                             size={size}\n                                             path={property.path}\n                                             multiselect={false}\n                                             previewProperties={property.previewProperties}\n                                             title={property.name}\n                                             forceFilter={property.forceFilter}\n                        />;\n                }\n                allowScroll = false;\n            } else if (property.dataType === \"array\") {\n                const arrayProperty = (property as ResolvedArrayProperty);\n\n                if (!arrayProperty.of && !arrayProperty.oneOf) {\n                    throw Error(`You need to specify an 'of' or 'oneOf' prop (or specify a custom field) in your array property ${propertyKey}`);\n                }\n                if (arrayProperty.of && !Array.isArray(arrayProperty.of)) {\n                    if (arrayProperty.of.dataType === \"string\" || arrayProperty.of.dataType === \"number\") {\n                        if (selected && arrayProperty.of.enumValues) {\n                            innerComponent =\n                                <VirtualTableSelect name={propertyKey as string}\n                                                    multiple={true}\n                                                    disabled={disabled}\n                                                    focused={selected}\n                                                    small={getPreviewSizeFrom(size) !== \"medium\"}\n                                                    valueType={arrayProperty.of.dataType}\n                                                    enumValues={arrayProperty.of.enumValues}\n                                                    error={validationError ?? error}\n                                                    internalValue={internalValue as string | number}\n                                                    updateValue={updateValue}\n                                />;\n                            allowScroll = true;\n                            fullHeight = true;\n                            hideOverflow = false;\n                        }\n                    } else if (arrayProperty.of.dataType === \"reference\") {\n                        if (typeof arrayProperty.of.path === \"string\") {\n                            innerComponent =\n                                <TableReferenceField\n                                    name={propertyKey as string}\n                                    disabled={disabled}\n                                    internalValue={internalValue as EntityReference[]}\n                                    updateValue={updateValue}\n                                    size={size}\n                                    multiselect={true}\n                                    path={arrayProperty.of.path}\n                                    previewProperties={arrayProperty.of.previewProperties}\n                                    title={arrayProperty.name}\n                                    forceFilter={arrayProperty.of.forceFilter}\n                                />;\n                        }\n                        allowScroll = false;\n                    }\n                }\n\n            }\n        }\n\n        if (!innerComponent) {\n            allowScroll = false;\n            showExpandIcon = selected && !innerComponent && !disabled && !readOnlyProperty;\n            innerComponent = (\n                <PropertyPreview width={width}\n                                 height={height}\n                                 propertyKey={propertyKey as string}\n                                 value={internalValue}\n                                 property={property}\n                                 size={getPreviewSizeFrom(size)}\n                />\n            );\n        }\n\n        return (\n            <EntityTableCell\n                key={`cell_${propertyKey}_${entity.path}_${entity.id}`}\n                size={size}\n                width={width}\n                onSelect={onSelect}\n                selected={selected}\n                disabled={disabled || readOnlyProperty}\n                disabledTooltip={disabledTooltip ?? \"Disabled\"}\n                removePadding={removePadding}\n                fullHeight={fullHeight}\n                saved={saved}\n                error={validationError ?? error}\n                align={align}\n                allowScroll={allowScroll}\n                showExpandIcon={showExpandIcon}\n                value={internalValue}\n                hideOverflow={hideOverflow}\n                actions={includeActions && <EntityTableCellActions\n                    showError={showError}\n                    disabled={disabled}\n                    showExpandIcon={showExpandIcon}\n                    selected={selected}\n                    openPopup={!disabled ? openPopup : undefined}/>}\n            >\n\n                {innerComponent}\n\n            </EntityTableCell>\n        );\n\n    },\n    areEqual) as React.FunctionComponent<PropertyTableCellProps<any>>;\n\nfunction areEqual(prevProps: PropertyTableCellProps<any>, nextProps: PropertyTableCellProps<any>) {\n    return prevProps.height === nextProps.height &&\n        prevProps.propertyKey === nextProps.propertyKey &&\n        prevProps.align === nextProps.align &&\n        prevProps.width === nextProps.width &&\n        equal(prevProps.property, nextProps.property) &&\n        equal(prevProps.value, nextProps.value) &&\n        equal(prevProps.entity.id, nextProps.entity.id) &&\n        equal(prevProps.entity.values, nextProps.entity.values)\n        ;\n}\n","import React, { MouseEvent, useCallback } from \"react\";\n\nimport { CollectionSize, Entity, EntityAction, EntityCollection, SelectionController } from \"../../types\";\nimport { Checkbox, cn, IconButton, Menu, MenuItem, MoreVertIcon, Skeleton, Tooltip, Typography } from \"@firecms/ui\";\nimport { useFireCMSContext, useLargeLayout } from \"../../hooks\";\n\n/**\n *\n * @param entity\n * @param width\n * @param frozen\n * @param isSelected\n * @param selectionEnabled\n * @param size\n * @param toggleEntitySelection\n * @param hideId\n * @constructor\n *\n * @group Collection components\n */\nexport const EntityCollectionRowActions = function EntityCollectionRowActions({\n                                                                                  entity,\n                                                                                  collection,\n                                                                                  fullPath,\n                                                                                  width,\n                                                                                  frozen,\n                                                                                  isSelected,\n                                                                                  selectionEnabled,\n                                                                                  size,\n                                                                                  highlightEntity,\n                                                                                  onCollectionChange,\n                                                                                  unhighlightEntity,\n                                                                                  actions = [],\n                                                                                  hideId,\n                                                                                  selectionController,\n                                                                              }:\n                                                                                  {\n                                                                                      entity: Entity<any>,\n                                                                                      collection?: EntityCollection<any>,\n                                                                                      fullPath?: string,\n                                                                                      width: number,\n                                                                                      frozen?: boolean,\n                                                                                      size: CollectionSize,\n                                                                                      isSelected?: boolean,\n                                                                                      selectionEnabled?: boolean,\n                                                                                      actions?: EntityAction[],\n                                                                                      hideId?: boolean,\n                                                                                      onCollectionChange?: () => void,\n                                                                                      selectionController?: SelectionController;\n                                                                                      highlightEntity?: (entity: Entity<any>) => void;\n                                                                                      unhighlightEntity?: (entity: Entity<any>) => void;\n                                                                                  }) {\n\n    const largeLayout = useLargeLayout();\n\n    const context = useFireCMSContext();\n\n    const onCheckedChange = useCallback((checked: boolean) => {\n        selectionController?.toggleEntitySelection(entity);\n    }, [entity, selectionController?.toggleEntitySelection]);\n\n    const onClick = useCallback((event: MouseEvent) => {\n        event.stopPropagation();\n        selectionController?.toggleEntitySelection(entity);\n    }, [entity, selectionController?.toggleEntitySelection]);\n\n    const hasActions = actions.length > 0;\n    const hasCollapsedActions = actions.some(a => a.collapsed || a.collapsed === undefined);\n\n    const collapsedActions = actions.filter(a => a.collapsed || a.collapsed === undefined);\n    const uncollapsedActions = actions.filter(a => a.collapsed === false);\n    return (\n        <div\n            onClick={onClick}\n            className={cn(\n                \"h-full flex items-center justify-center flex-col bg-gray-50 dark:bg-gray-900 bg-opacity-90 dark:bg-opacity-90 z-10\",\n                frozen ? \"sticky left-0\" : \"\"\n            )}\n            style={{\n                width,\n                position: frozen ? \"sticky\" : \"initial\",\n                left: frozen ? 0 : \"initial\",\n                contain: \"strict\"\n            }}>\n\n            {(hasActions || selectionEnabled) &&\n                <div className=\"w-34 flex justify-center\">\n\n                    {uncollapsedActions.map((action, index) => (\n                        <Tooltip key={index} title={action.name}>\n                            <IconButton\n                                onClick={(event: MouseEvent) => {\n                                    event.stopPropagation();\n                                    action.onClick({\n                                        entity,\n                                        fullPath,\n                                        collection,\n                                        context,\n                                        selectionController,\n                                        highlightEntity,\n                                        unhighlightEntity,\n                                        onCollectionChange,\n                                    });\n                                }}\n                                size={largeLayout ? \"medium\" : \"small\"}>\n                                {action.icon}\n                            </IconButton>\n                        </Tooltip>\n                    ))}\n\n                    {hasCollapsedActions &&\n                        <Menu\n                            trigger={<IconButton\n                                size={largeLayout ? \"medium\" : \"small\"}>\n                                <MoreVertIcon/>\n                            </IconButton>}>\n                            {collapsedActions.map((action, index) => (\n                                <MenuItem\n                                    key={index}\n                                    onClick={(e) => {\n                                        e.stopPropagation();\n                                        action.onClick({\n                                            entity,\n                                            fullPath,\n                                            collection,\n                                            context,\n                                            selectionController,\n                                            highlightEntity,\n                                            unhighlightEntity,\n                                            onCollectionChange,\n                                        });\n                                    }}>\n                                    {action.icon}\n                                    {action.name}\n                                </MenuItem>\n                            ))}\n                        </Menu>\n                    }\n\n                    {selectionEnabled &&\n                        <Tooltip title={`Select ${entity.id}`}>\n                            <Checkbox\n                                size={largeLayout ? \"medium\" : \"small\"}\n                                checked={Boolean(isSelected)}\n                                onCheckedChange={onCheckedChange}\n                            />\n                        </Tooltip>}\n\n                </div>}\n\n            {!hideId && size !== \"xs\" && (\n                <div className=\"w-[138px] text-center overflow-hidden truncate\">\n\n                    {entity\n                        ? <Typography\n                            onClick={(event) => {\n                                event.stopPropagation();\n                            }}\n                            className={\"font-mono select-all\"}\n                            variant={\"caption\"}\n                            color={\"secondary\"}> {entity.id} </Typography>\n                        : <Skeleton/>\n                    }\n                </div>\n            )}\n\n        </div>\n    );\n\n};\n","import React, { useEffect } from \"react\";\n\nimport {\n    Button,\n    CircularProgress,\n    cn,\n    defaultBorderMixin,\n    FilterListOffIcon,\n    SearchBar,\n    Select,\n    SelectItem,\n    Tooltip\n} from \"@firecms/ui\";\nimport { CollectionSize } from \"../../../types\";\nimport { useLargeLayout } from \"../../../hooks\";\n\ninterface CollectionTableToolbarProps {\n    size: CollectionSize;\n    loading: boolean;\n    actionsStart?: React.ReactNode;\n    actions?: React.ReactNode;\n    title?: React.ReactNode,\n    onTextSearchClick?: () => void;\n    onTextSearch?: (searchString?: string) => void;\n    onSizeChanged: (size: CollectionSize) => void;\n    textSearchLoading?: boolean;\n}\n\nexport function CollectionTableToolbar({\n                                           actions,\n                                           actionsStart,\n                                           loading,\n                                           onSizeChanged,\n                                           onTextSearch,\n                                           onTextSearchClick,\n                                           size,\n                                           textSearchLoading,\n                                           title\n                                       }: CollectionTableToolbarProps) {\n\n    const searchInputRef = React.useRef<HTMLInputElement>(null);\n    const largeLayout = useLargeLayout();\n\n    const searchLoading = React.useRef<boolean>(false);\n\n    useEffect(() => {\n        if (searchInputRef.current && searchLoading.current && !textSearchLoading) {\n            searchInputRef.current.focus();\n        }\n        searchLoading.current = textSearchLoading ?? false;\n    }, [textSearchLoading]);\n\n\n    const sizeSelect = (\n        <Tooltip title={\"Table row size\"} side={\"right\"} sideOffset={4}>\n            <Select\n                value={size as string}\n                className=\"w-16 h-10\"\n                size={\"small\"}\n                onValueChange={(v) => onSizeChanged(v as CollectionSize)}\n                renderValue={(v) => <div className={\"font-medium\"}>{v.toUpperCase()}</div>}\n            >\n                {[\"xs\", \"s\", \"m\", \"l\", \"xl\"].map((size) => (\n                    <SelectItem key={size} value={size} className={\"w-12 font-medium text-center\"}>\n                        {size.toUpperCase()}\n                    </SelectItem>\n                ))}\n            </Select>\n        </Tooltip>\n    );\n\n    return (\n        <div\n            className={cn(defaultBorderMixin, \"no-scrollbar min-h-[56px] overflow-x-auto px-2 md:px-4 bg-gray-50 dark:bg-gray-900 border-b flex flex-row justify-between items-center w-full\")}>\n\n            <div className=\"flex items-center gap-2 md:mr-4 mr-2\">\n\n                {title && <div className={\"hidden lg:block\"}>\n                    {title}\n                </div>}\n\n                {sizeSelect}\n\n                {actionsStart}\n\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n\n                {largeLayout && <div className=\"w-[22px]\">\n                    {loading &&\n                        <CircularProgress size={\"small\"}/>}\n                </div>}\n\n                {(onTextSearch || onTextSearchClick) &&\n                    <SearchBar\n                        key={\"search-bar\"}\n                        inputRef={searchInputRef}\n                        loading={textSearchLoading}\n                        disabled={Boolean(onTextSearchClick)}\n                        onClick={onTextSearchClick}\n                        onTextSearch={onTextSearchClick ? undefined : onTextSearch}\n                        expandable={true}/>}\n\n                {actions}\n\n            </div>\n\n        </div>\n    );\n}\n","import { EntityCollection, Property, ResolvedArrayProperty, ResolvedProperty } from \"../../../types\";\n\nexport function getTableCellAlignment(property: Property | ResolvedProperty): \"right\" | \"left\" | \"center\" {\n    if (property.dataType === \"boolean\") {\n        return \"center\";\n    } else if (property.dataType === \"number\") {\n        if (property.enumValues)\n            return \"left\";\n        return \"right\";\n    } else if (property.dataType === \"date\") {\n        return \"right\";\n    } else {\n        return \"left\";\n    }\n}\n\nexport function getTablePropertyColumnWidth(property: ResolvedProperty): number {\n\n    if (property.columnWidth) {\n        return property.columnWidth;\n    }\n\n    if (property.dataType === \"string\") {\n        if (property.url) {\n            return 280;\n        } else if (property.storage) {\n            return 160;\n        } else if (property.enumValues) {\n            return 200;\n        } else if (property.multiline) {\n            return 300;\n        } else if (property.markdown) {\n            return 300;\n        } else if (property.email) {\n            return 200;\n        } else {\n            return 200;\n        }\n    } else if (property.dataType === \"array\") {\n        const arrayProperty = property as ResolvedArrayProperty;\n        if (arrayProperty.of) {\n            if (Array.isArray(property.of)) {\n                return 300;\n            } else {\n                return getTablePropertyColumnWidth(arrayProperty.of as ResolvedProperty);\n            }\n        } else {\n            return 300;\n        }\n    } else if (property.dataType === \"number\") {\n        if (property.enumValues) {\n            return 200;\n        }\n        return 140;\n    } else if (property.dataType === \"map\") {\n        return 360;\n    } else if (property.dataType === \"date\") {\n        return 200;\n    } else if (property.dataType === \"reference\") {\n        return 220;\n    } else if (property.dataType === \"boolean\") {\n        return 140;\n    } else {\n        return 200;\n    }\n}\n\nexport function getSubcollectionColumnId(collection: EntityCollection) {\n    return `subcollection:${collection.id ?? collection.path}`;\n}\n","import { useMemo } from \"react\";\nimport { EntityCollection, ResolvedEntityCollection, ResolvedProperty } from \"../../types\";\nimport { getSubcollectionColumnId } from \"../EntityCollectionTable/internal/common\";\nimport { PropertyColumnConfig } from \"../EntityCollectionTable/EntityCollectionTableProps\";\n\nconst COLLECTION_GROUP_PARENT_ID = \"collectionGroupParent\";\n\nexport function useColumnIds<M extends Record<string, any>>(collection: ResolvedEntityCollection<M>, includeSubcollections: boolean): PropertyColumnConfig[] {\n    return useMemo(() => {\n        if (collection.propertiesOrder)\n            return hideAndExpandKeys(collection, collection.propertiesOrder);\n        return getDefaultColumnKeys(collection, includeSubcollections);\n    }, [collection, includeSubcollections]);\n}\n\nfunction hideAndExpandKeys<M extends Record<string, any>>(collection: ResolvedEntityCollection<M>, keys: string[]): PropertyColumnConfig[] {\n\n    return keys.flatMap((key) => {\n        const property = collection.properties[key];\n        if (property) {\n            if (property.hideFromCollection)\n                return [null];\n            if (property.disabled && typeof property.disabled === \"object\" && property.disabled.hidden)\n                return [null];\n            if (property.dataType === \"map\" && property.spreadChildren && property.properties) {\n                return getColumnKeysForProperty(property, key);\n            }\n            return [{\n                key,\n                disabled: Boolean(property.disabled) || Boolean(property.readOnly)\n            }];\n        }\n\n        const additionalField = collection.additionalFields?.find(field => field.key === key);\n        if (additionalField) {\n            return [{\n                key,\n                disabled: true\n            }];\n        }\n\n        if (collection.subcollections) {\n            const subCollection = collection.subcollections.find(subCol => getSubcollectionColumnId(subCol) === key);\n            if (subCollection) {\n                return [{\n                    key,\n                    disabled: true\n                }];\n            }\n        }\n\n        if (collection.collectionGroup && key === COLLECTION_GROUP_PARENT_ID) {\n            return [{\n                key,\n                disabled: true\n            }];\n        }\n\n        return [null];\n    }).filter(Boolean) as PropertyColumnConfig[];\n}\n\nfunction getDefaultColumnKeys<M extends Record<string, any> = any>(collection: ResolvedEntityCollection<M>, includeSubCollections: boolean) {\n    const propertyKeys = Object.keys(collection.properties);\n\n    const additionalFields = collection.additionalFields ?? [];\n    const subCollections: EntityCollection[] = collection.subcollections ?? [];\n\n    const columnIds: string[] = [\n        ...propertyKeys,\n        ...additionalFields.map((field) => field.key)\n    ];\n\n    if (includeSubCollections) {\n        const subCollectionIds = subCollections\n            .map((collection) => getSubcollectionColumnId(collection));\n        columnIds.push(...subCollectionIds.filter((subColId) => !columnIds.includes(subColId)));\n    }\n\n    if (collection.collectionGroup) {\n        columnIds.push(COLLECTION_GROUP_PARENT_ID);\n    }\n\n    return hideAndExpandKeys(collection, columnIds);\n}\n\nexport function getColumnKeysForProperty(property: ResolvedProperty, key: string, disabled?: boolean): PropertyColumnConfig[] {\n    if (property.dataType === \"map\" && property.spreadChildren && property.properties) {\n        return Object.entries(property.properties)\n            .flatMap(([childKey, childProperty]) => getColumnKeysForProperty(\n                childProperty,\n                `${key}.${childKey}`,\n                disabled || Boolean(property.disabled) || Boolean(property.readOnly))\n            );\n    }\n    return [{\n        key,\n        disabled: disabled || Boolean(property.disabled) || Boolean(property.readOnly)\n    }];\n}\n","import React from \"react\";\nimport { getTableCellAlignment, getTablePropertyColumnWidth } from \"./internal/common\";\nimport { FilterValues, ResolvedProperties, ResolvedProperty } from \"../../types\";\nimport { VirtualTableColumn } from \"../VirtualTable\";\nimport { getIconForProperty, getResolvedPropertyInPath } from \"../../util\";\nimport { getColumnKeysForProperty } from \"../common/useColumnsIds\";\n\nexport function buildIdColumn(largeLayout?: boolean): VirtualTableColumn {\n    return {\n        key: \"id_ewcfedcswdf3\",\n        width: (largeLayout ? 160 : 130),\n        title: \"ID\",\n        resizable: false,\n        frozen: largeLayout ?? false,\n        headerAlign: \"center\",\n        align: \"center\",\n    };\n}\n\nexport interface PropertiesToColumnsParams<M extends Record<string, any>> {\n    properties: ResolvedProperties<M>;\n    sortable?: boolean;\n    forceFilter?: FilterValues<keyof M extends string ? keyof M : never>;\n    disabledFilter?: boolean;\n    AdditionalHeaderWidget?: React.ComponentType<{\n        property: ResolvedProperty,\n        propertyKey: string,\n        onHover: boolean,\n    }>;\n}\n\nexport function propertiesToColumns<M extends Record<string, any>>({ properties, sortable, forceFilter, disabledFilter, AdditionalHeaderWidget }: PropertiesToColumnsParams<M>): VirtualTableColumn[] {\n    return Object.entries<ResolvedProperty>(properties)\n        .flatMap(([key, property]) => getColumnKeysForProperty(property, key))\n        .map(({\n                  key,\n                  disabled\n              }) => {\n            const property = getResolvedPropertyInPath(properties, key);\n            if (!property)\n                throw Error(\"Internal error: no property found in path \" + key);\n            const filterable = filterableProperty(property);\n            return {\n                key: key as string,\n                align: getTableCellAlignment(property),\n                icon: getIconForProperty(property, \"small\"),\n                title: property.name ?? key as string,\n                sortable: sortable && (forceFilter ? Object.keys(forceFilter).includes(key) : true),\n                filter: !disabledFilter && filterable,\n                width: getTablePropertyColumnWidth(property),\n                resizable: true,\n                custom: {\n                    resolvedProperty: property,\n                    disabled\n                },\n                AdditionalHeaderWidget: AdditionalHeaderWidget\n                    ? ({ onHover }) => <AdditionalHeaderWidget property={property} propertyKey={key} onHover={onHover}/>\n                    : undefined\n            } satisfies VirtualTableColumn;\n        });\n}\n\nfunction filterableProperty(property: ResolvedProperty, partOfArray = false): boolean {\n    if (partOfArray) {\n        return [\"string\", \"number\", \"date\", \"reference\"].includes(property.dataType);\n    }\n    if (property.dataType === \"array\") {\n        if (property.of)\n            return filterableProperty(property.of, true);\n        else\n            return false;\n    }\n    return [\"string\", \"number\", \"boolean\", \"date\", \"reference\", \"array\"].includes(property.dataType);\n}\n","import React from \"react\";\nimport { CircularProgress, CircularProgressProps, Typography } from \"@firecms/ui\";\n\n/**\n *\n * @param text\n * @param props\n * @constructor\n * @ignore\n */\nexport function CircularProgressCenter({ text, ...props }: CircularProgressProps & {\n    text?: string\n}) {\n    return (\n        <div\n            className=\"flex w-full h-screen max-h-full max-w-full bg-gray-50 dark:bg-gray-900 gap-4\">\n            <div className=\"m-auto flex flex-col gap-2 items-center\">\n                <CircularProgress {...props}/>\n                {text && <Typography\n                    color={\"secondary\"}\n                    variant={\"caption\"}\n                    className=\"text-center\">{text}</Typography>}\n            </div>\n        </div>\n    );\n}\n","import React, { RefObject, useCallback, useEffect, useState } from \"react\";\nimport equal from \"react-fast-compare\";\n\nimport { VirtualTableColumn, VirtualTableSort, VirtualTableWhereFilterOp } from \"./VirtualTableProps\";\nimport { ErrorBoundary } from \"../ErrorBoundary\";\nimport {\n    ArrowUpwardIcon,\n    Badge,\n    Button,\n    cn,\n    defaultBorderMixin,\n    FilterListIcon,\n    IconButton,\n    Popover\n} from \"@firecms/ui\";\n\ninterface FilterFormProps<T> {\n    column: VirtualTableColumn<T>;\n    onFilterUpdate: (filter?: [VirtualTableWhereFilterOp, any], newOpenFilterState?: boolean) => void;\n    filter?: [VirtualTableWhereFilterOp, any];\n    onHover: boolean,\n    createFilterField: (props: FilterFormFieldProps<T>) => React.ReactNode;\n    hidden: boolean;\n    setHidden: (hidden: boolean) => void;\n}\n\nexport type FilterFormFieldProps<CustomProps> = {\n    id: React.Key,\n    filterValue: [VirtualTableWhereFilterOp, any] | undefined,\n    setFilterValue: (filterValue?: [VirtualTableWhereFilterOp, any]) => void;\n    column: VirtualTableColumn<CustomProps>;\n    hidden: boolean;\n    setHidden: (hidden: boolean) => void;\n};\n\ntype VirtualTableHeaderProps<M extends Record<string, any>> = {\n    resizeHandleRef: RefObject<HTMLDivElement>;\n    columnIndex: number;\n    isResizingIndex: number;\n    column: VirtualTableColumn<any>;\n    onColumnSort: (key: Extract<keyof M, string>) => void;\n    filter?: [VirtualTableWhereFilterOp, any];\n    sort: VirtualTableSort;\n    onFilterUpdate: (column: VirtualTableColumn, filterForProperty?: [VirtualTableWhereFilterOp, any]) => void;\n    onClickResizeColumn?: (columnIndex: number, column: VirtualTableColumn) => void;\n    createFilterField?: (props: FilterFormFieldProps<any>) => React.ReactNode;\n    AdditionalHeaderWidget?: (props: { onHover: boolean }) => React.ReactNode;\n};\n\nexport const VirtualTableHeader = React.memo<VirtualTableHeaderProps<any>>(\n    function VirtualTableHeader<M extends Record<string, any>>({\n                                                                   resizeHandleRef,\n                                                                   columnIndex,\n                                                                   isResizingIndex,\n                                                                   sort,\n                                                                   onColumnSort,\n                                                                   onFilterUpdate,\n                                                                   filter,\n                                                                   column,\n                                                                   onClickResizeColumn,\n                                                                   createFilterField,\n                                                                   AdditionalHeaderWidget\n                                                               }: VirtualTableHeaderProps<M>) {\n\n        const [onHover, setOnHover] = useState(false);\n\n        const [openFilter, setOpenFilter] = React.useState(false);\n        const [hidden, setHidden] = React.useState(false);\n\n        const handleSettingsClick = useCallback((event: any) => {\n            setOpenFilter(true);\n        }, []);\n\n        const update = useCallback((filterForProperty?: [VirtualTableWhereFilterOp, any], newOpenFilterState?: boolean) => {\n            onFilterUpdate(column, filterForProperty);\n            if (newOpenFilterState !== undefined)\n                setOpenFilter(newOpenFilterState);\n        }, [column, onFilterUpdate]);\n\n        const thisColumnIsResizing = isResizingIndex === columnIndex;\n        const anotherColumnIsResizing = isResizingIndex !== columnIndex && isResizingIndex > 0;\n\n        const hovered = !anotherColumnIsResizing && (onHover || thisColumnIsResizing);\n\n        return (\n            <ErrorBoundary>\n                <div\n                    className={cn(\"flex py-0 px-3 h-full text-xs uppercase font-semibold relative select-none items-center bg-gray-50 dark:bg-gray-900\",\n                        \"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 \",\n                        \"hover:bg-gray-100 dark:hover:bg-gray-800 hover:bg-opacity-50 dark:hover:bg-opacity-50\",\n                        column.frozen ? \"sticky left-0 z-10\" : \"relative z-0\"\n                    )}\n                    style={{\n                        // transition: \"color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms\",\n                        // fontSize: \"0.750rem\",\n                        left: column.frozen ? 0 : undefined,\n                        minWidth: column.width,\n                        maxWidth: column.width\n                    }}\n                    onMouseEnter={() => setOnHover(true)}\n                    onMouseMove={() => setOnHover(true)}\n                    onMouseLeave={() => setOnHover(false)}\n                >\n\n                    <div className=\"overflow-hidden flex-grow\">\n                        <div\n                            className={`flex items-center justify-${column.headerAlign} flex-row`}>\n\n                            {column.icon}\n\n                            <div\n                                className=\"truncate -webkit-box w-full mx-1 overflow-hidden\"\n                                style={{\n                                    WebkitBoxOrient: \"vertical\",\n                                    WebkitLineClamp: 2,\n                                    justifyContent: column.align\n                                }}>\n                                {column.title}\n                            </div>\n\n                        </div>\n                    </div>\n                    <>\n\n                        {AdditionalHeaderWidget &&\n                            <AdditionalHeaderWidget onHover={onHover || openFilter}/>}\n\n                        {column.sortable && (sort || hovered || openFilter) &&\n                            <Badge color=\"secondary\"\n                                   invisible={!sort}>\n                                <IconButton\n                                    size={\"small\"}\n                                    className={onHover || openFilter ? \"bg-white dark:bg-gray-950\" : undefined}\n                                    onClick={() => {\n                                        onColumnSort(column.key as Extract<keyof M, string>);\n                                    }}\n                                >\n                                    {!sort &&\n                                        <ArrowUpwardIcon/>}\n                                    {sort === \"asc\" &&\n                                        <ArrowUpwardIcon/>}\n                                    {sort === \"desc\" &&\n                                        <ArrowUpwardIcon className={\"rotate-180\"}/>}\n                                </IconButton>\n                            </Badge>\n                        }\n                    </>\n\n                    {column.filter && createFilterField && <div>\n                        <Badge color=\"secondary\"\n                               invisible={!filter}>\n\n                            <Popover\n                                open={openFilter}\n                                onOpenChange={setOpenFilter}\n                                className={hidden ? \"hidden\" : undefined}\n                                modal={true}\n                                trigger={\n                                    <IconButton\n                                        className={onHover || openFilter ? \"bg-white dark:bg-gray-950\" : undefined}\n                                        size={\"small\"}\n                                        onClick={handleSettingsClick}>\n                                        <FilterListIcon size={\"small\"}/>\n                                    </IconButton>}\n                            >\n                                <FilterForm column={column}\n                                            filter={filter}\n                                            onHover={onHover}\n                                            onFilterUpdate={update}\n                                            createFilterField={createFilterField}\n                                            hidden={hidden}\n                                            setHidden={setHidden}/>\n\n                            </Popover>\n\n                        </Badge>\n\n                    </div>}\n\n                    {column.resizable && <div\n                        ref={resizeHandleRef}\n                        className={cn(\n                            \"absolute h-full w-[6px] top-0 right-0 cursor-col-resize\",\n                            hovered && \"bg-gray-300 dark:bg-gray-700\"\n                        )}\n                        onMouseDown={onClickResizeColumn ? () => onClickResizeColumn(columnIndex, column) : undefined}\n                    />}\n                </div>\n\n            </ErrorBoundary>\n        );\n    }, equal) as React.FunctionComponent<VirtualTableHeaderProps<any>>;\n\nfunction FilterForm<M>({\n                           column,\n                           onFilterUpdate,\n                           filter,\n                           onHover,\n                           createFilterField,\n                           hidden,\n                           setHidden\n                       }: FilterFormProps<M>) {\n\n    const id = column.key;\n\n    const [filterInternal, setFilterInternal] = useState<[VirtualTableWhereFilterOp, any] | undefined>(filter);\n\n    useEffect(() => {\n        setFilterInternal(filter);\n    }, [filter]);\n\n    if (!column.filter) return null;\n\n    const submit = () => {\n        onFilterUpdate(filterInternal, false);\n    };\n\n    const reset = (e: any) => {\n        onFilterUpdate(undefined, false);\n    };\n\n    const filterIsSet = !!filter;\n\n    const filterField = createFilterField({\n        id,\n        filterValue: filterInternal,\n        setFilterValue: setFilterInternal,\n        column,\n        hidden,\n        setHidden\n    });\n\n    if (!filterField) return null;\n    return (\n        <form noValidate={true}\n              onSubmit={(e) => {\n                  e.stopPropagation();\n                  e.preventDefault();\n                  submit();\n              }}\n              className={\"text-gray-900 dark:text-white\"}>\n            <div\n                className={cn(defaultBorderMixin, \"py-4 px-6 text-xs font-semibold uppercase border-b\")}>\n                {column.title ?? id}\n            </div>\n            {filterField && <div className=\"m-4\">\n                {filterField}\n            </div>}\n            <div className=\"flex justify-end m-4\">\n                <Button\n                    className=\"mr-4\"\n                    disabled={!filterIsSet}\n                    variant={\"text\"}\n                    color=\"primary\"\n                    type=\"reset\"\n                    aria-label=\"filter clear\"\n                    onClick={reset}>Clear</Button>\n                <Button\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    type=\"submit\">Filter</Button>\n            </div>\n        </form>\n    );\n\n}\n","import React, { createRef, useCallback, useEffect, useState } from \"react\";\n\nimport { VirtualTableColumn, VirtualTableWhereFilterOp } from \"./VirtualTableProps\";\nimport { ErrorBoundary } from \"../ErrorBoundary\";\nimport { VirtualTableHeader } from \"./VirtualTableHeader\";\nimport { VirtualTableContextProps } from \"./types\";\nimport { cn, defaultBorderMixin } from \"@firecms/ui\";\n\nexport const VirtualTableHeaderRow = ({\n                                          columns,\n                                          currentSort,\n                                          onColumnSort,\n                                          onFilterUpdate,\n                                          sortByProperty,\n                                          filter,\n                                          onColumnResize,\n                                          onColumnResizeEnd,\n                                          createFilterField,\n                                          AddColumnComponent\n                                      }: VirtualTableContextProps<any>) => {\n\n    const columnRefs = columns.map(() => createRef<HTMLDivElement>());\n    const [isResizing, setIsResizing] = useState(-1);\n\n    const adjustWidthColumn = useCallback((index: number, width: number, end: boolean) => {\n        const column = columns[index];\n        const minWidth = 100;\n        const maxWidth = 800;\n        const newWidth = width > maxWidth ? maxWidth : (width < minWidth ? minWidth : width);\n        const params = {\n            width: newWidth,\n            key: column.key as string,\n            column: {\n                ...column,\n                width: newWidth\n            } as VirtualTableColumn\n        };\n        if (!end)\n            onColumnResize(params);\n        else\n            onColumnResizeEnd(params);\n    }, [columns, onColumnResize, onColumnResizeEnd]);\n\n    const getEventNewWidth = useCallback((e: MouseEvent) => {\n        if (isResizing >= 0) {\n            const left = columnRefs[isResizing].current?.parentElement?.getBoundingClientRect().left;\n            if (!left) return;\n            return e.clientX - left;\n        }\n        return undefined;\n    }, [columnRefs, isResizing]);\n\n    const setCursorDocument = useCallback((isResizing: boolean) => {\n        document.body.style.cursor = isResizing ? \"col-resize\" : \"auto\";\n    }, []);\n\n    const handleOnMouseMove = useCallback((e: MouseEvent) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const newWidth = getEventNewWidth(e);\n        if (newWidth)\n            adjustWidthColumn(isResizing, newWidth, false);\n    }, [adjustWidthColumn, getEventNewWidth, isResizing]);\n\n    const handleOnMouseUp = useCallback((e: MouseEvent) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const newWidth = getEventNewWidth(e);\n        if (newWidth)\n            adjustWidthColumn(isResizing, newWidth, true);\n        setIsResizing(-1);\n        setCursorDocument(false);\n    }, [adjustWidthColumn, getEventNewWidth, isResizing, setCursorDocument]);\n\n    const removeResizingListeners = useCallback(() => {\n        document.removeEventListener(\"mousemove\", handleOnMouseMove);\n        document.removeEventListener(\"mouseup\", handleOnMouseUp);\n    }, [handleOnMouseMove, handleOnMouseUp]);\n\n    const attachResizeListeners = useCallback(() => {\n        document.addEventListener(\"mousemove\", handleOnMouseMove);\n        document.addEventListener(\"mouseup\", handleOnMouseUp);\n    }, [handleOnMouseMove, handleOnMouseUp]);\n\n    useEffect(() => {\n        if (isResizing >= 0) {\n            attachResizeListeners();\n        } else {\n            removeResizingListeners();\n        }\n        return () => {\n            removeResizingListeners();\n        };\n    }, [attachResizeListeners, isResizing, removeResizingListeners]);\n\n    const onClickResizeColumn = useCallback((index: number) => {\n        setIsResizing(index);\n        setCursorDocument(true);\n    }, [setCursorDocument]);\n\n    return (\n        <div\n            className={cn(defaultBorderMixin, \"z-20 sticky min-w-full flex w-fit flex-row top-0 left-0 h-12 border-b bg-gray-50 dark:bg-gray-900\")}>\n            {columns.map((c, columnIndex) => {\n                const column = columns[columnIndex];\n\n                const filterForThisProperty: [VirtualTableWhereFilterOp, any] | undefined =\n                    column && filter && filter[column.key]\n                        ? filter[column.key]\n                        : undefined;\n                return <ErrorBoundary key={\"header_\" + column.key}>\n                    <VirtualTableHeader\n                        resizeHandleRef={columnRefs[columnIndex]}\n                        columnIndex={columnIndex}\n                        isResizingIndex={isResizing}\n                        onFilterUpdate={onFilterUpdate}\n                        filter={filterForThisProperty}\n                        sort={sortByProperty === column.key ? currentSort : undefined}\n                        onColumnSort={onColumnSort}\n                        onClickResizeColumn={onClickResizeColumn}\n                        column={column}\n                        createFilterField={createFilterField}\n                        AdditionalHeaderWidget={column.AdditionalHeaderWidget}/>\n                </ErrorBoundary>;\n            })}\n\n            {AddColumnComponent && <AddColumnComponent/>}\n\n        </div>\n    );\n};\n","import React, { useCallback } from \"react\";\n\nimport equal from \"react-fast-compare\"\n\nimport { getRowHeight } from \"./common\";\nimport { VirtualTableRowProps } from \"./types\";\nimport { cn } from \"@firecms/ui\";\n\nexport const VirtualTableRow = React.memo<VirtualTableRowProps<any>>(\n    function VirtualTableRow<T>({\n                                    rowData,\n                                    rowIndex,\n                                    children,\n                                    onRowClick,\n                                    size,\n                                    style,\n                                    hoverRow,\n                                    rowClassName\n                                }: VirtualTableRowProps<T>) {\n\n        const onClick = useCallback((event: React.SyntheticEvent) => {\n            if (onRowClick)\n                onRowClick({\n                    rowData,\n                    rowIndex,\n                    event\n                })\n        }, [onRowClick, rowData, rowIndex]);\n\n        return (\n            <div\n                className={cn(\n                    \"flex min-w-full text-sm border-b border-gray-200 dark:border-gray-800 border-opacity-40 dark:border-opacity-40\",\n                    rowClassName ? rowClassName(rowData) : \"\",\n                    {\n                        \"hover:bg-opacity-95\": hoverRow,\n                        \"cursor-pointer\": onRowClick\n                    }\n                )}\n                onClick={onClick}\n                style={{\n                    ...(style),\n                    height: getRowHeight(size),\n                    width: \"fit-content\"\n                }}\n            >\n                {children}\n            </div>\n        );\n\n    },\n    equal\n);\n","import React from \"react\";\n\nimport equal from \"react-fast-compare\"\n\nimport { CellRendererParams, VirtualTableColumn } from \"./VirtualTableProps\";\n\ntype VirtualTableCellProps<T extends any> = {\n    dataKey: string;\n    column: VirtualTableColumn;\n    columns: VirtualTableColumn[];\n    rowData: any;\n    cellData: any;\n    rowIndex: any;\n    columnIndex: number;\n    cellRenderer: React.ComponentType<CellRendererParams<T>>;\n};\n\nexport const VirtualTableCell = React.memo<VirtualTableCellProps<any>>(\n    function VirtualTableCell<T extends any>(props: VirtualTableCellProps<T>) {\n        // @ts-ignore\n        return props.rowData && props.cellRenderer(\n            {\n                cellData: props.cellData,\n                rowData: props.rowData,\n                rowIndex: props.rowIndex,\n                isScrolling: false,\n                column: props.column,\n                columns: props.columns,\n                columnIndex: props.columnIndex,\n                width: props.column.width\n            } as CellRendererParams<T>\n        );\n        // return props.rowData && <props.cellRenderer\n        //     rowData={props.rowData}\n        //     rowIndex={props.rowIndex}\n        //     isScrolling={false}\n        //     column={props.column}\n        //     columns={props.columns}\n        //     columnIndex={props.columnIndex}\n        //     width={props.column.width}/>\n    },\n    (a, b) => {\n        return equal(a.rowData, b.rowData) &&\n            equal(a.column, b.column) &&\n            equal(a.cellData, b.cellData) &&\n            equal(a.rowIndex, b.rowIndex) &&\n            equal(a.cellRenderer, b.cellRenderer) &&\n            equal(a.columnIndex, b.columnIndex)\n    }\n);\n","import React, { createContext, forwardRef, RefObject, useCallback, useEffect, useRef, useState } from \"react\";\n\nimport equal from \"react-fast-compare\"\n\n// @ts-ignore\nimport { FixedSizeList as List } from \"react-window\";\nimport useMeasure from \"react-use-measure\";\n\nimport { CircularProgressCenter } from \"../CircularProgressCenter\";\nimport {\n    OnVirtualTableColumnResizeParams,\n    VirtualTableColumn,\n    VirtualTableFilterValues,\n    VirtualTableProps,\n    VirtualTableWhereFilterOp\n} from \"./VirtualTableProps\";\n\nimport { getRowHeight } from \"./common\";\nimport { VirtualTableContextProps } from \"./types\";\nimport { VirtualTableHeaderRow } from \"./VirtualTableHeaderRow\";\nimport { VirtualTableRow } from \"./VirtualTableRow\";\nimport { VirtualTableCell } from \"./VirtualTableCell\";\nimport { AssignmentIcon, CenteredView, cn, Typography } from \"@firecms/ui\";\n\nconst VirtualListContext = createContext<VirtualTableContextProps<any>>({} as any);\nVirtualListContext.displayName = \"VirtualListContext\";\n\ntype InnerElementProps = {\n    children: React.ReactNode,\n    style: any\n};\n\n// eslint-disable-next-line react/display-name\nconst innerElementType = forwardRef<HTMLDivElement, InnerElementProps>(({\n                                                                            children,\n                                                                            ...rest\n                                                                        }: InnerElementProps, ref) => {\n\n        return (\n            <VirtualListContext.Consumer>\n                {(virtualTableProps) => {\n                    const customView = virtualTableProps.customView;\n                    return (\n                        <>\n                            <div\n                                id={\"virtual-table\"}\n                                style={{\n                                    position: \"relative\",\n                                    height: \"100%\"\n                                }}>\n                                <div\n                                    ref={ref}\n                                    {...rest}\n                                    style={{\n                                        ...rest?.style,\n                                        minHeight: \"100%\",\n                                        position: \"relative\"\n                                    }}>\n                                    <VirtualTableHeaderRow {...virtualTableProps}/>\n                                    {!customView && children}\n                                </div>\n\n                            </div>\n\n                            {customView && <div style={{\n                                position: \"sticky\",\n                                top: \"56px\",\n                                flexGrow: 1,\n                                height: \"calc(100% - 56px)\",\n                                marginTop: \"calc(56px - 100vh)\",\n                                left: 0\n                            }}>{customView}</div>}\n\n                        </>\n                    );\n                }}\n            </VirtualListContext.Consumer>\n        );\n    })\n;\n\n/**\n * This is a Table component that allows displaying arbitrary data, not\n * necessarily related to entities or properties. It is the component\n * that powers the entity collections but has a generic API, so it\n * can be reused.\n *\n * @group Components\n */\nexport const VirtualTable = React.memo<VirtualTableProps<any>>(\n    function VirtualTable<T extends Record<string, any>>({\n                                                             data,\n                                                             onResetPagination,\n                                                             onEndReached,\n                                                             size = \"m\",\n                                                             columns: columnsProp,\n                                                             onRowClick,\n                                                             onColumnResize,\n                                                             filter: filterInput,\n                                                             checkFilterCombination,\n                                                             onFilterUpdate,\n                                                             sortBy,\n                                                             error,\n                                                             emptyComponent,\n                                                             onSortByUpdate,\n                                                             loading,\n                                                             cellRenderer,\n                                                             hoverRow,\n                                                             createFilterField,\n                                                             rowClassName,\n                                                             className,\n                                                             endAdornment,\n                                                             AddColumnComponent\n                                                         }: VirtualTableProps<T>) {\n\n        const sortByProperty: string | undefined = sortBy ? sortBy[0] : undefined;\n        const currentSort: \"asc\" | \"desc\" | undefined = sortBy ? sortBy[1] : undefined;\n\n        const [columns, setColumns] = useState(columnsProp);\n\n        const tableRef = useRef<HTMLDivElement>(null);\n        const endReachCallbackThreshold = useRef<number>(0);\n\n        useEffect(() => {\n            setColumns(columnsProp);\n        }, [columnsProp]);\n\n        const [measureRef, bounds] = useMeasure();\n\n        const onColumnResizeInternal = useCallback((params: OnVirtualTableColumnResizeParams) => {\n            setColumns(columns.map((column) => column.key === params.column.key ? params.column : column));\n        }, [columns]);\n\n        const onColumnResizeEndInternal = useCallback((params: OnVirtualTableColumnResizeParams) => {\n            setColumns(columns.map((column) => column.key === params.column.key ? params.column : column));\n            if (onColumnResize) {\n                onColumnResize(params);\n            }\n        }, [columns, onColumnResize]);\n\n        // saving the current filter as a ref as a workaround for header closure\n        const filterRef = useRef<VirtualTableFilterValues<any> | undefined>();\n\n        useEffect(() => {\n            filterRef.current = filterInput;\n        }, [filterInput]);\n\n        const scrollToTop = useCallback(() => {\n            endReachCallbackThreshold.current = 0;\n            if (tableRef.current) {\n                // scrollRef.current = [scrollRef.current[0], 0];\n                tableRef.current.scrollTo(tableRef.current?.scrollLeft, 0);\n            }\n        }, []);\n\n        const onColumnSort = useCallback((key: string) => {\n\n            const isDesc = sortByProperty === key && currentSort === \"desc\";\n            const isAsc = sortByProperty === key && currentSort === \"asc\";\n            const newSort = isAsc ? \"desc\" : (isDesc ? undefined : \"asc\");\n            const newSortProperty: string | undefined = isDesc ? undefined : key;\n\n            const filter = filterRef.current;\n\n            const newSortBy: [string, \"asc\" | \"desc\"] | undefined = newSort && newSortProperty ? [newSortProperty, newSort] : undefined;\n            if (filter) {\n                if (checkFilterCombination && !checkFilterCombination(filter, newSortBy)) {\n                    if (onFilterUpdate)\n                        onFilterUpdate(undefined);\n                }\n            }\n\n            if (onResetPagination) {\n                onResetPagination();\n            }\n\n            if (onSortByUpdate) {\n                onSortByUpdate(newSortBy);\n            }\n\n            scrollToTop();\n        }, [checkFilterCombination, currentSort, onFilterUpdate, onResetPagination, onSortByUpdate, scrollToTop, sortByProperty]);\n\n        const resetSort = useCallback(() => {\n            endReachCallbackThreshold.current = 0;\n            if (onSortByUpdate)\n                onSortByUpdate(undefined);\n        }, [onSortByUpdate]);\n\n        const maxScroll = Math.max((data?.length ?? 0) * getRowHeight(size) - bounds.height, 0);\n        const onEndReachedInternal = useCallback((scrollOffset: number) => {\n            if (onEndReached && (data?.length ?? 0) > 0 && scrollOffset > endReachCallbackThreshold.current + 600) {\n                endReachCallbackThreshold.current = scrollOffset;\n                onEndReached();\n            }\n        }, [data?.length, onEndReached]);\n\n        const onScroll = useCallback(({\n                                          scrollOffset,\n                                          scrollUpdateWasRequested\n                                      }: {\n            scrollDirection: \"forward\" | \"backward\",\n            scrollOffset: number,\n            scrollUpdateWasRequested: boolean;\n        }) => {\n            if (!scrollUpdateWasRequested && (scrollOffset >= maxScroll - 600))\n                onEndReachedInternal(scrollOffset);\n        }, [maxScroll, onEndReachedInternal]);\n\n        const onFilterUpdateInternal = useCallback((column: VirtualTableColumn, filterForProperty?: [VirtualTableWhereFilterOp, any]) => {\n\n            endReachCallbackThreshold.current = 0;\n            const filter = filterRef.current;\n            let newFilterValue: VirtualTableFilterValues<any> = filter ? { ...filter } : {};\n\n            if (!filterForProperty) {\n                delete newFilterValue[column.key];\n            } else {\n                newFilterValue[column.key] = filterForProperty;\n            }\n            const newSortBy: [string, \"asc\" | \"desc\"] | undefined = sortByProperty && currentSort ? [sortByProperty, currentSort] : undefined;\n            const isNewFilterCombinationValid = !checkFilterCombination || checkFilterCombination(newFilterValue, newSortBy);\n            if (!isNewFilterCombinationValid) {\n                newFilterValue = filterForProperty ? { [column.key]: filterForProperty } as VirtualTableFilterValues<Extract<keyof T, string>> : {};\n            }\n\n            if (onFilterUpdate) onFilterUpdate(newFilterValue);\n        }, [checkFilterCombination, currentSort, onFilterUpdate, sortByProperty]);\n\n        const buildEmptyView = useCallback(() => {\n            if (loading)\n                return <CircularProgressCenter/>;\n            return <div\n                className=\"flex flex-col overflow-auto items-center justify-center p-2 gap-2 h-full\">\n                <AssignmentIcon/>\n                {emptyComponent}\n            </div>;\n        }, [emptyComponent, loading]);\n\n        const empty = !loading && (data?.length ?? 0) === 0;\n        const customView = error\n            ? <CenteredView maxWidth={\"2xl\"}\n                className=\"flex flex-col gap-2\">\n\n                <Typography variant={\"h6\"}>\n                    {\"Error fetching data from the data source\"}\n                </Typography>\n\n                {error?.message && <SafeLinkRenderer text={error.message}/>}\n\n            </CenteredView>\n            : (empty ? buildEmptyView() : undefined);\n\n        const virtualListController = {\n            data,\n            size,\n            cellRenderer,\n            columns,\n            currentSort,\n            onRowClick,\n            customView,\n            onColumnResize: onColumnResizeInternal,\n            onColumnResizeEnd: onColumnResizeEndInternal,\n            filter: filterRef.current,\n            onColumnSort,\n            onFilterUpdate: onFilterUpdateInternal,\n            sortByProperty,\n            hoverRow: hoverRow ?? false,\n            createFilterField,\n            rowClassName,\n            endAdornment,\n            AddColumnComponent\n        };\n\n        // useTraceUpdate(virtualListController);\n        return (\n            <div\n                ref={measureRef}\n                className={cn(\"h-full w-full\", className)}>\n                <VirtualListContext.Provider\n                    value={virtualListController}>\n\n                    <MemoizedList\n                        outerRef={tableRef}\n                        key={size}\n                        width={bounds.width}\n                        height={bounds.height}\n                        itemCount={(data?.length ?? 0) + (endAdornment ? 1 : 0)}\n                        onScroll={onScroll}\n                        includeAddColumn={Boolean(AddColumnComponent)}\n                        itemSize={getRowHeight(size)}/>\n\n                </VirtualListContext.Provider>\n            </div>\n        );\n    },\n    equal\n);\n\nfunction MemoizedList({\n                          outerRef,\n                          width,\n                          height,\n                          itemCount,\n                          onScroll,\n                          itemSize,\n                          includeAddColumn\n                      }: {\n    outerRef: RefObject<HTMLDivElement>;\n    width: number;\n    height: number;\n    itemCount: number;\n    onScroll: (params: {\n        scrollDirection: \"forward\" | \"backward\",\n        scrollOffset: number,\n        scrollUpdateWasRequested: boolean;\n    }) => void;\n    itemSize: number;\n    includeAddColumn?: boolean;\n}) {\n\n    const Row = useCallback(({\n                                 index,\n                                 style\n                             }: any) => {\n        return <VirtualListContext.Consumer>\n            {({\n                  onRowClick,\n                  data,\n                  columns,\n                  size = \"m\",\n                  cellRenderer,\n                  hoverRow,\n                  rowClassName,\n                  endAdornment\n              }) => {\n\n                if (endAdornment && index === (data ?? []).length) {\n                    return <div style={{\n                        ...style,\n                        height: \"auto\",\n                        position: \"sticky\",\n                        bottom: 0,\n                        zIndex: 1\n                    }}>\n                        {endAdornment}\n                    </div>;\n                }\n\n                const rowData = data && data[index];\n                return (\n                    <VirtualTableRow\n                        key={`row_${index}`}\n                        rowData={rowData}\n                        rowIndex={index}\n                        onRowClick={onRowClick}\n                        columns={columns}\n                        hoverRow={hoverRow}\n                        rowClassName={rowClassName}\n                        style={{\n                            ...style,\n                            top: `calc(${style.top}px + 48px)`\n                        }}\n                        size={size}>\n\n                        {columns.map((column: VirtualTableColumn, columnIndex: number) => {\n                            const cellData = rowData && rowData[column.key];\n                            return <VirtualTableCell\n                                key={`cell_${column.key}`}\n                                dataKey={column.key}\n                                cellRenderer={cellRenderer}\n                                column={column}\n                                columns={columns}\n                                rowData={rowData}\n                                cellData={cellData}\n                                rowIndex={index}\n                                columnIndex={columnIndex}/>;\n                        })}\n\n                        {includeAddColumn && <div className={\"w-20\"}/>}\n\n                    </VirtualTableRow>\n                );\n            }}\n        </VirtualListContext.Consumer>;\n    }, []);\n\n    return <List\n        outerRef={outerRef}\n        innerElementType={innerElementType}\n        width={width}\n        height={height}\n        overscanCount={4}\n        itemCount={itemCount}\n        onScroll={onScroll}\n        itemSize={itemSize}>\n        {Row}\n    </List>;\n}\n\nconst SafeLinkRenderer: React.FC<{\n    text: string;\n}> = ({ text }) => {\n    const urlRegex = /https?:\\/\\/[^\\s]+/g;\n    const htmlContent = text.replace(urlRegex, (url) => {\n        // For each URL found, replace it with an HTML <a> tag\n        return `<a href=\"${url}\" target=\"_blank\">Link</a><br/>`;\n    });\n\n    return (\n        <div className={\"break-all\"} dangerouslySetInnerHTML={{ __html: htmlContent }}/>\n    );\n};\n","import React, { useMemo, useState } from \"react\";\nimport { VirtualTableWhereFilterOp } from \"../../VirtualTable\";\nimport { Entity, EntityCollection, EntityReference } from \"../../../types\";\nimport { ReferencePreview } from \"../../../preview\";\nimport { getReferenceFrom } from \"../../../util\";\nimport { useNavigationController, useReferenceDialog } from \"../../../hooks\";\nimport { Button, Checkbox, Label, Select, SelectItem } from \"@firecms/ui\";\n\ninterface ReferenceFilterFieldProps {\n    name: string,\n    value?: [op: VirtualTableWhereFilterOp, fieldValue: any];\n    setValue: (filterValue?: [VirtualTableWhereFilterOp, any]) => void;\n    isArray?: boolean;\n    path?: string;\n    title?: string;\n    previewProperties?: string[];\n    hidden: boolean;\n    setHidden: (hidden: boolean) => void;\n}\n\nconst operationLabels = {\n    \"==\": \"==\",\n    \"!=\": \"!=\",\n    \">\": \">\",\n    \"<\": \"<\",\n    \">=\": \">=\",\n    \"<=\": \"<=\",\n    in: \"In\",\n    \"not-in\": \"Not in\",\n    \"array-contains\": \"Contains\",\n    \"array-contains-any\": \"Contains Any\"\n};\n\nconst multipleSelectOperations = [\"array-contains-any\", \"in\", \"not-in\"];\n\nexport function ReferenceFilterField({\n                                         name,\n                                         value,\n                                         setValue,\n                                         isArray,\n                                         path,\n                                         title,\n                                         previewProperties,\n                                         setHidden\n                                     }: ReferenceFilterFieldProps) {\n\n    const possibleOperations: (keyof typeof operationLabels) [] = isArray\n        ? [\"array-contains\"]\n        : [\"==\", \"!=\", \">\", \"<\", \">=\", \"<=\"];\n\n    isArray\n        ? possibleOperations.push(\"array-contains-any\")\n        : possibleOperations.push(\"in\", \"not-in\");\n\n    const [fieldOperation, fieldValue] = value || [possibleOperations[0], undefined];\n    const [operation, setOperation] = useState<VirtualTableWhereFilterOp>(fieldOperation);\n    const [internalValue, setInternalValue] = useState<EntityReference | EntityReference[] | undefined | null>(fieldValue);\n\n    const selectedEntityIds = internalValue\n        ? (Array.isArray(internalValue) ? internalValue.map((ref) => {\n            if (!(ref?.isEntityReference && ref?.isEntityReference())) {\n                return null;\n            }\n            return ref.id;\n        }).filter(Boolean) as string[] : [internalValue.id])\n        : [];\n\n    function updateFilter(op: VirtualTableWhereFilterOp, val?: EntityReference | EntityReference[] | null) {\n\n        const prevOpIsArray = multipleSelectOperations.includes(operation);\n        const newOpIsArray = multipleSelectOperations.includes(op);\n        let newValue = val;\n        if (prevOpIsArray !== newOpIsArray) {\n            // @ts-ignore\n            newValue = newOpIsArray ? (newValue?.isEntityReference && newValue?.isEntityReference() ? [newValue] : []) : undefined\n        }\n\n        setOperation(op);\n        setInternalValue(newValue);\n\n        const hasNewValue = newValue !== null && Array.isArray(newValue)\n            ? newValue.length > 0\n            : newValue !== undefined;\n        if (op && hasNewValue) {\n            setValue(\n                [op, newValue]\n            );\n        } else {\n            setValue(\n                undefined\n            );\n        }\n    }\n\n    const navigationController = useNavigationController();\n    const collection: EntityCollection | undefined = useMemo(() => {\n        return path ? navigationController.getCollection(path) : undefined;\n    }, [path]);\n\n    const onSingleEntitySelected = (entity: Entity<any>) => {\n        updateFilter(operation, getReferenceFrom(entity));\n    };\n\n    const onMultipleEntitiesSelected = (entities: Entity<any>[]) => {\n        updateFilter(operation, entities.map(e => getReferenceFrom(e)));\n    };\n\n    const multiple = multipleSelectOperations.includes(operation);\n\n    const referenceDialogController = useReferenceDialog({\n            multiselect: multiple,\n            path,\n            collection,\n            onSingleEntitySelected,\n            onMultipleEntitiesSelected,\n            selectedEntityIds,\n            onClose: () => {\n                setHidden(false);\n            }\n        }\n    );\n\n    const doOpenDialog = () => {\n        setHidden(true);\n        referenceDialogController.open();\n    };\n\n    const buildEntry = (reference: EntityReference) => {\n        return (\n            <ReferencePreview\n                disabled={!path}\n                previewProperties={previewProperties}\n                size={\"medium\"}\n                onClick={doOpenDialog}\n                reference={reference}\n                hover={true}\n                allowEntityNavigation={false}\n            />\n        );\n    };\n\n    return (\n\n        <div className=\"flex w-[440px] flex-row\">\n            <div className=\"w-[140px]\">\n                <Select value={operation}\n                        onValueChange={(value) => {\n                            updateFilter(value as VirtualTableWhereFilterOp, internalValue);\n                        }}\n                        renderValue={(op) => operationLabels[op as VirtualTableWhereFilterOp]}>\n                    {possibleOperations.map((op) => (\n                        <SelectItem key={op} value={op}>\n                            {operationLabels[op]}\n                        </SelectItem>\n                    ))}\n                </Select>\n            </div>\n\n            <div className=\"flex-grow ml-2 h-full gap-2 flex flex-col\">\n\n                {internalValue && Array.isArray(internalValue) && <div>\n                    {internalValue.map((ref, index) => buildEntry(ref))}\n                </div>}\n\n                {internalValue && !Array.isArray(internalValue) && <div>\n                    {buildEntry(internalValue)}\n                </div>}\n\n                {(!internalValue || (Array.isArray(internalValue) && internalValue.length === 0)) &&\n                    <Button onClick={doOpenDialog}\n                            variant={\"outlined\"}\n                            size={\"large\"}\n                            className=\"h-full w-full\">\n                        {multiple ? \"Select references\" : \"Select reference\"}\n                    </Button>\n                }\n\n                {!isArray && <Label\n                    className=\"border cursor-pointer rounded-md p-2 flex items-center gap-2 [&:has(:checked)]:bg-gray-100 dark:[&:has(:checked)]:bg-gray-800\"\n                    htmlFor=\"null-filter\"\n                >\n                    <Checkbox id=\"null-filter\"\n                              checked={internalValue === null}\n                              size={\"small\"}\n                              onCheckedChange={(checked) => {\n                                  if (internalValue !== null)\n                                      updateFilter(operation, null);\n                                  else updateFilter(operation, undefined);\n                              }}/>\n                    Filter for null values\n                </Label>}\n\n            </div>\n\n        </div>\n    );\n\n}\n","import React, { useState } from \"react\";\nimport { EnumValuesChip } from \"../../../preview\";\nimport { VirtualTableWhereFilterOp } from \"../../VirtualTable\";\nimport { Checkbox, ClearIcon, IconButton, Label, Select, SelectItem, TextField } from \"@firecms/ui\";\nimport { EnumValueConfig } from \"../../../types\";\n\ninterface StringNumberFilterFieldProps {\n    name: string,\n    dataType: \"string\" | \"number\";\n    value?: [op: VirtualTableWhereFilterOp, fieldValue: any];\n    setValue: (value?: [op: VirtualTableWhereFilterOp, newValue: any]) => void;\n    isArray?: boolean;\n    enumValues?: EnumValueConfig[];\n    title?: string;\n}\n\nconst operationLabels = {\n    \"==\": \"==\",\n    \"!=\": \"!=\",\n    \">\": \">\",\n    \"<\": \"<\",\n    \">=\": \">=\",\n    \"<=\": \"<=\",\n    in: \"In\",\n    \"not-in\": \"Not in\",\n    \"array-contains\": \"Contains\",\n    \"array-contains-any\": \"Any\"\n};\n\nconst multipleSelectOperations = [\"array-contains-any\", \"in\", \"not-in\"];\n\nexport function StringNumberFilterField({\n                                            name,\n                                            value,\n                                            setValue,\n                                            dataType,\n                                            isArray,\n                                            enumValues,\n                                            title\n                                        }: StringNumberFilterFieldProps) {\n\n    const possibleOperations: (keyof typeof operationLabels) [] = isArray\n        ? [\"array-contains\"]\n        : [\"==\", \"!=\", \">\", \"<\", \">=\", \"<=\"];\n\n    if (enumValues)\n        isArray\n            ? possibleOperations.push(\"array-contains-any\")\n            : possibleOperations.push(\"in\", \"not-in\");\n\n    const [fieldOperation, fieldValue] = value || [possibleOperations[0], undefined];\n    const [operation, setOperation] = useState<VirtualTableWhereFilterOp>(fieldOperation);\n    const [internalValue, setInternalValue] = useState<string | number | string[] | number[] | null | undefined>(fieldValue);\n\n    function updateFilter(op: VirtualTableWhereFilterOp, val: string | number | string[] | number[] | null | undefined) {\n        let newValue = val;\n        const prevOpIsArray = multipleSelectOperations.includes(operation);\n        const newOpIsArray = multipleSelectOperations.includes(op);\n        if (prevOpIsArray !== newOpIsArray) {\n            // @ts-ignore\n            newValue = newOpIsArray ? (typeof val === \"string\" || typeof val === \"number\" ? [val] : []) : undefined;\n        }\n\n        if (typeof newValue === \"number\" && isNaN(newValue))\n            newValue = undefined;\n\n        setOperation(op);\n        setInternalValue(newValue);\n\n        const hasNewValue = newValue !== null && Array.isArray(newValue)\n            ? newValue.length > 0\n            : newValue !== undefined;\n        if (op && hasNewValue) {\n            setValue(\n                [op, newValue]\n            );\n        } else {\n            setValue(\n                undefined\n            );\n        }\n    }\n\n    const multiple = multipleSelectOperations.includes(operation);\n    return (\n\n        <div className=\"flex w-[440px]\">\n            <div className={\"w-[80px]\"}>\n                <Select value={operation}\n                        position={\"item-aligned\"}\n                        onValueChange={(value) => {\n                            updateFilter(value as VirtualTableWhereFilterOp, internalValue);\n                        }}\n                        renderValue={(op) => operationLabels[op as VirtualTableWhereFilterOp]}>\n                    {possibleOperations.map((op) => (\n                        <SelectItem key={op} value={op}>\n                            {operationLabels[op]}\n                        </SelectItem>\n                    ))}\n                </Select>\n            </div>\n\n            <div className=\"flex-grow ml-2 flex flex-col gap-2\">\n\n                {!enumValues && <TextField\n                    type={dataType === \"number\" ? \"number\" : undefined}\n                    value={internalValue !== undefined && internalValue != null ? String(internalValue) : \"\"}\n                    onChange={(evt) => {\n                        const val = dataType === \"number\"\n                            ? parseFloat(evt.target.value)\n                            : evt.target.value;\n                        updateFilter(operation, val);\n                    }}\n                    endAdornment={internalValue && <IconButton\n                        onClick={(e) => updateFilter(operation, undefined)}>\n                        <ClearIcon/>\n                    </IconButton>}\n                />}\n\n                {enumValues &&\n                    <Select\n                        position={\"item-aligned\"}\n                        value={internalValue !== undefined\n                            ? (Array.isArray(internalValue) ? internalValue.map(e => String(e)) : String(internalValue))\n                            : isArray ? [] : \"\"}\n                        onValueChange={(value) => {\n                            if (value !== \"\")\n                                updateFilter(operation, dataType === \"number\" ? parseInt(value as string) : value as string)\n                        }}\n                        multiple={multiple}\n                        endAdornment={internalValue && <IconButton\n                            className=\"absolute right-2 top-3\"\n                            onClick={(e) => updateFilter(operation, undefined)}>\n                            <ClearIcon/>\n                        </IconButton>}\n                        renderValue={(enumKey) => {\n                            if (enumKey === null)\n                                return \"Filter for null values\";\n\n                            return <EnumValuesChip\n                                key={`select_value_${name}_${enumKey}`}\n                                enumKey={enumKey}\n                                enumValues={enumValues}\n                                size={\"small\"}/>;\n                        }}>\n                        {enumValues.map((enumConfig) => (\n                            <SelectItem key={`select_value_${name}_${enumConfig.id}`}\n                                        value={String(enumConfig.id)}>\n                                <EnumValuesChip\n                                    enumKey={String(enumConfig.id)}\n                                    enumValues={enumValues}\n                                    size={\"small\"}/>\n                            </SelectItem>\n                        ))}\n                    </Select>\n                }\n\n                {!isArray && <Label\n                    className=\"border cursor-pointer rounded-md p-2 flex items-center gap-2 [&:has(:checked)]:bg-gray-100 dark:[&:has(:checked)]:bg-gray-800\"\n                    htmlFor=\"null-filter\"\n                >\n                    <Checkbox id=\"null-filter\"\n                              checked={internalValue === null}\n                              size={\"small\"}\n                              onCheckedChange={(checked) => {\n                                  if (internalValue !== null)\n                                      updateFilter(operation, null);\n                                  else updateFilter(operation, undefined);\n                              }}/>\n                    Filter for null values\n                </Label>}\n\n            </div>\n\n        </div>\n    );\n\n}\n","import React from \"react\";\nimport { VirtualTableWhereFilterOp } from \"../../VirtualTable\";\nimport { BooleanSwitchWithLabel } from \"@firecms/ui\";\n\ninterface BooleanFieldProps {\n    name: string,\n    value?: [op: VirtualTableWhereFilterOp, fieldValue: any];\n    setValue: (value?: [op: VirtualTableWhereFilterOp, newValue: any]) => void;\n    title?: string;\n}\n\nexport function BooleanFilterField({\n                                       name,\n                                       title,\n                                       value,\n                                       setValue\n                                   }: BooleanFieldProps) {\n\n    function updateFilter(val?: boolean) {\n        if (val !== undefined) {\n            setValue(\n                [\"==\", val]\n            );\n        } else {\n            setValue(\n                undefined\n            );\n        }\n    }\n\n    const valueSetToTrue = value && value[1];\n    const valueSet = !!value;\n\n    return (\n        <div className=\"w-[300px]\">\n            <BooleanSwitchWithLabel\n                value={valueSetToTrue}\n                allowIndeterminate={true}\n                onValueChange={(v: boolean | null) => updateFilter(v === null ? undefined : v)}\n                label={!valueSet\n                    ? \"No filter\"\n                    : valueSetToTrue\n                        ? `${title} is true`\n                        : `${title} is false`}\n            />\n        </div>\n    );\n}\n","import React, { useState } from \"react\";\nimport { VirtualTableWhereFilterOp } from \"../../VirtualTable\";\nimport { Checkbox, DateTimeField, Label, Select, SelectItem } from \"@firecms/ui\";\nimport { useCustomizationController } from \"../../../hooks\";\n\ninterface DateTimeFilterFieldProps {\n    name: string,\n    mode?: \"date\" | \"date_time\",\n    value?: [op: VirtualTableWhereFilterOp, fieldValue: any];\n    setValue: (value?: [op: VirtualTableWhereFilterOp, newValue: any]) => void;\n    isArray?: boolean;\n    title?: string;\n}\n\nconst operationLabels: Record<VirtualTableWhereFilterOp, string> = {\n    \"==\": \"==\",\n    \"!=\": \"!=\",\n    \">\": \">\",\n    \"<\": \"<\",\n    \">=\": \">=\",\n    \"<=\": \"<=\",\n    \"not-in\": \"not in\",\n    in: \"in\",\n    \"array-contains\": \"Contains\",\n    \"array-contains-any\": \"Any\"\n};\n\nconst multipleSelectOperations = [\"array-contains-any\", \"in\"];\n\nexport function DateTimeFilterField({\n                                        name,\n                                        isArray,\n                                        mode,\n                                        value,\n                                        setValue,\n                                        title\n                                    }: DateTimeFilterFieldProps) {\n\n    const { locale } = useCustomizationController();\n    const possibleOperations: (keyof typeof operationLabels) [] = isArray\n        ? [\"array-contains\"]\n        : [\"==\", \"!=\", \">\", \"<\", \">=\", \"<=\"];\n\n    const [fieldOperation, fieldValue] = value || [possibleOperations[0], undefined];\n    const [operation, setOperation] = useState<VirtualTableWhereFilterOp>(fieldOperation);\n    const [internalValue, setInternalValue] = useState<Date | null | undefined>(fieldValue);\n\n    function updateFilter(op: VirtualTableWhereFilterOp, val: Date | undefined | null) {\n        let newValue: Date | null | undefined = val;\n        const prevOpIsArray = multipleSelectOperations.includes(operation);\n        const newOpIsArray = multipleSelectOperations.includes(op);\n        if (prevOpIsArray !== newOpIsArray) {\n            // @ts-ignore\n            newValue = newOpIsArray ? (val ? [val] : []) : \"\";\n        }\n\n        setOperation(op);\n        setInternalValue(newValue === null ? undefined : newValue);\n\n        const hasNewValue = newValue !== null && Array.isArray(newValue)\n            ? newValue.length > 0\n            : newValue !== undefined;\n        if (op && hasNewValue) {\n            setValue(\n                [op, newValue]\n            );\n        } else {\n            setValue(\n                undefined\n            );\n        }\n    }\n\n    return (\n\n        <div className=\"flex w-[440px]\">\n            <div className=\"w-[80px]\">\n                <Select value={operation}\n                        onValueChange={(value) => {\n                            updateFilter(value as VirtualTableWhereFilterOp, internalValue);\n                        }}\n                        renderValue={(op) => operationLabels[op as VirtualTableWhereFilterOp]}>\n                    {possibleOperations.map((op) => (\n                        <SelectItem key={op} value={op}>\n                            {operationLabels[op]}\n                        </SelectItem>\n                    ))}\n                </Select>\n            </div>\n\n            <div className=\"flex-grow ml-2 flex flex-col gap-2\">\n\n                <DateTimeField\n                    mode={mode}\n                    size={\"medium\"}\n                    locale={locale}\n                    value={internalValue ?? undefined}\n                    onChange={(dateValue: Date | undefined) => {\n                        updateFilter(operation, dateValue === null ? undefined : dateValue);\n                    }}\n                    clearable={true}\n                />\n\n                <Label\n                    className=\"border cursor-pointer rounded-md p-2 flex items-center gap-2 [&:has(:checked)]:bg-gray-100 dark:[&:has(:checked)]:bg-gray-800\"\n                    htmlFor=\"null-filter\"\n                >\n                    <Checkbox id=\"null-filter\"\n                              checked={internalValue === null}\n                              size={\"small\"}\n                              onCheckedChange={(checked) => {\n                                  if (internalValue !== null)\n                                      updateFilter(operation, null);\n                                  else updateFilter(operation, undefined);\n                              }}/>\n                    Filter for null values\n                </Label>\n\n            </div>\n\n        </div>\n    );\n\n}\n","import React, { useCallback, useEffect, useRef } from \"react\";\nimport equal from \"react-fast-compare\";\nimport {\n    CollectionSize,\n    Entity,\n    EntityTableController,\n    FilterValues,\n    ResolvedProperty,\n    SelectedCellProps\n} from \"../../types\";\nimport { CellRendererParams, VirtualTable, VirtualTableColumn } from \"../VirtualTable\";\nimport { enumToObjectEntries } from \"../../util\";\nimport { OnCellValueChange, OnColumnResizeParams } from \"../common\";\nimport { FilterFormFieldProps } from \"../VirtualTable/VirtualTableHeader\";\nimport { ReferenceFilterField } from \"./filters/ReferenceFilterField\";\nimport { StringNumberFilterField } from \"./filters/StringNumberFilterField\";\nimport { BooleanFilterField } from \"./filters/BooleanFilterField\";\nimport { DateTimeFilterField } from \"./filters/DateTimeFilterField\";\nimport { useOutsideAlerter } from \"@firecms/ui\";\nimport { SelectableTableContext } from \"./SelectableTableContext\";\n\nexport type SelectableTableProps<M extends Record<string, any>> = {\n\n    /**\n     * Callback when a cell value changes.\n     */\n    onValueChange?: OnCellValueChange<any, M>;\n\n    columns: VirtualTableColumn[];\n\n    cellRenderer: React.ComponentType<CellRendererParams<Entity<M>>>;\n\n    /**\n     * Builder for creating the buttons in each row\n     * @param entity\n     * @param size\n     */\n    tableRowActionsBuilder?: (params: {\n        entity: Entity<M>,\n        size: CollectionSize,\n        width: number,\n        frozen?: boolean\n    }) => React.ReactNode;\n\n    /**\n     * Callback when anywhere on the table is clicked\n     */\n    onEntityClick?(entity: Entity<M>): void;\n\n    /**\n     * Callback when a column is resized\n     */\n    onColumnResize?(params: OnColumnResizeParams): void;\n\n    /**\n     * Should apply a different style to a row when hovering\n     */\n    hoverRow?: boolean;\n\n    /**\n     * Controller holding the logic for the table\n     * {@link useDataSourceEntityCollectionTableController}\n     * {@link EntityTableController}\n     */\n    tableController: EntityTableController<M>;\n\n    filterable?: boolean;\n\n    sortable?: boolean;\n\n    inlineEditing?: boolean;\n\n    forceFilter?: FilterValues<keyof M extends string ? keyof M : never>;\n\n    highlightedRow?: (data: Entity<M>) => boolean;\n\n    size?: CollectionSize;\n\n    emptyComponent?: React.ReactNode;\n\n    endAdornment?: React.ReactNode;\n\n    AddColumnComponent?: React.ComponentType;\n}\n\n/**\n * This component is in charge of rendering a collection table with a high\n * degree of customization.\n *\n * This component is used internally by {@link EntityCollectionView} and\n * {@link useReferenceDialog}\n *\n * Please note that you only need to use this component if you are building\n * a custom view. If you just need to create a default view you can do it\n * exclusively with config options.\n *\n * If you want to bind a {@link EntityCollection} to a table with the default\n * options you see in collections in the top level navigation, you can\n * check {@link EntityCollectionView}.\n *\n * The data displayed in the table is managed by a {@link EntityTableController}.\n * You can build the default, bound to a path in the datasource, by using the hook\n * {@link useDataSourceEntityCollectionTableController}\n *\n * @see EntityCollectionTableProps\n * @see EntityCollectionView\n * @see VirtualTable\n * @group Components\n */\nexport const SelectableTable = React.memo<SelectableTableProps<any>>(\n    function SelectableTable<M extends Record<string, any>>\n    ({\n         onValueChange,\n         cellRenderer,\n         onEntityClick,\n         onColumnResize,\n         hoverRow = true,\n         size,\n         inlineEditing = false,\n         tableController:\n             {\n                 data,\n                 dataLoading,\n                 noMoreToLoad,\n                 dataLoadingError,\n                 filterValues,\n                 setFilterValues,\n                 sortBy,\n                 setSortBy,\n                 setSearchString,\n                 clearFilter,\n                 itemCount,\n                 setItemCount,\n                 pageSize = 50,\n                 paginationEnabled,\n                 checkFilterCombination,\n                 setPopupCell\n             },\n         filterable = true,\n         emptyComponent,\n         columns,\n         forceFilter,\n         highlightedRow,\n         endAdornment,\n         AddColumnComponent\n     }: SelectableTableProps<M>) {\n\n        const ref = useRef<HTMLDivElement>(null);\n\n        const [selectedCell, setSelectedCell] = React.useState<SelectedCellProps<M> | undefined>(undefined);\n\n        const loadNextPage = () => {\n            if (!paginationEnabled || dataLoading || noMoreToLoad)\n                return;\n            if (itemCount !== undefined)\n                setItemCount?.(itemCount + pageSize);\n        };\n\n        const resetPagination = useCallback(() => {\n            setItemCount?.(pageSize);\n        }, [pageSize]);\n\n        const onRowClick = useCallback(({ rowData }: {\n            rowData: Entity<M>\n        }) => {\n            if (inlineEditing)\n                return;\n            return onEntityClick && onEntityClick(rowData);\n        }, [onEntityClick, inlineEditing]);\n\n        useOutsideAlerter(ref,\n            () => {\n                if (selectedCell) {\n                    unselect();\n                }\n            },\n            Boolean(selectedCell));\n\n        // on ESC key press\n        useEffect(() => {\n            const escFunction = (event: any) => {\n                if (event.keyCode === 27) {\n                    unselect();\n                }\n            };\n            document.addEventListener(\"keydown\", escFunction, false);\n            return () => {\n                document.removeEventListener(\"keydown\", escFunction, false);\n            };\n        });\n\n        const select = useCallback((cell?: SelectedCellProps<M>) => {\n            setSelectedCell(cell);\n        }, []);\n\n        const unselect = useCallback(() => {\n            setSelectedCell(undefined);\n        }, []);\n\n        const onFilterUpdate = useCallback((updatedFilterValues?: FilterValues<any>) => {\n            setFilterValues?.({ ...updatedFilterValues, ...forceFilter } as FilterValues<any>);\n        }, [forceFilter]);\n\n        return (\n            <SelectableTableContext.Provider\n                value={{\n                    setPopupCell: setPopupCell as ((cell?: SelectedCellProps<M>) => void),\n                    select,\n                    onValueChange,\n                    size: size ?? \"m\",\n                    selectedCell,\n                }}\n            >\n                <div className=\"h-full w-full flex flex-col bg-white dark:bg-gray-950\"\n                     ref={ref}>\n\n                    <VirtualTable\n                        data={data}\n                        columns={columns}\n                        cellRenderer={cellRenderer}\n                        onRowClick={inlineEditing ? undefined : (onEntityClick ? onRowClick : undefined)}\n                        onEndReached={loadNextPage}\n                        onResetPagination={resetPagination}\n                        error={dataLoadingError}\n                        paginationEnabled={paginationEnabled}\n                        onColumnResize={onColumnResize}\n                        size={size}\n                        loading={dataLoading}\n                        filter={filterValues}\n                        onFilterUpdate={setFilterValues ? onFilterUpdate : undefined}\n                        sortBy={sortBy}\n                        onSortByUpdate={setSortBy as ((sortBy?: [string, \"asc\" | \"desc\"]) => void)}\n                        hoverRow={hoverRow}\n                        checkFilterCombination={checkFilterCombination}\n                        createFilterField={filterable ? createFilterField : undefined}\n                        rowClassName={useCallback((entity: Entity<M>) => {\n                            return highlightedRow?.(entity) ? \"bg-gray-100 bg-opacity-75 dark:bg-gray-800 dark:bg-opacity-75\" : \"\";\n                        }, [highlightedRow])}\n                        className=\"flex-grow\"\n                        emptyComponent={emptyComponent}\n                        endAdornment={endAdornment}\n                        AddColumnComponent={AddColumnComponent}\n                    />\n\n                </div>\n            </SelectableTableContext.Provider>\n        );\n\n    },\n    equal\n);\n\nfunction createFilterField({\n                               id,\n                               filterValue,\n                               setFilterValue,\n                               column,\n                               hidden,\n                               setHidden\n                           }: FilterFormFieldProps<{\n    resolvedProperty: ResolvedProperty,\n    disabled: boolean,\n}>): React.ReactNode {\n\n    if (!column.custom) {\n        return null;\n    }\n\n    const { resolvedProperty } = column.custom;\n\n    const isArray = resolvedProperty?.dataType === \"array\";\n    const baseProperty: ResolvedProperty = isArray ? resolvedProperty.of : resolvedProperty;\n    if (!baseProperty) {\n        return null;\n    }\n    if (baseProperty.dataType === \"reference\") {\n        return <ReferenceFilterField value={filterValue}\n                                     setValue={setFilterValue}\n                                     name={id as string}\n                                     isArray={isArray}\n                                     path={baseProperty.path}\n                                     title={resolvedProperty?.name}\n                                     previewProperties={baseProperty?.previewProperties}\n                                     hidden={hidden}\n                                     setHidden={setHidden}/>;\n    } else if (baseProperty.dataType === \"number\" || baseProperty.dataType === \"string\") {\n        const name = baseProperty.name;\n        const enumValues = baseProperty.enumValues ? enumToObjectEntries(baseProperty.enumValues) : undefined;\n        return <StringNumberFilterField value={filterValue}\n                                        setValue={setFilterValue}\n                                        name={id as string}\n                                        dataType={baseProperty.dataType}\n                                        isArray={isArray}\n                                        enumValues={enumValues}\n                                        title={name}/>;\n    } else if (baseProperty.dataType === \"boolean\") {\n        const name = baseProperty.name;\n        return <BooleanFilterField value={filterValue}\n                                   setValue={setFilterValue}\n                                   name={id as string}\n                                   title={name}/>;\n\n    } else if (baseProperty.dataType === \"date\") {\n        const title = baseProperty.name;\n        return <DateTimeFilterField value={filterValue}\n                                    setValue={setFilterValue}\n                                    name={id as string}\n                                    mode={baseProperty.mode}\n                                    isArray={isArray}\n                                    title={title}/>;\n    }\n\n    return (\n        <div>{`Currently the filter field ${resolvedProperty.dataType} is not supported`}</div>\n    );\n}\n\nfunction filterableProperty(property: ResolvedProperty, partOfArray = false): boolean {\n    if (partOfArray) {\n        return [\"string\", \"number\", \"date\", \"reference\"].includes(property.dataType);\n    }\n    if (property.dataType === \"array\") {\n        if (property.of)\n            return filterableProperty(property.of, true);\n        else\n            return false;\n    }\n    return [\"string\", \"number\", \"boolean\", \"date\", \"reference\", \"array\"].includes(property.dataType);\n}\n","import React, { useCallback, useMemo, useRef } from \"react\";\nimport { AdditionalFieldDelegate, CollectionSize, Entity, FireCMSContext, User } from \"../../types\";\nimport { PropertyTableCell } from \"./PropertyTableCell\";\nimport { ErrorBoundary } from \"../ErrorBoundary\";\nimport { useFireCMSContext, useLargeLayout } from \"../../hooks\";\nimport { CellRendererParams, VirtualTableColumn } from \"../VirtualTable\";\nimport { getValueInPath } from \"../../util\";\nimport { getRowHeight } from \"../VirtualTable/common\";\nimport { EntityCollectionRowActions } from \"./EntityCollectionRowActions\";\nimport { CollectionTableToolbar } from \"./internal/CollectionTableToolbar\";\nimport { EntityCollectionTableProps } from \"./EntityCollectionTableProps\";\nimport { EntityTableCell } from \"./internal/EntityTableCell\";\nimport { CustomFieldValidator } from \"../../form/validation\";\nimport { renderSkeletonText } from \"../../preview\";\nimport { propertiesToColumns } from \"./column_utils\";\nimport { ErrorView } from \"../ErrorView\";\nimport { SelectableTable } from \"../SelectableTable/SelectableTable\";\n\n/**\n * This component is in charge of rendering a collection table with a high\n * degree of customization.\n *\n * This component is used internally by {@link EntityCollectionView} and\n * {@link useReferenceDialog}\n *\n * Please note that you only need to use this component if you are building\n * a custom view. If you just need to create a default view you can do it\n * exclusively with config options.\n *\n * If you want to bind a {@link EntityCollection} to a table with the default\n * options you see in collections in the top level navigation, you can\n * check {@link EntityCollectionView}.\n *\n * The data displayed in the table is managed by a {@link EntityTableController}.\n * You can build the default, bound to a path in the datasource, by using the hook\n * {@link useDataSourceEntityCollectionTableController}\n *\n * @see EntityCollectionTableProps\n * @see EntityCollectionView\n * @see VirtualTable\n * @group Components\n */\nexport const EntityCollectionTable = function EntityCollectionTable<M extends Record<string, any>, UserType extends User>\n({\n     forceFilter,\n     actionsStart,\n     actions,\n     title,\n     tableRowActionsBuilder,\n     uniqueFieldValidator,\n     getPropertyFor,\n     onValueChange,\n     selectionController,\n     highlightedEntities,\n     onEntityClick,\n     onColumnResize,\n     onSizeChanged,\n     textSearchEnabled = false,\n     hoverRow = true,\n     inlineEditing = false,\n     additionalFields,\n     displayedColumnIds,\n     defaultSize,\n     properties,\n     tableController,\n     filterable = true,\n     sortable = true,\n     endAdornment,\n     AddColumnComponent,\n     AdditionalHeaderWidget,\n     additionalIDHeaderWidget,\n     emptyComponent,\n     getIdColumnWidth,\n     onTextSearchClick,\n     textSearchLoading\n }: EntityCollectionTableProps<M>) {\n\n    const ref = useRef<HTMLDivElement>(null);\n\n    const largeLayout = useLargeLayout();\n    const disabledFilterChange = Boolean(forceFilter);\n    const selectedEntities = (selectionController?.selectedEntities?.length > 0 ? selectionController?.selectedEntities : highlightedEntities)?.filter(Boolean);\n\n    const context: FireCMSContext<UserType> = useFireCMSContext();\n\n    const [size, setSize] = React.useState<CollectionSize>(defaultSize ?? \"m\");\n\n    const selectedEntityIds = selectedEntities?.map(e => e.id);\n\n    const updateSize = useCallback((size: CollectionSize) => {\n        if (onSizeChanged)\n            onSizeChanged(size);\n        setSize(size);\n    }, []);\n\n    const onTextSearch = useCallback((newSearchString?: string) => tableController.setSearchString?.(newSearchString), []);\n\n    const additionalFieldsMap: Record<string, AdditionalFieldDelegate<M, UserType>> = useMemo(() => {\n        return (additionalFields\n            ? additionalFields\n                .map((aC) => ({ [aC.key]: aC as AdditionalFieldDelegate<M, any> }))\n                .reduce((a, b) => ({ ...a, ...b }), {})\n            : {}) as Record<string, AdditionalFieldDelegate<M, UserType>>;\n    }, [additionalFields]);\n\n    const customFieldValidator: CustomFieldValidator | undefined = uniqueFieldValidator;\n\n    const propertyCellRenderer = ({\n                                      column,\n                                      columnIndex,\n                                      rowData,\n                                      rowIndex\n                                  }: CellRendererParams<any>) => {\n\n        const entity: Entity<M> = rowData;\n\n        const propertyKey = column.key;\n\n        let disabled = column.custom?.disabled;\n        const propertyValue = entity.values ? getValueInPath(entity.values, propertyKey) : undefined;\n        const property = getPropertyFor?.({\n            propertyKey,\n            propertyValue,\n            entity\n        }) ?? column.custom.resolvedProperty;\n        if (!property?.disabled) {\n            disabled = false;\n        }\n\n        if (!property) {\n            return null;\n        }\n\n        return (\n            <ErrorBoundary>\n                {entity\n                    ? <PropertyTableCell\n                        key={`property_table_cell_${entity.id}_${propertyKey}`}\n                        readonly={!inlineEditing}\n                        align={column.align ?? \"left\"}\n                        propertyKey={propertyKey as string}\n                        property={property}\n                        value={entity?.values ? getValueInPath(entity.values, propertyKey) : undefined}\n                        customFieldValidator={customFieldValidator}\n                        columnIndex={columnIndex}\n                        width={column.width}\n                        height={getRowHeight(size)}\n                        entity={entity}\n                        disabled={disabled}\n                        path={entity.path}/>\n                    : renderSkeletonText()\n                }\n            </ErrorBoundary>);\n\n    };\n\n    const additionalCellRenderer = useCallback(({\n                                                    column,\n                                                    rowData,\n                                                    width\n                                                }: CellRendererParams<any>) => {\n\n        const entity: Entity<M> = rowData;\n\n        const additionalField = additionalFieldsMap[column.key as string];\n        const value = additionalField.dependencies\n            ? Object.entries(entity.values)\n                .filter(([key, value]) => additionalField.dependencies!.includes(key as Extract<keyof M, string>))\n                .reduce((a, b) => ({ ...a, ...b }), {})\n            : entity;\n\n        const Builder = additionalField.Builder;\n        if (!Builder && !additionalField.value) {\n            throw new Error(\"When using additional fields you need to provide a Builder or a value\");\n        }\n\n        const child = Builder\n            ? <Builder entity={entity} context={context}/>\n            : <>{additionalField.value?.({\n                entity,\n                context\n            })}</>;\n\n        return (\n            <EntityTableCell\n                key={`additional_table_cell_${entity.id}_${column.key}`}\n                width={width}\n                size={size}\n                value={value}\n                selected={false}\n                disabled={true}\n                align={\"left\"}\n                allowScroll={false}\n                showExpandIcon={false}\n                disabledTooltip={\"This column can't be edited directly\"}\n            >\n                <ErrorBoundary>\n                    {child}\n                </ErrorBoundary>\n            </EntityTableCell>\n        );\n\n    }, [size, selectedEntityIds]);\n\n    const collectionColumns: VirtualTableColumn[] = (() => {\n        const columnsResult: VirtualTableColumn[] = propertiesToColumns({\n            properties,\n            sortable,\n            forceFilter,\n            disabledFilter: disabledFilterChange,\n            AdditionalHeaderWidget\n        });\n\n        const additionalTableColumns: VirtualTableColumn[] = additionalFields\n            ? additionalFields.map((additionalField) =>\n                ({\n                    key: additionalField.key,\n                    align: \"left\",\n                    sortable: false,\n                    title: additionalField.name,\n                    width: additionalField.width ?? 200\n                }))\n            : [];\n        return [...columnsResult, ...additionalTableColumns];\n    })();\n\n    const idColumn: VirtualTableColumn = {\n        key: \"id_ewcfedcswdf3\",\n        width: getIdColumnWidth?.() ?? (largeLayout ? 160 : 130),\n        title: \"ID\",\n        resizable: false,\n        frozen: largeLayout,\n        headerAlign: \"center\",\n        align: \"center\",\n        AdditionalHeaderWidget: () => additionalIDHeaderWidget\n    }\n\n    const columns: VirtualTableColumn[] = [\n        idColumn,\n        ...(displayedColumnIds\n            ? displayedColumnIds\n                .map((p) => {\n                    return collectionColumns.find(c => c.key === p.key);\n                }).filter(Boolean)\n            : collectionColumns) as VirtualTableColumn[]\n    ];\n\n    const cellRenderer = (props: CellRendererParams<any>) => {\n        const column = props.column;\n        const columns = props.columns;\n        const columnKey = column.key;\n\n        try {\n            if (props.columnIndex === 0) {\n                if (tableRowActionsBuilder)\n                    return tableRowActionsBuilder({\n                        entity: props.rowData,\n                        size,\n                        width: column.width,\n                        frozen: column.frozen\n                    });\n                else\n                    return <EntityCollectionRowActions entity={props.rowData}\n                                                       width={column.width}\n                                                       frozen={column.frozen}\n                                                       isSelected={false}\n                                                       size={size}/>;\n            } else if (additionalFieldsMap[columnKey]) {\n                return additionalCellRenderer(props);\n            } else if (props.columnIndex < columns.length + 1) {\n                return propertyCellRenderer(props);\n            } else {\n                throw Error(\"Internal: columns not mapped properly\");\n            }\n        } catch (e: any) {\n            console.error(\"Error rendering cell\", e);\n            return <EntityTableCell\n                size={size}\n                width={column.width}\n                saved={false}\n                value={null}\n                align={\"left\"}\n                fullHeight={false}\n                disabled={true}>\n                <ErrorView error={e}/>\n            </EntityTableCell>;\n        }\n    }\n\n    return (\n\n        <div ref={ref}\n             className=\"h-full w-full flex flex-col bg-white dark:bg-gray-950\">\n\n            <CollectionTableToolbar\n                onTextSearch={textSearchEnabled ? onTextSearch : undefined}\n                textSearchLoading={textSearchLoading}\n                onTextSearchClick={textSearchEnabled ? onTextSearchClick : undefined}\n                size={size}\n                onSizeChanged={updateSize}\n                title={title}\n                actionsStart={actionsStart}\n                actions={actions}\n                loading={tableController.dataLoading}/>\n\n            <SelectableTable columns={columns}\n                             size={size}\n                             inlineEditing={inlineEditing}\n                             cellRenderer={cellRenderer}\n                             onEntityClick={onEntityClick}\n                             highlightedRow={useCallback((entity: Entity<M>) => selectedEntityIds?.includes(entity.id) ?? false, [selectedEntityIds])}\n                             tableController={tableController}\n                             onValueChange={onValueChange}\n                             onColumnResize={onColumnResize}\n                             hoverRow={hoverRow}\n                             filterable={filterable}\n                             emptyComponent={emptyComponent}\n                             endAdornment={endAdornment}\n                             AddColumnComponent={AddColumnComponent}/>\n\n        </div>\n    );\n\n};\n","import { Entity } from \"../../types\";\n\nexport interface DataOrderProps<M extends Record<string, any>> {\n    data: Entity<M>[];\n    entitiesDisplayedFirst?: Entity<M>[];\n}\n\n/**\n * This hook is used to have some entities at the beginning of data.\n * @param path\n * @param entitiesDisplayedFirst\n * @group Hooks and utilities\n */\nexport function useDataOrder<M extends Record<string, any>>(\n    {\n        data,\n        entitiesDisplayedFirst\n    }: DataOrderProps<M>): Entity<M>[] {\n\n    if (!entitiesDisplayedFirst)\n        return data;\n\n    const displayedFirstId = new Set(entitiesDisplayedFirst.map((e) => e.id));\n    return [...entitiesDisplayedFirst, ...data.filter((e) => !displayedFirstId.has(e.id))];\n\n}\n","import React from \"react\";\nimport equal from \"react-fast-compare\";\n\n/**\n * Hack to prevent data updates for incomplete callbacks from Firestore\n * triggers.\n * If any deps change, the update is immediate\n * @param data\n * @param deps\n * @param timeoutMs\n */\nexport function useDebouncedData<T>(data: T[], deps: any, timeoutMs = 5000) {\n\n    const [deferredData, setDeferredData] = React.useState(data);\n    const dataLength = React.useRef(deferredData.length ?? 0);\n    const pendingUpdate = React.useRef(false);\n    const currentDeps = React.useRef(deps);\n\n    const haveDepsChanged = !equal(currentDeps.current, deps);\n    const immediateUpdate = data.length >= dataLength.current || haveDepsChanged;\n\n    React.useEffect(() => {\n\n        const performUpdate = () => {\n            if (!equal(deferredData, data)) {\n                currentDeps.current = deps;\n                dataLength.current = data.length;\n                setDeferredData(data);\n            }\n            pendingUpdate.current = false;\n        };\n\n        pendingUpdate.current = true;\n\n        let handler: any;\n        if (immediateUpdate)\n            performUpdate()\n        else\n            handler = setTimeout(performUpdate, timeoutMs);\n\n        return () => {\n            clearTimeout(handler);\n            if (pendingUpdate.current && immediateUpdate)\n                performUpdate();\n        };\n    }, [data, timeoutMs, deps, immediateUpdate]);\n\n    return immediateUpdate ? data : deferredData;\n}\n","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\n\nimport { useDataSource, useFireCMSContext, useNavigationController } from \"../../hooks\";\nimport { useDataOrder } from \"../../hooks/data/useDataOrder\";\nimport {\n    Entity,\n    EntityCollection,\n    EntityTableController,\n    FilterValues,\n    FireCMSContext,\n    SelectedCellProps,\n    User\n} from \"../../types\";\nimport { useDebouncedData } from \"./useDebouncedData\";\n\nconst DEFAULT_PAGE_SIZE = 50;\n\nexport type DataSourceEntityCollectionTableControllerProps<M extends Record<string, any> = any> = {\n    /**\n     * Full path where the data of this table is located\n     */\n    fullPath: string;\n    /**\n     * The collection that is represented by this config.\n     */\n    collection: EntityCollection<M>;\n    /**\n     * List of entities that will be displayed on top, no matter the ordering.\n     * This is used for reference fields selection\n     */\n    entitiesDisplayedFirst?: Entity<M>[];\n\n    lastDeleteTimestamp?: number;\n    forceFilter?: FilterValues<string>;\n}\n\n/**\n * Use this hook to build a controller for the {@link EntityCollectionTable}.\n * This controller is bound to data in a path in your specified datasource.\n *\n * Note that you can build your own hook returning a {@link EntityTableController}\n * if you would like to display different data.\n *\n * @param fullPath\n * @param collection\n * @param entitiesDisplayedFirst\n * @param lastDeleteTimestamp\n * @param forceFilterFromProps\n */\nexport function useDataSourceEntityCollectionTableController<M extends Record<string, any> = any, UserType extends User = User>(\n    {\n        fullPath,\n        collection,\n        entitiesDisplayedFirst,\n        lastDeleteTimestamp,\n        forceFilter: forceFilterFromProps,\n    }: DataSourceEntityCollectionTableControllerProps<M>)\n    : EntityTableController<M> {\n\n    const {\n        initialFilter,\n        initialSort,\n        forceFilter: forceFilterFromCollection\n    } = collection;\n\n    const [popupCell, setPopupCell] = React.useState<SelectedCellProps<M> | undefined>(undefined);\n    const navigation = useNavigationController();\n    const dataSource = useDataSource(collection);\n    const resolvedPath = useMemo(() => navigation.resolveAliasesFrom(fullPath), [fullPath, navigation.resolveAliasesFrom]);\n\n    const forceFilter = forceFilterFromProps ?? forceFilterFromCollection;\n    const paginationEnabled = collection.pagination === undefined || Boolean(collection.pagination);\n    const pageSize = typeof collection.pagination === \"number\" ? collection.pagination : DEFAULT_PAGE_SIZE;\n\n    const [searchString, setSearchString] = React.useState<string | undefined>();\n    const [itemCount, setItemCount] = React.useState<number | undefined>(paginationEnabled ? pageSize : undefined);\n\n    const initialSortInternal = useMemo(() => {\n        if (initialSort && forceFilter && !checkFilterCombination(forceFilter, initialSort)) {\n            console.warn(\"Initial sort is not compatible with the force filter. Ignoring initial sort\");\n            return undefined;\n        }\n        return initialSort;\n    }, [initialSort, forceFilter]);\n\n    const [filterValues, setFilterValues] = React.useState<FilterValues<Extract<keyof M, string>> | undefined>(forceFilter ?? initialFilter ?? undefined);\n    const [sortBy, setSortBy] = React.useState<[Extract<keyof M, string>, \"asc\" | \"desc\"] | undefined>(initialSortInternal);\n\n    const sortByProperty = sortBy ? sortBy[0] : undefined;\n    const currentSort = sortBy ? sortBy[1] : undefined;\n\n    const context: FireCMSContext<UserType> = useFireCMSContext();\n\n    const [rawData, setRawData] = useState<Entity<M>[]>([]);\n\n    const [dataLoading, setDataLoading] = useState<boolean>(false);\n    const [dataLoadingError, setDataLoadingError] = useState<Error | undefined>();\n    const [noMoreToLoad, setNoMoreToLoad] = useState<boolean>(false);\n\n    const checkFilterCombination = useCallback((filterValues: FilterValues<any>,\n                                                sortBy?: [string, \"asc\" | \"desc\"]) => {\n        if (!dataSource.isFilterCombinationValid)\n            return true;\n        return dataSource.isFilterCombinationValid({\n            path: resolvedPath,\n            collection,\n            filterValues,\n            sortBy\n        })\n    }, []);\n\n    const clearFilter = useCallback(() => setFilterValues(forceFilter ?? undefined), [forceFilter]);\n\n    const updateFilterValues = useCallback((updatedFilter: FilterValues<Extract<keyof M, string>> | undefined) => {\n        if (forceFilter) {\n            console.warn(\"Filter is not compatible with the force filter. Ignoring filter\");\n            return;\n        }\n        if (updatedFilter && Object.keys(updatedFilter).length === 0) {\n            setFilterValues(undefined);\n        } else {\n            setFilterValues(updatedFilter);\n        }\n    }, [forceFilter]);\n\n    useEffect(() => {\n\n        setDataLoading(true);\n\n        const onEntitiesUpdate = async (entities: Entity<M>[]) => {\n            if (collection.callbacks?.onFetch) {\n                try {\n                    entities = await Promise.all(\n                        entities.map((entity) =>\n                            collection.callbacks!.onFetch!({\n                                collection,\n                                path: resolvedPath,\n                                entity,\n                                context\n                            })));\n                } catch (e: any) {\n                    console.error(e);\n                }\n            }\n            setDataLoading(false);\n            setDataLoadingError(undefined);\n            setRawData(entities.map(e => ({\n                ...e,\n                // values: sanitizeData(e.values, resolvedCollection.properties)\n            })));\n            setNoMoreToLoad(!itemCount || entities.length < itemCount);\n        };\n\n        const onError = (error: Error) => {\n            console.error(\"ERROR\", error);\n            setDataLoading(false);\n            setRawData([]);\n            setDataLoadingError(error);\n        };\n\n        if (dataSource.listenCollection) {\n            return dataSource.listenCollection<M>({\n                path: resolvedPath,\n                collection,\n                onUpdate: onEntitiesUpdate,\n                onError,\n                searchString,\n                filter: filterValues,\n                limit: itemCount,\n                startAfter: undefined,\n                orderBy: sortByProperty,\n                order: currentSort\n            });\n        } else {\n            dataSource.fetchCollection<M>({\n                path: resolvedPath,\n                collection,\n                searchString,\n                filter: filterValues,\n                limit: itemCount,\n                startAfter: undefined,\n                orderBy: sortByProperty,\n                order: currentSort\n            })\n                .then(onEntitiesUpdate)\n                .catch(onError);\n            return () => {\n            };\n        }\n    }, [resolvedPath, itemCount, currentSort, sortByProperty, filterValues, searchString]);\n\n    const orderedData = useDataOrder({\n        data: rawData,\n        entitiesDisplayedFirst\n    });\n\n    // hack to fix Firestore listeners firing with incomplete data\n    const data = useDebouncedData(orderedData, {\n        filterValues,\n        sortBy,\n        searchString,\n        lastDeleteTimestamp\n    });\n\n    return {\n        data,\n        dataLoading,\n        noMoreToLoad,\n        dataLoadingError,\n        filterValues,\n        setFilterValues: updateFilterValues,\n        sortBy,\n        setSortBy,\n        searchString,\n        setSearchString,\n        clearFilter,\n        itemCount,\n        setItemCount,\n        paginationEnabled,\n        pageSize,\n        checkFilterCombination,\n        popupCell,\n        setPopupCell\n    }\n}\n","import { useCallback, useState } from \"react\";\nimport { Entity, SelectionController } from \"../../types\";\n\nexport function useSelectionController<M extends Record<string, any> = any>(\n    onSelectionChange?: (entity: Entity<M>, selected: boolean) => void\n): SelectionController<M> {\n\n    const [selectedEntities, setSelectedEntities] = useState<Entity<M>[]>([]);\n\n    const toggleEntitySelection = useCallback((entity: Entity<M>) => {\n        let newValue;\n        if (selectedEntities.map(e => e.id).includes(entity.id)) {\n            onSelectionChange?.(entity, false);\n            newValue = selectedEntities.filter((item: Entity<M>) => item.id !== entity.id);\n        } else {\n            onSelectionChange?.(entity, true);\n            newValue = [...selectedEntities, entity];\n        }\n        setSelectedEntities(newValue);\n    }, [selectedEntities]);\n\n    const isEntitySelected = useCallback((entity: Entity<M>) => selectedEntities.map(e => e.id).includes(entity.id), [selectedEntities]);\n\n    return {\n        selectedEntities,\n        setSelectedEntities,\n        isEntitySelected,\n        toggleEntitySelection\n    };\n}\n","import { useState } from \"react\";\n\nimport { EntityCollection } from \"../../types\";\nimport { useCustomizationController, useFireCMSContext } from \"../../hooks\";\n\nexport interface UseTableSearchHelperParams<M extends Record<string, any>> {\n    collection: EntityCollection<M>;\n    fullPath: string;\n    parentCollectionIds?: string[];\n}\n\nexport function useTableSearchHelper<M extends Record<string, any>>({ collection, fullPath, parentCollectionIds }: UseTableSearchHelperParams<M>) {\n\n    const context = useFireCMSContext();\n    const customizationController = useCustomizationController();\n\n    const [textSearchLoading, setTextSearchLoading] = useState<boolean>(false);\n    const [textSearchInitialised, setTextSearchInitialised] = useState<boolean>(false);\n    let onTextSearchClick: (() => void) | undefined;\n    let textSearchEnabled = Boolean(collection.textSearchEnabled);\n    if (customizationController?.plugins) {\n        const addTextSearchClickListener = customizationController.plugins?.find(p => Boolean(p.collectionView?.onTextSearchClick));\n\n        onTextSearchClick = addTextSearchClickListener\n            ? () => {\n                setTextSearchLoading(true);\n                Promise.all(customizationController.plugins?.map(p => {\n                    if (p.collectionView?.onTextSearchClick)\n                        return p.collectionView.onTextSearchClick({ context, path: fullPath, collection, parentCollectionIds });\n                    return Promise.resolve(true);\n                }) as Promise<boolean>[])\n                    .then((res) => {\n                        if (res.every(Boolean)) setTextSearchInitialised(true);\n                    })\n                    .finally(() => setTextSearchLoading(false));\n            }\n            : undefined;\n\n        customizationController.plugins?.forEach(p => {\n            if (!textSearchEnabled)\n                if (p.collectionView?.showTextSearchBar) {\n                    textSearchEnabled = p.collectionView.showTextSearchBar({ context, path: fullPath, collection, parentCollectionIds });\n                }\n        })\n    }\n    return { textSearchLoading, textSearchInitialised, onTextSearchClick, textSearchEnabled };\n}\n","import React, { MouseEventHandler, useCallback, useEffect, useMemo, useState } from \"react\";\nimport { CollectionSize, Entity, EntityCollection, FilterValues } from \"../../types\";\n\nimport {\n    EntityCollectionRowActions,\n    EntityCollectionTable,\n    useDataSourceEntityCollectionTableController\n} from \"../EntityCollectionTable\";\nimport {\n    useAuthController,\n    useCustomizationController,\n    useDataSource,\n    useLargeLayout,\n    useNavigationController,\n    useSideEntityController\n} from \"../../hooks\";\nimport { ErrorView } from \"../ErrorView\";\nimport { AddIcon, Button, DialogActions, Typography } from \"@firecms/ui\";\nimport { canCreateEntity, fullPathToCollectionSegments, resolveCollection } from \"../../util\";\nimport { useSelectionController } from \"../EntityCollectionView/useSelectionController\";\nimport { useColumnIds, useTableSearchHelper } from \"../common\";\nimport { useSideDialogContext } from \"../../core\";\nimport { useAnalyticsController } from \"../../hooks/useAnalyticsController\";\n\n/**\n * @group Components\n */\nexport interface ReferenceSelectionInnerProps<M extends Record<string, any>> {\n\n    /**\n     * Allow multiple selection of values\n     */\n    multiselect?: boolean;\n\n    /**\n     * Entity collection config\n     */\n    collection?: EntityCollection<M>;\n\n    /**\n     * Absolute path of the collection.\n     * May be not set if this hook is being used in a component and the path is\n     * dynamic. If not set, the dialog won't open.\n     */\n    path: string;\n\n    /**\n     * If you are opening the dialog for the first time, you can select some\n     * entity ids to be displayed first.\n     */\n    selectedEntityIds?: string[];\n\n    /**\n     * If `multiselect` is set to `false`, you will get the selected entity\n     * in this callback.\n     * @param entity\n     * @callback\n     */\n    onSingleEntitySelected?(entity: Entity<any> | null): void;\n\n    /**\n     * If `multiselect` is set to `true`, you will get the selected entities\n     * in this callback.\n     * @param entities\n     * @callback\n     */\n    onMultipleEntitiesSelected?(entities: Entity<any>[]): void;\n\n    /**\n     * Allow selection of entities that pass the given filter only.\n     */\n    forceFilter?: FilterValues<string>;\n\n    /**\n     * Use this description to indicate the user what to do in this dialog.\n     */\n    description?: React.ReactNode;\n\n    /**\n     * Maximum number of entities that can be selected.\n     */\n    maxSelection?: number;\n\n}\n\n/**\n * This component allows to select entities from a given collection.\n * You probably want to open this dialog as a side view using {@link useReferenceDialog}\n * @group Components\n */\nexport function ReferenceSelectionTable<M extends Record<string, any>>(\n    {\n        onSingleEntitySelected,\n        onMultipleEntitiesSelected,\n        multiselect,\n        collection,\n        path: pathInput,\n        selectedEntityIds: selectedEntityIdsProp,\n        description,\n        forceFilter,\n        maxSelection,\n    }: ReferenceSelectionInnerProps<M>) {\n\n    const sideDialogContext = useSideDialogContext();\n    const sideEntityController = useSideEntityController();\n    const navigation = useNavigationController();\n    const analyticsController = useAnalyticsController();\n    const customizationController = useCustomizationController();\n\n    const fullPath = navigation.resolveAliasesFrom(pathInput);\n\n    const dataSource = useDataSource(collection);\n\n    const [entitiesDisplayedFirst, setEntitiesDisplayedFirst] = useState<Entity<any>[]>([]);\n\n    const toggleEntitySelection = (entity: Entity<any>) => {\n        let newValue;\n        const selectedEntities = selectionController.selectedEntities;\n\n        analyticsController.onAnalyticsEvent?.(\"reference_selection_toggle\", {\n            path: fullPath,\n            entityId: entity.id\n        });\n        if (selectedEntities) {\n\n            if (selectedEntities.map((e) => e.id).indexOf(entity.id) > -1) {\n                newValue = selectedEntities.filter((item: Entity<any>) => item.id !== entity.id);\n            } else {\n                if (maxSelection && selectedEntities.length >= maxSelection)\n                    return;\n                newValue = [...selectedEntities, entity];\n            }\n            selectionController.setSelectedEntities(newValue);\n\n            if (onMultipleEntitiesSelected)\n                onMultipleEntitiesSelected(newValue);\n        }\n    };\n\n    const selectionController = useSelectionController(toggleEntitySelection);\n\n    /**\n     * Fetch initially selected ids\n     */\n    useEffect(() => {\n        let unmounted = false;\n        const selectedEntityIds = selectedEntityIdsProp?.map(id => id?.toString()).filter(Boolean);\n        if (selectedEntityIds && collection) {\n            Promise.all(\n                selectedEntityIds.map((entityId) =>\n                    dataSource.fetchEntity({\n                        path: fullPath,\n                        entityId,\n                        collection\n                    })))\n                .then((entities) => {\n                    if (!unmounted) {\n                        const result = entities.filter(e => e !== undefined) as Entity<any>[];\n                        selectionController.setSelectedEntities(result);\n                        setEntitiesDisplayedFirst(result);\n                    }\n                });\n        } else {\n            selectionController.setSelectedEntities([]);\n            setEntitiesDisplayedFirst([]);\n        }\n        return () => {\n            unmounted = true;\n        };\n    }, [dataSource, fullPath, selectedEntityIdsProp, collection, selectionController.setSelectedEntities]);\n\n    const onClear = () => {\n        analyticsController.onAnalyticsEvent?.(\"reference_selection_clear\", {\n            path: fullPath\n        });\n        selectionController.setSelectedEntities([]);\n        if (!multiselect && onSingleEntitySelected) {\n            onSingleEntitySelected(null);\n        } else if (onMultipleEntitiesSelected) {\n            onMultipleEntitiesSelected([]);\n        }\n    };\n\n    const onEntityClick = (entity: Entity<any>) => {\n        if (!multiselect && onSingleEntitySelected) {\n            analyticsController.onAnalyticsEvent?.(\"reference_selected_single\", {\n                path: fullPath,\n                entityId: entity.id\n            });\n            onSingleEntitySelected(entity);\n            sideDialogContext.close(false);\n        } else {\n            toggleEntitySelection(entity);\n        }\n    };\n\n    // create a new entity from within the reference dialog\n    const onNewClick = () => {\n        analyticsController.onAnalyticsEvent?.(\"reference_selection_new_entity\", {\n            path: fullPath\n        });\n        sideEntityController.open({\n            path: fullPath,\n            collection,\n            updateUrl: true,\n            onUpdate: ({ entity }) => {\n                setEntitiesDisplayedFirst([entity, ...entitiesDisplayedFirst]);\n                onEntityClick(entity);\n            },\n            closeOnSave: true\n        });\n    };\n\n    const tableRowActionsBuilder = ({\n                                        entity,\n                                        size,\n                                        width,\n                                        frozen\n                                    }: {\n        entity: Entity<any>,\n        size: CollectionSize,\n        width: number,\n        frozen?: boolean\n    }) => {\n        const selectedEntities = selectionController.selectedEntities;\n        const isSelected = selectedEntities && selectedEntities.map(e => e.id).indexOf(entity.id) > -1;\n        return <EntityCollectionRowActions\n            width={width}\n            frozen={frozen}\n            entity={entity}\n            size={size}\n            isSelected={isSelected}\n            selectionEnabled={multiselect}\n            hideId={collection?.hideIdFromCollection}\n            fullPath={fullPath}\n            selectionController={selectionController}/>;\n\n    };\n\n    const onDone = useCallback((event: React.SyntheticEvent) => {\n        event.stopPropagation();\n        sideDialogContext.close(false);\n    }, [sideDialogContext]);\n\n    if (!collection) {\n        return <ErrorView\n            error={\"Could not find collection with id \" + collection}/>\n    }\n\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const resolvedCollection = useMemo(() => resolveCollection({\n        collection: collection,\n        path: fullPath,\n        values: {},\n        fields: customizationController.propertyConfigs\n    }), [collection, customizationController.propertyConfigs, fullPath]);\n\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const displayedColumnIds = useColumnIds(resolvedCollection, false);\n\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const tableController = useDataSourceEntityCollectionTableController<M>({\n        fullPath,\n        collection,\n        entitiesDisplayedFirst,\n        forceFilter\n    });\n\n    const {\n        textSearchLoading,\n        textSearchInitialised,\n        onTextSearchClick,\n        textSearchEnabled\n    } =\n        // eslint-disable-next-line react-hooks/rules-of-hooks\n        useTableSearchHelper({\n            collection,\n            fullPath,\n        });\n\n    return (\n\n        <div className=\"flex flex-col h-full\">\n\n            <div className=\"flex-grow\">\n                {entitiesDisplayedFirst &&\n                    <EntityCollectionTable\n                        textSearchLoading={textSearchLoading}\n                        onTextSearchClick={textSearchInitialised ? undefined : onTextSearchClick}\n                        textSearchEnabled={textSearchEnabled}\n                        displayedColumnIds={displayedColumnIds}\n                        onEntityClick={onEntityClick}\n                        tableController={tableController}\n                        tableRowActionsBuilder={tableRowActionsBuilder}\n                        title={<Typography variant={\"subtitle2\"}>\n                            {collection.singularName ? `Select ${collection.singularName}` : `Select from ${collection.name}`}\n                        </Typography>}\n                        defaultSize={collection.defaultSize}\n                        properties={resolvedCollection.properties}\n                        forceFilter={forceFilter}\n                        inlineEditing={false}\n                        selectionController={selectionController}\n                        actions={<ReferenceDialogActions\n                            collection={collection}\n                            path={fullPath}\n                            onNewClick={onNewClick}\n                            onClear={onClear}/>\n                        }\n                    />}\n            </div>\n            <DialogActions translucent={false}>\n                {description &&\n                    <Typography variant={\"body2\"}\n                                className=\"flex-grow text-left\">\n                        {description}\n                    </Typography>}\n                <Button\n                    onClick={onDone}\n                    color=\"primary\"\n                    variant=\"filled\">\n                    Done\n                </Button>\n            </DialogActions>\n        </div>\n\n    );\n\n}\n\nfunction ReferenceDialogActions({\n                                    collection,\n                                    path,\n                                    onClear,\n                                    onNewClick\n                                }: {\n    collection: EntityCollection<any>,\n    path: string,\n    onClear: () => void,\n    onNewClick: () => void\n}) {\n\n    const authController = useAuthController();\n\n    const largeLayout = useLargeLayout();\n\n    const onClick: MouseEventHandler<HTMLButtonElement> | undefined = onNewClick\n        ? (e) => {\n            e.preventDefault();\n            onNewClick();\n        }\n        : undefined;\n    const addButton = canCreateEntity(collection, authController, path, null) &&\n        onClick && (largeLayout\n            ? <Button\n                onClick={onClick}\n                startIcon={<AddIcon/>}\n                variant=\"outlined\"\n                color=\"primary\">\n                Add {collection.singularName ?? collection.name}\n            </Button>\n            : <Button\n                onClick={onClick}\n                variant=\"outlined\"\n                color=\"primary\"\n            >\n                <AddIcon/>\n            </Button>);\n\n    return (\n        <>\n            <Button onClick={onClear}\n                    variant={\"text\"}\n                    color=\"primary\">\n                Clear\n            </Button>\n            {addButton}\n        </>\n    );\n}\n","export function toArray<T>(input?: T | T[]): T[] {\n    return Array.isArray(input) ? input : (input ? [input] : []);\n}\n","import { PropsWithChildren } from \"react\";\nimport { useUserConfigurationPersistence } from \"../../hooks/useUserConfigurationPersistence\";\nimport { ExpandablePanel, Typography } from \"@firecms/ui\";\n\nexport function NavigationGroup({\n                                    children,\n                                    group\n                                }: PropsWithChildren<{\n    group: string | undefined\n}>) {\n    const userConfigurationPersistence = useUserConfigurationPersistence();\n    return (\n        <ExpandablePanel\n            invisible={true}\n            titleClassName={\"font-medium text-sm text-gray-600 dark:text-gray-400\"}\n            className={\"py-4\"}\n            initiallyExpanded={!(userConfigurationPersistence?.collapsedGroups ?? []).includes(group ?? \"ungrouped\")}\n            onExpandedChange={expanded => {\n                if (userConfigurationPersistence) {\n\n                    if (!expanded) {\n                        const paths = (userConfigurationPersistence.collapsedGroups ?? []).concat(group ?? \"ungrouped\");\n                        userConfigurationPersistence.setCollapsedGroups(paths);\n                    } else {\n                        userConfigurationPersistence.setCollapsedGroups((userConfigurationPersistence.collapsedGroups ?? []).filter(g => g !== (group ?? \"ungrouped\")));\n                    }\n                }\n            }}\n            title={<Typography color={\"secondary\"}\n                               className=\"font-medium ml-1\">\n                {group?.toUpperCase() ?? \"Views\".toUpperCase()}\n            </Typography>}>\n\n            <div className=\"mb-8\">\n                {children}\n            </div>\n        </ExpandablePanel>\n    );\n}\n","import { ArrowForwardIcon, Card, cn, Markdown, Typography, } from \"@firecms/ui\";\n\nexport type NavigationCardProps = {\n    name: string,\n    description?: string;\n    actions: React.ReactNode;\n    icon: React.ReactNode;\n    onClick?: () => void,\n};\n\nexport function NavigationCard({\n                                   name,\n                                   description,\n                                   icon,\n                                   actions,\n                                   onClick,\n                               }: NavigationCardProps) {\n\n    return (<Card\n        className={cn(\"h-full p-4 cursor-pointer min-h-[230px]\")}\n        onClick={() => {\n            onClick?.();\n        }}>\n\n        <div className=\"flex flex-col items-start h-full\">\n            <div\n                className=\"flex-grow w-full\">\n\n                <div\n                    className=\"h-10 flex items-center w-full justify-between text-gray-300 dark:text-gray-600\">\n\n                    {icon}\n\n                    <div\n                        className=\"flex items-center gap-1\"\n                        onClick={(event: React.MouseEvent) => {\n                            event.preventDefault();\n                            event.stopPropagation();\n                        }}>\n\n                        {actions}\n\n                    </div>\n\n                </div>\n\n                <Typography gutterBottom variant=\"h5\"\n                            component=\"h2\">\n                    {name}\n                </Typography>\n\n                {description && <Typography variant=\"body2\"\n                                            color=\"secondary\"\n                                            component=\"div\">\n                    <Markdown source={description} size={\"small\"}/>\n                </Typography>}\n            </div>\n\n            <div style={{ alignSelf: \"flex-end\" }}>\n\n                <div className={\"p-4\"}>\n                    <ArrowForwardIcon className=\"text-primary\"/>\n                </div>\n            </div>\n\n        </div>\n\n    </Card>)\n}\n","import { ArrowForwardIcon, cardClickableMixin, cardMixin, cn, focusedMixin, Typography, } from \"@firecms/ui\";\n\nimport { Link as ReactLink } from \"react-router-dom\";\n\nexport type SmallNavigationCardProps = {\n    name: string,\n    url: string;\n    icon: React.ReactElement;\n};\n\nexport function SmallNavigationCard({\n                                 name,\n                                 url,\n                                 icon,\n                             }: SmallNavigationCardProps) {\n\n    return (\n        <>\n\n            <ReactLink\n                tabIndex={0}\n                className={cn(cardMixin,\n                    cardClickableMixin,\n                    focusedMixin,\n                    \"cursor-pointer flex flex-row items-center px-4 py-2 text-inherit dark:text-inherit visited:text-inherit visited:dark:text-inherit hover:text-inherit hover:dark:text-inherit \")}\n                to={url}\n            >\n\n                <div className=\"flex flex-row items-center flex-grow gap-2 \">\n                    {icon}\n\n                    <Typography gutterBottom variant=\"h5\"\n                                component=\"h2\"\n                                className=\"mb-0 ml-4\">\n                        {name}\n                    </Typography>\n                </div>\n\n                <div className={\"p-4\"}>\n                    <ArrowForwardIcon color=\"primary\"/>\n                </div>\n            </ReactLink>\n\n        </>);\n}\n","import { useNavigate } from \"react-router-dom\";\n\nimport { useCustomizationController, useFireCMSContext } from \"../../hooks\";\nimport { PluginHomePageActionsProps, TopNavigationEntry } from \"../../types\";\nimport { IconForView } from \"../../util\";\nimport { useUserConfigurationPersistence } from \"../../hooks/useUserConfigurationPersistence\";\nimport { IconButton, StarBorderIcon, StarIcon } from \"@firecms/ui\";\nimport { NavigationCard } from \"./NavigationCard\";\nimport { SmallNavigationCard } from \"./SmallNavigationCard\";\n\n/**\n * This is the component used in the home page to render a card for each\n * collection or view.\n * @group Components\n * @param view\n * @param path\n * @param collection\n * @param url\n * @param name\n * @param description\n * @param onClick\n * @constructor\n */\nexport function NavigationCardBinding({\n                                          path,\n                                          collection,\n                                          view,\n                                          url,\n                                          name,\n                                          description,\n                                          onClick,\n                                          type\n                                      }: TopNavigationEntry & {\n    onClick?: () => void\n}) {\n\n    const userConfigurationPersistence = useUserConfigurationPersistence();\n    const collectionIcon = <IconForView collectionOrView={collection ?? view}/>;\n\n    const navigate = useNavigate();\n    const context = useFireCMSContext();\n    const customizationController = useCustomizationController();\n\n    const favourite = (userConfigurationPersistence?.favouritePaths ?? []).includes(path);\n\n    const actionsArray: React.ReactNode[] = userConfigurationPersistence\n        ? [\n            <IconButton\n                key={\"favourite\"}\n                onClick={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    if (favourite) {\n                        userConfigurationPersistence.setFavouritePaths(\n                            userConfigurationPersistence.favouritePaths.filter(p => p !== path)\n                        );\n                    } else {\n                        userConfigurationPersistence.setFavouritePaths(\n                            [...userConfigurationPersistence.favouritePaths, path]\n                        );\n                    }\n                }}>\n                {\n                    favourite\n                        ? <StarIcon\n                            size={18}\n                            className={\"text-secondary\"}/>\n                        : <StarBorderIcon\n                            size={18}\n                            className={\"text-gray-400 dark:text-gray-500\"}/>}\n            </IconButton>\n        ]\n        : [];\n\n    if (customizationController.plugins && collection) {\n        const actionProps: PluginHomePageActionsProps = {\n            path,\n            collection,\n            context\n        };\n        customizationController.plugins.forEach((plugin, i) => (\n            actionsArray.push(plugin.homePage?.CollectionActions\n                ? <plugin.homePage.CollectionActions\n                    key={`actions_${i}`}\n                    {...actionProps}\n                    extraProps={plugin.homePage.extraProps}\n                />\n                : null\n            )))\n    }\n\n    const actions: React.ReactNode | undefined = <>\n        {actionsArray}\n    </>\n\n    if (type === \"admin\") {\n        return <SmallNavigationCard icon={collectionIcon}\n                                    name={name}\n                                    url={url}/>\n    }\n\n    return <NavigationCard\n        icon={collectionIcon}\n        name={name}\n        description={description}\n        actions={actions}\n        onClick={() => {\n            onClick?.();\n            navigate(url);\n            if (userConfigurationPersistence) {\n                userConfigurationPersistence.setRecentlyVisitedPaths(\n                    [path, ...(userConfigurationPersistence.recentlyVisitedPaths ?? []).filter(p => p !== path)]\n                );\n            }\n        }}/>;\n}\n","import { useNavigate } from \"react-router-dom\";\nimport { useNavigationController } from \"../../hooks\";\nimport { useUserConfigurationPersistence } from \"../../hooks/useUserConfigurationPersistence\";\nimport { TopNavigationEntry } from \"../../types\";\nimport { Chip, Collapse, StarBorderIcon, StarIcon } from \"@firecms/ui\";\n\nfunction NavigationChip({ entry }: { entry: TopNavigationEntry }) {\n\n    const navigate = useNavigate();\n    const userConfigurationPersistence = useUserConfigurationPersistence();\n\n    if (!userConfigurationPersistence)\n        return null;\n\n    const favourite = userConfigurationPersistence.favouritePaths.includes(entry.path);\n    const onIconClick = (e: React.SyntheticEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        if (favourite) {\n            userConfigurationPersistence.setFavouritePaths(\n                userConfigurationPersistence.favouritePaths.filter(p => p !== entry.path)\n            );\n        } else {\n            userConfigurationPersistence.setFavouritePaths(\n                [...userConfigurationPersistence.favouritePaths, entry.path]\n            );\n        }\n    };\n    return <Chip\n        key={entry.path}\n        onClick={() => navigate(entry.url)}\n        icon={\n            favourite\n                ? <StarIcon\n                    onClick={onIconClick}\n                    size={18}\n                    className={\"text-secondary\"}/>\n                : <StarBorderIcon\n                    onClick={onIconClick}\n                    size={18}\n                    className={\"text-gray-400 dark:text-gray-500\"}/>}>\n        {entry.name}\n    </Chip>;\n}\n\nexport function FavouritesView({ hidden }: { hidden: boolean }) {\n\n    const navigationController = useNavigationController();\n    const userConfigurationPersistence = useUserConfigurationPersistence();\n\n    if (!userConfigurationPersistence)\n        return null;\n\n    const favouriteCollections = (userConfigurationPersistence?.favouritePaths ?? [])\n        .map((path) => navigationController.topLevelNavigation?.navigationEntries.find((entry) => entry.path === path))\n        .filter(Boolean) as TopNavigationEntry[];\n\n    return <Collapse in={favouriteCollections.length > 0}>\n        <div className=\"flex flex-row flex-wrap gap-2 pb-2 min-h-[32px]\">\n            {favouriteCollections.map((entry) => <NavigationChip key={entry.path}\n                                                                 entry={entry}/>)}\n        </div>\n    </Collapse>;\n}\n","import React, { useCallback, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nconst scrollsMap: Record<string, number> = {};\n\nexport function useRestoreScroll() {\n\n    // const scrollsMap = React.useRef<Record<string, number>>({});\n\n    const location = useLocation();\n\n    const containerRef = React.useRef<HTMLDivElement>(null);\n    const [scroll, setScroll] = React.useState(0);\n    const [direction, setDirection] = React.useState<\"up\" | \"down\">(\"down\");\n\n    const handleScroll = useCallback(() => {\n        if (!containerRef.current || !location.key) return;\n        scrollsMap[location.key] = containerRef.current.scrollTop;\n        setScroll(containerRef.current.scrollTop);\n        setDirection(containerRef.current.scrollTop > scroll ? \"down\" : \"up\");\n    }, [containerRef, location.key, scroll]);\n\n    useEffect(() => {\n        const container = containerRef.current;\n        if (!container) return;\n        container.addEventListener(\"scroll\", handleScroll, { passive: true });\n\n        return () => {\n            if (container)\n                container.removeEventListener(\"scroll\", handleScroll);\n        };\n    }, [containerRef, handleScroll, location]);\n\n    useEffect(() => {\n        if (!containerRef.current || !scrollsMap[location.key]) return;\n        containerRef.current.scrollTo(\n            {\n                top: scrollsMap[location.key],\n                behavior: \"auto\"\n            });\n    }, [location]);\n\n    return {\n        containerRef,\n        scroll,\n        direction\n    };\n}\n","import React, { useCallback, useEffect, useState } from \"react\";\n\nimport { useCustomizationController, useFireCMSContext, useNavigationController } from \"../../hooks\";\nimport { CMSAnalyticsEvent, PluginGenericProps, PluginHomePageAdditionalCardsProps } from \"../../types\";\n\nimport { toArray } from \"../../util/arrays\";\nimport { NavigationGroup } from \"./NavigationGroup\";\nimport { NavigationCardBinding } from \"./NavigationCardBinding\";\n\n// @ts-ignore\nimport * as JsSearch from \"js-search\";\n\nimport { Container, SearchBar } from \"@firecms/ui\";\nimport { FavouritesView } from \"./FavouritesView\";\nimport { useRestoreScroll } from \"../../internal/useRestoreScroll\";\n\nconst search = new JsSearch.Search(\"url\");\nsearch.addIndex(\"name\");\nsearch.addIndex(\"description\");\nsearch.addIndex(\"group\");\nsearch.addIndex(\"path\");\n\n/**\n * Default entry view for the CMS. This component renders navigation cards\n * for each collection defined in the navigation.\n * @constructor\n * @group Components\n */\nexport function DefaultHomePage({\n                                    additionalActions,\n                                    additionalChildrenStart,\n                                    additionalChildrenEnd\n                                }: {\n    /**\n     * Additional actions to be rendered in the home page, close to the search bar.\n     */\n    additionalActions?: React.ReactNode;\n    /**\n     * Additional children to be rendered in the beginning of the home page.\n     */\n    additionalChildrenStart?: React.ReactNode;\n    /**\n     * Additional children to be rendered at the end of the home page.\n     */\n    additionalChildrenEnd?: React.ReactNode;\n}) {\n\n    const context = useFireCMSContext();\n    const customizationController = useCustomizationController();\n    const navigationController = useNavigationController();\n\n    if (!navigationController.topLevelNavigation)\n        throw Error(\"Navigation not ready in FireCMSHomePage\");\n\n    const {\n        containerRef,\n        scroll,\n        direction\n    } = useRestoreScroll();\n\n    const {\n        navigationEntries,\n        groups\n    } = navigationController.topLevelNavigation;\n\n    const [filteredUrls, setFilteredUrls] = useState<string[] | null>(null);\n\n    const filteredNavigationEntries = filteredUrls\n        ? navigationEntries.filter((entry) => filteredUrls.includes(entry.url))\n        : navigationEntries;\n\n    useEffect(() => {\n        search.addDocuments(navigationEntries);\n    }, [navigationEntries]);\n\n    const updateSearchResults = useCallback(\n        (value?: string) => {\n            if (!value || value === \"\") {\n                setFilteredUrls(null);\n            } else {\n                const searchResult = search.search(value);\n                setFilteredUrls(searchResult.map((e: any) => e.url));\n            }\n        }, []);\n\n    const allGroups: Array<string | undefined> = [...groups];\n    if (filteredNavigationEntries.filter(e => !e.group).length > 0 || filteredNavigationEntries.length === 0) {\n        allGroups.push(undefined);\n    }\n\n    let additionalPluginChildrenStart: React.ReactNode | undefined;\n    let additionalPluginChildrenEnd: React.ReactNode | undefined;\n    let additionalPluginSections: React.ReactNode | undefined;\n    if (customizationController.plugins) {\n        const sectionProps: PluginGenericProps = {\n            context\n        };\n        additionalPluginSections = <>\n            {customizationController.plugins.filter(plugin => plugin.homePage?.includeSection)\n                .map((plugin, i) => {\n                    const section = plugin.homePage!.includeSection!(sectionProps)\n                    return (\n                        <NavigationGroup\n                            group={section.title}\n                            key={`plugin_section_${plugin.key}`}>\n                            {section.children}\n                        </NavigationGroup>\n                    );\n                })}\n        </>;\n        additionalPluginChildrenStart = <div className={\"flex flex-col gap-2\"}>\n            {customizationController.plugins.filter(plugin => plugin.homePage?.additionalChildrenStart)\n                .map((plugin, i) => {\n                    return <div key={`plugin_children_start_${i}`}>{plugin.homePage!.additionalChildrenStart}</div>;\n                })}\n        </div>;\n\n        additionalPluginChildrenEnd = <div className={\"flex flex-col gap-2\"}>\n            {customizationController.plugins.filter(plugin => plugin.homePage?.additionalChildrenEnd)\n                .map((plugin, i) => {\n                    return <div key={`plugin_children_start_${i}`}>{plugin.homePage!.additionalChildrenEnd}</div>;\n                })}\n        </div>;\n    }\n\n    return (\n        <div id=\"home_page\"\n             ref={containerRef}\n             className=\"py-2 overflow-auto h-full w-full\">\n            <Container maxWidth={\"6xl\"}>\n                <div\n                    className=\"w-full sticky py-4 transition-all duration-400 ease-in-out top-0 z-10 flex flex-row gap-4\"\n                    style={{ top: direction === \"down\" ? -84 : 0 }}>\n                    <SearchBar onTextSearch={updateSearchResults}\n                               placeholder={\"Search collections\"}\n                               large={false}\n                               innerClassName={\"w-full\"}\n                               className={\"w-full flex-grow\"}/>\n                    {additionalActions}\n                </div>\n\n                <FavouritesView hidden={Boolean(filteredUrls)}/>\n\n                {additionalChildrenStart}\n\n                {additionalPluginChildrenStart}\n\n                {allGroups.map((group, index) => {\n\n                    const AdditionalCards: React.ComponentType<PluginHomePageAdditionalCardsProps>[] = [];\n                    const actionProps: PluginHomePageAdditionalCardsProps = {\n                        group,\n                        context\n                    };\n\n                    if (customizationController.plugins) {\n                        customizationController.plugins.forEach(plugin => {\n                            if (plugin.homePage?.AdditionalCards) {\n                                AdditionalCards.push(...toArray(plugin.homePage?.AdditionalCards));\n                            }\n                        });\n                    }\n\n                    const thisGroupCollections = filteredNavigationEntries\n                        .filter((entry) => entry.group === group || (!entry.group && group === undefined));\n                    if (thisGroupCollections.length === 0 && AdditionalCards.length === 0)\n                        return null;\n                    return (\n                        <NavigationGroup\n                            group={group}\n                            key={`plugin_section_${group}`}>\n\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                                {thisGroupCollections.map((entry) => (\n                                    <div key={`nav_${entry.group}_${entry.name}`} className=\"col-span-1\">\n                                        <NavigationCardBinding\n                                            {...entry}\n                                            onClick={() => {\n                                                let event: CMSAnalyticsEvent;\n                                                if (entry.type === \"collection\") {\n                                                    event = \"home_navigate_to_collection\";\n                                                } else if (entry.type === \"view\") {\n                                                    event = \"home_navigate_to_view\";\n                                                } else if (entry.type === \"admin\") {\n                                                    event = \"home_navigate_to_admin_view\";\n                                                } else {\n                                                    event = \"unmapped_event\";\n                                                }\n                                                context.analyticsController?.onAnalyticsEvent?.(event, { path: entry.path });\n                                            }}\n                                        />\n                                    </div>\n                                ))}\n                                {group?.toLowerCase() !== \"admin\" && AdditionalCards &&\n                                    AdditionalCards.map((AdditionalCard, i) => (\n                                        <div key={`nav_${group}_add_${i}`}>\n                                            <AdditionalCard {...actionProps} />\n                                        </div>\n                                    ))}\n                            </div>\n                        </NavigationGroup>\n                    );\n                })}\n\n                {additionalPluginSections}\n\n                {additionalPluginChildrenEnd}\n\n                {additionalChildrenEnd}\n\n            </Container>\n        </div>\n    );\n}\n","import React from \"react\";\n\nimport { canCreateEntity, canDeleteEntity, fullPathToCollectionSegments } from \"../../util\";\nimport { useAuthController, useCustomizationController, useFireCMSContext, useLargeLayout } from \"../../hooks\";\nimport { CollectionActionsProps, EntityCollection, EntityTableController, SelectionController } from \"../../types\";\nimport { AddIcon, Button, DeleteIcon, IconButton, Tooltip } from \"@firecms/ui\";\nimport { toArray } from \"../../util/arrays\";\nimport { ErrorBoundary } from \"../ErrorBoundary\";\n\nexport type EntityCollectionViewActionsProps<M extends Record<string, any>> = {\n    collection: EntityCollection<M>;\n    path: string;\n    relativePath: string;\n    parentCollectionIds: string[];\n    selectionEnabled: boolean;\n    onNewClick: () => void;\n    onMultipleDeleteClick: () => void;\n    selectionController: SelectionController<M>;\n    tableController: EntityTableController<M>;\n    collectionEntitiesCount: number;\n}\n\nexport function EntityCollectionViewActions<M extends Record<string, any>>({\n                                                                               collection,\n                                                                               relativePath,\n                                                                               parentCollectionIds,\n                                                                               onNewClick,\n                                                                               onMultipleDeleteClick,\n                                                                               selectionEnabled,\n                                                                               path,\n                                                                               selectionController,\n                                                                               tableController,\n                                                                               collectionEntitiesCount\n                                                                           }: EntityCollectionViewActionsProps<M>) {\n\n    const context = useFireCMSContext();\n\n    const customizationController = useCustomizationController();\n    const plugins = customizationController.plugins ?? [];\n\n    const authController = useAuthController();\n\n    const largeLayout = useLargeLayout();\n\n    const selectedEntities = selectionController.selectedEntities;\n\n    const addButton = canCreateEntity(collection, authController, path, null) &&\n        onNewClick && (largeLayout\n            ? <Button\n                id={`add_entity_${path}`}\n                onClick={onNewClick}\n                startIcon={<AddIcon/>}\n                variant=\"filled\"\n                color=\"primary\">\n                Add {collection.singularName ?? collection.name}\n            </Button>\n            : <Button\n                id={`add_entity_${path}`}\n                onClick={onNewClick}\n                variant=\"filled\"\n                color=\"primary\"\n            >\n                <AddIcon/>\n            </Button>);\n\n    const multipleDeleteEnabled = canDeleteEntity(collection, authController, path, null);\n\n    let multipleDeleteButton: React.ReactNode | undefined;\n    if (selectionEnabled) {\n        const button = largeLayout\n            ? <Button\n                variant={\"text\"}\n                disabled={!(selectedEntities?.length) || !multipleDeleteEnabled}\n                startIcon={<DeleteIcon/>}\n                onClick={onMultipleDeleteClick}\n                color={\"primary\"}\n                className=\"lg:w-20\"\n            >\n                ({selectedEntities?.length})\n            </Button>\n            : <IconButton\n                color={\"primary\"}\n                disabled={!(selectedEntities?.length) || !multipleDeleteEnabled}\n                onClick={onMultipleDeleteClick}>\n                <DeleteIcon/>\n            </IconButton>;\n        multipleDeleteButton =\n            <Tooltip\n                title={multipleDeleteEnabled ? \"Delete\" : \"You have selected at least one entity you cannot delete\"}>\n                {button}\n            </Tooltip>\n    }\n\n    const actionProps: CollectionActionsProps = {\n        path,\n        relativePath,\n        parentCollectionIds,\n        collection,\n        selectionController,\n        context,\n        tableController,\n        collectionEntitiesCount\n    };\n\n    const actions = toArray(collection.Actions)\n        .map((Action, i) => (\n            <ErrorBoundary key={`actions_${i}`}>\n                <Action {...actionProps} />\n            </ErrorBoundary>\n        ));\n\n    if (plugins) {\n        plugins.forEach((plugin, i) => {\n            if (plugin.collectionView?.CollectionActions) {\n                actions.push(...toArray(plugin.collectionView?.CollectionActions)\n                    .map((Action, j) => (\n                        <ErrorBoundary key={`plugin_actions_${i}_${j}`}>\n                            <Action {...actionProps} {...plugin.collectionView?.collectionActionsProps}/>\n                        </ErrorBoundary>\n                    )));\n            }\n        });\n    }\n\n    return (\n        <>\n            {actions}\n            {multipleDeleteButton}\n            {addButton}\n        </>\n    );\n}\n","import React, { useEffect } from \"react\";\n\ninterface DraggableProps {\n    containerRef: React.RefObject<HTMLDivElement>,\n    innerRef: React.RefObject<HTMLDivElement>,\n    // ref: React.RefObject<HTMLDivElement>,\n    x?: number;\n    y?: number;\n    onMove: (params: { x: number, y: number }) => void,\n}\n\nexport function useDraggable({\n                                 containerRef,\n                                 innerRef,\n                                 x,\n                                 y,\n                                 onMove\n                             }: DraggableProps) {\n\n    let relX = 0;\n    let relY = 0;\n\n    const listeningRef = React.useRef(false);\n\n    const onMouseDown = (event: any) => {\n        if (event.button !== 0 || !containerRef.current || event.defaultPrevented || event.innerClicked) {\n            return;\n        }\n\n        const {\n            x,\n            y\n        } = containerRef.current.getBoundingClientRect();\n\n        relX = event.screenX - x;\n        relY = event.screenY - y;\n        document.addEventListener(\"mousemove\", onMouseMove);\n        document.addEventListener(\"mouseup\", onMouseUp);\n        document.addEventListener(\"selectstart\", onSelect);\n        listeningRef.current = true;\n        // event.stopPropagation();\n    };\n    const onMouseDownInner = (event: any) => {\n        // @ts-ignore\n        event.innerClicked = true;\n    };\n\n    const onSelect = (event: any) => {\n        event.preventDefault()\n        event.stopPropagation();\n    };\n\n    const onMouseUp = (event: any) => {\n        document.removeEventListener(\"mousemove\", onMouseMove);\n        document.removeEventListener(\"mouseup\", onMouseUp);\n        document.removeEventListener(\"selectstart\", onSelect);\n        event.stopPropagation();\n        listeningRef.current = false;\n    };\n\n    const onMouseMove = (event: any) => {\n        if (event.target.localName === \"input\" || !listeningRef.current)\n            return;\n        onMove({\n                x: event.screenX - relX,\n                y: event.screenY - relY\n            }\n        );\n        event.stopPropagation();\n    };\n\n    const update = () => {\n        if (containerRef.current) {\n            containerRef.current.style.top = `${y}px`;\n            containerRef.current.style.left = `${x}px`;\n        }\n    };\n\n    useEffect(() => {\n        const current = containerRef.current;\n        const innerCurrent = innerRef.current;\n        if (!current || !innerCurrent)\n            return;\n        if (innerCurrent)\n            innerCurrent.addEventListener(\"mousedown\", onMouseDownInner);\n        if (current)\n            current.addEventListener(\"mousedown\", onMouseDown);\n        update();\n        return () => {\n            if (current)\n                current.removeEventListener(\"mousedown\", onMouseDown);\n            if (innerCurrent)\n                innerCurrent.removeEventListener(\"mousedown\", onMouseDownInner);\n        };\n    });\n\n}\n","import { useLayoutEffect, useState } from \"react\";\n\ninterface WindowSize {\n    width: number,\n    height: number\n}\n\nexport function useWindowSize(): WindowSize {\n    const [size, setSize] = useState<WindowSize>({ width: 0, height: 0 });\n    useLayoutEffect(() => {\n        function updateSize() {\n            setSize({ width: window.innerWidth, height: window.innerHeight });\n        }\n\n        window.addEventListener(\"resize\", updateSize);\n        updateSize();\n        return () => window.removeEventListener(\"resize\", updateSize);\n    }, []);\n    return size;\n}\n","import { RefObject, useCallback, useEffect, useRef } from \"react\";\n\ninterface Props {\n    onResize: (event: Event) => void;\n}\n\nexport const ElementResizeListener: React.FC<Props> = ({ onResize }) => {\n    const rafRef = useRef(0);\n    const objectRef: RefObject<HTMLObjectElement> = useRef(null);\n    const onResizeRef = useRef(onResize);\n\n    onResizeRef.current = onResize;\n\n    const _onResize = useCallback((e: Event) => {\n        if (rafRef.current) {\n            cancelAnimationFrame(rafRef.current);\n        }\n        rafRef.current = requestAnimationFrame(() => {\n            onResizeRef.current(e);\n        });\n    }, []);\n\n    const onLoad = useCallback(() => {\n        const obj = objectRef.current;\n        if (obj && obj.contentDocument && obj.contentDocument.defaultView) {\n            obj.contentDocument.defaultView.addEventListener(\"resize\", _onResize);\n        }\n    }, [_onResize]);\n\n    useEffect(() => {\n        const obj = objectRef.current;\n        return () => {\n            if (obj && obj.contentDocument && obj.contentDocument.defaultView) {\n                obj.contentDocument.defaultView.removeEventListener(\"resize\", _onResize);\n            }\n        };\n    }, [_onResize]);\n\n    return (\n        <object\n            onLoad={onLoad}\n            ref={objectRef}\n            tabIndex={-1}\n            type={\"text/html\"}\n            data={\"about:blank\"}\n            title={\"\"}\n            style={{\n                position: \"absolute\",\n                top: 0,\n                left: 0,\n                height: \"100%\",\n                width: \"100%\",\n                pointerEvents: \"none\",\n                zIndex: -1,\n                opacity: 0\n            }}\n        />\n    );\n};\n","import { ArrayContainer } from \"../../components\";\nimport React from \"react\";\n\ninterface ArrayContainerProps<T> {\n    value: T[];\n    name: string;\n    addLabel: string;\n    buildEntry: (index: number, internalId: number) => React.ReactNode;\n    disabled?: boolean;\n    small?: boolean;\n    onInternalIdAdded?: (id: number) => void;\n    includeAddButton?: boolean;\n    newDefaultEntry?: T | null;\n    setFieldValue: (field: string, value: any, shouldValidate?: boolean | undefined) => void;\n}\n\n/**\n * @group Form custom fields\n */\nexport function FormikArrayContainer<T>({\n                                            name,\n                                            addLabel,\n                                            value,\n                                            disabled = false,\n                                            buildEntry,\n                                            small,\n                                            onInternalIdAdded,\n                                            includeAddButton,\n                                            newDefaultEntry = null,\n                                            setFieldValue\n                                        }: ArrayContainerProps<T>) {\n\n    return <ArrayContainer droppableId={name}\n                           addLabel={addLabel}\n                           value={value}\n                           disabled={disabled}\n                           buildEntry={buildEntry}\n                           size={small ? \"small\" : \"medium\"}\n                           onInternalIdAdded={onInternalIdAdded}\n                           includeAddButton={includeAddButton}\n                           newDefaultEntry={newDefaultEntry}\n                           onValueChange={(value) => setFieldValue(name, value)}\n    />;\n}\n","import { ResolvedProperty } from \"../../types\";\nimport { IconButton, InfoIcon, Tooltip, Typography } from \"@firecms/ui\";\n\n/**\n * Component in charge of rendering the description of a field\n * as well as the error message if any.\n */\nexport function FieldHelperText({\n                                    error,\n                                    showError,\n                                    property,\n                                    includeDescription = true,\n                                    disabled\n                                }: {\n                                    error?: string,\n                                    showError: boolean,\n                                    property: ResolvedProperty,\n                                    includeDescription?: boolean,\n                                    disabled?: boolean,\n                                }\n) {\n\n    const hasDescription = property.description || property.longDescription;\n\n    if (!(showError && error) && (!includeDescription || !hasDescription))\n        return null;\n\n    if (showError && error) {\n        return <Typography variant={\"caption\"}\n                           className={\"ml-3.5 text-red-500 dark:text-red-500\"}>\n            {error}\n        </Typography>\n    }\n\n    const disabledTooltip: string | undefined = typeof property.disabled === \"object\" ? property.disabled.disabledMessage : undefined;\n\n    return <div className={\"flex ml-3.5 mt-1\"}>\n        <Typography variant={\"caption\"}\n                    color={disabled ? \"disabled\" : \"secondary\"}\n                    className={\"flex-grow\"}>\n            {disabledTooltip || property.description}\n        </Typography>\n\n        {property.longDescription &&\n            <Tooltip title={property.longDescription}\n                     side=\"bottom\"\n            >\n                <IconButton\n                    size={\"small\"}\n                    className=\"self-start\">\n\n                    <InfoIcon color={\"disabled\"}\n                              size={\"small\"}/>\n                </IconButton>\n            </Tooltip>}\n\n    </div>\n}\n","import React from \"react\";\n\ninterface LabelWithIconProps {\n    icon: React.ReactNode;\n    title?: string;\n    small?: boolean;\n    className?: string;\n    required?: boolean;\n}\n\n/**\n * Render the label of with an icon and the title of a property\n * @group Form custom fields\n */\nexport function LabelWithIcon({\n                                  icon,\n                                  title,\n                                  small,\n                                  className,\n                                  required\n                              }: LabelWithIconProps) {\n    return (\n        <span\n            className={`inline-flex items-center my-0.5  ${small ? \"gap-1\" : \"gap-2\"} ${className ?? \"\"}`}>\n\n            {icon}\n\n            <span\n                className={`text-start font-medium text-${small ? \"base\" : \"sm\"} origin-top-left transform ${small ? \"translate-x-2 scale-75\" : \"\"}`}>{(title ?? \"\") + (required ? \" *\" : \"\")}</span>\n\n        </span>\n    );\n}\n","import React, { useCallback } from \"react\";\n\nimport { EnumType, FieldProps } from \"../../types\";\nimport { FieldHelperText, LabelWithIcon } from \"../components\";\nimport { EnumValuesChip } from \"../../preview\";\nimport { getIconForProperty } from \"../../util\";\nimport { ClearIcon, cn, IconButton, Select, SelectItem } from \"@firecms/ui\";\nimport { useClearRestoreValue } from \"../useClearRestoreValue\";\n\ntype SelectProps<T extends EnumType> = FieldProps<T>;\n\n/**\n * If `enumValues` are set in the string config, this field renders a select\n * where each option is a colored chip.\n *\n * This is one of the internal components that get mapped natively inside forms\n * and tables to the specified properties.\n * @group Form fields\n */\nexport function SelectFieldBinding<T extends EnumType>({\n                                                           propertyKey,\n                                                           value,\n                                                           setValue,\n                                                           error,\n                                                           showError,\n                                                           disabled,\n                                                           autoFocus,\n                                                           touched,\n                                                           property,\n                                                           includeDescription\n                                                       }: SelectProps<T>) {\n\n    const enumValues = property.enumValues;\n\n    useClearRestoreValue({\n        property,\n        value,\n        setValue\n    });\n\n    const handleClearClick = useCallback((e: React.MouseEvent) => {\n        e.stopPropagation();\n        e.preventDefault();\n        setValue(null);\n    }, [setValue]);\n\n    return (\n        <>\n\n            <Select\n                value={value ? value.toString() : \"\"}\n                disabled={disabled}\n                position=\"item-aligned\"\n                inputClassName={cn(\"w-full\")}\n                label={<LabelWithIcon icon={getIconForProperty(property, \"small\")}\n                                      required={property.validation?.required}\n                                      title={property.name}\n                                      className={\"text-text-secondary dark:text-text-secondary-dark ml-3.5\"}\n                />}\n                endAdornment={\n                    property.clearable && <IconButton\n                        onClick={handleClearClick}>\n                        <ClearIcon/>\n                    </IconButton>\n                }\n                onValueChange={(updatedValue: string) => {\n                    const newValue = updatedValue\n                        ? (property.dataType === \"number\" ? parseFloat(updatedValue) : updatedValue)\n                        : null;\n                    return setValue(newValue as T);\n                }}\n                renderValue={(enumKey: any) => {\n                    return <EnumValuesChip\n                        enumKey={enumKey}\n                        enumValues={enumValues}\n                        size={\"medium\"}/>;\n                }}\n            >\n                {enumValues && enumValues.map((option) => {\n                    return <SelectItem\n                        key={option.id}\n                        value={String(option.id)}>\n                        <EnumValuesChip\n                            enumKey={String(option.id)}\n                            enumValues={enumValues}\n                            size={\"medium\"}/>\n                    </SelectItem>\n                })}\n            </Select>\n\n            <FieldHelperText includeDescription={includeDescription}\n                             showError={showError}\n                             error={error}\n                             disabled={disabled}\n                             property={property}/>\n\n        </>\n    );\n}\n","import React, { useCallback } from \"react\";\n\nimport { EnumType, FieldProps, ResolvedProperty } from \"../../types\";\nimport { FieldHelperText, LabelWithIcon } from \"../components\";\nimport { EnumValuesChip } from \"../../preview\";\nimport { enumToObjectEntries, getIconForProperty, getLabelOrConfigFrom } from \"../../util\";\nimport { CloseIcon, MultiSelect, MultiSelectItem } from \"@firecms/ui\";\nimport { useClearRestoreValue } from \"../useClearRestoreValue\";\n\n/**\n * This fields renders a dropdown with multiple selection.\n *\n * This is one of the internal components that get mapped natively inside forms\n * and tables to the specified properties.\n * @group Form fields\n */\nexport function MultiSelectBinding({\n                                       propertyKey,\n                                       value,\n                                       setValue,\n                                       error,\n                                       showError,\n                                       disabled,\n                                       property,\n                                       includeDescription,\n                                       autoFocus\n                                   }: FieldProps<EnumType[], any, any>) {\n\n    const of: ResolvedProperty<any> | ResolvedProperty<any>[] = property.of;\n    if (!of) {\n        throw Error(\"Using wrong component ArrayEnumSelect\");\n    }\n\n    if (Array.isArray(of)) {\n        throw Error(\"Using array properties instead of single one in `of` in ArrayProperty\");\n    }\n\n    if (of.dataType !== \"string\" && of.dataType !== \"number\") {\n        throw Error(\"Field misconfiguration: array field of type string or number\");\n    }\n\n    const enumValues = enumToObjectEntries(of.enumValues);\n    if (!enumValues) {\n        console.error(property);\n        throw Error(\"Field misconfiguration: array field of type string or number needs to have enumValues\");\n    }\n\n    useClearRestoreValue({\n        property,\n        value,\n        setValue\n    });\n\n    const validValue = !!value && Array.isArray(value);\n\n    const renderValue = useCallback((enumKey: string, list: boolean) => {\n        const enumValue = enumKey !== undefined ? getLabelOrConfigFrom(enumValues, enumKey) : undefined;\n        return <EnumValuesChip\n            enumKey={enumKey}\n            enumValues={enumValues}\n            size={\"medium\"}\n            key={enumKey}>\n            {enumValue?.label ?? enumKey}\n            {!list && <button\n                className=\"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\"\n                onMouseDown={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }}\n                onClick={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    setValue(value.filter(v => v !== enumKey));\n                }}\n            >\n                <CloseIcon size=\"smallest\"/>\n            </button>}\n        </EnumValuesChip>;\n    }, [enumValues, setValue, value]);\n\n    return (\n        <div className=\"mt-0.5 ml-0.5  mt-2\">\n            <MultiSelect\n                value={validValue ? value.map((v) => v.toString()) : []}\n                disabled={disabled}\n                label={<LabelWithIcon icon={getIconForProperty(property, \"small\")}\n                                      required={property.validation?.required}\n                                      title={property.name}\n                                      className={\"text-text-secondary dark:text-text-secondary-dark ml-3.5\"}/>}\n                renderValue={useCallback((v: string) => renderValue(v, false), [renderValue])}\n                onMultiValueChange={(updatedValue: string[]) => {\n                    let newValue: EnumType[] | null;\n                    if (of && (of as ResolvedProperty)?.dataType === \"number\") {\n                        newValue = updatedValue ? (updatedValue as string[]).map((e) => parseFloat(e)) : [];\n                    } else {\n                        newValue = updatedValue;\n                    }\n                    return setValue(newValue);\n                }}>\n                {enumValues.map((enumValue) => String(enumValue.id)).map((enumKey) => (\n                    <MultiSelectItem key={enumKey} value={enumKey}>\n                        {renderValue(enumKey, true)}\n                    </MultiSelectItem>))}\n            </MultiSelect>\n\n            <FieldHelperText includeDescription={includeDescription}\n                             showError={showError}\n                             error={error}\n                             disabled={disabled}\n                             property={property}/>\n\n        </div>\n    );\n}\n","import React, { useCallback, useMemo } from \"react\";\nimport { Entity, EntityCollection, EntityReference, FieldProps, ResolvedProperty } from \"../../types\";\nimport { ReferencePreview } from \"../../preview\";\nimport { FieldHelperText, FormikArrayContainer, LabelWithIcon } from \"../components\";\nimport { ErrorView } from \"../../components\";\nimport { getIconForProperty, getReferenceFrom } from \"../../util\";\n\nimport { useNavigationController, useReferenceDialog } from \"../../hooks\";\nimport { Button, cn, ExpandablePanel, fieldBackgroundMixin } from \"@firecms/ui\";\nimport { useClearRestoreValue } from \"../useClearRestoreValue\";\n\ntype ArrayOfReferencesFieldProps = FieldProps<EntityReference[]>;\n\n/**\n * This field allows selecting multiple references.\n *\n * This is one of the internal components that get mapped natively inside forms\n * and tables to the specified properties.\n * @group Form fields\n */\nexport function ArrayOfReferencesFieldBinding({\n                                                  propertyKey,\n                                                  value,\n                                                  error,\n                                                  showError,\n                                                  disabled,\n                                                  isSubmitting,\n                                                  tableMode,\n                                                  property,\n                                                  includeDescription,\n                                                  setValue,\n                                                  setFieldValue\n                                              }: ArrayOfReferencesFieldProps) {\n\n    const ofProperty = property.of as ResolvedProperty;\n    if (ofProperty.dataType !== \"reference\") {\n        throw Error(\"ArrayOfReferencesField expected a property containing references\");\n    }\n\n    const expanded = property.expanded === undefined ? true : property.expanded;\n    const selectedEntityIds = value && Array.isArray(value) ? value.map((ref) => ref.id) : [];\n\n    useClearRestoreValue({\n        property,\n        value,\n        setValue\n    });\n\n    const navigationController = useNavigationController();\n    const collection: EntityCollection | undefined = useMemo(() => {\n        return ofProperty.path ? navigationController.getCollection(ofProperty.path) : undefined;\n    }, [ofProperty.path]);\n\n    if (!collection) {\n        throw Error(`Couldn't find the corresponding collection for the path: ${ofProperty.path}`);\n    }\n\n    const onMultipleEntitiesSelected = useCallback((entities: Entity<any>[]) => {\n        console.debug(\"onMultipleEntitiesSelected\", entities);\n        setValue(entities.map(e => getReferenceFrom(e)));\n    }, [setValue]);\n\n    const referenceDialogController = useReferenceDialog({\n            multiselect: true,\n            path: ofProperty.path,\n            collection,\n            onMultipleEntitiesSelected,\n            selectedEntityIds,\n            forceFilter: ofProperty.forceFilter\n        }\n    );\n\n    const onEntryClick = useCallback((e: React.SyntheticEvent) => {\n        e.preventDefault();\n        referenceDialogController.open();\n    }, [referenceDialogController]);\n\n    const buildEntry = useCallback((index: number, internalId: number) => {\n        const entryValue = value && value.length > index ? value[index] : undefined;\n        if (!entryValue)\n            return <div>Internal ERROR</div>;\n        return (\n                <ReferencePreview\n                    key={internalId}\n                    disabled={!ofProperty.path}\n                    previewProperties={ofProperty.previewProperties}\n                    size={\"medium\"}\n                    onClick={onEntryClick}\n                    hover={!disabled}\n                    reference={entryValue}\n                />\n        );\n    }, [ofProperty.path, ofProperty.previewProperties, value]);\n\n    const title = (\n        <LabelWithIcon icon={getIconForProperty(property, \"small\")}\n                       required={property.validation?.required}\n                       title={property.name}\n                       className={\"text-text-secondary dark:text-text-secondary-dark\"}/>\n    );\n\n    const body = <>\n        {!collection && <ErrorView\n            error={\"The specified collection does not exist. Check console\"}/>}\n\n        {collection && <div className={\"group\"}>\n\n            <FormikArrayContainer value={value}\n                                  addLabel={property.name ? \"Add reference to \" + property.name : \"Add reference\"}\n                                  name={propertyKey}\n                                  buildEntry={buildEntry}\n                                  disabled={isSubmitting}\n                                  setFieldValue={setFieldValue}\n                                  newDefaultEntry={property.of.defaultValue}/>\n\n            <Button\n                className=\"my-4 justify-center text-left\"\n                variant=\"outlined\"\n                color=\"primary\"\n                disabled={isSubmitting}\n                onClick={onEntryClick}>\n                Edit {property.name}\n            </Button>\n        </div>}\n    </>;\n\n    return (\n        <>\n\n            {!tableMode &&\n                <ExpandablePanel\n                    titleClassName={fieldBackgroundMixin}\n                    className={cn(\"px-2 md:px-4 pb-2 md:pb-4 pt-1 md:pt-2\", fieldBackgroundMixin)}\n                    initiallyExpanded={expanded}\n                    title={title}>\n                    {body}\n                </ExpandablePanel>}\n\n            {tableMode && body}\n\n            <FieldHelperText includeDescription={includeDescription}\n                             showError={showError}\n                             error={error}\n                             disabled={disabled}\n                             property={property}/>\n\n        </>\n    );\n}\n","import React from \"react\";\n\nimport { Entity, EntityCollection, ResolvedStringProperty } from \"../../types\";\nimport { PreviewSize, PropertyPreview } from \"../../preview\";\n\nimport { cn, IconButton, paperMixin, RemoveIcon, Tooltip } from \"@firecms/ui\";\nimport { ErrorBoundary } from \"../../components\";\n\ninterface StorageItemPreviewProps {\n    name: string;\n    property: ResolvedStringProperty;\n    value: string,\n    entity: Entity<any>,\n    onRemove: (value: string) => void;\n    size: PreviewSize;\n    disabled: boolean;\n    collection: EntityCollection;\n}\n\nexport function StorageItemPreview({\n                                       name,\n                                       property,\n                                       value,\n                                       entity,\n                                       onRemove,\n                                       disabled,\n                                       size,\n                                       collection\n                                   }: StorageItemPreviewProps) {\n\n    return (\n        <div className={cn(paperMixin,\n            \"relative m-4 border-box flex items-center justify-center\",\n            size === \"medium\" ? \"min-w-[220px] min-h-[220px] max-w-[220px]\" : \"min-w-[118px] min-h-[118px] max-w-[118px]\")}>\n\n            {!disabled &&\n                <div\n                    className=\"absolute rounded-full -top-2 -right-2 z-10 bg-white dark:bg-gray-900\">\n\n                    <Tooltip\n                        title=\"Remove\">\n                        <IconButton\n                            size={\"small\"}\n                            onClick={(event) => {\n                                event.stopPropagation();\n                                onRemove(value);\n                            }}>\n                            <RemoveIcon size={\"small\"}/>\n                        </IconButton>\n                    </Tooltip>\n                </div>\n            }\n\n            {value &&\n                <ErrorBoundary>\n                    <PropertyPreview propertyKey={name}\n                                     value={value}\n                                     property={property}\n                        // entity={entity}\n                                     size={size}/>\n                </ErrorBoundary>\n            }\n\n\n        </div>\n    );\n\n}\n","import React, { useCallback } from \"react\";\n\nimport {\n    ArrayProperty,\n    Entity,\n    EntityCollection,\n    FieldProps,\n    ResolvedArrayProperty,\n    ResolvedStringProperty,\n    StorageConfig\n} from \"../../types\";\nimport { useDropzone } from \"react-dropzone\";\nimport { PreviewSize } from \"../../preview\";\nimport { FieldHelperText, LabelWithIcon } from \"../components\";\n\nimport { getIconForProperty, isReadOnly } from \"../../util\";\nimport { useSnackbarController, useStorageSource } from \"../../hooks\";\nimport { DragDropContext, Draggable, Droppable } from \"@hello-pangea/dnd\";\nimport { StorageFieldItem, useStorageUploadController } from \"../../util/useStorageUploadController\";\nimport { StorageUploadProgress } from \"../components/StorageUploadProgress\";\nimport { StorageItemPreview } from \"../components/StorageItemPreview\";\nimport {\n    cn,\n    fieldBackgroundDisabledMixin,\n    fieldBackgroundHoverMixin,\n    fieldBackgroundMixin,\n    focusedMixin,\n    Typography\n} from \"@firecms/ui\";\nimport { useClearRestoreValue } from \"../useClearRestoreValue\";\n\nconst dropZoneClasses = \"box-border relative pt-[2px] items-center border border-transparent min-h-[254px] outline-none rounded-md duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] focus:border-primary-solid\";\nconst disabledClasses = \"border-dotted-gray\"\nconst nonActiveDropClasses = \"hover:bg-field-hover dark:hover:bg-field-hover-dark\"\nconst activeDropClasses = \"pt-0 border-2 border-solid\"\nconst acceptDropClasses = \"transition-colors duration-200 ease-[cubic-bezier(0,0,0.2,1)] border-2 border-solid border-green-500\"\nconst rejectDropClasses = \"transition-colors duration-200 ease-[cubic-bezier(0,0,0.2,1)] border-2 border-solid border-red-500\"\n\ntype StorageUploadFieldProps = FieldProps<string | string[]>;\n\n/**\n * Field that allows to upload files to Google Cloud Storage.\n *\n * This is one of the internal components that get mapped natively inside forms\n * and tables to the specified properties.\n * @group Form fields\n */\nexport function StorageUploadFieldBinding({\n                                              propertyKey,\n                                              value,\n                                              setValue,\n                                              error,\n                                              showError,\n                                              autoFocus,\n                                              tableMode,\n                                              property,\n                                              includeDescription,\n                                              context,\n                                              isSubmitting,\n                                          }: StorageUploadFieldProps) {\n\n    if (!context.entityId)\n        throw new Error(\"StorageUploadFieldBinding: Entity id is null\");\n\n    const storageSource = useStorageSource(context.collection);\n    const disabled = isReadOnly(property) || !!property.disabled || isSubmitting;\n\n    const {\n        internalValue,\n        setInternalValue,\n        onFilesAdded,\n        storage,\n        onFileUploadComplete,\n        storagePathBuilder,\n        multipleFilesSupported\n    } = useStorageUploadController({\n        entityValues: context.values,\n        entityId: context.entityId,\n        path: context.path,\n        property,\n        propertyKey,\n        value,\n        storageSource,\n        disabled,\n        onChange: setValue\n    });\n\n    useClearRestoreValue<string | string[]>({\n        property,\n        value,\n        setValue\n    });\n\n    const entity: Entity<any> = {\n        id: context.entityId,\n        values: context.values,\n        path: context.path\n    };\n\n    return (\n\n        <>\n\n            {!tableMode &&\n                <LabelWithIcon icon={getIconForProperty(property, \"small\")}\n                               required={property.validation?.required}\n                               title={property.name}\n                               className={\"text-text-secondary dark:text-text-secondary-dark ml-3.5\"}/>}\n\n            <StorageUpload\n                value={internalValue}\n                collection={context.collection}\n                name={propertyKey}\n                disabled={disabled}\n                autoFocus={autoFocus}\n                property={property}\n                onChange={setValue}\n                setInternalValue={setInternalValue}\n                onFilesAdded={onFilesAdded}\n                entity={entity}\n                onFileUploadComplete={onFileUploadComplete}\n                storagePathBuilder={storagePathBuilder}\n                storage={storage}\n                multipleFilesSupported={multipleFilesSupported}/>\n\n            <FieldHelperText includeDescription={includeDescription}\n                             showError={showError}\n                             error={error}\n                             disabled={disabled}\n                             property={property}/>\n\n        </>\n    );\n}\n\nfunction FileDropComponent({\n                               storage,\n                               collection,\n                               disabled,\n                               isDraggingOver,\n                               onFilesAdded,\n                               multipleFilesSupported,\n                               droppableProvided,\n                               autoFocus,\n                               internalValue,\n                               property,\n                               entity,\n                               onClear,\n                               metadata,\n                               storagePathBuilder,\n                               onFileUploadComplete,\n                               size,\n                               name,\n                               helpText\n                           }: {\n    storage: StorageConfig,\n    collection: EntityCollection,\n    disabled: boolean,\n    isDraggingOver: boolean,\n    droppableProvided: any,\n    onFilesAdded: (acceptedFiles: File[]) => void,\n    multipleFilesSupported: boolean,\n    autoFocus: boolean,\n    internalValue: StorageFieldItem[],\n    property: ResolvedStringProperty,\n    onClear: (clearedStoragePathOrDownloadUrl: string) => void,\n    metadata: any,\n    entity: Entity<any>;\n    storagePathBuilder: (file: File) => string,\n    onFileUploadComplete: (uploadedPath: string, entry: StorageFieldItem, fileMetadata?: any) => Promise<void>,\n    size: PreviewSize,\n    name: string,\n    helpText: string\n}) {\n\n    const snackbarContext = useSnackbarController();\n\n    const {\n        getRootProps,\n        getInputProps,\n        isDragActive,\n        isDragAccept,\n        isDragReject\n    } = useDropzone({\n            accept: storage.acceptedFiles ? storage.acceptedFiles.map(e => ({ [e]: [] })).reduce((a, b) => ({ ...a, ...b }), {}) : undefined,\n            disabled: disabled || isDraggingOver,\n            noDragEventsBubbling: true,\n            maxSize: storage.maxSize,\n            onDrop: onFilesAdded,\n            onDropRejected: (fileRejections, event) => {\n                for (const fileRejection of fileRejections) {\n                    for (const error of fileRejection.errors) {\n                        snackbarContext.open({\n                            type: \"error\",\n                            message: `Error uploading file: File is larger than ${storage.maxSize} bytes`\n                        });\n                    }\n                }\n            }\n        }\n    );\n\n    return (\n        <div\n            {...getRootProps()}\n            className={cn(\n                fieldBackgroundMixin,\n                disabled ? fieldBackgroundDisabledMixin : fieldBackgroundHoverMixin,\n                dropZoneClasses,\n                multipleFilesSupported && internalValue.length ? \"\" : \"flex\",\n                focusedMixin,\n                {\n                    [nonActiveDropClasses]: !isDragActive,\n                    [activeDropClasses]: isDragActive,\n                    [rejectDropClasses]: isDragReject,\n                    [acceptDropClasses]: isDragAccept,\n                    [disabledClasses]: disabled\n                })}\n        >\n            <div\n                {...droppableProvided.droppableProps}\n                ref={droppableProvided.innerRef}\n                className={cn(\"flex items-center p-1 no-scrollbar\",\n                    multipleFilesSupported && internalValue.length ? \"overflow-auto\" : \"\",\n                    multipleFilesSupported && internalValue.length ? \"min-h-[180px]\" : \"min-h-[250px]\"\n                )}\n            >\n\n                <input\n                    autoFocus={autoFocus}\n                    {...getInputProps()} />\n\n                {internalValue.map((entry, index) => {\n                    let child: any;\n                    if (entry.storagePathOrDownloadUrl) {\n                        child = (\n                            <StorageItemPreview\n                                collection={collection}\n                                name={`storage_preview_${entry.storagePathOrDownloadUrl}`}\n                                property={property}\n                                disabled={disabled}\n                                entity={entity}\n                                value={entry.storagePathOrDownloadUrl}\n                                onRemove={onClear}\n                                size={entry.size}/>\n                        );\n                    } else if (entry.file) {\n                        child = (\n                            <StorageUploadProgress\n                                entry={entry}\n                                metadata={metadata}\n                                storagePath={storagePathBuilder(entry.file)}\n                                onFileUploadComplete={onFileUploadComplete}\n                                imageSize={size === \"medium\" ? 220 : 118}\n                                simple={false}\n                            />\n                        );\n                    }\n\n                    return (\n                        <Draggable\n                            key={`array_field_${name}_${entry.id}`}\n                            draggableId={`array_field_${name}_${entry.id}`}\n                            index={index}>\n                            {(provided, snapshot) => (\n                                <div\n                                    tabIndex={-1}\n                                    ref={provided.innerRef}\n                                    {...provided.draggableProps}\n                                    {...provided.dragHandleProps}\n                                    className={cn(focusedMixin, \"rounded-md\")}\n                                    style={{\n                                        ...provided.draggableProps.style\n                                    }}\n                                >\n                                    {child}\n                                </div>\n                            )}\n                        </Draggable>\n                    );\n                })\n                }\n\n                {droppableProvided.placeholder}\n\n            </div>\n\n            <div\n                className=\"flex-grow min-h-[38px] box-border m-2 text-center\">\n                <Typography align={\"center\"}\n                            variant={\"label\"}>\n                    {helpText}\n                </Typography>\n            </div>\n\n        </div>\n    );\n}\n\nexport interface StorageUploadProps {\n    value: StorageFieldItem[];\n    collection: EntityCollection;\n    setInternalValue: (v: StorageFieldItem[]) => void;\n    name: string;\n    property: ResolvedStringProperty | ResolvedArrayProperty<string[]>;\n    onChange: (value: string | string[] | null) => void;\n    multipleFilesSupported: boolean;\n    autoFocus: boolean;\n    disabled: boolean;\n    entity: Entity<any>;\n    storage: StorageConfig;\n    onFilesAdded: (acceptedFiles: File[]) => void;\n    storagePathBuilder: (file: File) => string;\n    onFileUploadComplete: (uploadedPath: string, entry: StorageFieldItem, fileMetadata?: any) => Promise<void>;\n}\n\nexport function StorageUpload({\n                                  collection,\n                                  property,\n                                  name,\n                                  value,\n                                  setInternalValue,\n                                  onChange,\n                                  multipleFilesSupported,\n                                  onFileUploadComplete,\n                                  disabled,\n                                  onFilesAdded,\n                                  autoFocus,\n                                  storage,\n                                  entity,\n                                  storagePathBuilder,\n                              }: StorageUploadProps) {\n\n    if (multipleFilesSupported) {\n        const arrayProperty = property as ResolvedArrayProperty<string[]>;\n        if (arrayProperty.of) {\n            if (Array.isArray(arrayProperty.of)) {\n                throw Error(\"Storage field using array must be of data type string\");\n            }\n            if (arrayProperty.of.dataType !== \"string\") {\n                throw Error(\"Storage field using array must be of data type string\");\n            }\n        } else {\n            throw Error(\"Storage field using array must be of data type string\");\n        }\n    }\n\n    const metadata: Record<string, unknown> | undefined = storage?.metadata;\n    const size = multipleFilesSupported ? \"small\" : \"medium\";\n\n    const moveItem = useCallback((fromIndex: number, toIndex: number) => {\n        if (!multipleFilesSupported) return;\n        const newValue = [...value];\n        const item = newValue[fromIndex];\n        newValue.splice(fromIndex, 1);\n        newValue.splice(toIndex, 0, item);\n        setInternalValue(newValue);\n        const fieldValue = newValue\n            .filter(e => !!e.storagePathOrDownloadUrl)\n            .map(e => e.storagePathOrDownloadUrl as string);\n        onChange(fieldValue);\n    }, [multipleFilesSupported, onChange, setInternalValue, value]);\n\n    const onDragEnd = useCallback((result: any) => {\n        // dropped outside the list\n        if (!result.destination) {\n            return;\n        }\n\n        moveItem(result.source.index, result.destination.index);\n\n    }, [moveItem])\n\n    const onClear = useCallback((clearedStoragePathOrDownloadUrl: string) => {\n        if (multipleFilesSupported) {\n            const newValue: StorageFieldItem[] = value.filter(v => v.storagePathOrDownloadUrl !== clearedStoragePathOrDownloadUrl);\n            onChange(newValue.filter(v => !!v.storagePathOrDownloadUrl).map(v => v.storagePathOrDownloadUrl as string));\n            setInternalValue(newValue);\n        } else {\n            onChange(null);\n            setInternalValue([]);\n        }\n    }, [value, multipleFilesSupported, onChange]);\n\n    const helpText = multipleFilesSupported\n        ? \"Drag 'n' drop some files here, or click to select files\"\n        : \"Drag 'n' drop a file here, or click to select one\";\n\n    const renderProperty: ResolvedStringProperty = multipleFilesSupported\n        ? (property as ArrayProperty<string[]>).of as ResolvedStringProperty\n        : property as ResolvedStringProperty;\n\n    return (\n        <DragDropContext onDragEnd={onDragEnd}>\n            <Droppable\n                droppableId={`droppable_${name}`}\n                direction=\"horizontal\"\n                renderClone={(provided, snapshot, rubric) => {\n                    const entry = value[rubric.source.index];\n                    return (\n                        <div\n                            ref={provided.innerRef}\n                            {...provided.draggableProps}\n                            {...provided.dragHandleProps}\n                            style={\n                                provided.draggableProps.style\n                            }\n                            className=\"rounded\"\n                        >\n                            <StorageItemPreview\n                                collection={collection}\n                                name={`storage_preview_${entry.storagePathOrDownloadUrl}`}\n                                property={renderProperty}\n                                disabled={true}\n                                entity={entity}\n                                value={entry.storagePathOrDownloadUrl as string}\n                                onRemove={onClear}\n                                size={entry.size}/>\n                        </div>\n                    );\n                }}\n            >\n                {(provided, snapshot) => {\n                    return <FileDropComponent storage={storage}\n                                              collection={collection}\n                                              disabled={disabled}\n                                              isDraggingOver={snapshot.isDraggingOver}\n                                              droppableProvided={provided}\n                                              onFilesAdded={onFilesAdded}\n                                              multipleFilesSupported={multipleFilesSupported}\n                                              autoFocus={autoFocus}\n                                              internalValue={value}\n                                              property={renderProperty}\n                                              entity={entity}\n                                              onClear={onClear}\n                                              metadata={metadata}\n                                              storagePathBuilder={storagePathBuilder}\n                                              onFileUploadComplete={onFileUploadComplete}\n                                              size={size}\n                                              name={name}\n                                              helpText={helpText}/>\n                }}\n            </Droppable>\n        </DragDropContext>\n    );\n\n}\n","import React, { useCallback } from \"react\";\n\nimport { ClearIcon, Collapse, IconButton, TextField } from \"@firecms/ui\";\nimport { FieldProps, PreviewType } from \"../../types\";\nimport { FieldHelperText, LabelWithIcon } from \"../components\";\nimport { getIconForProperty } from \"../../util\";\nimport { PropertyPreview } from \"../../preview\";\nimport { useClearRestoreValue } from \"../useClearRestoreValue\";\n\ninterface TextFieldBindingProps<T extends string | number> extends FieldProps<T> {\n    allowInfinity?: boolean\n}\n\n/**\n * Generic text field.\n * This is one of the internal components that get mapped natively inside forms\n * and tables to the specified properties.\n * @group Form fields\n */\nexport function TextFieldBinding<T extends string | number>({\n                                                                context,\n                                                                propertyKey,\n                                                                value,\n                                                                setValue,\n                                                                error,\n                                                                showError,\n                                                                disabled,\n                                                                autoFocus,\n                                                                property,\n                                                                includeDescription,\n                                                            }: TextFieldBindingProps<T>) {\n\n    let multiline: boolean | undefined;\n    let url: boolean | PreviewType | undefined;\n    if (property.dataType === \"string\") {\n        multiline = property.multiline;\n        url = property.url;\n    }\n\n    useClearRestoreValue({\n        property,\n        value,\n        setValue\n    });\n\n    const handleClearClick = useCallback((e: React.MouseEvent) => {\n        e.stopPropagation();\n        e.preventDefault();\n        setValue(null);\n    }, [setValue]);\n\n    const onChange = (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n        if (inputType === \"number\") {\n            const numberValue = event.target.value ? parseFloat(event.target.value) : undefined;\n            if (numberValue && isNaN(numberValue)) {\n                setValue(null);\n            } else if (numberValue !== undefined && numberValue !== null) {\n                setValue(numberValue as T);\n            } else {\n                setValue(null);\n            }\n        } else {\n            setValue(event.target.value as T);\n        }\n    };\n\n    const isMultiline = Boolean(multiline);\n\n    const inputType = property.dataType === \"number\" ? \"number\" : undefined;\n    return (\n        <>\n            <TextField\n                value={value}\n                onChange={onChange}\n                autoFocus={autoFocus}\n                label={<LabelWithIcon icon={getIconForProperty(property, \"small\")}\n                                      required={property.validation?.required}\n                                      title={property.name}/>}\n                type={inputType}\n                multiline={isMultiline}\n                disabled={disabled}\n                endAdornment={\n                    property.clearable && <IconButton\n                        onClick={handleClearClick}>\n                        <ClearIcon/>\n                    </IconButton>\n                }\n                error={showError ? error : undefined}\n                inputClassName={error ? \"text-red-500 dark:text-red-600\" : \"\"}/>\n\n            <FieldHelperText includeDescription={includeDescription}\n                             showError={showError}\n                             error={error}\n                             disabled={disabled}\n                             property={property}/>\n\n            {url && <Collapse\n                className=\"mt-1 ml-1\"\n                in={Boolean(value)}>\n                <PropertyPreview\n                    value={value}\n                    property={property}\n                    size={\"medium\"}/>\n            </Collapse>}\n\n        </>\n    );\n\n}\n","import React from \"react\";\n\nimport { FieldProps } from \"../../types\";\nimport { getIconForProperty } from \"../../util\";\nimport { FieldHelperText, LabelWithIcon } from \"../components\";\nimport { BooleanSwitchWithLabel } from \"@firecms/ui\";\nimport { useClearRestoreValue } from \"../useClearRestoreValue\";\n\ntype SwitchFieldProps = FieldProps<boolean>;\n\n/**\n * Simple boolean switch biding to a boolean property.\n *\n * This is one of the internal components that get mapped natively inside forms\n * and tables to the specified properties.\n * @group Form fields\n */\nexport const SwitchFieldBinding = React.forwardRef(function SwitchFieldBinding({\n                                                                                   propertyKey,\n                                                                                   value,\n                                                                                   setValue,\n                                                                                   error,\n                                                                                   showError,\n                                                                                   autoFocus,\n                                                                                   disabled,\n                                                                                   touched,\n                                                                                   property,\n                                                                                   includeDescription\n                                                                               }: SwitchFieldProps, ref) {\n\n    useClearRestoreValue({\n        property,\n        value,\n        setValue\n    });\n\n    return (\n        <>\n\n            <BooleanSwitchWithLabel\n                value={value}\n                onValueChange={(v) => setValue(v)}\n                error={showError}\n                label={<LabelWithIcon icon={getIconForProperty(property, \"small\")}\n                                      required={property.validation?.required}\n                                      title={property.name}/>}\n                disabled={disabled}\n                autoFocus={autoFocus}\n                size={\"medium\"}\n            />\n\n            <FieldHelperText includeDescription={includeDescription}\n                             showError={showError}\n                             error={error}\n                             disabled={disabled}\n                             property={property}/>\n        </>\n\n    );\n});\n","import React from \"react\";\n\nimport { FieldProps } from \"../../types\";\n\nimport { FieldHelperText, LabelWithIcon } from \"../components\";\nimport { useCustomizationController } from \"../../hooks\";\nimport { getIconForProperty } from \"../../util\";\nimport { DateTimeField } from \"@firecms/ui\";\nimport { useClearRestoreValue } from \"../useClearRestoreValue\";\n\ntype DateTimeFieldProps = FieldProps<Date>;\n\n/**\n * Field that allows selecting a date\n *\n * This is one of the internal components that get mapped natively inside forms\n * and tables to the specified properties.\n * @group Form fields\n */\nexport function DateTimeFieldBinding({\n                                         propertyKey,\n                                         value,\n                                         setValue,\n                                         autoFocus,\n                                         error,\n                                         showError,\n                                         disabled,\n                                         touched,\n                                         property,\n                                         includeDescription\n                                     }: DateTimeFieldProps) {\n\n    const { locale } = useCustomizationController();\n    const internalValue = value || null;\n\n    useClearRestoreValue({\n        property,\n        value,\n        setValue\n    });\n\n    return (\n        <>\n            <DateTimeField\n                value={internalValue}\n                onChange={(dateValue) => setValue(dateValue ?? null)}\n                size={\"medium\"}\n                mode={property.mode}\n                clearable={property.clearable}\n                locale={locale}\n                error={showError}\n                label={<LabelWithIcon\n                    icon={getIconForProperty(property, \"small\")}\n                    required={property.validation?.required}\n                    className={showError ? \"text-red-500 dark:text-red-500\" : \"text-text-secondary dark:text-text-secondary-dark\"}\n                    title={property.name}/>}\n            />\n\n            <FieldHelperText includeDescription={includeDescription}\n                             showError={showError}\n                             error={error}\n                             disabled={disabled}\n                             property={property}/>\n\n        </>\n    );\n}\n","import React from \"react\";\n\nimport { Entity, FieldProps } from \"../../types\";\n\nimport { PropertyPreview } from \"../../preview\";\nimport { FieldHelperText, LabelWithIcon } from \"../components\";\nimport { ErrorBoundary } from \"../../components\";\nimport { getIconForProperty } from \"../../util\";\nimport { cn, paperMixin } from \"@firecms/ui\";\n\n/**\n *\n * Simply render the non-editable preview of a field\n *\n * This is one of the internal components that get mapped natively inside forms\n * and tables to the specified properties.\n * @group Form fields\n */\nexport function ReadOnlyFieldBinding({\n                                         propertyKey,\n                                         value,\n                                         error,\n                                         showError,\n                                         tableMode,\n                                         property,\n                                         includeDescription,\n                                         context\n                                     }: FieldProps<any>) {\n\n    if (!context.entityId)\n        throw new Error(\"ReadOnlyFieldBinding: Entity id is null\");\n\n    const entity: Entity<any> = {\n        id: context.entityId!,\n        values: context.values,\n        path: context.path\n    };\n\n    return (\n\n        <>\n\n            {!tableMode && <LabelWithIcon icon={getIconForProperty(property, \"small\")}\n                                          required={property.validation?.required}\n                                          title={property.name}\n                                          className={\"text-text-secondary dark:text-text-secondary-dark ml-3.5\"}/>\n            }\n\n            <div\n                className={cn(paperMixin, \"min-h-14 p-4 md:p-6 overflow-x-scroll no-scrollbar\")}>\n\n                <ErrorBoundary>\n                    <PropertyPreview propertyKey={propertyKey}\n                                     value={value}\n                                     property={property}\n                        // entity={entity}\n                                     size={\"medium\"}/>\n                </ErrorBoundary>\n\n            </div>\n\n            <FieldHelperText includeDescription={includeDescription}\n                             showError={showError}\n                             error={error}\n                             property={property}/>\n\n        </>\n    );\n}\n","import React, { useCallback, useMemo } from \"react\";\n\nimport { Entity, EntityCollection, EntityReference, FieldProps } from \"../../types\";\nimport { useNavigationController, useReferenceDialog } from \"../../hooks\";\nimport { ReadOnlyFieldBinding } from \"./ReadOnlyFieldBinding\";\nimport { FieldHelperText, LabelWithIcon } from \"../components\";\nimport { ErrorView } from \"../../components\";\nimport { ReferencePreview } from \"../../preview\";\nimport { getIconForProperty, getReferenceFrom } from \"../../util\";\nimport { Button } from \"@firecms/ui\";\nimport { useClearRestoreValue } from \"../useClearRestoreValue\";\n\n/**\n * Field that opens a reference selection dialog.\n *\n * This is one of the internal components that get mapped natively inside forms\n * and tables to the specified properties.\n * @group Form fields\n */\nexport function ReferenceFieldBinding<M extends Record<string, any>>(props: FieldProps<EntityReference>) {\n\n    if (typeof props.property.path !== \"string\") {\n        return <ReadOnlyFieldBinding {...props}/>\n    }\n\n    return <ReferenceFieldBindingInternal {...props}/>;\n\n}\n\nfunction ReferenceFieldBindingInternal<M extends Record<string, any>>({\n                                                                          value,\n                                                                          setValue,\n                                                                          error,\n                                                                          showError,\n                                                                          isSubmitting,\n                                                                          disabled,\n                                                                          touched,\n                                                                          autoFocus,\n                                                                          property,\n                                                                          includeDescription,\n                                                                          context\n                                                                      }: FieldProps<EntityReference>) {\n    if (!property.path) {\n        throw new Error(\"Property path is required for ReferenceFieldBinding\");\n    }\n\n    useClearRestoreValue({\n        property,\n        value,\n        setValue\n    });\n\n    const validValue = value && value.isEntityReference && value.isEntityReference();\n\n    const navigationController = useNavigationController();\n    const collection: EntityCollection | undefined = useMemo(() => {\n        return property.path ? navigationController.getCollection(property.path) : undefined;\n    }, [property.path]);\n\n    if (!collection) {\n        throw Error(`Couldn't find the corresponding collection for the path: ${property.path}`);\n    }\n\n    const onSingleEntitySelected = useCallback((e: Entity<any> | null) => {\n        setValue(e ? getReferenceFrom(e) : null);\n    }, [setValue]);\n\n    const referenceDialogController = useReferenceDialog({\n            multiselect: false,\n            path: property.path,\n            collection,\n            onSingleEntitySelected,\n            selectedEntityIds: validValue ? [value.id] : undefined,\n            forceFilter: property.forceFilter\n        }\n    );\n\n    const onEntryClick = useCallback((e: React.SyntheticEvent) => {\n        e.preventDefault();\n        referenceDialogController.open();\n    }, [referenceDialogController]);\n\n    return (\n        <>\n            <LabelWithIcon icon={getIconForProperty(property, \"small\")}\n                           required={property.validation?.required}\n                           title={property.name}\n                           className={\"text-text-secondary dark:text-text-secondary-dark ml-3.5\"}/>\n\n            {!collection && <ErrorView\n                error={\"The specified collection does not exist. Check console\"}/>}\n\n            {collection && <>\n\n                {value && <ReferencePreview\n                    disabled={!property.path}\n                    previewProperties={property.previewProperties}\n                    hover={!disabled}\n                    size={\"medium\"}\n                    onClick={disabled || isSubmitting ? undefined : onEntryClick}\n                    reference={value}\n                />}\n\n                {!value && <div className=\"justify-center text-left\">\n                    <Button variant=\"outlined\"\n                            color=\"primary\"\n                            disabled={disabled || isSubmitting}\n                            onClick={onEntryClick}>\n                        Edit {property.name}\n                    </Button>\n                </div>}\n            </>}\n\n            <FieldHelperText includeDescription={includeDescription}\n                             showError={showError}\n                             error={error}\n                             disabled={disabled}\n                             property={property}/>\n\n        </>\n    );\n\n}\n","import React, { ComponentType, ReactElement, useCallback, useRef } from \"react\";\nimport equal from \"react-fast-compare\"\n\nimport { Field, FieldProps as FormexFieldProps, getIn } from \"@firecms/formex\";\n\nimport {\n    CMSType,\n    EntityCollection,\n    FieldProps,\n    FireCMSPlugin,\n    PluginFieldBuilderParams,\n    Property,\n    PropertyFieldBindingProps,\n    PropertyOrBuilder,\n    ResolvedProperty\n} from \"../types\";\nimport { ReadOnlyFieldBinding } from \"./field_bindings/ReadOnlyFieldBinding\";\n\nimport { isHidden, isPropertyBuilder, isReadOnly, resolveProperty } from \"../util\";\nimport { useCustomizationController } from \"../hooks\";\nimport { Typography } from \"@firecms/ui\";\nimport { getFieldConfig, getFieldId } from \"../core\";\nimport { ErrorBoundary } from \"../components\";\n\n/**\n * This component renders a form field creating the corresponding configuration\n * from a property. For example if bound to a string property, it will generate\n * a text field.\n *\n * You can use it when you are creating a custom field, and need to\n * render additional fields mapped to properties. This is useful if you\n * need to build a complex property mapping, like an array where each index\n * is a different property.\n *\n * Please note that if you build a custom field in a component, the\n * **validation** passed in the property will have no effect. You need to set\n * the validation in the `EntityCollection` definition.\n *\n * @param propertyKey You can use nested names such as `address.street` or `friends[2]`\n * @param property\n * @param context\n * @param includeDescription\n * @param underlyingValueHasChanged\n * @param disabled\n * @param tableMode\n * @param partOfArray\n * @param autoFocus\n * @group Form custom fields\n */\nexport const PropertyFieldBinding = React.memo(PropertyFieldBindingInternal, (a: PropertyFieldBindingProps<any>, b: PropertyFieldBindingProps<any>) => {\n    if (a.propertyKey !== b.propertyKey) {\n        return false;\n    }\n    const aIsBuilder = isPropertyBuilder(a.property) || a.property.fromBuilder;\n    const bIsBuilder = isPropertyBuilder(b.property) || b.property.fromBuilder;\n\n    const baseCheck = (aIsBuilder === bIsBuilder || equal(a.property, b.property)) &&\n        a.disabled === b.disabled;\n    if (!baseCheck) {\n        return false;\n    }\n\n    if (shouldPropertyReRender(b.property)) {\n        return false;\n    }\n\n    return false;\n}) as typeof PropertyFieldBindingInternal;\n\nfunction PropertyFieldBindingInternal<T extends CMSType = CMSType, M extends Record<string, any> = Record<string, any>>\n({\n     propertyKey,\n     property,\n     context,\n     includeDescription,\n     underlyingValueHasChanged,\n     disabled,\n     tableMode,\n     partOfArray,\n     partOfBlock,\n     autoFocus,\n }: PropertyFieldBindingProps<T, M>): ReactElement<PropertyFieldBindingProps<T, M>> {\n\n    const customizationController = useCustomizationController();\n\n    return (\n        <Field\n            name={propertyKey}\n        >\n            {(fieldProps) => {\n\n                let Component: ComponentType<FieldProps<T>> | undefined;\n                const resolvedProperty: ResolvedProperty<T> | null = resolveProperty({\n                    propertyKey,\n                    propertyValue: fieldProps.field.value,\n                    propertyOrBuilder: property,\n                    values: fieldProps.form.values,\n                    path: context.path,\n                    entityId: context.entityId,\n                    fields: customizationController.propertyConfigs\n                });\n\n                if (resolvedProperty === null || isHidden(resolvedProperty)) {\n                    return <></>;\n                } else if (isReadOnly(resolvedProperty)) {\n                    Component = ReadOnlyFieldBinding;\n                } else if (resolvedProperty.Field) {\n                    if (typeof resolvedProperty.Field === \"function\") {\n                        Component = resolvedProperty.Field as ComponentType<FieldProps<any>>;\n                    }\n                } else {\n                    const propertyConfig = getFieldConfig(resolvedProperty, customizationController.propertyConfigs);\n                    if (!propertyConfig) {\n                        console.log(\"INTERNAL: Could not find field config for property\", { propertyKey, resolvedProperty, fields: customizationController.propertyConfigs, propertyConfig });\n                        throw new Error(`INTERNAL: Could not find field config for property ${propertyKey}`);\n                    }\n                    const configProperty = resolveProperty({\n                        propertyOrBuilder: propertyConfig.property,\n                        propertyValue: fieldProps.field.value,\n                        values: fieldProps.form.values,\n                        path: context.path,\n                        entityId: context.entityId,\n                        fields: customizationController.propertyConfigs\n                    });\n                    Component = configProperty.Field as ComponentType<FieldProps<T>>;\n                }\n                if (!Component) {\n                    console.warn(`No field component found for property ${propertyKey}`);\n                    console.warn(\"Property:\", property);\n                    return (\n                        <div>{`Currently the field ${resolvedProperty.dataType} is not supported`}</div>\n                    );\n                }\n\n                const componentProps: ResolvedPropertyFieldBindingProps<T, M> = {\n                    propertyKey,\n                    property: resolvedProperty,\n                    includeDescription,\n                    underlyingValueHasChanged,\n                    context,\n                    disabled,\n                    tableMode,\n                    partOfArray,\n                    partOfBlock,\n                    autoFocus\n                };\n\n                return <FieldInternal\n                    Component={Component as ComponentType<FieldProps>}\n                    componentProps={componentProps}\n                    fieldProps={fieldProps}/>;\n            }}\n        </Field>\n    );\n\n}\n\ntype ResolvedPropertyFieldBindingProps<T extends CMSType = CMSType, M extends Record<string, any> = Record<string, any>> =\n    Omit<PropertyFieldBindingProps<T, M>, \"property\">\n    & {\n    property: ResolvedProperty<T>\n};\n\nfunction FieldInternal<T extends CMSType, CustomProps, M extends Record<string, any>>\n({\n     Component,\n     componentProps: {\n         propertyKey,\n         property,\n         includeDescription,\n         underlyingValueHasChanged,\n         tableMode,\n         partOfArray,\n         partOfBlock,\n         autoFocus,\n         context,\n         disabled\n     },\n     fieldProps\n }:\n     {\n         Component: ComponentType<FieldProps<T, any, M>>,\n         componentProps: ResolvedPropertyFieldBindingProps<T, M>,\n         fieldProps: FormexFieldProps<T, any>\n     }) {\n\n    const { plugins } = useCustomizationController();\n\n    const customFieldProps: any = property.customProps;\n    const value = fieldProps.field.value;\n    // const initialValue = fieldProps.meta.initialValue;\n    const error = getIn(fieldProps.form.errors, propertyKey);\n    const touched = getIn(fieldProps.form.touched, propertyKey);\n\n    const showError: boolean = error &&\n        (fieldProps.form.submitCount > 0 || property.validation?.unique) &&\n        (!Array.isArray(error) || !!error.filter((e: any) => !!e).length);\n\n    const WrappedComponent: ComponentType<FieldProps<T, any, M>> | null = useWrappedComponent(context.path, context.collection, propertyKey, property, Component, plugins);\n    const UsedComponent: ComponentType<FieldProps<T>> = WrappedComponent ?? Component;\n\n    const isSubmitting = fieldProps.form.isSubmitting;\n\n    const setValue = useCallback((value: T | null, shouldValidate?: boolean) => {\n        fieldProps.form.setFieldTouched(propertyKey, true, false);\n        fieldProps.form.setFieldValue(propertyKey, value, shouldValidate);\n    }, []);\n\n    const setFieldValue = useCallback((otherPropertyKey: string, value: CMSType | null, shouldValidate?: boolean) => {\n        fieldProps.form.setFieldTouched(propertyKey, true, false);\n        fieldProps.form.setFieldValue(otherPropertyKey, value, shouldValidate);\n    }, []);\n\n    const cmsFieldProps: FieldProps<T, CustomProps, M> = {\n        propertyKey,\n        value: value as T,\n        // initialValue,\n        setValue,\n        setFieldValue,\n        error,\n        touched,\n        showError,\n        isSubmitting,\n        includeDescription: includeDescription ?? true,\n        property: property as ResolvedProperty<T>,\n        disabled: disabled ?? false,\n        underlyingValueHasChanged: underlyingValueHasChanged ?? false,\n        tableMode: tableMode ?? false,\n        partOfArray: partOfArray ?? false,\n        partOfBlock: partOfBlock ?? false,\n        autoFocus: autoFocus ?? false,\n        customProps: customFieldProps,\n        context\n    };\n\n    return (\n        <ErrorBoundary>\n\n            <UsedComponent {...cmsFieldProps}/>\n\n            {underlyingValueHasChanged && !isSubmitting &&\n                <Typography variant={\"caption\"} className={\"ml-3.5\"}>\n                    This value has been updated elsewhere\n                </Typography>}\n\n        </ErrorBoundary>);\n\n}\n\nconst shouldPropertyReRender = (property: PropertyOrBuilder | ResolvedProperty, plugins?: FireCMSPlugin[]): boolean => {\n    if (plugins?.some((plugin) => plugin.form?.fieldBuilder)) {\n        return true;\n    }\n    if (isPropertyBuilder(property)) {\n        return true;\n    }\n    const defAProperty = property as Property | ResolvedProperty;\n    const rerenderThisProperty = Boolean(defAProperty.Field) || (\"fromBuilder\" in defAProperty && defAProperty.fromBuilder);\n    if (defAProperty.dataType === \"map\" && defAProperty.properties) {\n        return rerenderThisProperty || Object.values(defAProperty.properties).some((childProperty) => shouldPropertyReRender(childProperty, plugins));\n    } else if (defAProperty.dataType === \"array\" && \"resolvedProperties\" in defAProperty) {\n        // @ts-ignore\n        return rerenderThisProperty || defAProperty.resolvedProperties?.some((childProperty) => childProperty && shouldPropertyReRender(childProperty, plugins));\n    } else {\n        return rerenderThisProperty;\n    }\n}\n\nfunction useWrappedComponent<T extends CMSType = CMSType, M extends Record<string, any> = any>(\n    path: string,\n    collection: EntityCollection<M>,\n    propertyKey: string,\n    property: ResolvedProperty<T>,\n    Component: ComponentType<FieldProps<T, any, M>>,\n    plugins?: FireCMSPlugin[]\n): ComponentType<FieldProps<T, any, M>> | null {\n\n    const wrapperRef = useRef<ComponentType<FieldProps<T, any, M>> | null>((() => {\n        let Wrapper: ComponentType<FieldProps<T, any, M>> | null = null;\n        if (plugins) {\n            plugins.forEach((plugin) => {\n                const fieldId = getFieldId(property);\n                if (fieldId && plugin.form?.fieldBuilder) {\n                    const params: PluginFieldBuilderParams<T> = {\n                        fieldConfigId: fieldId,\n                        propertyKey,\n                        property,\n                        Field: Component,\n                        plugin,\n                        path,\n                        collection\n                    };\n                    const enabled = plugin.form?.fieldBuilderEnabled?.(params);\n                    if (enabled === undefined || enabled)\n                        Wrapper = plugin.form.fieldBuilder(params) || Wrapper;\n                }\n                if (!fieldId) {\n                    console.warn(\"INTERNAL: Field id not found for property\", property);\n                }\n            });\n        }\n        return Wrapper;\n    })());\n\n    return wrapperRef.current;\n}\n","import React from \"react\";\nimport { FieldProps, Properties, ResolvedProperties } from \"../../types\";\n\nimport { ErrorBoundary } from \"../../components\";\nimport { getIconForProperty, isHidden, pick } from \"../../util\";\nimport { FieldHelperText, LabelWithIcon } from \"../components\";\nimport { PropertyFieldBinding } from \"../PropertyFieldBinding\";\nimport { ExpandablePanel, InputLabel, Select, SelectItem } from \"@firecms/ui\";\n\n/**\n * Field that renders the children property fields\n *\n * This is one of the internal components that get mapped natively inside forms\n * and tables to the specified properties.\n * @group Form fields\n */\nexport function MapFieldBinding({\n                                    propertyKey,\n                                    value,\n                                    showError,\n                                    error,\n                                    disabled,\n                                    property,\n                                    setValue,\n                                    partOfBlock,\n                                    tableMode,\n                                    includeDescription,\n                                    underlyingValueHasChanged,\n                                    autoFocus,\n                                    context\n                                }: FieldProps<Record<string, any>>) {\n\n    const pickOnlySomeKeys = property.pickOnlySomeKeys || false;\n    const expanded = (property.expanded === undefined ? true : property.expanded) || autoFocus;\n\n    if (!property.properties) {\n        throw Error(`You need to specify a 'properties' prop (or specify a custom field) in your map property ${propertyKey}`);\n    }\n\n    let mapProperties: ResolvedProperties;\n    if (pickOnlySomeKeys) {\n        if (value) {\n            mapProperties = pick(property.properties,\n                ...Object.keys(value)\n                    .filter(key => key in property.properties!)\n            );\n        } else {\n            mapProperties = {};\n        }\n    } else {\n        mapProperties = property.properties;\n    }\n\n    const mapFormView = <>\n        <div className=\"py-1 flex flex-col space-y-2\">\n            {Object.entries(mapProperties)\n                .filter(([_, property]) => !isHidden(property))\n                .map(([entryKey, childProperty], index) => {\n                        const fieldProps = {\n                            propertyKey: `${propertyKey}.${entryKey}`,\n                            disabled,\n                            property: childProperty,\n                            includeDescription,\n                            underlyingValueHasChanged,\n                            context,\n                            tableMode: false,\n                            partOfArray: false,\n                            partOfBlock: false,\n                            autoFocus: autoFocus && index === 0\n                        };\n                        return (\n                            <div key={`map-${propertyKey}-${index}`}>\n                                <ErrorBoundary>\n                                    <PropertyFieldBinding\n                                        {...fieldProps}/>\n                                </ErrorBoundary>\n                            </div>\n                        );\n                    }\n                )}\n        </div>\n\n        {/*{pickOnlySomeKeys && buildPickKeysSelect(disabled, property.properties, setValue, value)}*/}\n\n    </>;\n\n    const title = (\n        <LabelWithIcon icon={getIconForProperty(property, \"small\")}\n                       required={property.validation?.required}\n                       title={property.name}\n                       className={\"text-text-secondary dark:text-text-secondary-dark\"}/>\n    );\n\n    return (\n        <ErrorBoundary>\n\n            {!tableMode && !partOfBlock && <ExpandablePanel initiallyExpanded={expanded}\n                                                            className={\"px-2 md:px-4 pb-2 md:pb-4 pt-1 md:pt-2 bg-slate-50 bg-opacity-50 dark:bg-gray-900\"}\n                                                            title={title}>{mapFormView}</ExpandablePanel>}\n\n            {(tableMode || partOfBlock) && mapFormView}\n\n            <FieldHelperText includeDescription={includeDescription}\n                             showError={showError}\n                             error={error ? (typeof error === \"string\" ? error : \"A property of this map has an error\") : undefined}\n                             disabled={disabled}\n                             property={property}/>\n\n        </ErrorBoundary>\n    );\n}\n\nconst buildPickKeysSelect = (disabled: boolean, properties: Properties, setValue: (value: any) => void, value: any) => {\n\n    const keys = Object.keys(properties)\n        .filter((key) => !value || !(key in value));\n\n    const handleAddProperty = (updatedValue: string | string[]) => {\n        setValue({\n            ...value,\n            [updatedValue as string]: null\n        });\n    };\n\n    if (!keys.length) return <></>;\n\n    return <div className={\"m-4\"}>\n        <InputLabel>Add property</InputLabel>\n        <Select\n            value={\"\"}\n            disabled={disabled}\n            onValueChange={handleAddProperty}\n            renderValue={(key) => (properties as Properties)[key].name || key}>\n            {keys.map((key) => <SelectItem key={key}\n                                           value={key}>{(properties as Properties)[key].name || key}</SelectItem>)}\n        </Select>\n    </div>;\n};\n","import React, { useEffect, useState } from \"react\";\nimport { DataType, FieldProps, GeoPoint } from \"../../types\";\n\nimport { ArrayContainer } from \"../../components\";\nimport { FieldHelperText, LabelWithIcon } from \"../components\";\nimport {\n    AddIcon,\n    ArrowDropDownIcon,\n    BooleanSwitchWithLabel,\n    Button,\n    cn,\n    DateTimeField,\n    defaultBorderMixin,\n    ExpandablePanel,\n    IconButton,\n    Menu,\n    MenuItem,\n    RemoveIcon,\n    TextField,\n    Typography\n} from \"@firecms/ui\";\nimport { getDefaultValueForDataType, getIconForProperty } from \"../../util\";\nimport { useCustomizationController } from \"../../hooks\";\n\ntype MapEditViewRowState = [number, {\n    key: string,\n    dataType: DataType\n}];\n\n/**\n * Field that allows edition of key value pairs.\n *\n * @group Form fields\n */\nexport function KeyValueFieldBinding({\n                                         propertyKey,\n                                         value,\n                                         showError,\n                                         error,\n                                         disabled,\n                                         property,\n                                         setValue,\n                                         tableMode,\n                                         includeDescription,\n                                         underlyingValueHasChanged,\n                                         autoFocus,\n                                         context\n                                     }: FieldProps<Record<string, any>>) {\n\n    const expanded = (property.expanded === undefined ? true : property.expanded) || autoFocus;\n\n    if (!property.keyValue) {\n        throw Error(`Your property ${propertyKey} needs to have the 'keyValue' prop in order to use this field binding`);\n    }\n    const mapFormView = <MapEditView value={value}\n                                     setValue={setValue}\n                                     disabled={disabled}\n                                     fieldName={property.name ?? propertyKey}/>;\n\n    const title = <LabelWithIcon\n        icon={getIconForProperty(property, \"small\")}\n        required={property.validation?.required}\n        title={property.name}\n        className={\"text-text-secondary dark:text-text-secondary-dark\"}/>;\n\n    return (\n        <>\n\n            {!tableMode && <ExpandablePanel initiallyExpanded={expanded}\n                                            title={title}\n                                            className={\"px-2 md:px-4 pb-2 md:pb-4 pt-1 md:pt-2\"}>{mapFormView}</ExpandablePanel>}\n\n            {tableMode && mapFormView}\n\n            <FieldHelperText includeDescription={includeDescription}\n                             showError={showError}\n                             error={error}\n                             disabled={disabled}\n                             property={property}/>\n\n        </>\n    );\n}\n\ninterface MapEditViewParams<T extends Record<string, any>> {\n    value?: T;\n    setValue: (value: (T | null)) => void;\n    fieldName?: string,\n    disabled?: boolean\n}\n\nfunction MapEditView<T extends Record<string, any>>({\n                                                        value,\n                                                        setValue,\n                                                        fieldName,\n                                                        disabled\n                                                    }: MapEditViewParams<T>) {\n    const [internalState, setInternalState] = React.useState<MapEditViewRowState[]>(\n        Object.keys(value ?? {}).map((key) => [getRandomId(), {\n            key,\n            dataType: getDataType(value?.[key]) ?? \"string\"\n        }])\n    );\n\n    useEffect(() => {\n        const currentKeys = internalState.map(([id, { key }]) => key);\n        const newKeys = Object.entries(value ?? {}).filter(([key, v]) => v !== undefined).map(([key]) => key);\n        const keysToAdd = newKeys.filter((key) => !currentKeys.includes(key));\n        const keysToRemove = currentKeys.filter((key) => !newKeys.includes(key));\n        const newRowIds = [...internalState];\n        keysToAdd.forEach((key) => {\n            newRowIds.push([getRandomId(), {\n                key,\n                dataType: getDataType(value?.[key]) ?? \"string\"\n            }]);\n        });\n        keysToRemove.forEach((key) => {\n            const index = newRowIds.findIndex(([id, { key: k }]) => k === key);\n            newRowIds.splice(index, 1);\n        });\n        setInternalState(newRowIds);\n    }, [value]);\n\n    const originalValue = React.useRef<T>(value ?? {} as T);\n\n    const updateDataType = (rowId: number, dataType: DataType) => {\n        if (!rowId) {\n            console.warn(\"No key selected for data type update\");\n            return;\n        }\n        setInternalState(internalState.map((row) => {\n            if (row[0] === rowId) {\n                return [row[0], {\n                    key: row[1].key,\n                    dataType\n                }];\n            }\n            return row;\n        }));\n        setValue({\n            ...(value ?? {} as T),\n            [internalState.find((row) => row[0] === rowId)?.[1].key ?? \"\"]: getDefaultValueForDataType(dataType)\n        })\n    };\n\n    return <div className=\"py-1 flex flex-col gap-1\">\n        {internalState\n            .map(([rowId, {\n                    key: fieldKey,\n                    dataType\n                }], index) => {\n                    const entryValue = fieldKey ? value?.[fieldKey] : \"\";\n                    const onFieldKeyChange = (newKey: string) => {\n\n                        setInternalState(internalState.map((currentRowId) => {\n                            if (currentRowId[0] === rowId) {\n                                return [rowId, {\n                                    key: newKey ?? \"\",\n                                    dataType: currentRowId[1].dataType\n                                }];\n                            }\n                            return currentRowId;\n                        }));\n\n                        if (typeof value === \"object\" && newKey in value) {\n                            // if the key is already there, don't delete the previous value\n                            return;\n                        }\n\n                        const newValue = { ...(value ?? {}) } as T;\n                        if (typeof originalValue.current === \"object\" && fieldKey in originalValue.current) {\n                            // @ts-ignore\n                            newValue[fieldKey] = undefined; // set to undefined to remove from the object, the datasource will remove it from the backend\n                        } else {\n                            // @ts-ignore\n                            delete newValue[fieldKey];\n                        }\n                        setValue({\n                            ...newValue,\n                            [newKey ?? \"\"]: entryValue\n                        });\n                    };\n                    return <MapKeyValueRow rowId={rowId}\n                                           key={rowId}\n                                           fieldKey={fieldKey}\n                                           value={value ?? {} as T}\n                                           onDeleteClick={() => {\n                                               const newValue = { ...(value ?? {}) as T };\n                                               if (originalValue.current && fieldKey in originalValue.current) {\n                                                   // @ts-ignore\n                                                   newValue[fieldKey] = undefined;\n                                               } else {\n                                                   // @ts-ignore\n                                                   delete newValue[fieldKey];\n                                               }\n                                               setInternalState(internalState.filter((currentRowId) => currentRowId[0] !== rowId));\n                                               setValue({\n                                                   ...newValue\n                                               });\n                                           }}\n                                           onFieldKeyChange={onFieldKeyChange}\n                                           setValue={setValue}\n                                           entryValue={entryValue}\n                                           dataType={dataType}\n                                           disabled={disabled}\n                                           updateDataType={updateDataType}/>;\n                }\n            )}\n\n        <Button variant={\"text\"}\n                size={\"small\"}\n                color=\"primary\"\n                className=\"w-full\"\n                disabled={disabled}\n                startIcon={<AddIcon/>}\n                onClick={(e) => {\n                    e.preventDefault();\n                    setValue({\n                        ...(value ?? {} as T),\n                        \"\": null\n                    });\n                    setInternalState([...internalState, [getRandomId(), {\n                        key: \"\",\n                        dataType: \"string\"\n                    }]]);\n                }\n                }>\n            {fieldName ? `Add to ${fieldName}` : \"Add\"}\n        </Button>\n\n    </div>;\n}\n\nfunction MapKeyValueRow<T extends Record<string, any>>({\n                                                           rowId,\n                                                           fieldKey,\n                                                           value,\n                                                           onFieldKeyChange,\n                                                           onDeleteClick,\n                                                           setValue,\n                                                           entryValue,\n                                                           dataType,\n                                                           updateDataType,\n                                                           disabled\n                                                       }: {\n    rowId: number,\n    fieldKey: string,\n    value: T,\n    onFieldKeyChange: (newKey: string) => void,\n    onDeleteClick: () => void,\n    setValue: (value: (T | null)) => void,\n    entryValue: any,\n    dataType: DataType,\n    disabled?: boolean,\n    updateDataType: (rowId: number, dataType: DataType) => void\n}) {\n\n    const { locale } = useCustomizationController();\n\n    function buildInput(entryValue: any, fieldKey: string, dataType: DataType) {\n        if (dataType === \"string\" || dataType === \"number\") {\n            return <TextField\n                key={dataType}\n                placeholder={\"value\"}\n                value={entryValue}\n                type={dataType === \"number\" ? \"number\" : \"text\"}\n                size={\"small\"}\n                disabled={disabled || !fieldKey}\n                onChange={(event) => {\n                    if (dataType === \"number\") {\n                        const numberValue = event.target.value ? parseFloat(event.target.value) : undefined;\n                        if (numberValue && isNaN(numberValue)) {\n                            setValue({\n                                ...value,\n                                [fieldKey]: null\n                            });\n                        } else if (numberValue !== undefined && numberValue !== null) {\n                            setValue({\n                                ...value,\n                                [fieldKey]: numberValue\n                            });\n                        } else {\n                            setValue({\n                                ...value,\n                                [fieldKey]: null\n                            });\n                        }\n                    } else {\n                        setValue({\n                            ...value,\n                            [fieldKey]: event.target.value\n                        });\n                    }\n                }}/>;\n        } else if (dataType === \"date\") {\n            return <DateTimeField value={entryValue}\n                                  size={\"small\"}\n                                  locale={locale}\n                                  disabled={disabled || !fieldKey}\n                                  onChange={(date) => {\n                                      setValue({\n                                          ...value,\n                                          [fieldKey]: date\n                                      });\n                                  }}/>;\n        } else if (dataType === \"boolean\") {\n            return <BooleanSwitchWithLabel value={entryValue}\n                                           size={\"small\"}\n                                           position={\"start\"}\n                                           disabled={disabled || !fieldKey}\n                                           onValueChange={(newValue) => {\n                                               setValue({\n                                                   ...value,\n                                                   [fieldKey]: newValue\n                                               });\n                                           }}/>;\n        } else if (dataType === \"array\") {\n            return <div\n                className={cn(defaultBorderMixin, \"ml-2 pl-2 border-l border-solid\")}>\n                <ArrayContainer value={entryValue}\n                                newDefaultEntry={\"\"}\n                                droppableId={rowId.toString()}\n                                addLabel={fieldKey ? `Add to ${fieldKey}` : \"Add\"}\n                                size={\"small\"}\n                                disabled={disabled || !fieldKey}\n                                includeAddButton={true}\n                                onValueChange={(newValue) => {\n                                    setValue({\n                                        ...value,\n                                        [fieldKey]: newValue\n                                    });\n                                }}\n                                buildEntry={(index, internalId) => {\n                                    return <ArrayKeyValueRow\n                                        index={index}\n                                        id={internalId}\n                                        value={entryValue[index]}\n                                        disabled={disabled || !fieldKey}\n                                        setValue={(newValue) => {\n                                            const newArrayValue = [...entryValue];\n                                            newArrayValue[index] = newValue;\n                                            setValue({\n                                                ...value,\n                                                [fieldKey]: newArrayValue\n                                            });\n                                        }}\n                                    />\n                                }}/>\n            </div>;\n        } else if (dataType === \"map\") {\n            return <div\n                className={cn(defaultBorderMixin, \"ml-2 pl-2 border-l border-solid\")}>\n                <MapEditView value={entryValue}\n                             fieldName={fieldKey}\n                             setValue={(updatedValue) => {\n                                 setValue({\n                                     ...value,\n                                     [fieldKey]: updatedValue\n                                 });\n                             }}/>\n            </div>;\n        } else {\n            return <Typography\n                variant={\"caption\"}>\n                {`Data type ${dataType} not supported yet`}\n            </Typography>;\n        }\n    }\n\n    function doUpdateDataType(dataType: DataType) {\n        updateDataType(rowId, dataType);\n    }\n\n    return (<>\n            <Typography key={rowId.toString()}\n                        component={\"div\"}\n                        className=\"font-mono flex flex-row gap-1\">\n                <div className=\"w-[200px] max-w-[25%]\">\n                    <TextField\n                        value={fieldKey}\n                        placeholder={\"key\"}\n                        disabled={disabled || (entryValue !== undefined && entryValue !== null && entryValue !== \"\")}\n                        size={\"small\"}\n                        onChange={(event) => {\n                            onFieldKeyChange(event.target.value);\n                        }}/>\n                </div>\n\n                <div className=\"flex-grow\">\n                    {(dataType !== \"map\" && dataType !== \"array\") && buildInput(entryValue, fieldKey, dataType)}\n                </div>\n                <Menu\n                    trigger={<IconButton size={\"small\"}\n                                         className=\"h-7 w-7\">\n                        <ArrowDropDownIcon/>\n                    </IconButton>}\n                >\n                    <MenuItem dense\n                              onClick={() => doUpdateDataType(\"string\")}>string</MenuItem>\n                    <MenuItem dense\n                              onClick={() => doUpdateDataType(\"number\")}>number</MenuItem>\n                    <MenuItem dense\n                              onClick={() => doUpdateDataType(\"boolean\")}>boolean</MenuItem>\n                    <MenuItem dense\n                              onClick={() => doUpdateDataType(\"date\")}>date</MenuItem>\n                    <MenuItem dense\n                              onClick={() => doUpdateDataType(\"map\")}>map</MenuItem>\n                    <MenuItem dense\n                              onClick={() => doUpdateDataType(\"array\")}>array</MenuItem>\n                </Menu>\n\n                <IconButton aria-label=\"delete\"\n                            size={\"small\"}\n                            onClick={onDeleteClick}\n                            className=\"h-7 w-7\">\n                    <RemoveIcon size={\"small\"}/>\n                </IconButton>\n            </Typography>\n\n            {(dataType === \"map\" || dataType === \"array\") && buildInput(entryValue, fieldKey, dataType)}\n\n        </>\n\n    );\n}\n\nfunction ArrayKeyValueRow<T>({\n                                 id,\n                                 index,\n                                 value,\n                                 setValue\n                             }: {\n    id: number,\n    index: number,\n    value: T,\n    setValue: (value: T | null) => void,\n    disabled?: boolean,\n}) {\n\n    const { locale } = useCustomizationController();\n    const [selectedDataType, setSelectedDataType] = useState<DataType>(getDataType(value) ?? \"string\");\n\n    function doUpdateDataType(dataType: DataType) {\n        setSelectedDataType(dataType);\n    }\n\n    function buildInput(entryValue: any, dataType: DataType) {\n        if (dataType === \"string\" || dataType === \"number\") {\n            return <TextField value={entryValue}\n                              type={dataType === \"number\" ? \"number\" : \"text\"}\n                              size={\"small\"}\n                              onChange={(event) => {\n                                  if (dataType === \"number\") {\n                                      const numberValue = event.target.value ? parseFloat(event.target.value) : undefined;\n                                      if (numberValue && isNaN(numberValue)) {\n                                          setValue(null);\n                                      } else if (numberValue !== undefined && numberValue !== null) {\n                                          setValue(numberValue as T);\n                                      } else {\n                                          setValue(null);\n                                      }\n                                  } else {\n                                      setValue(event.target.value as T);\n                                  }\n                              }}/>;\n        } else if (dataType === \"date\") {\n            return <DateTimeField value={entryValue}\n                                  size={\"small\"}\n                                  locale={locale}\n                                  onChange={(date) => {\n                                      setValue(date as T);\n                                  }}/>;\n        } else if (dataType === \"boolean\") {\n            return <BooleanSwitchWithLabel value={entryValue}\n                                           size={\"small\"}\n                                           position={\"start\"}\n                                           onValueChange={(v) => {\n                                               setValue(v as T);\n                                           }}/>;\n        } else if (dataType === \"array\") {\n            return <Typography variant={\"caption\"}>\n                Arrays of arrays are not supported.\n            </Typography>;\n        } else if (dataType === \"map\") {\n            return <div className={cn(defaultBorderMixin, \"ml-2 pl-2 border-l border-solid\")}>\n                <MapEditView value={entryValue}\n                             setValue={(updatedValue) => {\n                                 setValue(updatedValue);\n                             }}/>\n            </div>;\n        } else {\n            return <Typography\n                variant={\"caption\"}>\n                {`Data type ${dataType} not supported yet`}\n            </Typography>;\n        }\n    }\n\n    return (<>\n            <Typography key={id.toString()}\n                        component={\"div\"}\n                        className=\"font-mono flex min-h-12 flex-row gap-1 items-center\">\n\n                <div className=\"flex-grow\">\n                    {selectedDataType !== \"map\" && buildInput(value, selectedDataType)}\n                </div>\n\n                <Menu\n                    trigger={<IconButton size={\"small\"}\n                                         className=\"h-7 w-7\">\n                        <ArrowDropDownIcon/>\n                    </IconButton>}>\n                    <MenuItem dense\n                              onClick={() => doUpdateDataType(\"string\")}>string</MenuItem>\n                    <MenuItem dense\n                              onClick={() => doUpdateDataType(\"number\")}>number</MenuItem>\n                    <MenuItem dense\n                              onClick={() => doUpdateDataType(\"boolean\")}>boolean</MenuItem>\n                    <MenuItem dense\n                              onClick={() => doUpdateDataType(\"map\")}>map</MenuItem>\n                    <MenuItem dense\n                              onClick={() => doUpdateDataType(\"date\")}>date</MenuItem>\n                </Menu>\n\n            </Typography>\n\n            {selectedDataType === \"map\" && buildInput(value, selectedDataType)}\n\n        </>\n\n    );\n}\n\nfunction getRandomId() {\n    return Math.floor(Math.random() * Math.floor(Number.MAX_SAFE_INTEGER));\n}\n\nfunction getDataType(value: any): DataType | undefined {\n    if (typeof value === \"string\" || value === null) {\n        return \"string\";\n    } else if (typeof value === \"number\") {\n        return \"number\";\n    } else if (typeof value === \"boolean\") {\n        return \"boolean\";\n    } else if (Array.isArray(value)) {\n        return \"array\";\n    } else if (value instanceof Date) {\n        return \"date\";\n    } else if (value?.isEntityReference && value?.isEntityReference()) {\n        return \"reference\";\n    } else if (value instanceof GeoPoint) {\n        return \"geopoint\";\n    } else if (typeof value === \"object\") {\n        return \"map\";\n    }\n\n    return undefined;\n}\n","import React, { useState } from \"react\";\nimport { CMSType, FieldProps, ResolvedProperty } from \"../../types\";\nimport { FieldHelperText, FormikArrayContainer, LabelWithIcon } from \"../components\";\nimport { ErrorBoundary } from \"../../components\";\nimport { getIconForProperty } from \"../../util\";\nimport { PropertyFieldBinding } from \"../PropertyFieldBinding\";\nimport { ExpandablePanel } from \"@firecms/ui\";\nimport { useClearRestoreValue } from \"../useClearRestoreValue\";\n\n/**\n * Generic array field that allows reordering and renders the child property\n * as nodes.\n *\n * This is one of the internal components that get mapped natively inside forms\n * and tables to the specified properties.\n * @group Form fields\n */\nexport function RepeatFieldBinding<T extends Array<any>>({\n                                                             propertyKey,\n                                                             value,\n                                                             error,\n                                                             showError,\n                                                             isSubmitting,\n                                                             setValue,\n                                                             setFieldValue,\n                                                             tableMode,\n                                                             property,\n                                                             includeDescription,\n                                                             underlyingValueHasChanged,\n                                                             context,\n                                                             disabled\n                                                         }: FieldProps<T>) {\n\n    if (!property.of)\n        throw Error(\"RepeatFieldBinding misconfiguration. Property `of` not set\");\n\n    if (!property.resolvedProperties || !Array.isArray(property.resolvedProperties))\n        throw Error(\"RepeatFieldBinding - Internal error: Expected array in 'property.resolvedProperties'\");\n\n    const expanded = property.expanded === undefined ? true : property.expanded;\n    const ofProperty: ResolvedProperty<CMSType[]> = property.of as ResolvedProperty<CMSType[]>;\n\n    const [lastAddedId, setLastAddedId] = useState<number | undefined>();\n\n    useClearRestoreValue({\n        property,\n        value,\n        setValue\n    });\n\n    const buildEntry = (index: number, internalId: number) => {\n        const childProperty = property.resolvedProperties[index] ?? ofProperty;\n        const fieldProps = {\n            propertyKey: `${propertyKey}.${index}`,\n            disabled,\n            property: childProperty,\n            includeDescription,\n            underlyingValueHasChanged,\n            context,\n            tableMode: false,\n            partOfArray: true,\n            partOfBlock: false,\n            autoFocus: internalId === lastAddedId\n        };\n        return <ErrorBoundary>\n            <PropertyFieldBinding {...fieldProps}/>\n        </ErrorBoundary>;\n    };\n\n    const arrayContainer = <FormikArrayContainer value={value}\n                                                 addLabel={property.name ? \"Add entry to \" + property.name : \"Add entry\"}\n                                                 name={propertyKey}\n                                                 setFieldValue={setFieldValue}\n                                                 buildEntry={buildEntry}\n                                                 onInternalIdAdded={setLastAddedId}\n                                                 disabled={isSubmitting || Boolean(property.disabled)}\n                                                 includeAddButton={!property.disabled}\n                                                 newDefaultEntry={property.of.defaultValue}/>;\n\n    const title = (<LabelWithIcon icon={getIconForProperty(property, \"small\")}\n                                  required={property.validation?.required}\n                                  title={property.name}\n                                  className={\"text-text-secondary dark:text-text-secondary-dark\"}/>);\n\n    return (\n\n        <>\n\n            {!tableMode && <ExpandablePanel initiallyExpanded={expanded}\n                                            className={\"px-2 md:px-4 pb-2 md:pb-4 pt-1 md:pt-2\"}\n                                            title={title}>\n                {arrayContainer}\n            </ExpandablePanel>}\n\n            {tableMode && arrayContainer}\n\n            <FieldHelperText includeDescription={includeDescription}\n                             showError={showError}\n                             error={error}\n                             disabled={disabled}\n                             property={property}/>\n\n        </>\n    );\n}\n","import React, { useCallback, useEffect, useState } from \"react\";\n\nimport { Field, useFormex } from \"@firecms/formex\";\n\nimport { FieldHelperText, FormikArrayContainer, LabelWithIcon } from \"../components\";\nimport { PropertyFieldBinding } from \"../PropertyFieldBinding\";\nimport { EnumValuesChip } from \"../../preview\";\nimport { FieldProps, FormContext, PropertyFieldBindingProps, PropertyOrBuilder } from \"../../types\";\nimport { getDefaultValueFor, getIconForProperty, } from \"../../util\";\nimport { DEFAULT_ONE_OF_TYPE, DEFAULT_ONE_OF_VALUE } from \"../../util/common\";\nimport { cn, ExpandablePanel, paperMixin, Select, SelectItem, Typography } from \"@firecms/ui\";\nimport { useClearRestoreValue } from \"../useClearRestoreValue\";\n\n/**\n * If the `oneOf` property is specified, this fields render each array entry as\n * a `type` select and the corresponding field widget to the selected `type.\n *\n * This is one of the internal components that get mapped natively inside forms\n * and tables to the specified properties.\n * @group Form fields\n */\nexport function BlockFieldBinding<T extends Array<any>>({\n                                                            propertyKey,\n                                                            value,\n                                                            error,\n                                                            showError,\n                                                            isSubmitting,\n                                                            setValue,\n                                                            setFieldValue,\n                                                            tableMode,\n                                                            property,\n                                                            includeDescription,\n                                                            underlyingValueHasChanged,\n                                                            context,\n                                                            disabled\n                                                        }: FieldProps<T>) {\n\n    if (!property.oneOf)\n        throw Error(\"ArrayOneOfField misconfiguration. Property `oneOf` not set\");\n\n    const expanded = property.expanded === undefined ? true : property.expanded;\n    useClearRestoreValue({\n        property,\n        value,\n        setValue\n    });\n\n    const [lastAddedId, setLastAddedId] = useState<number | undefined>();\n\n    const buildEntry = useCallback((index: number, internalId: number) => {\n        return <BlockEntry\n            key={`array_one_of_${index}`}\n            name={`${propertyKey}.${index}`}\n            index={index}\n            value={value[index]}\n            typeField={property.oneOf!.typeField ?? DEFAULT_ONE_OF_TYPE}\n            valueField={property.oneOf!.valueField ?? DEFAULT_ONE_OF_VALUE}\n            properties={property.oneOf!.properties}\n            autoFocus={internalId === lastAddedId}\n            context={context}/>;\n    }, [context, lastAddedId, property.oneOf, propertyKey, value]);\n\n    const title = (\n        <LabelWithIcon icon={getIconForProperty(property, \"small\")}\n                       required={property.validation?.required}\n                       title={property.name}\n                       className={\"text-text-secondary dark:text-text-secondary-dark\"}/>\n    );\n\n    const firstOneOfKey = Object.keys(property.oneOf.properties)[0];\n    const body = <FormikArrayContainer value={value}\n                                       name={propertyKey}\n                                       addLabel={property.name ? \"Add entry to \" + property.name : \"Add entry\"}\n                                       buildEntry={buildEntry}\n                                       onInternalIdAdded={setLastAddedId}\n                                       disabled={isSubmitting || Boolean(property.disabled)}\n                                       includeAddButton={!property.disabled}\n                                       setFieldValue={setFieldValue}\n                                       newDefaultEntry={{\n                                           [property.oneOf!.typeField ?? DEFAULT_ONE_OF_TYPE]: firstOneOfKey,\n                                           [property.oneOf!.valueField ?? DEFAULT_ONE_OF_VALUE]: getDefaultValueFor(property.oneOf.properties[firstOneOfKey])\n                                       }}/>;\n    return (\n\n        <>\n\n            {!tableMode &&\n                <ExpandablePanel\n                    className={\"px-2 md:px-4 pb-2 md:pb-4 pt-1 md:pt-2\"}\n                    initiallyExpanded={expanded}\n                    title={title}>\n                    {body}\n                </ExpandablePanel>}\n\n            {tableMode && body}\n\n            <FieldHelperText includeDescription={includeDescription}\n                             showError={showError}\n                             error={error}\n                             disabled={disabled}\n                             property={property}/>\n\n        </>\n    );\n}\n\ninterface BlockEntryProps {\n    name: string;\n    index: number;\n    value: any;\n    /**\n     * Name of the field to use as the discriminator for type\n     * Defaults to `type`\n     */\n    typeField: string;\n    /**\n     * Name of the  field to use as the value\n     * Defaults to `value`\n     */\n    valueField: string;\n\n    autoFocus: boolean;\n    /**\n     * Record of properties, where the key is the `type` and the value\n     * is the corresponding property\n     */\n    properties: Record<string, PropertyOrBuilder>;\n\n    /**\n     * Additional values related to the state of the form or the entity\n     */\n    context: FormContext<any>;\n\n}\n\nfunction BlockEntry({\n                        name,\n                        index,\n                        value,\n                        typeField,\n                        valueField,\n                        properties,\n                        autoFocus,\n                        context\n                    }: BlockEntryProps) {\n\n    const type = value && value[typeField];\n    const [typeInternal, setTypeInternal] = useState<string | undefined>(type ?? undefined);\n\n    const formex = useFormex();\n\n    useEffect(() => {\n        if (!type) {\n            updateType(Object.keys(properties)[0]);\n        }\n    }, []);\n\n    useEffect(() => {\n        if (type !== typeInternal) {\n            setTypeInternal(type);\n        }\n    }, [type]);\n\n    const property = typeInternal ? properties[typeInternal] : undefined;\n\n    const enumValuesConfigs = Object.entries(properties)\n        .map(([key, property]) => ({\n            id: key,\n            label: property.name ?? key\n        }));\n\n    const typeFieldName = `${name}.${typeField}`;\n    const valueFieldName = `${name}.${valueField}`;\n\n    const fieldProps: PropertyFieldBindingProps<any, any> | undefined = property\n        ? {\n            propertyKey: valueFieldName,\n            property,\n            context,\n            autoFocus,\n            partOfArray: false,\n            partOfBlock: true,\n            tableMode: false\n        }\n        : undefined;\n\n    const updateType = (newType: any) => {\n        const newSelectedProperty = newType ? properties[newType] : undefined;\n        setTypeInternal(newType);\n        formex.setFieldTouched(typeFieldName, true);\n        formex.setFieldValue(typeFieldName, newType);\n        formex.setFieldValue(valueFieldName, newSelectedProperty ? getDefaultValueFor(newSelectedProperty) : null);\n    };\n\n    return (\n        <div className={cn(paperMixin, \"bg-transparent p-4 my-4 py-8\")}>\n\n            <Field\n                name={typeFieldName}\n            >\n                {(fieldProps) => {\n                    const value1 = fieldProps.field.value !== undefined && fieldProps.field.value !== null ? fieldProps.field.value as string : \"\";\n                    return (\n                        <>\n                            <Select\n                                className=\"mb-2\"\n                                placeholder={<Typography variant={\"caption\"}\n                                                         className={\"px-4 py-2 font-medium\"}>Type</Typography>}\n                                size={\"small\"}\n                                position={\"item-aligned\"}\n                                value={value1}\n                                renderValue={(enumKey: any) =>\n                                    <EnumValuesChip\n                                        enumKey={enumKey}\n                                        enumValues={enumValuesConfigs}\n                                        size={\"small\"}/>\n                                }\n                                onValueChange={(value) => {\n                                    updateType(value);\n                                }}>\n                                {enumValuesConfigs.map((enumConfig) => (\n                                    <SelectItem\n                                        key={enumConfig.id}\n                                        value={String(enumConfig.id)}>\n                                        <EnumValuesChip\n                                            enumKey={enumConfig.id}\n                                            enumValues={enumValuesConfigs}\n                                            size={\"small\"}/>\n                                    </SelectItem>)\n                                )}\n                            </Select>\n                        </>\n                    );\n                }\n                }\n            </Field>\n\n            {fieldProps && (\n                // It is important to use this key to force a re-render of the field on type change\n                <PropertyFieldBinding key={`form_control_${name}_${typeInternal}`} {...fieldProps}/>\n            )}\n\n        </div>\n    );\n}\n","import React, { useDeferredValue, useEffect, useRef } from \"react\";\n\n// @ts-ignore\nimport MarkdownIt from \"markdown-it\";\nimport MdEditor, { Plugins } from \"react-markdown-editor-lite\";\n\nimport { FieldHelperText, LabelWithIcon } from \"../components\";\nimport { FieldProps } from \"../../types\";\nimport { getIconForProperty } from \"../../util\";\nimport {\n    cn,\n    fieldBackgroundDisabledMixin,\n    fieldBackgroundHoverMixin,\n    fieldBackgroundMixin,\n    Typography,\n    useInjectStyles\n} from \"@firecms/ui\";\n\nconst mdParser = new MarkdownIt();\ntry {\n    MdEditor.use(Plugins.AutoResize, {\n        min: 100\n    })\n    MdEditor.unuse(Plugins.FontUnderline)\n    MdEditor.unuse(Plugins.Clear);\n} catch (e) {\n    // this fails in some tests, we can ignore it\n}\n\n/**\n * Render a markdown field that allows edition and seeing the preview.\n *\n * This is one of the internal components that get mapped natively inside forms\n * and tables to the specified properties.\n * @group Form fields\n */\nexport function MarkdownFieldBinding({\n                                         propertyKey,\n                                         value,\n                                         setValue,\n                                         error,\n                                         showError,\n                                         disabled,\n                                         autoFocus,\n                                         touched,\n                                         property,\n                                         tableMode,\n                                         includeDescription,\n                                         context\n                                     }: FieldProps<string>) {\n\n    const [internalValue, setInternalValue] = React.useState(value);\n    const valueRef = useRef(value);\n\n    useInjectStyles(\"MarkdownFieldBinding\", markdownCss);\n\n    const deferred = useDeferredValue({\n        internalValue,\n        value\n    });\n\n    useEffect(() => {\n        valueRef.current = value;\n        setInternalValue(value);\n    }, [value]);\n\n    useEffect(() => {\n        if (deferred.internalValue !== valueRef.current)\n            setValue(deferred.internalValue);\n    }, [deferred]);\n\n    return (\n        <>\n\n            {!tableMode && <Typography variant={\"caption\"}\n                                       className={\"flex-grow\"}>\n                <LabelWithIcon icon={getIconForProperty(property, \"small\")}\n                               required={property.validation?.required}\n                               title={property.name}\n                               className={\"text-text-secondary dark:text-text-secondary-dark ml-3.5\"}/>\n            </Typography>}\n\n            <MdEditor value={internalValue ?? \"\"}\n                      className={cn(fieldBackgroundMixin,\n                          disabled ? fieldBackgroundDisabledMixin : fieldBackgroundHoverMixin,\n                          \"text-base\")}\n                      readOnly={disabled}\n                      renderHTML={text => mdParser.render(text)}\n                      view={{\n                          menu: true,\n                          md: true,\n                          html: false\n                      }}\n                      onChange={({\n                                     html,\n                                     text\n                                 }) => {\n                          setInternalValue(text ?? null);\n                      }}/>\n\n            <FieldHelperText includeDescription={includeDescription}\n                             showError={showError}\n                             error={error}\n                             disabled={disabled}\n                             property={property}/>\n\n        </>\n    );\n\n}\n\nconst markdownCss = `\n  @font-face {\n    font-family: rmel-iconfont;\n    src: url(data:application/vnd.ms-fontobject;base64,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NS4BJyMOAd0VGwEBGxWRFRsbFWEcFBQcYRUbGxWRFRsBARsCK2EVGxsVkRUbAQEbKRySARsVYRwpGwEBGxWRFRsBHwEbFZEVGwEBGykcYRUbwwEbFWEcKRsBARsVkRUb/qscKRsBARsVkRUbGxUBtRQcYRUbGxWRFRsBARsAAAAAAAASAN4AAQAAAAAAAAAVAAAAAQAAAAAAAQANABUAAQAAAAAAAgAHACIAAQAAAAAAAwANACkAAQAAAAAABAANADYAAQAAAAAABQALAEMAAQAAAAAABgANAE4AAQAAAAAACgArAFsAAQAAAAAACwATAIYAAwABBAkAAAAqAJkAAwABBAkAAQAaAMMAAwABBAkAAgAOAN0AAwABBAkAAwAaAOsAAwABBAkABAAaAQUAAwABBAkABQAWAR8AAwABBAkABgAaATUAAwABBAkACgBWAU8AAwABBAkACwAmAaUKQ3JlYXRlZCBieSBpY29uZm9udApybWVsLWljb25mb250UmVndWxhcnJtZWwtaWNvbmZvbnRybWVsLWljb25mb250VmVyc2lvbiAxLjBybWVsLWljb25mb250R2VuZXJhdGVkIGJ5IHN2ZzJ0dGYgZnJvbSBGb250ZWxsbyBwcm9qZWN0Lmh0dHA6Ly9mb250ZWxsby5jb20ACgBDAHIAZQBhAHQAZQBkACAAYgB5ACAAaQBjAG8AbgBmAG8AbgB0AAoAcgBtAGUAbAAtAGkAYwBvAG4AZgBvAG4AdABSAGUAZwB1AGwAYQByAHIAbQBlAGwALQBpAGMAbwBuAGYAbwBuAHQAcgBtAGUAbAAtAGkAYwBvAG4AZgBvAG4AdABWAGUAcgBzAGkAbwBuACAAMQAuADAAcgBtAGUAbAAtAGkAYwBvAG4AZgBvAG4AdABHAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAHMAdgBnADIAdAB0AGYAIABmAHIAbwBtACAARgBvAG4AdABlAGwAbABvACAAcAByAG8AagBlAGMAdAAuAGgAdAB0AHAAOgAvAC8AZgBvAG4AdABlAGwAbABvAC4AYwBvAG0AAAAAAgAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAaAQIBAwEEAQUBBgEHAQgBCQEKAQsBDAENAQ4BDwEQAREBEgETARQBFQEWARcBGAEZARoBGwADdGFiCGtleWJvYXJkBmRlbGV0ZQpjb2RlLWJsb2NrBGNvZGUKdmlzaWJpbGl0eQp2aWV3LXNwbGl0BGxpbmsEcmVkbwR1bmRvBGJvbGQGaXRhbGljDGxpc3Qtb3JkZXJlZA5saXN0LXVub3JkZXJlZAVxdW90ZQ1zdHJpa2V0aHJvdWdoCXVuZGVybGluZQR3cmFwCWZvbnQtc2l6ZQRncmlkBWltYWdlC2V4cGFuZC1sZXNzC2V4cGFuZC1tb3JlD2Z1bGxzY3JlZW4tZXhpdApmdWxsc2NyZWVuAAAAAAA=);\n    src: url(data:font/ttf;base64,AAEAAAALAIAAAwAwR1NVQrD+s+0AAAE4AAAAQk9TLzI940+UAAABfAAAAFZjbWFwQOSPXQAAAjwAAAMIZ2x5ZjCJoW0AAAV8AAAPYGhlYWQbUPpPAAAA4AAAADZoaGVhB94DmwAAALwAAAAkaG10eGgAAAAAAAHUAAAAaGxvY2E1+jIAAAAFRAAAADZtYXhwATAAewAAARgAAAAgbmFtZXPc7cIAABTcAAACqXBvc3QnKb+uAAAXiAAAATUAAQAAA4D/gABcBAAAAAAABAAAAQAAAAAAAAAAAAAAAAAAABoAAQAAAAEAAOLjgrdfDzz1AAsEAAAAAADcGNspAAAAANwY2ykAAP//BAADAQAAAAgAAgAAAAAAAAABAAAAGgBvAAwAAAAAAAIAAAAKAAoAAAD/AAAAAAAAAAEAAAAKAB4ALAABREZMVAAIAAQAAAAAAAAAAQAAAAFsaWdhAAgAAAABAAAAAQAEAAQAAAABAAgAAQAGAAAAAQAAAAAAAQQAAZAABQAIAokCzAAAAI8CiQLMAAAB6wAyAQgAAAIABQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUGZFZABA523togOA/4AAXAOAAIAAAAABAAAAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAFAAAAAwAAACwAAAAEAAABzAABAAAAAADGAAMAAQAAACwAAwAKAAABzAAEAJoAAAAWABAAAwAG523pQe087UXtYe117XjtgO2N7aL//wAA523pQe077UTtX+1v7XftgO2M7Z///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAFgAWABYAGAAaAB4AKgAsACwALgAAAAEABAAFAAMABgAHAAgACQAKAAsADAANAA4ADwAQABEAEgATAAIAFAAVABYAFwAYABkAAAEGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAATwAAAAAAAAAGQAA520AAOdtAAAAAQAA6UEAAOlBAAAABAAA7TsAAO07AAAABQAA7TwAAO08AAAAAwAA7UQAAO1EAAAABgAA7UUAAO1FAAAABwAA7V8AAO1fAAAACAAA7WAAAO1gAAAACQAA7WEAAO1hAAAACgAA7W8AAO1vAAAACwAA7XAAAO1wAAAADAAA7XEAAO1xAAAADQAA7XIAAO1yAAAADgAA7XMAAO1zAAAADwAA7XQAAO10AAAAEAAA7XUAAO11AAAAEQAA7XcAAO13AAAAEgAA7XgAAO14AAAAEwAA7YAAAO2AAAAAAgAA7YwAAO2MAAAAFAAA7Y0AAO2NAAAAFQAA7Z8AAO2fAAAAFgAA7aAAAO2gAAAAFwAA7aEAAO2hAAAAGAAA7aIAAO2iAAAAGQAAAAAAZgDMAR4BhAG8Af4CZgLIAv4DNANyA6IEQASoBO4FLgVwBcoGCgZqBqQGxAboB0YHsAAAAAUAAAAAA1YC1gALABgAJQA0AEAAABMhMhYUBgchLgE0Nhc+ATchHgEUBiMhIiYDNDY3IR4BFAYjISImNz4BMyEyHgEUDgEjISImJxYUDwEGJjURNDYX1gJUEhkZEv2sEhkZ2gEYEwFgEhkZEv6gEhn0GRICVBIZGRL9rBIZ8wEYEwFgDBQLCxQM/qASGTkICJILHh4LAtUZJRgBARglGfITGAEBGCUZGf6FExgBARglGRnZEhkLFRcUDBqGBhYGlQwMEQEqEQwMAAAAAAwAAAAAA6sCqwAPABMAFwAbAB8AIwAnADMANwA7AD8AQwAAASEOAQcDHgEXIT4BNxEuAQUzFSMVMxUjJzMVIxUzFSsCNTM1IzUzASEiJjQ2MyEyFhQGNyM1MzUjNTMXIzUzNSM1MwNV/VYkMAEBATEkAqokMQEBMf5cVlZWVoBWVlZWKlZWVlYBVf8AEhgYEgEAEhgYGVZWVlaAVlZWVgKrATEk/lYkMQEBMSQBqiQxf1YqVtZWKlZWKlb+gBgkGRkkGKpWKlbWVipWAAMAAAAAAysDAAAPAB8AMwAAJR4BFyE+ATcRLgEnIQ4BBzMhMhYXEQ4BByEuAScRPgElJyYrASIPASMiBhQWMyEyNjQmIwEAATAkAVYkMAEBMCT+qiQwAYABABMXAQEXE/8AExcBARcBKB4LErQSCx5rExcXEwIAERkZEVUkMAEBMCQBqyQwAQEwJBcU/qsRGQEBGREBVRQX1R4NDR4XJxcXJxcAAwAAAAADqwLZABYALQA+AAABFQYPAQYiLwEmND8BJyY0PwE2Mh8BFgU3NjQvASYiDwEGBxUWHwEWMj8BNjQnAScmBgcDBhYfARY2NxM2JicDqwEJsAcRBx4GBpOTBgYeBxEHsAn9D5MGBh8GEgawCQEBCbAHEQceBgYBQikJDwTjAgcIKAkPBOIDBwkBiBANCrAGBh4HEQaTkwYSBh4GBrAKFZMGEQceBgawCg0QDQqwBgYeBhIGAdkPAwcI/YwIEAMOAwcIAnMIDwQAAgAAAAADmgJvABAAIQAAJSc3NjQmIg8BBhQfARYyNjQlNycmNDYyHwEWFA8BBiImNAFzpqYNGSQMxA0NxA4hGgENpqYNGiEOxA0NxA4hGtqmpg4hGg3EDSINxA0aIQ6mpgwkGQ3EDSINxA0ZJAAAAAMAAAAAA7gCrAALABcAIwAAAQ4BBx4BFz4BNy4BAy4BJz4BNx4BFw4BAw4BBx4BFz4BNy4BAgCY6zU165iY6zU165hWcAICcFZWcAICcFY0QwEBQzQ0QwEBQwKsAqSGhqQCAqSGhqT+DgJwVlZwAgJwVlZwAT4BQzQ0QwEBQzQ0QwAAAAUAAAAAA4ACqwALABcAIwAwAEAAABMhMjY0JiMhIgYUFhchPgE0JichDgEUFhMhMjY0JiMhIgYUFiceARchPgE0JichDgElIR4BFxEOAQchLgE1ETQ2qwEAExcXE/8AERkZEQEAExcXE/8AERkZEQEAExcXE/8AERkZGgEZEQEAExcXE/8AERkB1AEAERkBARkR/wATFxcBABcnFxcnF6sBGSIZAQEZIhkBVRcnFxcnF9UTFwEBFyYXAQEXGAEXE/4AERkBARkRAgATFwAAAAADAAAAAAOrAlYAGQAmAEAAAAEjIgYUFjsBHgEXDgEHIyIGFBY7AT4BNy4BBR4BFyE+ATQmJyEOARcjLgEnPgE3MzI2NCYrAQ4BBx4BFzMyNjQmAtWAEhgYEoA3SAEBSDeAEhgYEoBbeAMDeP4lARgSAQASGBgS/wASGFWAN0gBAUg3gBIYGBKAW3gDA3hbgBIYGAJVGCQZAUk2NkkBGSQYAnhbW3jTEhgBARgkGAEBGJIBSTY2SQEZJBgCeFtbeAIYJBkAAQAAAAADrAIrAB4AAAEuAScOAQcGFhcWNjc+ATcyFhcHBhYXMz4BNzUuAQcDEjuWVYfUOAoTFxQjCSuhZz9vLFETEx7uEhgBAjEWAbw0OgECiXIXKggGDxJWaQErJVIWMQIBGBLvHRQTAAAAAQAAAAADsgIrAB4AAAEOAQcnJgYHFR4BFzM+AS8BPgEzHgEXHgE3PgEnLgECFFWWO1EWMQIBGBLuHhQTUi1vPmehKwkkExcTCjnTAisBOjRQFBQd7xIYAQIxFlIlKwFpVhIPBggqF3KJAAAAAwAAAAAC9QK/ABQAHAAkAAABPgE3LgEnIw4BBxEeARchPgE3NCYlMx4BFAYHIxMjNTMeARQGApMhKQECZk7vFBkBARkUAQdJaQI0/tSIHScnHYifn58dJycBihdEJE5mAgEaE/3eExoBAmFJNVLZASY7JgH+74kBJjsmAAEAAAAAAxICvwAcAAABHgEXMwMjDgEUFhczPgE0JicjEzM+ATQmJyMOAQGlASYdIZw7HSYmHeQdJiYdIZw7HSYmHeQdJgJ6HSYB/pQBJjonAQEnOiYBAWwBJjonAQEnAAYAAAAAA5YC1gALABcAIwBBAFIAbgAAASE+ATQmJyEOARQWASEOARQWFyE+ATQmAyEOARQWFyE+ATQmBSMiBhQWOwEVIyIGFBY7ARUjIgYUFjsBMjY3NS4BAzMVHgEyNj0BNCYrASIGFBYXIyIGFBY7AQcGHQEUFjsBMjY0JisBNzY9AS4BAWsCABIYGBL+ABIZGQIS/gASGRkSAgASGBgS/gASGRkSAgASGBj9WFUJDAwJQBUKCwsKFUAJDAwJVQoLAQELXxUBCxMMDAkrCQwMXlUJDAwJN0cFDAlVCgsLCjdIBQELAlUBGCQYAQEYJBj+VQEYJBgBARgkGAEBARgkGAEBGCQY1QwSDBYMEgwWDBIMDAmACQwB1msJDAwJgAkMDBIM1gwSDFQGCAkJDAwSDFQGCAkJDAAAAAAGAAAAAAOLAsAACAARABoAJgAyAD8AABMOARQWMjY0JgMOARQWMjY0JgMOARQWMjY0JhchPgE0JichDgEUFjchPgE0JichDgEUFgMeARchPgE0JichDgG1GyQkNyQkHBskJDckJBwbJCQ2JSSPAgASGBgS/gASGBgSAgASGBgS/gASGBgZARgSAgASGBgS/gASGAHAASQ2JCQ2JAEBASQ2JCQ2JP4BASQ2JCQ2JGoBGCQYAQEYJBj/ARgkGAEBGCQYASoSGAEBGCQYAQEYAAAAAgAAAAADVgJWABYALQAAJTI2PwE2PQEuASsBIgYdARQWFzMHBhYFMjY/ATY9ATQmKwEiBgcVHgEXMwcGFgEyERsHPQkBGBKrEhgYElYsDiABzBAbCDwJGBKrEhgBARgSVSwNIKsRDnkSFMISGBgSqxIYAVgeMwERDnkSFMISGBgSqxIYAVgeMwAAAAADAAAAAAOAAsAACAAZACUAACU+ATc1IxUeAQEeARczFTM1Mz4BNCYnIQ4BAyE+ATQmJyEOARQWAgAkMAGqATD++QEkG5aqlhskJBv+KhskKwKqEhkZEv1WEhkZQAEwJCsrJDACPxskAYCAASQ2JAEBJP56ARgkGAEBGCQYAAAAAAIAAP//AysDAQAbACgAACU+ATcRLgEiBgcRFAYHBi4CNREuASIGBxEeAQceATMhMjY0JiMhIgYCImJ6AgEeLR4BQTUhQTUdAR4tHgEDptQBGBICABIYGBL+ABIYrQ+TZQEXFh4eFv7kN1MMBw8rPCMBIBYeHhb+4HaUdhIZGSQYGAAAAAMAAAAAA3ACxwALAC0AOQAAEyE+ATQmIyEiBhQWBSEiBhQWFyEyFhcWBgcjNS4BDwEGFB8BFjY3NTM+AScuAQUjIgYUFhczPgE0JsACVRIZGRL9qxIYGAIL/gcSGBgSAgYgMwYFMShgARkLTAYGTAwYAVVNYgUIZP5tqxIYGBKrEhgYAnEBGCQYGCQYrBgkGAEnICk5AiIPCgpMBxEHTAoKDyICa05EVf8YJBgBARgkGAAAAAIAAAAAA5YCwAAUACgAAAEUFhczER4BMjY3ETM+ATQmJyEOAQMzFRQWMjY3NTMyNjQmJyEOARQWAWskHJUBJDYkAZUcJCQc/lYcJMBAJDckAUAbJCQb/wAcJCQCgBskAf5AGyQkGwHAASQ2JAEBJP7Q6xskJBvrJDckAQEkNyQACgAAAAADeAL4AA8AFgAaACEAJQApAC0ANAA4AD8AAAEhDgEHER4BFyE+ATcRLgEBIyImPQEzNSM1MzUjNTQ2OwETIzUzNSM1MzUjNTMTIzUzFRQGNyM1MzUjNTMyFhUDLP2oICoBASogAlggKgEBKv4ecQ8WlpaWlhYPceGWlpaWlpa8cZYWFpaWlnEPFgL3ASog/aggKgEBKiACWCAq/V4WD3FLlktxDxb9qJZLlkuW/aiWcQ8W4ZZLlhYPAAAAAgAA//8DgAMAAA8AIAAAJREuASchDgEHER4BFyE+ASUXNzYyHwEWBiMhIiY/AT4BA4ABMCT9qiQwAQEwJAJWJDD9/VmFBxQHlQgMDf4BDgsIagcUVQJWJDABATAk/aokMAEBMPtsqggJxwsXFwuJCAEAAAABAAAAAAM1AjYAEAAAAQcGFBYyPwEXFjI2NC8BJiIB2f4QISwR19cRLCEQ/hAuAib+ESwhENfXECEsEf4QAAAAAQAAAAADNQI2ABIAAAEHJyYnIg4BFh8BFjI/ATY0LgEC1tbXEBcRGw0GDP4RLBH+ECEtAibX1w8BEiAgDP4QEP4QLSABAAAABAAAAAADawLrABAAIQAzAEQAADczFRQWMjY9ATQmKwEiBhQWEyMiBhQWOwEyNj0BNCYiBhUBMjY9ATMyNjQmKwEiBh0BFBYTNTQmIgYdARQWOwEyNjQmI8loHiwdHRacFh0dfmgWHR0WnBYdHSweAWoWHmgWHR0WnBYdHUoeLB0dFpwWHR0WsWgWHR0WnBYdHSweAZ4eLB0dFpwWHR0W/V8dFmgeLB0dFpwWHQI5aBYdHRacFh0dLB4AAAAEAAAAAANUAtQAEQAjADQARgAAEw4BBxUeARczPgE0JisBNTQmJz4BPQEzMjY0JicjDgEHFR4BASMiBhQWFzM+ATc1LgEiBhUDHgE7ARUUFjI2NzUuAScjDgHdFRsBARsVkRUbGxVhHBQUHGEVGxsVkRUbAQEbAithFRsbFZEVGwEBGykckgEbFWEcKRsBARsVkRUbAR8BGxWRFRsBARspHGEVG8MBGxVhHCkbAQEbFZEVG/6rHCkbAQEbFZEVGxsVAbUUHGEVGxsVkRUbAQEbAAAAAAAAEgDeAAEAAAAAAAAAFQAAAAEAAAAAAAEADQAVAAEAAAAAAAIABwAiAAEAAAAAAAMADQApAAEAAAAAAAQADQA2AAEAAAAAAAUACwBDAAEAAAAAAAYADQBOAAEAAAAAAAoAKwBbAAEAAAAAAAsAEwCGAAMAAQQJAAAAKgCZAAMAAQQJAAEAGgDDAAMAAQQJAAIADgDdAAMAAQQJAAMAGgDrAAMAAQQJAAQAGgEFAAMAAQQJAAUAFgEfAAMAAQQJAAYAGgE1AAMAAQQJAAoAVgFPAAMAAQQJAAsAJgGlCkNyZWF0ZWQgYnkgaWNvbmZvbnQKcm1lbC1pY29uZm9udFJlZ3VsYXJybWVsLWljb25mb250cm1lbC1pY29uZm9udFZlcnNpb24gMS4wcm1lbC1pY29uZm9udEdlbmVyYXRlZCBieSBzdmcydHRmIGZyb20gRm9udGVsbG8gcHJvamVjdC5odHRwOi8vZm9udGVsbG8uY29tAAoAQwByAGUAYQB0AGUAZAAgAGIAeQAgAGkAYwBvAG4AZgBvAG4AdAAKAHIAbQBlAGwALQBpAGMAbwBuAGYAbwBuAHQAUgBlAGcAdQBsAGEAcgByAG0AZQBsAC0AaQBjAG8AbgBmAG8AbgB0AHIAbQBlAGwALQBpAGMAbwBuAGYAbwBuAHQAVgBlAHIAcwBpAG8AbgAgADEALgAwAHIAbQBlAGwALQBpAGMAbwBuAGYAbwBuAHQARwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABzAHYAZwAyAHQAdABmACAAZgByAG8AbQAgAEYAbwBuAHQAZQBsAGwAbwAgAHAAcgBvAGoAZQBjAHQALgBoAHQAdABwADoALwAvAGYAbwBuAHQAZQBsAGwAbwAuAGMAbwBtAAAAAAIAAAAAAAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGgECAQMBBAEFAQYBBwEIAQkBCgELAQwBDQEOAQ8BEAERARIBEwEUARUBFgEXARgBGQEaARsAA3RhYghrZXlib2FyZAZkZWxldGUKY29kZS1ibG9jawRjb2RlCnZpc2liaWxpdHkKdmlldy1zcGxpdARsaW5rBHJlZG8EdW5kbwRib2xkBml0YWxpYwxsaXN0LW9yZGVyZWQObGlzdC11bm9yZGVyZWQFcXVvdGUNc3RyaWtldGhyb3VnaAl1bmRlcmxpbmUEd3JhcAlmb250LXNpemUEZ3JpZAVpbWFnZQtleHBhbmQtbGVzcwtleHBhbmQtbW9yZQ9mdWxsc2NyZWVuLWV4aXQKZnVsbHNjcmVlbgAAAAAA) format(\"truetype\")\n  }\n\n  .rmel-iconfont {\n    font-family: rmel-iconfont !important;\n    font-size: 16px;\n    font-style: normal;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale\n  }\n\n  .rmel-icon-tab:before {\n    content: \"\\\\e76d\"\n  }\n\n  .rmel-icon-keyboard:before {\n    content: \"\\\\ed80\"\n  }\n\n  .rmel-icon-delete:before {\n    content: \"\\\\ed3c\"\n  }\n\n  .rmel-icon-code-block:before {\n    content: \"\\\\e941\"\n  }\n\n  .rmel-icon-code:before {\n    content: \"\\\\ed3b\"\n  }\n\n  .rmel-icon-visibility:before {\n    content: \"\\\\ed44\"\n  }\n\n  .rmel-icon-view-split:before {\n    content: \"\\\\ed45\"\n  }\n\n  .rmel-icon-link:before {\n    content: \"\\\\ed5f\"\n  }\n\n  .rmel-icon-redo:before {\n    content: \"\\\\ed60\"\n  }\n\n  .rmel-icon-undo:before {\n    content: \"\\\\ed61\"\n  }\n\n  .rmel-icon-bold:before {\n    content: \"\\\\ed6f\"\n  }\n\n  .rmel-icon-italic:before {\n    content: \"\\\\ed70\"\n  }\n\n  .rmel-icon-list-ordered:before {\n    content: \"\\\\ed71\"\n  }\n\n  .rmel-icon-list-unordered:before {\n    content: \"\\\\ed72\"\n  }\n\n  .rmel-icon-quote:before {\n    content: \"\\\\ed73\"\n  }\n\n  .rmel-icon-strikethrough:before {\n    content: \"\\\\ed74\"\n  }\n\n  .rmel-icon-underline:before {\n    content: \"\\\\ed75\"\n  }\n\n  .rmel-icon-wrap:before {\n    content: \"\\\\ed77\"\n  }\n\n  .rmel-icon-font-size:before {\n    content: \"\\\\ed78\"\n  }\n\n  .rmel-icon-grid:before {\n    content: \"\\\\ed8c\"\n  }\n\n  .rmel-icon-image:before {\n    content: \"\\\\ed8d\"\n  }\n\n  .rmel-icon-expand-less:before {\n    content: \"\\\\ed9f\"\n  }\n\n  .rmel-icon-expand-more:before {\n    content: \"\\\\eda0\"\n  }\n\n  .rmel-icon-fullscreen-exit:before {\n    content: \"\\\\eda1\"\n  }\n\n  .rmel-icon-fullscreen:before {\n    content: \"\\\\eda2\"\n  }\n\n  .rc-md-editor {\n    padding-bottom: 1px;\n    position: relative;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    overflow: hidden;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -webkit-flex-direction: column;\n    -ms-flex-direction: column;\n    flex-direction: column;\n            border-radius: 6px;\n  }\n\n  .rc-md-editor.full {\n    width: 100%;\n    height: 100% !important;\n    position: fixed;\n    left: 0;\n    top: 0;\n    z-index: 1000\n  }\n\n  .rc-md-editor .editor-container {\n    -webkit-box-flex: 1;\n    -webkit-flex: 1;\n    -ms-flex: 1;\n    flex: 1;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    width: 100%;\n    min-height: 0;\n    position: relative;\n\n  }\n\n  .rc-md-editor .editor-container > .section {\n    -webkit-box-flex: 1;\n    -webkit-flex-grow: 1;\n    -ms-flex-positive: 1;\n    flex-grow: 1;\n    -webkit-flex-shrink: 1;\n    -ms-flex-negative: 1;\n    flex-shrink: 1;\n    -webkit-flex-basis: 1px;\n    -ms-flex-preferred-size: 1px;\n    flex-basis: 1px;\n    padding: 0px 8px;\n            border: none\n  }\n\n  .rc-md-editor .editor-container > .section.in-visible {\n    display: none\n  }\n\n  .rc-md-editor .editor-container > .section > .section-container {\n    padding: 8x 16px 16px\n  }\n\n  .rc-md-editor .editor-container > .section:last-child {\n    border-radius: unset\n  }\n\n  .rc-md-editor .editor-container .sec-md {\n    min-height: 0;\n    min-width: 0;\n    overflow: hidden;\n  }\n\n  .rc-md-editor .editor-container .sec-md .input {\n    background: transparent;\n    font-size: 1rem;\n    display: block;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    width: 100%;\n    height: 100%;\n    overflow-y: scroll;\n    border: none;\n    resize: none;\n    outline: none;\n    min-height: 0;\n    color: inherit;\n    line-height: 1.7;\n\n  }\n\n  .rc-md-editor .editor-container .sec-html {\n    min-height: 0;\n    min-width: 0;\n\n  }\n\n  .rc-md-editor .editor-container .sec-html .html-wrap {\n    height: 100%;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    overflow: auto\n  }\n\n  .custom-html-style {\n    color: inherit\n  }\n\n  .custom-html-style h1 {\n    font-size: 32px;\n    padding: 0;\n    border: none;\n    font-weight: 700;\n    margin: 32px 0;\n    line-height: 1.2\n  }\n\n  .custom-html-style h2 {\n    font-size: 24px;\n    padding: 0;\n    border: none;\n    font-weight: 700;\n    margin: 24px 0;\n    line-height: 1.7\n  }\n\n  .custom-html-style h3 {\n    font-size: 18px;\n    margin: 18px 0;\n    padding: 0;\n    line-height: 1.7;\n    border: none\n  }\n\n  .custom-html-style p {\n    font-size: 16px;\n    line-height: 1.7;\n    margin: 8px 0\n  }\n\n  .custom-html-style a {\n  }\n\n  .custom-html-style a:hover {\n    text-decoration: none\n  }\n\n  .custom-html-style strong {\n    font-weight: 700\n  }\n\n  .custom-html-style ol, .custom-html-style ul {\n    font-size: 16px;\n    line-height: 28px;\n    padding-left: 36px\n  }\n\n  .custom-html-style li {\n    margin-bottom: 8px;\n    line-height: 1.7\n  }\n\n  .custom-html-style hr {\n    margin-top: 20px;\n    margin-bottom: 20px;\n    border: 0;\n  }\n\n  .custom-html-style pre {\n    display: block;\n    padding: 20px;\n    line-height: 28px;\n    word-break: break-word\n  }\n\n  .custom-html-style code, .custom-html-style pre {\n    font-size: 16px;\n    border-radius: 0;\n    overflow-x: auto\n  }\n\n  .custom-html-style code {\n    padding: 3px 0;\n    margin: 0;\n    word-break: normal\n  }\n\n  .custom-html-style code:after, .custom-html-style code:before {\n    letter-spacing: 0\n  }\n\n  .custom-html-style blockquote {\n    position: relative;\n    margin: 16px 0;\n    padding: 5px 8px 5px 30px;\n    background: none repeat scroll 0 0 ${\"rgb(39 39 41)\"};\n    color: inherit;\n    border: none;\n    border-left: 10px solid #d6dbdf\n  }\n\n  .custom-html-style img, .custom-html-style video {\n    max-width: 100%\n  }\n\n  .custom-html-style table {\n    font-size: 16px;\n    line-height: 1.7;\n    max-width: 100%;\n    overflow: auto;\n\n    border-collapse: collapse;\n    border-spacing: 0;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box\n  }\n\n  .custom-html-style table td, .custom-html-style table th {\n    word-break: break-all;\n    word-wrap: break-word;\n    white-space: normal\n  }\n\n  .custom-html-style table tr {\n  }\n\n  .custom-html-style table tr:nth-of-type(2n) {\n    background-color: transparent\n  }\n\n  .custom-html-style table th {\n    text-align: center;\n    font-weight: 700;\n\n    padding: 10px 6px;\n    background-color: #f5f7fa;\n    word-break: break-word\n  }\n\n  .custom-html-style table td {\n\n    text-align: left;\n    padding: 10px 15px;\n    word-break: break-word;\n    min-width: 60px\n  }\n\n  .rc-md-editor .drop-wrap {\n    display: block;\n    position: absolute;\n    left: 0;\n    top: 28px;\n    z-index: 2;\n    min-width: 20px;\n    padding: 10px 0;\n    text-align: center;\n    border-style: solid;\n    border-width: 1px\n  }\n\n  .rc-md-editor .drop-wrap.hidden {\n    display: none !important\n  }\n\n  .rc-md-editor .rc-md-navigation {\n    min-height: 38px;\n    padding: 0 8px;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    font-size: 16px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n    -webkit-flex-direction: row;\n    -ms-flex-direction: row;\n    flex-direction: row;\n    -webkit-box-pack: justify;\n    -webkit-justify-content: space-between;\n    -ms-flex-pack: justify;\n    justify-content: space-between;\n            color: \"inherit\",\n\n  }\n\n  .rc-md-editor .rc-md-navigation.in-visible {\n    display: none\n  }\n\n  .rc-md-editor .rc-md-navigation .navigation-nav {\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n    -ms-flex-align: center;\n    align-items: center;\n    -webkit-box-pack: center;\n    -webkit-justify-content: center;\n    -ms-flex-pack: center;\n    justify-content: center;\n    font-size: 16px;\n  }\n\n  .rc-md-editor .rc-md-navigation .button-wrap, .rc-md-editor .rc-md-navigation .navigation-nav {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n    -webkit-flex-direction: row;\n    -ms-flex-direction: row;\n    flex-direction: row\n  }\n\n  .rc-md-editor .rc-md-navigation .button-wrap {\n    -webkit-flex-wrap: wrap;\n    -ms-flex-wrap: wrap;\n    flex-wrap: wrap\n  }\n\n  .rc-md-editor .rc-md-navigation .button-wrap .button {\n    position: relative;\n    min-width: 22px;\n    height: 28px;\n    margin-left: 3px;\n    margin-right: -2px;\n    display: inline-block;\n    cursor: pointer;\n    line-height: 28px;\n    text-align: center;\n  }\n\n  .rc-md-editor .rc-md-navigation .button-wrap .button:hover {\n  }\n\n  .rc-md-editor .rc-md-navigation .button-wrap .button.disabled {\n    cursor: not-allowed\n  }\n\n  .rc-md-editor .rc-md-navigation .button-wrap .button:first-of-type {\n    margin-left: 0\n  }\n\n  .rc-md-editor .rc-md-navigation .button-wrap .button:last-child {\n    margin-right: 0\n  }\n\n  .rc-md-editor .rc-md-navigation .button-wrap .rmel-iconfont {\n    font-size: 18px\n  }\n\n  .rc-md-editor .rc-md-navigation li, .rc-md-editor .rc-md-navigation ul {\n    list-style: none;\n    margin: 0;\n    padding: 0\n  }\n\n  .rc-md-editor .rc-md-navigation .h1, .rc-md-editor .rc-md-navigation .h2, .rc-md-editor .rc-md-navigation .h3, .rc-md-editor .rc-md-navigation .h4, .rc-md-editor .rc-md-navigation .h5, .rc-md-editor .rc-md-navigation .h6, .rc-md-editor .rc-md-navigation h1, .rc-md-editor .rc-md-navigation h2, .rc-md-editor .rc-md-navigation h3, .rc-md-editor .rc-md-navigation h4, .rc-md-editor .rc-md-navigation h5, .rc-md-editor .rc-md-navigation h6 {\n    font-family: inherit;\n    font-weight: 500;\n    color: inherit;\n    padding: 0;\n    margin: 0;\n    line-height: 1.1\n  }\n\n  .rc-md-editor .rc-md-navigation h1 {\n    font-size: 34px\n  }\n\n  .rc-md-editor .rc-md-navigation h2 {\n    font-size: 30px\n  }\n\n  .rc-md-editor .rc-md-navigation h3 {\n    font-size: 24px\n  }\n\n  .rc-md-editor .rc-md-navigation h4 {\n    font-size: 18px\n  }\n\n  .rc-md-editor .rc-md-navigation h5 {\n    font-size: 16px\n  }\n\n  .rc-md-editor .rc-md-navigation h6 {\n    font-size: 12px\n  }\n\n  .rc-md-editor .tool-bar {\n    position: absolute;\n    z-index: 1;\n    right: 8px;\n    top: 8px\n  }\n\n  .rc-md-editor .tool-bar .button {\n    min-width: 24px;\n    height: 28px;\n    margin-right: 5px;\n    display: inline-block;\n    cursor: pointer;\n    font-size: 16px;\n    line-height: 28px;\n    text-align: center;\n    color: #999\n  }\n\n  .rc-md-editor .tool-bar .button:hover {\n    color: inherit\n  }\n\n  .rc-md-editor .rc-md-gray-100 {\n    display: block;\n    width: 1px;\n  }\n\n  .rc-md-editor .table-list.wrap {\n    position: relative;\n    margin: 0 10px;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box\n  }\n\n  .rc-md-editor .table-list.wrap .list-item {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: inline-block;\n    width: 20px;\n    height: 20px;\n    border-radius: 4px\n  }\n\n  .rc-md-editor .table-list.wrap .list-item.active {\n  }\n\n  .rc-md-editor .tab-map-list .list-item {\n    width: 120px;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box\n  }\n\n  .rc-md-editor .tab-map-list .list-item:hover {\n  }\n\n  .rc-md-editor .tab-map-list .list-item.active {\n    font-weight: 700\n  }\n\n  .rc-md-editor .header-list .list-item {\n    width: 100px;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    padding: 8px 0\n  }\n\n  .rc-md-editor .header-list .list-item:hover {\n  }\n\n`;\n","import React from \"react\";\nimport { FieldProps } from \"../../types\";\nimport { FieldHelperText, LabelWithIcon } from \"../components\";\nimport { PropertyFieldBinding } from \"../PropertyFieldBinding\";\nimport { ExpandablePanel } from \"@firecms/ui\";\nimport { getIconForProperty } from \"../../util\";\nimport { useClearRestoreValue } from \"../useClearRestoreValue\";\n\n/**\n * Array field used for custom\n *\n * This is one of the internal components that get mapped natively inside forms\n * and tables to the specified properties.\n * @group Form fields\n */\nexport function ArrayCustomShapedFieldBinding<T extends Array<any>>({\n                                                                        propertyKey,\n                                                                        value,\n                                                                        error,\n                                                                        showError,\n                                                                        isSubmitting,\n                                                                        setValue,\n                                                                        tableMode,\n                                                                        property,\n                                                                        includeDescription,\n                                                                        underlyingValueHasChanged,\n                                                                        context,\n                                                                        disabled\n                                                                    }: FieldProps<T, any, any>) {\n\n    if (!Array.isArray(property.resolvedProperties))\n        throw Error(\"ArrayCustomShapedFieldBinding misconfiguration. Property `of` not set\");\n\n    const expanded = property.expanded === undefined ? true : property.expanded;\n\n    useClearRestoreValue({\n        property,\n        value,\n        setValue\n    });\n\n    const title = <LabelWithIcon icon={getIconForProperty(property, \"small\")}\n                                 required={property.validation?.required}\n                                 className={\"text-text-secondary dark:text-text-secondary-dark\"}\n                                 title={property.name}/>;\n\n    const body = property.resolvedProperties.map((childProperty, index) => {\n        const fieldProps = {\n            propertyKey: `${propertyKey}[${index}]`,\n            disabled,\n            property: childProperty,\n            includeDescription,\n            underlyingValueHasChanged,\n            context,\n            tableMode: false,\n            partOfArray: true,\n            partOfBlock: false,\n            autoFocus: false\n        };\n        return <div key={`custom_shaped_array_${index}`} className=\"pb-4\">\n            <PropertyFieldBinding {...fieldProps}/>\n        </div>;\n    });\n\n    return (\n\n        <>\n\n            {!tableMode &&\n                <ExpandablePanel initiallyExpanded={expanded}\n                                 title={title}\n                                 className={\"px-2 md:px-4 pb-2 md:pb-4 pt-1 md:pt-2\"}>\n                    {body}\n                </ExpandablePanel>}\n\n            {tableMode && body}\n\n            <FieldHelperText includeDescription={includeDescription}\n                             showError={showError}\n                             error={error}\n                             disabled={disabled}\n                             property={property}/>\n\n        </>\n    );\n}\n","import React, { useEffect } from \"react\";\nimport { useFormex } from \"@firecms/formex\";\n\nexport const ErrorFocus = ({ containerRef }:\n                               {\n                                   containerRef?: React.RefObject<HTMLDivElement>\n                               }) => {\n    const { isSubmitting, isValidating, errors } = useFormex();\n\n    useEffect(() => {\n        const keys = Object.keys(errors);\n\n        // Whenever there are errors and the form is submitting but finished validating.\n        if (keys.length > 0 && isSubmitting && !isValidating) {\n            const errorElement = containerRef?.current?.querySelector<HTMLDivElement>(\n                `#form_field_${keys[0]}`\n            );\n\n            if (errorElement && containerRef?.current) {\n                const scrollableParent = getScrollableParent(containerRef.current);\n                if (scrollableParent) {\n                    const top = errorElement.getBoundingClientRect().top;\n                    scrollableParent.scrollTo({\n                        top: scrollableParent.scrollTop + top - 196,\n                        behavior: \"smooth\"\n                    });\n                }\n                const input = errorElement.querySelector(\"input\");\n                if (input) input.focus();\n            }\n        }\n    }, [isSubmitting, isValidating, errors, containerRef]);\n\n    // This component does not render anything by itself.\n    return null;\n};\n\nconst isScrollable = (ele: HTMLElement | null) => {\n    const hasScrollableContent = ele && ele.scrollHeight > ele.clientHeight;\n\n    const overflowYStyle = ele ? window.getComputedStyle(ele).overflowY : null;\n    const isOverflowHidden = overflowYStyle && overflowYStyle.indexOf(\"hidden\") !== -1;\n\n    return hasScrollableContent && !isOverflowHidden;\n};\n\nconst getScrollableParent = (ele: HTMLElement | null): HTMLElement | null => {\n    return (!ele || ele === document.body)\n        ? document.body\n        : (isScrollable(ele) ? ele : getScrollableParent(ele.parentNode as HTMLElement));\n};\n","import React, { useMemo } from \"react\";\n\n// import { ErrorMessage } from \"@firecms/formex\";\nimport { Entity, EntityStatus, EnumValueConfig, EnumValues } from \"../../types\";\n\nimport { useClipboard, useSnackbarController } from \"../../hooks\";\nimport { enumToObjectEntries } from \"../../util\";\nimport {\n    CircularProgress,\n    ContentCopyIcon,\n    IconButton,\n    OpenInNewIcon,\n    Select,\n    SelectItem,\n    TextField,\n    Tooltip,\n    Typography\n} from \"@firecms/ui\";\nimport { EnumValuesChip } from \"../../preview\";\nimport { useCustomizationController } from \"../../hooks/useCustomizationController\";\nimport { CustomizationController } from \"../../types/customization_controller\";\nimport { useFormex } from \"@firecms/formex\";\n\nexport function CustomIdField<M extends Record<string, any>>({\n                                                                 customId,\n                                                                 entityId,\n                                                                 status,\n                                                                 onChange,\n                                                                 error,\n                                                                 entity,\n                                                                 loading\n                                                             }: {\n    customId?: boolean | EnumValues | \"optional\"\n    entityId?: string\n    status: EntityStatus,\n    onChange: (id?: string) => void,\n    error: boolean,\n    entity: Entity<M> | undefined,\n    loading: boolean\n}) {\n\n    const { errors } = useFormex();\n    const disabled = status === \"existing\" || !customId;\n    const idSetAutomatically = status !== \"existing\" && !customId;\n\n    const enumValues: EnumValueConfig[] | undefined = useMemo(() => {\n        if (!customId || typeof customId === \"boolean\" || customId === \"optional\")\n            return undefined;\n        return enumToObjectEntries(customId);\n    }, [customId]);\n\n    const snackbarController = useSnackbarController();\n    const { copy } = useClipboard({\n        onSuccess: (text) => snackbarController.open({\n            type: \"success\",\n            message: `Copied ${text}`\n        })\n    });\n\n    const customizationController: CustomizationController = useCustomizationController();\n\n    const fieldProps = {\n        label: idSetAutomatically ? \"ID is set automatically\" : \"ID\",\n        disabled: disabled || loading,\n        name: \"id\",\n        value: (entity && status === \"existing\" ? entity.id : entityId) ?? \"\",\n        endAdornment: loading ? <CircularProgress size={\"small\"}/> : (entity\n                ? (\n                    <>\n\n                        <Tooltip title={\"Copy\"}>\n                            <IconButton onClick={(e) => copy(entity.id)}\n                                        aria-label=\"copy-id\">\n                                <ContentCopyIcon size={\"small\"}/>\n                            </IconButton>\n                        </Tooltip>\n\n                        {customizationController?.entityLinkBuilder &&\n                            <Tooltip title={\"Open in the console\"}>\n                                <IconButton component={\"a\"}\n                                            href={customizationController.entityLinkBuilder({ entity })}\n                                            rel=\"noopener noreferrer\"\n                                            target=\"_blank\"\n                                            onClick={(e) => e.stopPropagation()}\n                                            aria-label=\"go-to-datasource\">\n                                    <OpenInNewIcon size={\"small\"}/>\n                                </IconButton>\n                            </Tooltip>}\n\n                    </>\n                )\n                : undefined\n        )\n    };\n\n    return (\n        <>\n\n            {enumValues &&\n                <Select\n                    error={error}\n                    onValueChange={(v) => onChange(v as string)}\n                    {...fieldProps}\n                    renderValue={(option) => {\n                        const enumConfig = enumValues.find(e => e.id === option);\n                        if (!enumConfig) return option;\n                        return `${enumConfig.id} - ${enumConfig.label}`;\n                    }}\n                >\n                    {enumValues.map((enumConfig) => (\n                        <SelectItem\n                            key={enumConfig.id}\n                            value={String(enumConfig.id)}>\n                            <EnumValuesChip\n                                enumKey={enumConfig.id}\n                                enumValues={enumValues}\n                                size={\"medium\"}/>\n                        </SelectItem>)\n                    )}\n                </Select>}\n\n            {!enumValues &&\n                <TextField {...fieldProps}\n                           error={error}\n                           placeholder={customId === \"optional\" ? \"Autogenerated ID, it can be manually changed\" : (status === \"new\" || status === \"copy\" ? \"ID of the new document\" : \"ID of the document\")}\n                           onChange={(event) => {\n                               let value = event.target.value;\n                               if (value) value = value.trim();\n                               return onChange(value.length ? value : undefined);\n                           }}/>}\n\n            {errors.id && <Typography variant={\"caption\"}\n                                      className={\"ml-3.5 text-red-500 dark:text-red-500\"}>\n                {errors.id}\n            </Typography>}\n\n        </>\n    );\n}\n","import { Entity, EntityCallbacks, EntityCollection } from \"../types\";\nimport React, { useCallback, useMemo, useState } from \"react\";\nimport { Button, CircularProgress, Dialog, DialogActions, DialogContent, Typography } from \"@firecms/ui\";\nimport {\n    deleteEntityWithCallbacks,\n    useCustomizationController,\n    useDataSource,\n    useFireCMSContext,\n    useSnackbarController\n} from \"../hooks\";\nimport { resolveCollection } from \"../util\";\nimport { EntityView } from \"./EntityView\";\n\nexport interface DeleteEntityDialogProps<M extends Record<string, any>> {\n    entityOrEntitiesToDelete?: Entity<M> | Entity<M>[],\n    path: string,\n    collection: EntityCollection<M>\n    open: boolean;\n    onClose: () => void;\n    callbacks?: EntityCallbacks<M>,\n\n    onEntityDelete?(path: string, entity: Entity<M>): void;\n\n    onMultipleEntitiesDelete?(path: string, entities: Entity<M>[]): void;\n}\n\nexport function DeleteEntityDialog<M extends Record<string, any>>({\n                                                                      entityOrEntitiesToDelete,\n                                                                      collection,\n                                                                      onClose,\n                                                                      open,\n                                                                      callbacks,\n                                                                      onEntityDelete,\n                                                                      onMultipleEntitiesDelete,\n                                                                      path\n                                                                  }: DeleteEntityDialogProps<M>) {\n\n    const dataSource = useDataSource(collection);\n    const customizationController = useCustomizationController();\n    const snackbarController = useSnackbarController();\n    const [loading, setLoading] = useState(false);\n\n    const [entityOrEntities, setUsedEntityOrEntities] = React.useState<Entity<M> | Entity<M>[]>();\n\n    const [multipleEntities, setMultipleEntities] = React.useState<boolean>();\n    const context = useFireCMSContext();\n\n    React.useEffect(() => {\n        if (entityOrEntitiesToDelete) {\n            const revisedEntityOrEntities = Array.isArray(entityOrEntitiesToDelete) && entityOrEntitiesToDelete.length === 1\n                ? entityOrEntitiesToDelete[0]\n                : entityOrEntitiesToDelete;\n            setUsedEntityOrEntities(revisedEntityOrEntities);\n            setMultipleEntities(Array.isArray(revisedEntityOrEntities));\n        }\n    }, [entityOrEntitiesToDelete]);\n\n    const resolvedCollection = useMemo(() => resolveCollection<M>({\n        collection,\n        path,\n        fields: customizationController.propertyConfigs\n    }), [collection, path]);\n\n    const handleCancel = useCallback(() => {\n        onClose();\n    }, [onClose]);\n\n    const onDeleteSuccess = useCallback((entity: Entity<any>) => {\n        console.debug(\"Deleted\", entity);\n    }, []);\n\n    const onDeleteFailure = useCallback((entity: Entity<any>, e: Error) => {\n        snackbarController.open({\n            type: \"error\",\n            message: \"Error deleting: \" + e?.message\n        });\n\n        console.error(\"Error deleting entity\");\n        console.error(e);\n    }, [resolvedCollection.name]);\n\n    const onPreDeleteHookError = useCallback((entity: Entity<any>, e: Error) => {\n        snackbarController.open({\n            type: \"error\",\n            message: \"Error before deleting: \" + e?.message\n        });\n        console.error(e);\n    }, [resolvedCollection.name]);\n\n    const onDeleteSuccessHookError = useCallback((entity: Entity<any>, e: Error) => {\n        snackbarController.open({\n            type: \"error\",\n            message: \"Error after deleting: \" + e?.message\n        });\n        console.error(e);\n    }, [resolvedCollection.name]);\n\n    const performDelete = useCallback((entity: Entity<M>): Promise<boolean> =>\n        deleteEntityWithCallbacks({\n            dataSource,\n            entity,\n            collection: resolvedCollection,\n            callbacks,\n            onDeleteSuccess,\n            onDeleteFailure,\n            onPreDeleteHookError,\n            onDeleteSuccessHookError,\n            context\n        }), [dataSource, resolvedCollection, callbacks, onDeleteSuccess, onDeleteFailure, onPreDeleteHookError, onDeleteSuccessHookError, context]);\n\n    const handleOk = useCallback(async () => {\n        if (entityOrEntities) {\n\n            setLoading(true);\n\n            if (multipleEntities) {\n                Promise.all((entityOrEntities as Entity<M>[]).map(performDelete)).then((results) => {\n\n                    setLoading(false);\n\n                    if (onMultipleEntitiesDelete && entityOrEntities)\n                        onMultipleEntitiesDelete(path, entityOrEntities as Entity<M>[]);\n\n                    if (results.every(Boolean)) {\n                        snackbarController.open({\n                            type: \"success\",\n                            message: `${resolvedCollection.name}: multiple deleted`\n                        });\n                    } else if (results.some(Boolean)) {\n                        snackbarController.open({\n                            type: \"warning\",\n                            message: `${resolvedCollection.name}: Some of the entities have been deleted, but not all`\n                        });\n                    } else {\n                        snackbarController.open({\n                            type: \"error\",\n                            message: `${resolvedCollection.name}: Error deleting entities`\n                        });\n                    }\n                    onClose();\n                });\n\n            } else {\n                performDelete(entityOrEntities as Entity<M>).then((success) => {\n                    setLoading(false);\n                    if (success) {\n                        if (onEntityDelete && entityOrEntities)\n                            onEntityDelete(path, entityOrEntities as Entity<M>);\n                        snackbarController.open({\n                            type: \"success\",\n                            message: `${resolvedCollection.singularName ?? resolvedCollection.name} deleted`\n                        });\n                        onClose();\n                    }\n                });\n            }\n        }\n    }, [entityOrEntities, multipleEntities, performDelete, onMultipleEntitiesDelete, path, onClose, snackbarController, resolvedCollection.name, onEntityDelete]);\n\n    let content: React.ReactNode;\n    if (entityOrEntities && multipleEntities) {\n        content = <>Multiple entities</>;\n    } else {\n        const entity = entityOrEntities as Entity<M> | undefined;\n        content = entity\n            ? <EntityView\n                entity={entity}\n                collection={collection}\n                path={path}/>\n            : <></>;\n    }\n\n    const dialogTitle = multipleEntities\n        ? <><b>{resolvedCollection.name}</b>: Confirm multiple delete?</>\n        : `Would you like to delete this ${resolvedCollection.singularName ?? resolvedCollection.name}?`;\n\n    return (\n        <Dialog\n            maxWidth={multipleEntities ? \"lg\" : \"2xl\"}\n            aria-labelledby=\"delete-dialog\"\n            open={open}\n            onOpenChange={(open) => !open ? onClose() : undefined}\n        >\n            <DialogContent fullHeight={true}>\n                <Typography variant={\"subtitle2\"} className={\"p-4\"}>\n                    {dialogTitle}\n                </Typography>\n\n                {!multipleEntities && <div className={\"p-4\"}>{content}</div>}\n            </DialogContent>\n            <DialogActions>\n\n                {loading && <CircularProgress size={\"small\"}/>}\n\n                <Button onClick={handleCancel}\n                        disabled={loading}\n                        variant=\"text\"\n                        color=\"primary\">\n                    Cancel\n                </Button>\n                <Button\n                    autoFocus\n                    disabled={loading}\n                    onClick={handleOk}\n                    variant=\"filled\"\n                    color=\"primary\">\n                    Ok\n                </Button>\n            </DialogActions>\n\n        </Dialog>\n    );\n}\n","import { EntityAction } from \"../../../types\";\nimport { ArchiveIcon, DeleteIcon, FileCopyIcon, KeyboardTabIcon, OpenInNewIcon } from \"@firecms/ui\";\nimport { DeleteEntityDialog } from \"../../DeleteEntityDialog\";\n\nexport const editEntityAction: EntityAction = {\n    icon: <KeyboardTabIcon/>,\n    name: \"Edit\",\n    collapsed: false,\n    onClick({\n                entity,\n                collection,\n                fullPath,\n                context,\n                highlightEntity,\n                unhighlightEntity,\n            }): Promise<void> {\n        highlightEntity?.(entity);\n        context.analyticsController?.onAnalyticsEvent?.(\"entity_click\", {\n            path: entity.path,\n            entityId: entity.id\n        });\n        const path = collection?.collectionGroup ? entity.path : (fullPath ?? entity.path);\n        context.sideEntityController.open({\n            entityId: entity.id,\n            path,\n            collection,\n            updateUrl: true,\n            onClose: () => unhighlightEntity?.(entity),\n        });\n        return Promise.resolve(undefined);\n    }\n}\n\nexport const copyEntityAction: EntityAction = {\n    icon: <FileCopyIcon/>,\n    name: \"Copy\",\n    onClick({\n                entity,\n                collection,\n                context,\n                highlightEntity,\n                unhighlightEntity,\n            }): Promise<void> {\n        highlightEntity?.(entity);\n        context.analyticsController?.onAnalyticsEvent?.(\"copy_entity_click\", {\n            path: entity.path,\n            entityId: entity.id\n        });\n        context.sideEntityController.open({\n            entityId: entity.id,\n            path: entity.path,\n            copy: true,\n            collection,\n            updateUrl: true,\n            onClose: () => unhighlightEntity?.(entity),\n        });\n        return Promise.resolve(undefined);\n    }\n}\n\nexport const archiveEntityAction: EntityAction = {\n    icon: <ArchiveIcon/>,\n    name: \"Archive\",\n    onClick({\n                entity,\n                collection,\n                context: {\n                    dataSource,\n                }\n            }): Promise<void> {\n        // Add your code here\n        return Promise.resolve(undefined);\n    }\n}\n\nexport const openWebsiteAction: EntityAction = {\n    icon: <OpenInNewIcon/>,\n    name: \"See in website\",\n    onClick({\n                entity,\n                collection,\n                context,\n            }): Promise<void> {\n        // open a new tab\n        window.open(`https://example.com/${entity.id}`, \"_blank\");\n        return Promise.resolve(undefined);\n    }\n}\n\nexport const deleteEntityAction: EntityAction = {\n    icon: <DeleteIcon/>,\n    name: \"Delete\",\n    onClick({\n                entity,\n                fullPath,\n                collection,\n                context,\n                selectionController,\n                onCollectionChange,\n                sideEntityController\n            }): Promise<void> {\n        const { closeDialog } = context.dialogsController.open({\n            key: \"delete_entity_dialog_\" + entity.id,\n            Component: ({ open }) => {\n                if (!collection || !fullPath)\n                    throw new Error(\"deleteEntityAction: Collection is undefined\");\n                return <DeleteEntityDialog\n                    entityOrEntitiesToDelete={entity}\n                    path={fullPath}\n                    collection={collection}\n                    callbacks={collection.callbacks}\n                    open={open}\n                    onEntityDelete={() => {\n                        context.analyticsController?.onAnalyticsEvent?.(\"single_entity_deleted\", {\n                            path: fullPath\n                        });\n                        selectionController?.setSelectedEntities(selectionController.selectedEntities.filter(e => e.id !== entity.id));\n                        onCollectionChange?.();\n                        sideEntityController?.close();\n                    }}\n                    onClose={closeDialog}/>;\n            }\n        })\n        return Promise.resolve(undefined);\n    }\n}\n","import { ContentPasteIcon, IconButton, Typography } from \"@firecms/ui\";\nimport { useCallback, useState } from \"react\";\n\nexport function PropertyIdCopyTooltipContent({ propertyId }: { propertyId: string }) {\n\n    const [copied, setCopied] = useState(false);\n\n    return (\n        <div className={\"flex flex-row gap-2 items-center justify-center text-white\"}>\n            <div>\n                <Typography variant={\"caption\"} className={\"min-w-20 text-slate-400\"}\n                            color={\"disabled\"}>{copied ? \"Copied\" : \"Property ID\"}</Typography>\n                <Typography variant={\"caption\"} className={\"text-white\"}><code>{propertyId}</code></Typography>\n            </div>\n            {/*    Copy to clipboard button*/}\n            <IconButton size={\"small\"}>\n                <ContentPasteIcon size={\"smallest\"}\n                                  className={\"text-white\"}\n                                  onClick={useCallback(() => {\n                                      navigator.clipboard.writeText(propertyId);\n                                      setCopied(true);\n                                      setTimeout(() => setCopied(false), 2000);\n                                  }, [propertyId])}\n                />\n            </IconButton>\n        </div>\n    );\n}\n","import React, { MutableRefObject, useCallback, useEffect, useMemo, useRef, useState } from \"react\";\n\nimport {\n    CMSAnalyticsEvent,\n    Entity,\n    EntityAction,\n    EntityCollection,\n    EntityStatus,\n    EntityValues,\n    FormContext,\n    PluginFormActionProps,\n    PropertyFieldBindingProps,\n    ResolvedEntityCollection\n} from \"../types\";\nimport { Formex, FormexController, getIn, setIn, useCreateFormex } from \"@firecms/formex\";\nimport { PropertyFieldBinding } from \"./PropertyFieldBinding\";\nimport { CustomFieldValidator, getYupEntitySchema } from \"./validation\";\nimport equal from \"react-fast-compare\"\nimport {\n    canCreateEntity,\n    canDeleteEntity,\n    getDefaultValuesFor,\n    getEntityTitlePropertyKey,\n    getValueInPath,\n    isHidden,\n    isReadOnly,\n    resolveCollection\n} from \"../util\";\nimport {\n    useAuthController,\n    useCustomizationController,\n    useDataSource,\n    useFireCMSContext,\n    useSideEntityController\n} from \"../hooks\";\nimport { ErrorFocus } from \"./components/ErrorFocus\";\nimport { CustomIdField } from \"./components/CustomIdField\";\nimport { Alert, Button, cn, DialogActions, IconButton, Tooltip, Typography } from \"@firecms/ui\";\nimport { ErrorBoundary } from \"../components\";\nimport {\n    copyEntityAction,\n    deleteEntityAction\n} from \"../components/EntityCollectionTable/internal/default_entity_actions\";\nimport { useAnalyticsController } from \"../hooks/useAnalyticsController\";\nimport { ValidationError } from \"yup\";\nimport { PropertyIdCopyTooltipContent } from \"../components/PropertyIdCopyTooltipContent\";\n\n/**\n * @group Components\n */\nexport interface EntityFormProps<M extends Record<string, any>> {\n\n    /**\n     * New or existing status\n     */\n    status: EntityStatus;\n\n    /**\n     * Path of the collection this entity is located\n     */\n    path: string;\n\n    /**\n     * The collection is used to build the fields of the form\n     */\n    collection: EntityCollection<M>\n\n    /**\n     * The updated entity is passed from the parent component when the underlying data\n     * has changed in the datasource\n     */\n    entity?: Entity<M>;\n\n    /**\n     * The callback function called when Save is clicked and validation is correct\n     */\n    onEntitySaveRequested: (\n        props: EntityFormSaveParams<M>\n    ) => Promise<void>;\n\n    /**\n     * The callback function called when discard is clicked\n     */\n    onDiscard?: () => void;\n\n    /**\n     * The callback function when the form is dirty, so the values are different\n     * from the original ones\n     */\n    onModified?: (dirty: boolean) => void;\n\n    /**\n     * The callback function when the form original values have been modified\n     */\n    onValuesChanged?: (values?: EntityValues<M>) => void;\n\n    /**\n     *\n     * @param id\n     */\n    onIdChange?: (id: string) => void;\n\n    currentEntityId?: string;\n\n    onFormContextChange?: (formContext: FormContext<M>) => void;\n\n    hideId?: boolean;\n\n    autoSave?: boolean;\n\n    onIdUpdateError?: (error: any) => void;\n\n}\n\nexport type EntityFormSaveParams<M extends Record<string, any>> = {\n    collection: ResolvedEntityCollection<M>,\n    path: string,\n    entityId: string | undefined,\n    values: EntityValues<M>,\n    previousValues?: EntityValues<M>,\n    closeAfterSave: boolean,\n    autoSave: boolean\n};\n\n/**\n * This is the form used internally by the CMS\n * @param status\n * @param path\n * @param collection\n * @param entity\n * @param onEntitySave\n * @param onDiscard\n * @param onModified\n * @param onValuesChanged\n * @constructor\n * @group Components\n */\nexport const EntityForm = React.memo<EntityFormProps<any>>(EntityFormInternal,\n    (a: EntityFormProps<any>, b: EntityFormProps<any>) => {\n        return a.status === b.status &&\n            a.path === b.path &&\n            equal(a.entity?.values, b.entity?.values);\n    }) as typeof EntityFormInternal;\n\nfunction getDataSourceEntityValues<M extends object>(initialResolvedCollection: ResolvedEntityCollection,\n                                                     status: \"new\" | \"existing\" | \"copy\",\n                                                     entity: Entity<M> | undefined): Partial<EntityValues<M>> {\n    const properties = initialResolvedCollection.properties;\n    if ((status === \"existing\" || status === \"copy\") && entity) {\n        return entity.values ?? getDefaultValuesFor(properties);\n    } else if (status === \"new\") {\n        return getDefaultValuesFor(properties);\n    } else {\n        console.error({\n            status,\n            entity\n        });\n        throw new Error(\"Form has not been initialised with the correct parameters\");\n    }\n}\n\nfunction EntityFormInternal<M extends Record<string, any>>({\n                                                               status,\n                                                               path,\n                                                               collection: inputCollection,\n                                                               entity,\n                                                               onEntitySaveRequested,\n                                                               onDiscard,\n                                                               onModified,\n                                                               onValuesChanged,\n                                                               onIdChange,\n                                                               onFormContextChange,\n                                                               hideId,\n                                                               autoSave,\n                                                               onIdUpdateError,\n                                                           }: EntityFormProps<M>) {\n\n    const analyticsController = useAnalyticsController();\n\n    const customizationController = useCustomizationController();\n\n    const context = useFireCMSContext();\n    const dataSource = useDataSource(inputCollection);\n    const plugins = customizationController.plugins;\n\n    const initialResolvedCollection = useMemo(() => resolveCollection({\n        collection: inputCollection,\n        path,\n        values: entity?.values,\n        fields: customizationController.propertyConfigs\n    }), [entity?.values, path]);\n\n    const mustSetCustomId: boolean = (status === \"new\" || status === \"copy\") &&\n        (Boolean(initialResolvedCollection.customId) && initialResolvedCollection.customId !== \"optional\");\n\n    const initialEntityId = useMemo(() => {\n        if (status === \"new\" || status === \"copy\") {\n            if (mustSetCustomId) {\n                return undefined;\n            } else {\n                return dataSource.generateEntityId(path);\n            }\n        } else {\n            return entity?.id;\n        }\n    }, []);\n\n    const closeAfterSaveRef = useRef(false);\n\n    const baseDataSourceValuesRef = useRef<Partial<EntityValues<M>>>(getDataSourceEntityValues(initialResolvedCollection, status, entity));\n\n    const [entityId, setEntityId] = React.useState<string | undefined>(initialEntityId);\n    const [entityIdError, setEntityIdError] = React.useState<boolean>(false);\n    const [savingError, setSavingError] = React.useState<Error | undefined>();\n\n    const [customIdLoading, setCustomIdLoading] = React.useState<boolean>(false);\n\n    // const initialValuesRef = useRef<EntityValues<M>>(entity?.values ?? baseDataSourceValues as EntityValues<M>);\n    const [internalValues, setInternalValues] = useState<EntityValues<M> | undefined>(entity?.values ?? baseDataSourceValuesRef.current as EntityValues<M>);\n\n    const save = (values: EntityValues<M>): Promise<void> => {\n        return onEntitySaveRequested({\n            collection: resolvedCollection,\n            path,\n            entityId,\n            values,\n            previousValues: entity?.values,\n            closeAfterSave: closeAfterSaveRef.current,\n            autoSave: autoSave ?? false\n        }).then(_ => {\n            const eventName: CMSAnalyticsEvent = status === \"new\"\n                ? \"new_entity_saved\"\n                : (status === \"copy\" ? \"entity_copied\" : (status === \"existing\" ? \"entity_edited\" : \"unmapped_event\"));\n            analyticsController.onAnalyticsEvent?.(eventName, { path });\n        }).catch(e => {\n            console.error(e);\n            setSavingError(e);\n        }).finally(() => {\n            closeAfterSaveRef.current = false;\n        });\n    };\n\n    const onSubmit = (values: EntityValues<M>, formexController: FormexController<EntityValues<M>>) => {\n\n        if (mustSetCustomId && !entityId) {\n            console.error(\"Missing custom Id\");\n            setEntityIdError(true);\n            formexController.setSubmitting(false);\n            return;\n        }\n\n        setSavingError(undefined);\n        setEntityIdError(false);\n\n        if (status === \"existing\") {\n            if (!entity?.id) throw Error(\"Form misconfiguration when saving, no id for existing entity\");\n        } else if (status === \"new\" || status === \"copy\") {\n            if (inputCollection.customId) {\n                if (inputCollection.customId !== \"optional\" && !entityId) {\n                    throw Error(\"Form misconfiguration when saving, entityId should be set\");\n                }\n            }\n        } else {\n            throw Error(\"New FormType added, check EntityForm\");\n        }\n\n        return save(values)\n            ?.then(_ => {\n                formexController.resetForm({\n                    values,\n                    submitCount: 0,\n                    touched: {}\n                });\n            })\n            .finally(() => {\n                formexController.setSubmitting(false);\n            });\n\n    };\n\n    const formex: FormexController<M> = useCreateFormex<M>({\n        initialValues: baseDataSourceValuesRef.current as M,\n        onSubmit,\n        validation: (values) => {\n            return validationSchema?.validate(values, { abortEarly: false })\n                .then(() => {\n                    return {};\n                })\n                .catch((e) => {\n\n                    const errors: Record<string, string> = {};\n                    e.inner.forEach((error: any) => {\n                        errors[error.path] = error.message;\n                    });\n                    return yupToFormErrors(e);\n                });\n        }\n    });\n\n    useEffect(() => {\n        baseDataSourceValuesRef.current = getDataSourceEntityValues(initialResolvedCollection, status, entity);\n        const initialValues = formex.initialValues;\n        if (!formex.isSubmitting && initialValues && status === \"existing\") {\n            setUnderlyingChanges(\n                Object.entries(resolvedCollection.properties)\n                    .map(([key, property]) => {\n                        if (isHidden(property)) {\n                            return {};\n                        }\n                        const initialValue = initialValues[key];\n                        const latestValue = baseDataSourceValuesRef.current[key];\n                        if (!equal(initialValue, latestValue)) {\n                            return { [key]: latestValue };\n                        }\n                        return {};\n                    })\n                    .reduce((a, b) => ({ ...a, ...b }), {}) as Partial<EntityValues<M>>\n            );\n        } else {\n            setUnderlyingChanges({});\n        }\n    }, [entity, initialResolvedCollection, status]);\n\n    const doOnValuesChanges = (values?: EntityValues<M>) => {\n        const initialValues = formex.initialValues;\n        setInternalValues(values);\n        if (onValuesChanged)\n            onValuesChanged(values);\n        if (autoSave && values && !equal(values, initialValues)) {\n            save(values);\n        }\n    };\n\n    useEffect(() => {\n        if (entityId && onIdChange)\n            onIdChange(entityId);\n    }, [entityId, onIdChange]);\n\n    const resolvedCollection = resolveCollection<M>({\n        collection: inputCollection,\n        path,\n        entityId,\n        values: internalValues,\n        previousValues: formex.initialValues,\n        fields: customizationController.propertyConfigs\n    });\n\n    const titlePropertyKey = getEntityTitlePropertyKey(resolvedCollection, customizationController.propertyConfigs);\n    const title = internalValues && titlePropertyKey ? getValueInPath(internalValues, titlePropertyKey) : undefined;\n\n    const onIdUpdate = inputCollection.callbacks?.onIdUpdate;\n\n    const doOnIdUpdate = useCallback(async () => {\n        if (onIdUpdate && internalValues && (status === \"new\" || status === \"copy\")) {\n            setCustomIdLoading(true);\n            try {\n                const updatedId = await onIdUpdate({\n                    collection: resolvedCollection,\n                    path,\n                    entityId,\n                    values: internalValues,\n                    context\n                });\n                setEntityId(updatedId);\n            } catch (e) {\n                onIdUpdateError && onIdUpdateError(e);\n                console.error(e);\n            }\n            setCustomIdLoading(false);\n        }\n    }, [entityId, internalValues, status]);\n\n    useEffect(() => {\n        doOnIdUpdate();\n    }, [doOnIdUpdate]);\n\n    const [underlyingChanges, setUnderlyingChanges] = useState<Partial<EntityValues<M>>>({});\n\n    const uniqueFieldValidator: CustomFieldValidator = useCallback(({\n                                                                        name,\n                                                                        value,\n                                                                        property\n                                                                    }) => dataSource.checkUniqueField(path, name, value, entityId),\n        [dataSource, path, entityId]);\n\n    const validationSchema = useMemo(() => entityId\n            ? getYupEntitySchema(\n                entityId,\n                resolvedCollection.properties,\n                uniqueFieldValidator)\n            : undefined,\n        [entityId, resolvedCollection.properties, uniqueFieldValidator]);\n\n    const authController = useAuthController();\n\n    const getActionsForEntity = useCallback(({\n                                                 entity,\n                                                 customEntityActions\n                                             }: {\n        entity?: Entity<M>,\n        customEntityActions?: EntityAction[]\n    }): EntityAction[] => {\n        const createEnabled = canCreateEntity(inputCollection, authController, path, null);\n        const deleteEnabled = entity ? canDeleteEntity(inputCollection, authController, path, entity) : true;\n        const actions: EntityAction[] = [];\n        if (createEnabled)\n            actions.push(copyEntityAction);\n        if (deleteEnabled)\n            actions.push(deleteEntityAction);\n        if (customEntityActions)\n            actions.push(...customEntityActions);\n        return actions;\n    }, [authController, inputCollection, path]);\n\n    const pluginActions: React.ReactNode[] = [];\n\n    const formContext: FormContext<M> = {\n        setFieldValue: formex.setFieldValue,\n        values: formex.values,\n        collection: resolvedCollection,\n        entityId,\n        path,\n        save\n    };\n\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useEffect(() => {\n        if (onFormContextChange) {\n            onFormContextChange(formContext);\n        }\n    }, [onFormContextChange, formContext]);\n\n    if (plugins && inputCollection) {\n        const actionProps: PluginFormActionProps = {\n            entityId,\n            path,\n            status,\n            collection: inputCollection,\n            context,\n            currentEntityId: entityId,\n            formContext\n        };\n        pluginActions.push(...plugins.map((plugin, i) => (\n            plugin.form?.Actions\n                ? <plugin.form.Actions\n                    key={`actions_${plugin.key}`} {...actionProps}/>\n                : null\n        )).filter(Boolean));\n    }\n\n    return <Formex value={formex}>\n        <div className=\"h-full overflow-auto\">\n\n            {pluginActions.length > 0 && <div\n                className={cn(\"w-full flex justify-end items-center sticky top-0 right-0 left-0 z-10 bg-opacity-60 bg-slate-200 dark:bg-opacity-60 dark:bg-slate-800 backdrop-blur-md\")}>\n                {pluginActions}\n            </div>}\n\n            <div className=\"pt-12 pb-16 pl-8 pr-8 md:pl-10 md:pr-10\">\n                <div\n                    className={`w-full py-2 flex flex-col items-start mt-${4 + (pluginActions ? 8 : 0)} lg:mt-${8 + (pluginActions ? 8 : 0)} mb-8`}>\n\n                    <Typography\n                        className={\"mt-4 flex-grow line-clamp-1 \" + inputCollection.hideIdFromForm ? \"mb-2\" : \"mb-0\"}\n                        variant={\"h4\"}>{title ?? inputCollection.singularName ?? inputCollection.name}\n                    </Typography>\n                    <Alert color={\"base\"} className={\"w-full\"} size={\"small\"}>\n                        <code className={\"text-xs select-all\"}>{path}/{entityId}</code>\n                    </Alert>\n                </div>\n\n                {!hideId &&\n                    <CustomIdField customId={inputCollection.customId}\n                                   entityId={entityId}\n                                   status={status}\n                                   onChange={setEntityId}\n                                   error={entityIdError}\n                                   loading={customIdLoading}\n                                   entity={entity}/>}\n\n                {entityId && <InnerForm\n                    {...formex}\n                    initialValues={formex.initialValues}\n                    onModified={onModified}\n                    onDiscard={onDiscard}\n                    onValuesChanged={doOnValuesChanges}\n                    underlyingChanges={underlyingChanges}\n                    entity={entity}\n                    resolvedCollection={resolvedCollection}\n                    formContext={formContext}\n                    status={status}\n                    savingError={savingError}\n                    closeAfterSaveRef={closeAfterSaveRef}\n                    autoSave={autoSave}\n                    entityActions={getActionsForEntity({\n                        entity,\n                        customEntityActions: inputCollection.entityActions\n                    })}/>}\n\n            </div>\n        </div>\n    </Formex>\n}\n\nfunction InnerForm<M extends Record<string, any>>(props: FormexController<M> & {\n    initialValues: EntityValues<M>,\n    onModified: ((modified: boolean) => void) | undefined,\n    onValuesChanged?: (changedValues?: EntityValues<M>) => void,\n    underlyingChanges: Partial<M>,\n    entity: Entity<M> | undefined,\n    resolvedCollection: ResolvedEntityCollection<M>,\n    formContext: FormContext<M>,\n    onDiscard?: () => void,\n    status: \"new\" | \"existing\" | \"copy\",\n    savingError?: Error,\n    closeAfterSaveRef: MutableRefObject<boolean>,\n    autoSave?: boolean,\n    entityActions: EntityAction[],\n}) {\n\n    const {\n        values,\n        onDiscard,\n        onModified,\n        onValuesChanged,\n        underlyingChanges,\n        formContext,\n        entity,\n        touched,\n        setFieldValue,\n        resolvedCollection,\n        isSubmitting,\n        status,\n        handleSubmit,\n        resetForm,\n        savingError,\n        dirty,\n        closeAfterSaveRef,\n        autoSave,\n        entityActions,\n    } = props;\n\n    const context = useFireCMSContext();\n    const formActions = entityActions.filter(a => a.includeInForm === undefined || a.includeInForm);\n    const sideEntityController = useSideEntityController();\n\n    const modified = dirty;\n    useEffect(() => {\n        if (onModified)\n            onModified(modified);\n        if (onValuesChanged)\n            onValuesChanged(values);\n    }, [modified, values]);\n\n    useEffect(() => {\n        if (!autoSave && !isSubmitting && underlyingChanges && entity) {\n            // we update the form fields from the Firestore data\n            // if they were not touched\n            Object.entries(underlyingChanges).forEach(([key, value]) => {\n                const formValue = values[key];\n                if (!equal(value, formValue) && !touched[key]) {\n                    console.debug(\"Updated value from the datasource:\", key, value);\n                    setFieldValue(key, value !== undefined ? value : null);\n                }\n            });\n        }\n    }, [isSubmitting, autoSave, underlyingChanges, entity, values, touched, setFieldValue]);\n\n    const formFields = (\n        <div className={\"flex flex-col gap-8\"}>\n            {(resolvedCollection.propertiesOrder ?? Object.keys(resolvedCollection.properties))\n                .map((key) => {\n\n                    const property = resolvedCollection.properties[key];\n                    if (!property) {\n                        console.warn(`Property ${key} not found in collection ${resolvedCollection.name}`);\n                        return null;\n                    }\n\n                    const underlyingValueHasChanged: boolean =\n                        !!underlyingChanges &&\n                        Object.keys(underlyingChanges).includes(key) &&\n                        !!touched[key];\n\n                    const disabled = (!autoSave && isSubmitting) || isReadOnly(property) || Boolean(property.disabled);\n                    const hidden = isHidden(property);\n                    if (hidden) return null;\n                    const cmsFormFieldProps: PropertyFieldBindingProps<any, M> = {\n                        propertyKey: key,\n                        disabled,\n                        property,\n                        includeDescription: property.description || property.longDescription,\n                        underlyingValueHasChanged: underlyingValueHasChanged && !autoSave,\n                        context: formContext,\n                        tableMode: false,\n                        partOfArray: false,\n                        partOfBlock: false,\n                        autoFocus: false\n                    };\n\n                    return (\n                        <div id={`form_field_${key}`}\n                             key={`field_${resolvedCollection.name}_${key}`}>\n                            <ErrorBoundary>\n                                <Tooltip title={<PropertyIdCopyTooltipContent propertyId={key}/>}\n                                         delayDuration={800}\n                                         side={\"left\"}\n                                         align={\"start\"}\n                                         sideOffset={16}>\n                                    <PropertyFieldBinding {...cmsFormFieldProps}/>\n                                </Tooltip>\n                            </ErrorBoundary>\n                        </div>\n                    );\n                })\n                .filter(Boolean)}\n\n        </div>\n    );\n\n    const disabled = isSubmitting || (!modified && status === \"existing\");\n    const formRef = React.useRef<HTMLDivElement>(null);\n\n    return (\n\n        <form onSubmit={handleSubmit}\n              onReset={() => {\n                  console.debug(\"Resetting form\")\n                  resetForm();\n                  return onDiscard && onDiscard();\n              }}\n              noValidate>\n            <div className=\"mt-12\"\n                 ref={formRef}>\n\n                {formFields}\n\n                <ErrorFocus containerRef={formRef}/>\n\n            </div>\n\n            <div className=\"h-14\"/>\n\n            {!autoSave && <DialogActions position={\"absolute\"}>\n\n                {savingError &&\n                    <div className=\"text-right\">\n                        <Typography color={\"error\"}>\n                            {savingError.message}\n                        </Typography>\n                    </div>}\n\n                {entity && formActions.length > 0 && <div className=\"flex-grow flex overflow-auto no-scrollbar\">\n                    {formActions.map(action => (\n                        <IconButton\n                            key={action.name}\n                            color=\"primary\"\n                            onClick={(event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n                                event.stopPropagation();\n                                if (entity)\n                                    action.onClick({\n                                        entity,\n                                        fullPath: resolvedCollection.path,\n                                        collection: resolvedCollection,\n                                        context,\n                                        sideEntityController,\n                                    });\n                            }}>\n                            {action.icon}\n                        </IconButton>\n                    ))}\n                </div>}\n\n                <Button\n                    variant=\"text\"\n                    disabled={disabled}\n                    type=\"reset\"\n                >\n                    {status === \"existing\" ? \"Discard\" : \"Clear\"}\n                </Button>\n\n                <Button\n                    variant=\"text\"\n                    color=\"primary\"\n                    type=\"submit\"\n                    disabled={disabled}\n                    onClick={() => {\n                        closeAfterSaveRef.current = false;\n                    }}\n                >\n                    {status === \"existing\" && \"Save\"}\n                    {status === \"copy\" && \"Create copy\"}\n                    {status === \"new\" && \"Create\"}\n                </Button>\n\n                <Button\n                    variant=\"filled\"\n                    color=\"primary\"\n                    type=\"submit\"\n                    disabled={disabled}\n                    onClick={() => {\n                        closeAfterSaveRef.current = true;\n                    }}\n                >\n                    {status === \"existing\" && \"Save and close\"}\n                    {status === \"copy\" && \"Create copy and close\"}\n                    {status === \"new\" && \"Create and close\"}\n                </Button>\n\n            </DialogActions>}\n        </form>\n    );\n}\n\nexport function yupToFormErrors(yupError: ValidationError): Record<string, any> {\n    let errors: Record<string, any> = {};\n    if (yupError.inner) {\n        if (yupError.inner.length === 0) {\n            return setIn(errors, yupError.path!, yupError.message);\n        }\n        for (const err of yupError.inner) {\n            if (!getIn(errors, err.path!)) {\n                errors = setIn(errors, err.path!, err.message);\n            }\n        }\n    }\n    return errors;\n}\n","import React, { useCallback, useEffect, useLayoutEffect, useMemo, useState } from \"react\";\nimport equal from \"react-fast-compare\"\n\nimport * as Portal from \"@radix-ui/react-portal\";\n\nimport {\n    Entity,\n    EntityCollection,\n    EntityValues,\n    FireCMSPlugin,\n    FormContext,\n    PropertyFieldBindingProps,\n    ResolvedEntityCollection,\n    ResolvedProperties,\n    ResolvedProperty\n} from \"../../../../types\";\nimport { Formex, useCreateFormex } from \"@firecms/formex\";\nimport { useDraggable } from \"./useDraggable\";\nimport { CustomFieldValidator, getYupEntitySchema } from \"../../../../form/validation\";\nimport { useWindowSize } from \"./useWindowSize\";\nimport { ElementResizeListener } from \"./ElementResizeListener\";\nimport { ErrorView } from \"../../../ErrorView\";\nimport { getPropertyInPath, isReadOnly, resolveCollection } from \"../../../../util\";\nimport { Button, ClearIcon, DialogActions, IconButton, Typography } from \"@firecms/ui\";\nimport { PropertyFieldBinding } from \"../../../../form\";\nimport { useCustomizationController, useFireCMSContext } from \"../../../../hooks\";\nimport { OnCellValueChangeParams } from \"../../../common\";\n\ninterface PopupFormFieldProps<M extends Record<string, any>> {\n    entity?: Entity<M>;\n    customFieldValidator?: CustomFieldValidator;\n    path: string;\n    tableKey: string;\n    propertyKey?: Extract<keyof M, string>;\n    collection?: EntityCollection<M>;\n    cellRect?: DOMRect;\n    open: boolean;\n    onClose: () => void;\n    container: HTMLElement | null;\n    /**\n     * Callback when the value of a cell has been edited\n     * @param params\n     */\n    onCellValueChange?: (params: OnCellValueChangeParams<any, M>) => Promise<void> | void;\n}\n\nexport function PopupFormField<M extends Record<string, any>>(props: PopupFormFieldProps<M>) {\n    if (!props.open) return null;\n    return <PopupFormFieldInternal {...props} />;\n\n}\n\nexport function PopupFormFieldInternal<M extends Record<string, any>>({\n                                                                          tableKey,\n                                                                          entity: entityProp,\n                                                                          customFieldValidator,\n                                                                          propertyKey,\n                                                                          collection: inputCollection,\n                                                                          path,\n                                                                          cellRect,\n                                                                          open,\n                                                                          onClose,\n                                                                          onCellValueChange,\n                                                                          container\n                                                                      }: PopupFormFieldProps<M>) {\n\n    // const dataSource = useDataSource();\n    const fireCMSContext = useFireCMSContext();\n    const customizationController = useCustomizationController();\n\n    const [savingError, setSavingError] = React.useState<any>();\n    const [popupLocation, setPopupLocation] = useState<{\n        x: number,\n        y: number\n    }>();\n\n    const entityId = entityProp?.id;\n    const [entity, setEntity] = useState<Entity<M> | undefined>(entityProp);\n    // useEffect(() => {\n    //     if (entityId && inputCollection) {\n    //         return dataSource.listenEntity?.({\n    //             path,\n    //             entityId,\n    //             collection: inputCollection,\n    //             onUpdate: (e) => {\n    //                 setEntity(e);\n    //                 setInternalValue(e?.values);\n    //             }\n    //         });\n    //     } else {\n    //         return () => {\n    //         };\n    //     }\n    // }, [dataSource, entityId, inputCollection, path, open]);\n\n    const [internalValue, setInternalValue] = useState<EntityValues<M> | undefined>(entity?.values);\n\n    const collection: ResolvedEntityCollection<M> | undefined = inputCollection\n        ? resolveCollection<M>({\n            collection: inputCollection,\n            path,\n            values: internalValue,\n            entityId,\n            fields: customizationController.propertyConfigs\n        })\n        : undefined;\n\n    const windowSize = useWindowSize();\n\n    const draggableRef = React.useRef<HTMLDivElement>(null);\n    const innerRef = React.useRef<HTMLDivElement>(null);\n\n    const initialPositionSet = React.useRef<boolean>(false);\n\n    const getInitialLocation = useCallback(() => {\n        if (!cellRect) throw Error(\"getInitialLocation error\");\n\n        return {\n            x: cellRect.left < windowSize.width - cellRect.right\n                ? cellRect.x + cellRect.width / 2\n                : cellRect.x - cellRect.width / 2,\n            y: cellRect.top < windowSize.height - cellRect.bottom\n                ? cellRect.y + cellRect.height / 2\n                : cellRect.y - cellRect.height / 2\n        };\n    }, [cellRect, windowSize.height, windowSize.width]);\n\n    const normalizePosition = useCallback(({\n                                               x,\n                                               y\n                                           }: { x: number, y: number }) => {\n\n        const draggableBoundingRect = draggableRef.current?.getBoundingClientRect();\n        if (!draggableBoundingRect)\n            throw Error(\"normalizePosition called before draggableBoundingRect is set\");\n\n        return {\n            x: Math.max(0, Math.min(x, windowSize.width - draggableBoundingRect.width)),\n            y: Math.max(0, Math.min(y, windowSize.height - draggableBoundingRect.height))\n        };\n    }, [windowSize]);\n\n    const updatePopupLocation = useCallback((position?: {\n        x: number,\n        y: number\n    }) => {\n\n        const draggableBoundingRect = draggableRef.current?.getBoundingClientRect();\n        if (!cellRect || !draggableBoundingRect) return;\n        // const newPosition = normalizePosition(position ?? getInitialLocation());\n        const newPosition = position ?? normalizePosition(getInitialLocation());\n        if (!popupLocation || newPosition.x !== popupLocation.x || newPosition.y !== popupLocation.y)\n            setPopupLocation(newPosition);\n    }, [cellRect, getInitialLocation, normalizePosition, popupLocation]);\n\n    useDraggable({\n        containerRef: draggableRef,\n        innerRef,\n        x: popupLocation?.x,\n        y: popupLocation?.y,\n        onMove: updatePopupLocation\n    });\n\n    useEffect(\n        () => {\n            initialPositionSet.current = false;\n        },\n        [propertyKey, entity]\n    );\n\n    useLayoutEffect(\n        () => {\n            const draggableBoundingRect = draggableRef.current?.getBoundingClientRect();\n            if (!cellRect || !draggableBoundingRect || initialPositionSet.current) return;\n            updatePopupLocation();\n            initialPositionSet.current = true;\n        },\n        [cellRect, updatePopupLocation, initialPositionSet.current]\n    );\n\n    useLayoutEffect(\n        () => {\n            updatePopupLocation(popupLocation);\n        },\n        [windowSize, cellRect]\n    );\n\n    const validationSchema = useMemo(() => {\n        if (!collection || !entityId) return;\n        return getYupEntitySchema(\n            entityId,\n            propertyKey && collection.properties[propertyKey as string]\n                ? { [propertyKey]: collection.properties[propertyKey as string] } as ResolvedProperties<any>\n                : {} as ResolvedProperties<any>,\n            customFieldValidator);\n    }, [collection, entityId, propertyKey, customFieldValidator]);\n\n    const adaptResize = useCallback(() => {\n        return updatePopupLocation(popupLocation);\n    }, [popupLocation, updatePopupLocation]);\n\n    const saveValue = async (values: M) => {\n        setSavingError(null);\n        if (inputCollection && entity && onCellValueChange && propertyKey) {\n            return onCellValueChange({\n                value: values[propertyKey as string],\n                propertyKey: propertyKey as string,\n                entity,\n                setError: setSavingError,\n                onValueUpdated: () => {\n                },\n                fullPath: path,\n                context: fireCMSContext\n            });\n        }\n        return Promise.resolve();\n    };\n\n    if (!entity)\n        return <></>;\n\n    // enableReinitialize={true}\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const formex = useCreateFormex<M>({\n        initialValues: (entity?.values ?? {}) as EntityValues<M>,\n        validation: (values) => {\n            return validationSchema?.validate(values, { abortEarly: false })\n                .then(() => ({}))\n                .catch((e) => {\n                    const errors: Record<string, string> = {};\n                    e.inner.forEach((error: any) => {\n                        errors[error.path] = error.message;\n                    });\n                    return errors;\n                });\n        },\n        validateOnInitialRender: true,\n        onSubmit: (values, actions) => {\n            saveValue(values)\n                .then(() => onClose())\n                .finally(() => actions.setSubmitting(false));\n        }\n    });\n\n    const { values, isSubmitting, setFieldValue, handleSubmit } = formex;\n\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useEffect(() => {\n        if (!equal(values, internalValue)) {\n            setInternalValue(values);\n        }\n    }, [values]);\n\n    if (!entity)\n        return <ErrorView\n            error={\"PopupFormField misconfiguration\"}/>;\n\n    if (!collection)\n        return <></>;\n\n    const disabled = isSubmitting;\n\n    const formContext: FormContext<M> = {\n        collection,\n        entityId,\n        values,\n        path,\n        setFieldValue,\n        save: saveValue\n    };\n\n    const property: ResolvedProperty<any> | undefined = propertyKey && getPropertyInPath(collection.properties, propertyKey as string);\n    const fieldProps: PropertyFieldBindingProps<any, M> | undefined = propertyKey && property\n        ? {\n            propertyKey: propertyKey as string,\n            disabled: isSubmitting || isReadOnly(property) || !!property.disabled,\n            property,\n            includeDescription: false,\n            underlyingValueHasChanged: false,\n            context: formContext,\n            tableMode: true,\n            partOfArray: false,\n            partOfBlock: false,\n            autoFocus: open\n        }\n        : undefined;\n\n    let internalForm = <>\n        <div\n            key={`popup_form_${tableKey}_${entityId}_${propertyKey}`}\n            className=\"w-[560px] max-w-full max-h-[85vh]\">\n            <form\n                onSubmit={handleSubmit}\n                noValidate>\n\n                <div\n                    className=\"mb-1 p-4 flex flex-col relative\">\n                    <div\n                        ref={innerRef}\n                        className=\"cursor-auto\"\n                        style={{ cursor: \"auto !important\" }}>\n                        {fieldProps &&\n                            <PropertyFieldBinding {...fieldProps}/>}\n                    </div>\n                </div>\n\n                <DialogActions>\n                    <Button\n                        variant=\"filled\"\n                        color=\"primary\"\n                        type=\"submit\"\n                        disabled={disabled}\n                    >\n                        Save\n                    </Button>\n                </DialogActions>\n\n            </form>\n\n        </div>\n\n    </>;\n\n    const plugins = customizationController.plugins;\n    if (plugins) {\n        // const formController: FormContext<M> = {\n        //     values,\n        //     setFieldValue\n        // }\n        plugins.forEach((plugin: FireCMSPlugin) => {\n            if (plugin.form?.provider) {\n                internalForm = (\n                    <plugin.form.provider.Component\n                        status={\"existing\"}\n                        path={path}\n                        collection={collection}\n                        entity={entity}\n                        context={fireCMSContext}\n                        currentEntityId={entityId}\n                        formContext={formContext}\n                        {...plugin.form.provider.props}>\n                        {internalForm}\n                    </plugin.form.provider.Component>\n                );\n            }\n        });\n    }\n    const form = <div\n        className={`text-gray-900 dark:text-white overflow-auto rounded rounded-md bg-white dark:bg-gray-950 ${!open ? \"hidden\" : \"\"} cursor-grab max-w-[100vw]`}>\n\n        {internalForm}\n\n        {savingError &&\n            <Typography color={\"error\"}>\n                {savingError.message}\n            </Typography>\n        }\n    </div>;\n\n    const draggable = (\n        <div\n            key={`draggable_${propertyKey as string}_${entityId}_${open}`}\n            style={{\n                boxShadow: \"0 0 0 2px rgba(128,128,128,0.2)\",\n            }}\n            className={`inline-block fixed z-20 shadow-outline rounded-md bg-white dark:bg-gray-950 ${\n                !open ? \"invisible\" : \"visible\"\n            } cursor-grab overflow-visible`}\n            ref={draggableRef}>\n\n            <ElementResizeListener onResize={adaptResize}/>\n\n            <div\n                className=\"overflow-hidden\">\n\n                {form}\n\n                <div\n                    className=\"absolute -top-3.5 -right-3.5 bg-gray-500 rounded-full\"\n                    style={{\n                        width: \"32px\",\n                        height: \"32px\"\n                    }}>\n                    <IconButton\n                        size={\"small\"}\n                        onClick={(event) => {\n                            event.stopPropagation();\n                            onClose();\n                        }}>\n                        <ClearIcon className=\"text-white\"\n                                   size={\"small\"}/>\n                    </IconButton>\n                </div>\n            </div>\n\n        </div>\n    );\n\n    return (\n        <Portal.Root asChild\n                     container={container}>\n            <Formex value={formex}>\n                {draggable}\n            </Formex>\n        </Portal.Root>\n    );\n\n}\n","import { Button, FilterListOffIcon } from \"@firecms/ui\";\nimport { EntityTableController } from \"../types\";\n\nexport function ClearFilterSortButton({\n                                          tableController,\n                                          enabled\n                                      }: {\n    enabled: boolean;\n    tableController: EntityTableController\n}) {\n    if (!enabled) {\n        return null;\n    }\n\n    const filterIsSet = !!tableController.filterValues && Object.keys(tableController.filterValues).length > 0;\n    const sortIsSet = !!tableController.sortBy && tableController.sortBy.length > 0;\n\n    if ((filterIsSet || sortIsSet) && (tableController.clearFilter || tableController.setSortBy)) {\n        let label;\n        if (filterIsSet && sortIsSet) {\n            label = \"Clear filter and sort\";\n        } else if (filterIsSet) {\n            label = \"Clear filter\";\n        } else {\n            label = \"Clear sort\";\n        }\n        return <Button\n            variant={\"outlined\"}\n            className=\"h-fit-content\"\n            aria-label=\"filter clear\"\n            onClick={() => {\n                tableController.clearFilter?.();\n                tableController.setSortBy?.(undefined);\n            }}\n            size={\"small\"}>\n            <FilterListOffIcon/>\n            {label}\n        </Button>\n    }\n    return null;\n}\n","import React from \"react\";\nimport { useCustomizationController, useFireCMSContext } from \"../../hooks\";\nimport { CollectionActionsProps, EntityCollection, EntityTableController, SelectionController } from \"../../types\";\nimport { toArray } from \"../../util/arrays\";\nimport { ErrorBoundary } from \"../ErrorBoundary\";\nimport { ClearFilterSortButton } from \"../ClearFilterSortButton\";\n\nexport type EntityCollectionViewStartActionsProps<M extends Record<string, any>> = {\n    collection: EntityCollection<M>;\n    path: string;\n    relativePath: string;\n    parentCollectionIds: string[];\n    selectionController: SelectionController<M>;\n    tableController: EntityTableController<M>;\n    collectionEntitiesCount: number;\n}\n\nexport function EntityCollectionViewStartActions<M extends Record<string, any>>({\n                                                                                    collection,\n                                                                                    relativePath,\n                                                                                    parentCollectionIds,\n                                                                                    path,\n                                                                                    selectionController,\n                                                                                    tableController,\n                                                                                    collectionEntitiesCount\n                                                                                }: EntityCollectionViewStartActionsProps<M>) {\n\n    const context = useFireCMSContext();\n\n    const customizationController = useCustomizationController();\n    const plugins = customizationController.plugins ?? [];\n\n    const actionProps: CollectionActionsProps = {\n        path,\n        relativePath,\n        parentCollectionIds,\n        collection,\n        selectionController,\n        context,\n        tableController,\n        collectionEntitiesCount\n    };\n    const actions: React.ReactNode[] = [\n        <ClearFilterSortButton\n            key={\"clear_filter\"}\n            tableController={tableController}\n            enabled={!collection.forceFilter}/>\n    ];\n\n    if (plugins) {\n        plugins.forEach((plugin, i) => {\n            if (plugin.collectionView?.CollectionActionsStart) {\n                actions.push(...toArray(plugin.collectionView?.CollectionActionsStart)\n                    .map((Action, j) => (\n                        <ErrorBoundary key={`plugin_actions_${i}_${j}`}>\n                            <Action {...actionProps} {...plugin.collectionView?.collectionActionsStartProps}/>\n                        </ErrorBoundary>\n                    )));\n            }\n        });\n    }\n\n    return (\n        <>\n            {actions}\n        </>\n    );\n}\n","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\n\nimport equal from \"react-fast-compare\"\n\nimport {\n    AdditionalFieldDelegate,\n    CollectionSize,\n    Entity,\n    EntityAction,\n    EntityCollection,\n    FilterValues,\n    PartialEntityCollection,\n    PropertyOrBuilder,\n    ResolvedProperty,\n    SaveEntityProps\n} from \"../../types\";\nimport {\n    EntityCollectionRowActions,\n    EntityCollectionTable,\n    useDataSourceEntityCollectionTableController\n} from \"../EntityCollectionTable\";\n\nimport {\n    canCreateEntity,\n    canDeleteEntity,\n    canEditEntity,\n    getPropertyInPath,\n    mergeDeep,\n    resolveCollection,\n    resolveProperty\n} from \"../../util\";\nimport { ReferencePreview } from \"../../preview\";\nimport {\n    saveEntityWithCallbacks,\n    useAuthController,\n    useCustomizationController,\n    useDataSource,\n    useLargeLayout,\n    useNavigationController,\n    useSideEntityController\n} from \"../../hooks\";\nimport { useUserConfigurationPersistence } from \"../../hooks/useUserConfigurationPersistence\";\nimport { EntityCollectionViewActions } from \"./EntityCollectionViewActions\";\nimport {\n    AddIcon,\n    Button,\n    cn,\n    IconButton,\n    KeyboardTabIcon,\n    Markdown,\n    Popover,\n    SearchIcon,\n    Skeleton,\n    Tooltip,\n    Typography\n} from \"@firecms/ui\";\nimport { setIn } from \"@firecms/formex\";\nimport { getSubcollectionColumnId } from \"../EntityCollectionTable/internal/common\";\nimport {\n    OnCellValueChange,\n    OnColumnResizeParams,\n    UniqueFieldValidator,\n    useColumnIds,\n    useTableSearchHelper\n} from \"../common\";\nimport { PopupFormField } from \"../EntityCollectionTable/internal/popup_field/PopupFormField\";\nimport { GetPropertyForProps } from \"../EntityCollectionTable/EntityCollectionTableProps\";\nimport {\n    copyEntityAction,\n    deleteEntityAction,\n    editEntityAction\n} from \"../EntityCollectionTable/internal/default_entity_actions\";\nimport { DeleteEntityDialog } from \"../DeleteEntityDialog\";\nimport { useAnalyticsController } from \"../../hooks/useAnalyticsController\";\nimport { useSelectionController } from \"./useSelectionController\";\nimport { EntityCollectionViewStartActions } from \"./EntityCollectionViewStartActions\";\n\nconst COLLECTION_GROUP_PARENT_ID = \"collectionGroupParent\";\n\n/**\n * @group Components\n */\nexport type EntityCollectionViewProps<M extends Record<string, any>> = {\n    /**\n     * Complete path where this collection is located.\n     * It defaults to the collection path if not provided.\n     */\n    fullPath?: string;\n    /**\n     * If this is a subcollection, specify the parent collection ids.\n     */\n    parentCollectionIds?: string[];\n    /**\n     * Whether this is a subcollection or not.\n     */\n    isSubCollection?: boolean;\n    className?: string;\n} & EntityCollection<M>;\n\n/**\n * This component is in charge of binding a datasource path with an {@link EntityCollection}\n * where it's configuration is defined. It includes an infinite scrolling table\n * and a 'Add' new entities button,\n *\n * This component is the default one used for displaying entity collections\n * and is in charge of generating all the specific actions and customization\n * of the lower level {@link EntityCollectionTable}\n *\n * Please **note** that you only need to use this component if you are building\n * a custom view. If you just need to create a default view you can do it\n * exclusively with config options.\n *\n * If you need a lower level implementation with more granular options, you\n * can use {@link EntityCollectionTable}.\n *\n * If you need a generic table that is not bound to the datasource or entities and\n * properties at all, you can check {@link VirtualTable}\n *\n * @param fullPath\n * @param collection\n * @constructor\n * @group Components\n */\nexport const EntityCollectionView = React.memo(\n    function EntityCollectionView<M extends Record<string, any>>({\n                                                                     fullPath: fullPathProp,\n                                                                     parentCollectionIds,\n                                                                     isSubCollection,\n                                                                     className,\n                                                                     ...collectionProp\n                                                                 }: EntityCollectionViewProps<M>\n    ) {\n\n        const fullPath = fullPathProp ?? collectionProp.path;\n        const dataSource = useDataSource(collectionProp);\n        const navigation = useNavigationController();\n        const sideEntityController = useSideEntityController();\n        const authController = useAuthController();\n        const userConfigPersistence = useUserConfigurationPersistence();\n        const analyticsController = useAnalyticsController();\n        const customizationController = useCustomizationController();\n\n        const containerRef = React.useRef<HTMLDivElement>(null);\n\n        const collection = useMemo(() => {\n            const userOverride = userConfigPersistence?.getCollectionConfig<M>(fullPath);\n            return (userOverride ? mergeDeep(collectionProp, userOverride) : collectionProp) as EntityCollection<M>;\n        }, [collectionProp, fullPath, userConfigPersistence?.getCollectionConfig]);\n\n        const collectionRef = React.useRef(collection);\n        useEffect(() => {\n            collectionRef.current = collection;\n        }, [collection]);\n\n        const canCreateEntities = canCreateEntity(collection, authController, fullPath, null);\n        const [selectedNavigationEntity, setSelectedNavigationEntity] = useState<Entity<M> | undefined>(undefined);\n        const [deleteEntityClicked, setDeleteEntityClicked] = React.useState<Entity<M> | Entity<M>[] | undefined>(undefined);\n\n        const [lastDeleteTimestamp, setLastDeleteTimestamp] = React.useState<number>(0);\n\n        // number of entities in the collection\n        const [docsCount, setDocsCount] = useState<number>(0);\n\n        const unselectNavigatedEntity = useCallback(() => {\n            const currentSelection = selectedNavigationEntity;\n            setTimeout(() => {\n                if (currentSelection === selectedNavigationEntity)\n                    setSelectedNavigationEntity(undefined);\n            }, 2400);\n        }, [selectedNavigationEntity]);\n\n        const checkInlineEditing = useCallback((entity?: Entity<any>): boolean => {\n            const collection = collectionRef.current;\n            if (!canEditEntity(collection, authController, fullPath, entity ?? null)) {\n                return false;\n            }\n            return collection.inlineEditing === undefined || collection.inlineEditing;\n        }, [authController, fullPath]);\n\n        const selectionEnabled = collection.selectionEnabled === undefined || collection.selectionEnabled;\n        const hoverRow = !checkInlineEditing();\n\n        const [popOverOpen, setPopOverOpen] = useState(false);\n\n        const selectionController = useSelectionController<M>();\n        const usedSelectionController = collection.selectionController ?? selectionController;\n        const {\n            selectedEntities,\n            isEntitySelected,\n            setSelectedEntities\n        } = usedSelectionController;\n\n        useEffect(() => {\n            setDeleteEntityClicked(undefined);\n        }, [selectedEntities]);\n\n        const tableController = useDataSourceEntityCollectionTableController<M>({\n            fullPath,\n            collection: collectionRef.current,\n            entitiesDisplayedFirst: [],\n            lastDeleteTimestamp\n        });\n\n        const tableKey = React.useRef<string>(Math.random().toString(36));\n        const popupCell = tableController.popupCell;\n\n        const onPopupClose = useCallback(() => {\n            tableController.setPopupCell?.(undefined);\n        }, [tableController.setPopupCell]);\n\n        const onEntityClick = useCallback((clickedEntity: Entity<M>) => {\n            console.log(\"Entity clicked\", clickedEntity)\n            const collection = collectionRef.current;\n            setSelectedNavigationEntity(clickedEntity);\n            analyticsController.onAnalyticsEvent?.(\"edit_entity_clicked\", {\n                path: clickedEntity.path,\n                entityId: clickedEntity.id\n            });\n            return sideEntityController.open({\n                entityId: clickedEntity.id,\n                path: clickedEntity.path,\n                collection,\n                updateUrl: true,\n                onClose: unselectNavigatedEntity,\n            });\n        }, [unselectNavigatedEntity, sideEntityController]);\n\n        const onNewClick = useCallback(() => {\n\n            const collection = collectionRef.current;\n            analyticsController.onAnalyticsEvent?.(\"new_entity_click\", {\n                path: fullPath\n            });\n            sideEntityController.open({\n                path: fullPath,\n                collection,\n                updateUrl: true,\n                onClose: unselectNavigatedEntity,\n            });\n        }, [fullPath, sideEntityController]);\n\n        const onMultipleDeleteClick = () => {\n            analyticsController.onAnalyticsEvent?.(\"multiple_delete_dialog_open\", {\n                path: fullPath\n            });\n            setDeleteEntityClicked(selectedEntities);\n        };\n\n        const internalOnEntityDelete = (_path: string, entity: Entity<M>) => {\n            analyticsController.onAnalyticsEvent?.(\"single_entity_deleted\", {\n                path: fullPath\n            });\n            setSelectedEntities((selectedEntities) => selectedEntities.filter((e) => e.id !== entity.id));\n            setLastDeleteTimestamp(Date.now());\n        };\n\n        const internalOnMultipleEntitiesDelete = (_path: string, entities: Entity<M>[]) => {\n            analyticsController.onAnalyticsEvent?.(\"multiple_entities_deleted\", {\n                path: fullPath\n            });\n            setSelectedEntities([]);\n            setDeleteEntityClicked(undefined);\n            setLastDeleteTimestamp(Date.now());\n        };\n\n        let AddColumnComponent: React.ComponentType<{\n            fullPath: string,\n            parentCollectionIds: string[],\n            collection: EntityCollection;\n        }> | undefined\n\n        // we are only using the first plugin that implements this\n        if (customizationController?.plugins) {\n            AddColumnComponent = customizationController.plugins.find(plugin => plugin.collectionView?.AddColumnComponent)?.collectionView?.AddColumnComponent;\n        }\n\n        const onCollectionModifiedForUser = useCallback((path: string, partialCollection: PartialEntityCollection<M>) => {\n            if (userConfigPersistence) {\n                const currentStoredConfig = userConfigPersistence.getCollectionConfig(path);\n                const updatedConfig = mergeDeep(currentStoredConfig, partialCollection);\n                userConfigPersistence.onCollectionModified(path, updatedConfig);\n            }\n        }, [userConfigPersistence]);\n\n        const onColumnResize = useCallback(({\n                                                width,\n                                                key\n                                            }: OnColumnResizeParams) => {\n\n            const collection = collectionRef.current;\n            // Only for property columns\n            if (!getPropertyInPath(collection.properties, key)) return;\n            const localCollection = buildPropertyWidthOverwrite(key, width);\n            onCollectionModifiedForUser(fullPath, localCollection);\n        }, [onCollectionModifiedForUser, fullPath]);\n\n        const onSizeChanged = useCallback((size: CollectionSize) => {\n            if (userConfigPersistence)\n                onCollectionModifiedForUser(fullPath, { defaultSize: size })\n        }, [onCollectionModifiedForUser, fullPath, userConfigPersistence]);\n\n        const createEnabled = canCreateEntity(collection, authController, fullPath, null);\n\n        const uniqueFieldValidator: UniqueFieldValidator = useCallback(\n            ({\n                 name,\n                 value,\n                 property,\n                 entityId\n             }) => dataSource.checkUniqueField(fullPath, name, value, entityId),\n            [fullPath]);\n\n        const onValueChange: OnCellValueChange<any, any> = ({\n                                                                fullPath,\n                                                                context,\n                                                                value,\n                                                                propertyKey,\n                                                                onValueUpdated,\n                                                                setError,\n                                                                entity,\n                                                            }) => {\n\n            const updatedValues = setIn({ ...entity.values }, propertyKey, value);\n\n            const saveProps: SaveEntityProps = {\n                path: fullPath,\n                entityId: entity.id,\n                values: updatedValues,\n                previousValues: entity.values,\n                collection,\n                status: \"existing\"\n            };\n\n            return saveEntityWithCallbacks({\n                ...saveProps,\n                collection,\n                callbacks: collection.callbacks,\n                dataSource,\n                context,\n                onSaveSuccess: () => {\n                    setError(undefined);\n                    onValueUpdated();\n                },\n                onSaveFailure: (e: Error) => {\n                    console.error(\"Save failure\");\n                    console.error(e);\n                    setError(e);\n                }\n            });\n\n        };\n\n        const resolvedFullPath = navigation.resolveAliasesFrom(fullPath);\n        const resolvedCollection = useMemo(() => resolveCollection<M>({\n            collection,\n            path: fullPath,\n            fields: customizationController.propertyConfigs\n        }), [collection, fullPath]);\n\n        const getPropertyFor = useCallback(({\n                                                propertyKey,\n                                                propertyValue,\n                                                entity\n                                            }: GetPropertyForProps<M>) => {\n            let propertyOrBuilder: PropertyOrBuilder<any, M> | undefined = getPropertyInPath<M>(collection.properties, propertyKey);\n\n            // we might not find the property in the collection if combining property builders and map spread\n            if (!propertyOrBuilder) {\n                // these 2 properties are coming from the resolved collection with default values\n                propertyOrBuilder = getPropertyInPath<M>(resolvedCollection.properties, propertyKey);\n            }\n\n            return resolveProperty({\n                propertyKey,\n                propertyOrBuilder,\n                path: fullPath,\n                propertyValue,\n                values: entity.values,\n                entityId: entity.id,\n                fields: customizationController.propertyConfigs\n            });\n        }, [collection.properties, customizationController.propertyConfigs, fullPath, resolvedCollection.properties]);\n\n        const displayedColumnIds = useColumnIds(resolvedCollection, true);\n\n        const additionalFields = useMemo(() => {\n            const subcollectionColumns: AdditionalFieldDelegate<M, any>[] = collection.subcollections?.map((subcollection) => {\n                return {\n                    key: getSubcollectionColumnId(subcollection),\n                    name: subcollection.name,\n                    width: 200,\n                    dependencies: [],\n                    Builder: ({ entity }) => (\n                        <Button color={\"primary\"}\n                                variant={\"outlined\"}\n                                startIcon={<KeyboardTabIcon size={\"small\"}/>}\n                                onClick={(event: any) => {\n                                    event.stopPropagation();\n                                    sideEntityController.open({\n                                        path: fullPath,\n                                        entityId: entity.id,\n                                        selectedSubPath: subcollection.id ?? subcollection.path,\n                                        collection,\n                                        updateUrl: true,\n                                    });\n                                }}>\n                            {subcollection.name}\n                        </Button>\n                    )\n                };\n            }) ?? [];\n\n            const collectionGroupParentCollections: AdditionalFieldDelegate<M, any>[] = collection.collectionGroup\n                ? [{\n                    key: COLLECTION_GROUP_PARENT_ID,\n                    name: \"Parent entities\",\n                    width: 260,\n                    dependencies: [],\n                    Builder: ({ entity }) => {\n                        const collectionsWithPath = navigation.getParentReferencesFromPath(entity.path);\n                        return (\n                            <>\n                                {collectionsWithPath.map((reference) => {\n                                    return (\n                                        <ReferencePreview\n                                            key={reference.path + \"/\" + reference.id}\n                                            reference={reference}\n                                            size={\"tiny\"}/>\n                                    );\n                                })}\n                            </>\n                        );\n                    }\n                }]\n                : [];\n\n            return [\n                ...(collection.additionalFields ?? []),\n                ...subcollectionColumns,\n                ...collectionGroupParentCollections\n            ];\n        }, [collection, fullPath, sideEntityController]);\n\n        const updateLastDeleteTimestamp = useCallback(() => {\n            setLastDeleteTimestamp(Date.now());\n        }, []);\n\n        const largeLayout = useLargeLayout();\n\n        const getActionsForEntity = ({\n                                         entity,\n                                         customEntityActions\n                                     }: {\n            entity?: Entity<M>,\n            customEntityActions?: EntityAction[]\n        }): EntityAction[] => {\n            const deleteEnabled = entity ? canDeleteEntity(collection, authController, fullPath, entity) : true;\n            const actions: EntityAction[] = [editEntityAction];\n            if (createEnabled)\n                actions.push(copyEntityAction);\n            if (deleteEnabled)\n                actions.push(deleteEntityAction);\n            if (customEntityActions)\n                actions.push(...customEntityActions);\n            return actions;\n        };\n\n        const getIdColumnWidth = () => {\n            const entityActions = getActionsForEntity({});\n            const collapsedActions = entityActions.filter(a => a.collapsed !== false);\n            const uncollapsedActions = entityActions.filter(a => a.collapsed === false);\n            const actionsWidth = uncollapsedActions.length * (largeLayout ? 40 : 30);\n            return (largeLayout ? (80 + actionsWidth) : (70 + actionsWidth)) + (collapsedActions.length > 0 ? (largeLayout ? 40 : 30) : 0);\n        };\n\n        const tableRowActionsBuilder = ({\n                                            entity,\n                                            size,\n                                            width,\n                                            frozen\n                                        }: {\n            entity: Entity<any>,\n            size: CollectionSize,\n            width: number,\n            frozen?: boolean\n        }) => {\n\n            const isSelected = isEntitySelected(entity);\n\n            const actions = getActionsForEntity({\n                entity,\n                customEntityActions: collection.entityActions\n            });\n\n            return (\n                <EntityCollectionRowActions\n                    entity={entity}\n                    width={width}\n                    frozen={frozen}\n                    isSelected={isSelected}\n                    selectionEnabled={selectionEnabled}\n                    size={size}\n                    highlightEntity={setSelectedNavigationEntity}\n                    unhighlightEntity={unselectNavigatedEntity}\n                    collection={collection}\n                    fullPath={fullPath}\n                    actions={actions}\n                    hideId={collection?.hideIdFromCollection}\n                    onCollectionChange={updateLastDeleteTimestamp}\n                    selectionController={usedSelectionController}\n                />\n            );\n\n        };\n\n        const title = <Popover\n            open={popOverOpen}\n            onOpenChange={setPopOverOpen}\n            enabled={Boolean(collection.description)}\n            trigger={<div className=\"flex flex-col items-start\">\n                <Typography\n                    variant={\"subtitle1\"}\n                    className={`leading-none truncate max-w-[160px] lg:max-w-[240px] ${collection.description ? \"cursor-pointer\" : \"cursor-auto\"}`}\n                    onClick={collection.description\n                        ? (e) => {\n                            setPopOverOpen(true);\n                            e.stopPropagation();\n                        }\n                        : undefined}>\n                    {`${collection.name}`}\n                </Typography>\n\n                <EntitiesCount\n                    fullPath={fullPath}\n                    collection={collection}\n                    filter={tableController.filterValues}\n                    sortBy={tableController.sortBy}\n                    onCountChange={setDocsCount}\n                />\n\n            </div>}\n        >\n\n            {collection.description && <div className=\"m-4 text-gray-900 dark:text-white\">\n                <Markdown source={collection.description}/>\n            </div>}\n\n        </Popover>;\n\n        const buildAdditionalHeaderWidget = useCallback(({\n                                                             property,\n                                                             propertyKey,\n                                                             onHover\n                                                         }: {\n            property: ResolvedProperty,\n            propertyKey: string,\n            onHover: boolean\n        }) => {\n            const collection = collectionRef.current;\n            if (!customizationController.plugins)\n                return null;\n            return <>\n                {customizationController.plugins.filter(plugin => plugin.collectionView?.HeaderAction)\n                    .map((plugin, i) => {\n                        const HeaderAction = plugin.collectionView!.HeaderAction!;\n                        return <HeaderAction\n                            onHover={onHover}\n                            key={`plugin_header_action_${i}`}\n                            propertyKey={propertyKey}\n                            property={property}\n                            fullPath={fullPath}\n                            collection={collection}\n                            parentCollectionIds={parentCollectionIds ?? []}/>;\n                    })}\n            </>;\n        }, [customizationController.plugins, fullPath, parentCollectionIds]);\n\n        const addColumnComponentInternal = AddColumnComponent\n            ? function () {\n                if (typeof AddColumnComponent === \"function\")\n                    return <AddColumnComponent fullPath={fullPath}\n                                               parentCollectionIds={parentCollectionIds ?? []}\n                                               collection={collection}/>;\n                return null;\n            }\n            : undefined;\n\n        const {\n            textSearchLoading,\n            textSearchInitialised,\n            onTextSearchClick,\n            textSearchEnabled\n        } = useTableSearchHelper({\n            collection,\n            fullPath: resolvedFullPath,\n            parentCollectionIds\n        });\n\n        return (\n            <div className={cn(\"overflow-hidden h-full w-full rounded-md\", className)}\n                 ref={containerRef}>\n                <EntityCollectionTable\n                    key={`collection_table_${fullPath}`}\n                    additionalFields={additionalFields}\n                    tableController={tableController}\n                    displayedColumnIds={displayedColumnIds}\n                    onSizeChanged={onSizeChanged}\n                    onEntityClick={onEntityClick}\n                    onColumnResize={onColumnResize}\n                    onValueChange={onValueChange}\n                    tableRowActionsBuilder={tableRowActionsBuilder}\n                    uniqueFieldValidator={uniqueFieldValidator}\n                    title={title}\n                    selectionController={usedSelectionController}\n                    highlightedEntities={selectedNavigationEntity ? [selectedNavigationEntity] : []}\n                    defaultSize={collection.defaultSize}\n                    properties={resolvedCollection.properties}\n                    getPropertyFor={getPropertyFor}\n                    onTextSearchClick={textSearchInitialised ? undefined : onTextSearchClick}\n                    textSearchLoading={textSearchLoading}\n                    textSearchEnabled={textSearchEnabled}\n                    actionsStart={<EntityCollectionViewStartActions\n                        parentCollectionIds={parentCollectionIds ?? []}\n                        collection={collection}\n                        tableController={tableController}\n                        path={fullPath}\n                        relativePath={collection.path}\n                        selectionController={usedSelectionController}\n                        collectionEntitiesCount={docsCount}/>}\n                    actions={<EntityCollectionViewActions\n                        parentCollectionIds={parentCollectionIds ?? []}\n                        collection={collection}\n                        tableController={tableController}\n                        onMultipleDeleteClick={onMultipleDeleteClick}\n                        onNewClick={onNewClick}\n                        path={fullPath}\n                        relativePath={collection.path}\n                        selectionController={usedSelectionController}\n                        selectionEnabled={selectionEnabled}\n                        collectionEntitiesCount={docsCount}\n                    />}\n                    emptyComponent={canCreateEntities && tableController.filterValues === undefined && tableController.sortBy === undefined\n                        ? <div className=\"flex flex-col items-center justify-center\">\n                            <Typography variant={\"subtitle2\"}>So empty...</Typography>\n                            <Button\n                                color={\"primary\"}\n                                variant={\"outlined\"}\n                                onClick={onNewClick}\n                                className=\"mt-4\"\n                            >\n                                <AddIcon/>\n                                Create your first entity\n                            </Button>\n                        </div>\n                        : <Typography variant={\"label\"}>No results with the applied filter/sort</Typography>\n                    }\n                    hoverRow={hoverRow}\n                    inlineEditing={checkInlineEditing()}\n                    AdditionalHeaderWidget={buildAdditionalHeaderWidget}\n                    AddColumnComponent={addColumnComponentInternal}\n                    getIdColumnWidth={getIdColumnWidth}\n                    additionalIDHeaderWidget={<EntityIdHeaderWidget\n                        path={fullPath}\n                        collection={collection}/>}\n                />\n\n                <PopupFormField\n                    key={`popup_form_${popupCell?.propertyKey}_${popupCell?.entity?.id}`}\n                    open={Boolean(popupCell)}\n                    onClose={onPopupClose}\n                    cellRect={popupCell?.cellRect}\n                    propertyKey={popupCell?.propertyKey}\n                    collection={collection}\n                    entity={popupCell?.entity}\n                    tableKey={tableKey.current}\n                    customFieldValidator={uniqueFieldValidator}\n                    path={resolvedFullPath}\n                    onCellValueChange={onValueChange}\n                    container={containerRef.current}/>\n\n                {deleteEntityClicked &&\n                    <DeleteEntityDialog\n                        entityOrEntitiesToDelete={deleteEntityClicked}\n                        path={fullPath}\n                        collection={collection}\n                        callbacks={collection.callbacks}\n                        open={Boolean(deleteEntityClicked)}\n                        onEntityDelete={internalOnEntityDelete}\n                        onMultipleEntitiesDelete={internalOnMultipleEntitiesDelete}\n                        onClose={() => setDeleteEntityClicked(undefined)}/>}\n\n            </div>\n        );\n    }, (a, b) => {\n        return equal(a.fullPath, b.fullPath) &&\n            equal(a.parentCollectionIds, b.parentCollectionIds) &&\n            equal(a.isSubCollection, b.isSubCollection) &&\n            equal(a.className, b.className) &&\n            equal(a.properties, b.properties) &&\n            equal(a.propertiesOrder, b.propertiesOrder) &&\n            equal(a.hideIdFromCollection, b.hideIdFromCollection) &&\n            equal(a.inlineEditing, b.inlineEditing) &&\n            equal(a.selectionEnabled, b.selectionEnabled) &&\n            equal(a.selectionController, b.selectionController) &&\n            equal(a.Actions, b.Actions) &&\n            equal(a.defaultSize, b.defaultSize) &&\n            equal(a.initialFilter, b.initialFilter) &&\n            equal(a.initialSort, b.initialSort) &&\n            equal(a.textSearchEnabled, b.textSearchEnabled) &&\n            equal(a.additionalFields, b.additionalFields) &&\n            equal(a.forceFilter, b.forceFilter);\n    }) as React.FunctionComponent<EntityCollectionViewProps<any>>\n\nfunction EntitiesCount({\n                           fullPath,\n                           collection,\n                           filter,\n                           sortBy,\n                           onCountChange\n                       }: {\n    fullPath: string,\n    collection: EntityCollection,\n    filter?: FilterValues<any>,\n    sortBy?: [string, \"asc\" | \"desc\"],\n    onCountChange?: (count: number) => void,\n}) {\n\n    const dataSource = useDataSource(collection);\n    const navigation = useNavigationController();\n    const [count, setCount] = useState<number | undefined>(undefined);\n    const [error, setError] = useState<Error | undefined>(undefined);\n\n    const sortByProperty = sortBy ? sortBy[0] : undefined;\n    const currentSort = sortBy ? sortBy[1] : undefined;\n    const resolvedPath = useMemo(() => navigation.resolveAliasesFrom(fullPath), [fullPath, navigation.resolveAliasesFrom]);\n\n    useEffect(() => {\n        if (dataSource.countEntities)\n            dataSource.countEntities({\n                path: resolvedPath,\n                collection,\n                filter,\n                orderBy: sortByProperty,\n                order: currentSort\n            }).then(setCount).catch(setError);\n    }, [fullPath, dataSource.countEntities, resolvedPath, collection, filter, sortByProperty, currentSort]);\n\n    useEffect(() => {\n        if (onCountChange) {\n            onCountChange(count ?? 0);\n        }\n    }, [onCountChange, count]);\n\n    if (error) {\n        return null;\n    }\n\n    return <Typography\n        className=\"w-full text-ellipsis block overflow-hidden whitespace-nowrap max-w-xs text-left w-fit-content\"\n        variant={\"caption\"}\n        color={\"secondary\"}>\n        {count !== undefined ? `${count} entities` : <Skeleton className={\"w-full max-w-[80px] mt-1\"}/>}\n    </Typography>;\n}\n\nfunction buildPropertyWidthOverwrite(key: string, width: number): PartialEntityCollection {\n    if (key.includes(\".\")) {\n        const [parentKey, ...childKey] = key.split(\".\");\n        return { properties: { [parentKey]: buildPropertyWidthOverwrite(childKey.join(\".\"), width) } } as PartialEntityCollection;\n    }\n    return { properties: { [key]: { columnWidth: width } } } as PartialEntityCollection;\n}\n\nfunction EntityIdHeaderWidget({\n                                  collection,\n                                  path\n                              }: {\n    collection: EntityCollection,\n    path: string\n}) {\n    const [openPopup, setOpenPopup] = React.useState(false);\n    const [searchString, setSearchString] = React.useState(\"\");\n    const sideEntityController = useSideEntityController();\n    return (\n        <Tooltip title={!openPopup ? \"Find by ID\" : undefined}>\n            <Popover\n                open={openPopup}\n                onOpenChange={setOpenPopup}\n                trigger={\n                    <IconButton size={\"small\"}>\n                        <SearchIcon size={\"small\"}/>\n                    </IconButton>\n                }\n            >\n                <form noValidate={true}\n                      onSubmit={(e) => {\n                          e.preventDefault();\n                          if (!searchString) return;\n                          setOpenPopup(false);\n                          return sideEntityController.open({\n                              entityId: searchString,\n                              path,\n                              collection,\n                              updateUrl: true,\n                          });\n                      }}\n                      className={\"text-gray-900 dark:text-white w-96 max-w-full\"}>\n\n                    <div className=\"flex p-2 w-full gap-4\">\n                        <input\n                            autoFocus={openPopup}\n                            placeholder={\"Find entity by ID\"}\n                            // size={\"small\"}\n                            onChange={(e) => setSearchString(e.target.value)}\n                            value={searchString}\n                            className={\"flex-grow bg-transparent outline-none p-1\"}/>\n                        <Button variant={\"outlined\"}\n                                disabled={!searchString}\n                                type={\"submit\"}\n                        >Go</Button>\n                    </div>\n                </form>\n            </Popover>\n\n        </Tooltip>\n    );\n}\n","import { getIconForWidget } from \"../util\";\nimport { PropertyConfig } from \"../types\";\nimport { getDefaultFieldConfig } from \"../core\";\n\nexport function PropertyConfigBadge({ propertyConfig }: { propertyConfig: PropertyConfig | undefined }): React.ReactNode {\n    const classes = \"h-8 w-8 p-1 rounded-full shadow text-white\";\n\n    const defaultPropertyConfig = typeof propertyConfig?.property === \"object\" ? getDefaultFieldConfig(propertyConfig.property) : undefined;\n\n    return <div\n        className={classes}\n        style={{\n            background: propertyConfig?.color ?? defaultPropertyConfig?.color ?? \"#888\"\n        }}>\n        {propertyConfig?.Icon ? getIconForWidget(propertyConfig, \"medium\") : getIconForWidget(defaultPropertyConfig, \"medium\")}\n    </div>\n}\n","import React from \"react\";\nimport { Link as ReactLink } from \"react-router-dom\";\nimport { Button, Typography } from \"@firecms/ui\";\n\nexport function NotFoundPage() {\n\n    return (\n        <div className=\"flex w-full h-full\">\n            <div className=\"m-auto flex items-center flex-col\"\n            >\n                <Typography variant={\"h4\"} align={\"center\"}\n                            gutterBottom={true}>\n                    Page not found\n                </Typography>\n                <Typography align={\"center\"} gutterBottom={true}>\n                    This page does not exist or you may not have access to it\n                </Typography>\n                <Button\n                    variant={\"text\"}\n                    component={ReactLink}\n                    to={\"/\"}>Back to home</Button>\n            </div>\n        </div>\n    );\n}\n","import React from \"react\";\n\nimport { Button, Dialog, DialogActions, DialogContent, LoadingButton, Typography } from \"@firecms/ui\";\n\nexport function DeleteConfirmationDialog({\n                                             open,\n                                             onAccept,\n                                             onCancel,\n                                             title,\n                                             loading,\n                                             body\n                                         }: {\n    open: boolean,\n    onAccept: () => void,\n    onCancel: () => void,\n    loading?: boolean,\n    title: React.ReactNode,\n    body?: React.ReactNode,\n}) {\n    return (\n        <Dialog\n            open={open}\n            onOpenChange={(open) => !open ? onCancel() : undefined}\n        >\n            <DialogContent>\n                <Typography variant={\"h6\"} className={\"mb-2\"}>{title}</Typography>\n                {body}\n            </DialogContent>\n\n            <DialogActions>\n                <Button\n                    variant={\"text\"}\n                    onClick={onCancel}\n                    autoFocus>Cancel</Button>\n\n                <LoadingButton\n                    color=\"primary\"\n                    type=\"submit\"\n                    loading={loading}\n                    onClick={onAccept}\n                >\n                    Ok\n                </LoadingButton>\n            </DialogActions>\n        </Dialog>\n    );\n}\n","import React from \"react\";\n\nexport function FireCMSLogo({\n                                width,\n                                height,\n                                className,\n                                style\n                            }: {\n    width?: string,\n    height?: string,\n    className?: string,\n    style?: React.CSSProperties\n}) {\n    return (\n        <svg\n            width={width ?? \"100%\"} height={height ?? \"100%\"}\n            viewBox=\"0 0 599 599\" version=\"1.1\"\n            style={style}\n            className={className}\n            xmlns=\"http://www.w3.org/2000/svg\">\n            <defs>\n                <radialGradient cx=\"28.6213569%\" cy=\"43.1133328%\"\n                                fx=\"28.6213569%\"\n                                fy=\"43.1133328%\" r=\"71.5003456%\"\n                                gradientTransform=\"translate(0.286214,0.431133),rotate(3.343450),scale(1.000000,0.996175),translate(-0.286214,-0.431133)\"\n                                id=\"radialGradient-1\">\n                    <stop stopColor=\"#FF5B79\" offset=\"0%\"/>\n                    <stop stopColor=\"#FA5574\" offset=\"28.0930803%\"/>\n                    <stop stopColor=\"#EC4C51\" offset=\"44.7242531%\"/>\n                    <stop stopColor=\"#9543C1\" offset=\"71.4578165%\"/>\n                    <stop stopColor=\"#3857B3\" offset=\"100%\"/>\n                </radialGradient>\n                <radialGradient cx=\"53.6205516%\" cy=\"47.2473036%\"\n                                fx=\"53.6205516%\"\n                                fy=\"47.2473036%\" r=\"50.8229649%\"\n                                gradientTransform=\"translate(0.536206,0.472473),rotate(90.000000),scale(1.000000,1.206631),translate(-0.536206,-0.472473)\"\n                                id=\"radialGradient-2\">\n                    <stop stopColor=\"#68294F\" stopOpacity=\"0\" offset=\"0%\"/>\n                    <stop stopColor=\"#5E2548\" stopOpacity=\"0.04641108\"\n                          offset=\"75.3503173%\"/>\n                    <stop stopColor=\"#0D060B\" stopOpacity=\"0.437431709\"\n                          offset=\"100%\"/>\n                </radialGradient>\n                <radialGradient cx=\"53.8605015%\" cy=\"48.1990423%\"\n                                fx=\"53.8605015%\"\n                                fy=\"48.1990423%\" r=\"59.9151549%\"\n                                gradientTransform=\"translate(0.538605,0.481990),rotate(180.000000),scale(1.000000,0.925027),translate(-0.538605,-0.481990)\"\n                                id=\"radialGradient-3\">\n                    <stop stopColor=\"#68294F\" stopOpacity=\"0\" offset=\"0%\"/>\n                    <stop stopColor=\"#5E2548\" stopOpacity=\"0.04641108\"\n                          offset=\"84.0867343%\"/>\n                    <stop stopColor=\"#FF0000\" stopOpacity=\"0.567324765\"\n                          offset=\"100%\"/>\n                </radialGradient>\n            </defs>\n            <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\"\n               fillRule=\"evenodd\">\n                <g id=\"firecms_logo\">\n                    <circle fill=\"url(#radialGradient-1)\" cx=\"299.5\"\n                            cy=\"299.5\"\n                            r=\"299.5\"/>\n                    <circle fill=\"url(#radialGradient-2)\" cx=\"299.5\"\n                            cy=\"299.5\"\n                            r=\"299.5\"/>\n                    <circle fill=\"url(#radialGradient-3)\" cx=\"299.5\"\n                            cy=\"299.5\"\n                            r=\"299.5\"/>\n                </g>\n            </g>\n        </svg>\n    );\n\n}\n","import React from \"react\";\n\nimport { Link as ReactLink } from \"react-router-dom\";\nimport { ErrorBoundary } from \"../components\";\nimport {\n    Avatar,\n    cn,\n    DarkModeIcon,\n    IconButton,\n    LightModeIcon,\n    LogoutIcon,\n    Menu,\n    MenuItem,\n    Skeleton,\n    Typography\n} from \"@firecms/ui\";\nimport { useAuthController, useLargeLayout, useModeController, useNavigationController } from \"../hooks\";\nimport { User } from \"../types\";\n\nexport type FireCMSAppBarProps<ADDITIONAL_PROPS = object> = {\n    title: string;\n    /**\n     * A component that gets rendered on the upper side of the main toolbar\n     */\n    endAdornment?: React.ReactNode;\n\n    startAdornment?: React.ReactNode;\n\n    dropDownActions?: React.ReactNode;\n\n    includeDrawer?: boolean;\n\n    drawerOpen: boolean;\n\n    className?: string;\n\n    style?: React.CSSProperties;\n\n    user?: User;\n} & ADDITIONAL_PROPS;\n\n/**\n * This component renders the main app bar of FireCMS.\n * You will likely not need to use this component directly.\n *\n * @param title\n * @param toolbarExtraWidget\n * @param drawerOpen\n * @constructor\n */\nexport const FireCMSAppBar = function FireCMSAppBar({\n                                                        title,\n                                                        endAdornment,\n                                                        startAdornment,\n                                                        drawerOpen,\n                                                        dropDownActions,\n                                                        includeDrawer,\n                                                        className,\n                                                        style,\n                                                        user: userProp\n                                                    }: FireCMSAppBarProps) {\n    const navigation = useNavigationController();\n\n    const authController = useAuthController();\n    const {\n        mode,\n        toggleMode\n    } = useModeController();\n\n    const largeLayout = useLargeLayout();\n\n    const user = userProp ?? authController.user;\n\n    let avatarComponent: JSX.Element;\n    if (user && user.photoURL) {\n        avatarComponent = <Avatar\n            src={user.photoURL}/>;\n    } else if (user === undefined || authController.initialLoading) {\n        avatarComponent = <div className={\"p-1 flex justify-center\"}>\n            <Skeleton className={\"w-10 h-10 rounded-full\"}/>\n        </div>;\n    } else {\n        const initial = user?.displayName\n            ? user.displayName[0].toUpperCase()\n            : (user?.email ? user.email[0].toUpperCase() : \"A\");\n        avatarComponent = <Avatar>{initial}</Avatar>;\n    }\n\n    return (\n        <div\n            style={style}\n            className={cn(\"pr-2\",\n                {\n                    \"ml-[17rem]\": drawerOpen && largeLayout,\n                    \"ml-16\": includeDrawer && !(drawerOpen && largeLayout) && !startAdornment,\n                    \"h-16\": true,\n                    \"z-10\": largeLayout,\n                    \"transition-all\": true,\n                    \"ease-in\": true,\n                    \"duration-75\": true,\n                    \"w-full\": !includeDrawer,\n                    \"w-[calc(100%-64px)]\": includeDrawer && !(drawerOpen && largeLayout),\n                    \"w-[calc(100%-17rem)]\": includeDrawer && (drawerOpen && largeLayout),\n                    \"duration-150\": drawerOpen && largeLayout,\n                    fixed: true,\n                },\n                className)}>\n\n            <div className=\"flex flex-row gap-2 px-4 h-full items-center\">\n\n                {startAdornment}\n\n                {navigation && <div className=\"mr-8 hidden lg:block\">\n                    <ReactLink\n                        className=\"visited:text-inherit visited:dark:text-inherit\"\n                        to={navigation?.basePath ?? \"/\"}\n                    >\n                        <Typography variant=\"subtitle1\"\n                                    noWrap\n                                    className={\"ml-2 !font-medium\"}>\n                            {title}\n                        </Typography>\n                    </ReactLink>\n                </div>}\n\n                <div className={\"flex-grow\"}/>\n\n                {endAdornment &&\n                    <ErrorBoundary>\n                        {endAdornment}\n                    </ErrorBoundary>}\n\n                <IconButton\n                    color=\"inherit\"\n                    aria-label=\"Open drawer\"\n                    onClick={toggleMode}\n                    size=\"large\">\n                    {mode === \"dark\"\n                        ? <DarkModeIcon/>\n                        : <LightModeIcon/>}\n                </IconButton>\n\n                <Menu trigger={avatarComponent}>\n                    {user && <div className={\"px-4 py-2 mb-2\"}>\n                        {user.displayName && <Typography variant={\"body1\"} color={\"secondary\"}>\n                            {user.displayName}\n                        </Typography>}\n                        {user.email && <Typography variant={\"body2\"} color={\"secondary\"}>\n                            {user.email}\n                        </Typography>}\n                    </div>}\n\n                    {dropDownActions}\n\n                    {!dropDownActions && <MenuItem onClick={authController.signOut}>\n                        <LogoutIcon/>\n                        Log Out\n                    </MenuItem>}\n\n                </Menu>\n\n            </div>\n        </div>\n    );\n}\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\n\nimport { DragDropContext, Draggable, DraggableProvided, Droppable } from \"@hello-pangea/dnd\";\n\nimport { getHashValue } from \"../util\";\nimport {\n    AddIcon,\n    Button,\n    ContentCopyIcon,\n    fieldBackgroundHoverMixin, HandleIcon,\n    IconButton,\n    Menu,\n    MenuItem,\n    RemoveIcon,\n    Tooltip,\n    useOutsideAlerter\n} from \"@firecms/ui\";\n\ninterface ArrayContainerProps<T> {\n    droppableId: string;\n    value: T[];\n    addLabel: string;\n    buildEntry: (index: number, internalId: number) => React.ReactNode;\n    disabled?: boolean;\n    size?: \"small\" | \"medium\";\n    onInternalIdAdded?: (id: number) => void;\n    includeAddButton?: boolean;\n    newDefaultEntry: T;\n    onValueChange: (value: T[]) => void\n}\n\nconst buildIdsMap = (value: any[]) =>\n    value && Array.isArray(value) && value.length > 0\n        ? value.map((v, index) => {\n            if (!v) return {};\n            return ({\n                [getHashValue(v) + index]: getRandomId()\n            });\n        }).reduce((a, b) => ({ ...a, ...b }), {})\n        : {}\n\n/**\n * @group Form custom fields\n */\nexport function ArrayContainer<T>({\n                                      droppableId,\n                                      addLabel,\n                                      value,\n                                      disabled = false,\n                                      buildEntry,\n                                      size = \"medium\",\n                                      onInternalIdAdded,\n                                      includeAddButton,\n                                      newDefaultEntry,\n                                      onValueChange\n                                  }: ArrayContainerProps<T>) {\n\n    const hasValue = value && Array.isArray(value) && value.length > 0;\n\n    // Used to track the ids that have displayed the initial show animation\n    const internalIdsRef = useRef<Record<string, number>>(buildIdsMap(value));\n\n    const [internalIds, setInternalIds] = useState<number[]>(\n        hasValue\n            ? Object.values(internalIdsRef.current)\n            : []);\n\n    useEffect(() => {\n        if (hasValue && value && value.length !== internalIds.length) {\n            const newInternalIds = value.map((v, index) => {\n                const hashValue = getHashValue(v) + index;\n                if (hashValue in internalIdsRef.current) {\n                    return internalIdsRef.current[hashValue];\n                } else {\n                    const newInternalId = getRandomId();\n                    internalIdsRef.current[hashValue] = newInternalId;\n                    return newInternalId;\n                }\n            });\n            setInternalIds(newInternalIds);\n        }\n    }, [hasValue, internalIds.length, value]);\n\n    const insertInEnd = (e: React.SyntheticEvent) => {\n        e.preventDefault();\n        if (disabled) return;\n        const id = getRandomId();\n        const newIds: number[] = [...internalIds, id];\n        if (onInternalIdAdded)\n            onInternalIdAdded(id);\n        setInternalIds(newIds);\n        onValueChange([...(value ?? []), newDefaultEntry]);\n    };\n\n    const remove = (index: number) => {\n        const newIds = [...internalIds];\n        newIds.splice(index, 1);\n        setInternalIds(newIds);\n        onValueChange(value.filter((_, i) => i !== index));\n    };\n\n    const copy = (index: number) => {\n        const id = getRandomId();\n        const copyingItem = value[index];\n        const newIds: number[] = [\n            ...internalIds.splice(0, index + 1),\n            id,\n            ...internalIds.splice(index + 1, internalIds.length - index - 1)];\n        if (onInternalIdAdded)\n            onInternalIdAdded(id);\n        setInternalIds(newIds);\n        // insert value in index + 1\n        onValueChange([...value.slice(0, index + 1), copyingItem, ...value.slice(index + 1)]);\n    };\n\n    const onDragEnd = (result: any) => {\n        // dropped outside the list\n        if (!result.destination) {\n            return;\n        }\n        const sourceIndex = result.source.index;\n        const destinationIndex = result.destination.index;\n\n        const newIds = [...internalIds];\n        const temp = newIds[sourceIndex];\n        newIds[sourceIndex] = newIds[destinationIndex];\n        newIds[destinationIndex] = temp;\n        setInternalIds(newIds);\n\n        onValueChange(arrayMove(value, sourceIndex, destinationIndex));\n    };\n\n    return (\n        <DragDropContext onDragEnd={onDragEnd}>\n            <Droppable droppableId={droppableId}\n                       renderClone={(provided, snapshot, rubric) => {\n                           const index = rubric.source.index;\n                           const internalId = internalIds[index];\n                           return (\n                               <ArrayContainerItem\n                                   provided={provided}\n                                   internalId={internalId}\n                                   index={index}\n                                   size={size}\n                                   disabled={disabled}\n                                   buildEntry={buildEntry}\n                                   remove={remove}\n                                   copy={copy}\n                                   isDragging={snapshot.isDragging}\n                               />\n                           );\n                       }}\n            >\n                {(droppableProvided, droppableSnapshot) => (\n                    <div\n                        {...droppableProvided.droppableProps}\n                        ref={droppableProvided.innerRef}>\n                        {hasValue && internalIds.map((internalId: number, index: number) => {\n                            return (\n                                <Draggable\n                                    key={`array_field_${internalId}`}\n                                    draggableId={`array_field_${internalId}`}\n                                    isDragDisabled={disabled}\n                                    index={index}>\n                                    {(provided, snapshot) => (\n                                        <ArrayContainerItem\n                                            provided={provided}\n                                            internalId={internalId}\n                                            index={index}\n                                            size={size}\n                                            disabled={disabled}\n                                            buildEntry={buildEntry}\n                                            remove={remove}\n                                            copy={copy}\n                                            isDragging={snapshot.isDragging}\n                                        />\n                                    )}\n                                </Draggable>\n                            );\n                        })}\n\n                        {droppableProvided.placeholder}\n\n                        {includeAddButton && <div className=\"py-4 justify-center text-left\">\n                            <Button\n                                variant={\"text\"}\n                                size={size === \"small\" ? \"small\" : \"medium\"}\n                                color=\"primary\"\n                                disabled={disabled}\n                                startIcon={<AddIcon/>}\n                                onClick={insertInEnd}>\n                                {addLabel ?? \"Add\"}\n                            </Button>\n                        </div>}\n                    </div>\n                )}\n            </Droppable>\n        </DragDropContext>\n    );\n}\n\ntype ArrayContainerItemProps = {\n    provided: DraggableProvided,\n    index: number,\n    internalId: number,\n    size?: \"small\" | \"medium\",\n    disabled: boolean,\n    buildEntry: (index: number, internalId: number) => React.ReactNode,\n    remove: (index: number) => void,\n    copy: (index: number) => void,\n    isDragging: boolean,\n};\n\nexport function ArrayContainerItem({\n                                       provided,\n                                       index,\n                                       internalId,\n                                       size,\n                                       disabled,\n                                       buildEntry,\n                                       remove,\n                                       copy,\n                                       isDragging\n                                   }: ArrayContainerItemProps) {\n\n    const [onHover, setOnHover] = React.useState(false);\n    const setOnHoverTrue = useCallback(() => setOnHover(true), []);\n    const setOnHoverFalse = useCallback(() => setOnHover(false), []);\n\n    return <div\n        onMouseEnter={setOnHoverTrue}\n        onMouseMove={setOnHoverTrue}\n        onMouseLeave={setOnHoverFalse}\n        ref={provided.innerRef}\n        {...provided.draggableProps}\n        style={provided.draggableProps.style}\n        className={`${\n            (isDragging || onHover) ? fieldBackgroundHoverMixin : \"\"\n        } mb-1 rounded-md opacity-100`}\n    >\n        <div\n            className=\"flex items-start\">\n            <div className=\"flex-grow w-[calc(100%-48px)] text-text-primary dark:text-text-primary-dark\">\n                {buildEntry(index, internalId)}\n            </div>\n            <ArrayItemOptions direction={size === \"small\" ? \"row\" : \"column\"}\n                              disabled={disabled}\n                              remove={remove}\n                              index={index}\n                              provided={provided}\n                              copy={copy}/>\n        </div>\n    </div>;\n}\n\n\nexport function ArrayItemOptions({\n                                     direction,\n                                     disabled,\n                                     remove,\n                                     index,\n                                     provided,\n                                     copy,\n                                 }: {\n    direction?: \"row\" | \"column\",\n    disabled: boolean,\n    remove: (index: number) => void,\n    index: number,\n    provided: any,\n    copy: (index: number) => void\n}) {\n\n    const [menuOpen, setMenuOpen] = useState(false);\n\n    const iconRef = React.useRef<HTMLDivElement>(null);\n    useOutsideAlerter(iconRef, () => setMenuOpen(false));\n\n    return <div className={`pl-2 pt-1 pb-4 flex ${direction === \"row\" ? \"flex-row-reverse\" : \"flex-col\"} items-center`}\n                ref={iconRef}\n                {...provided.dragHandleProps}>\n        <Tooltip\n            delayDuration={400}\n            open={menuOpen ? false : undefined}\n            side={direction === \"column\" ? \"left\" : undefined}\n            title=\"Drag to move. Click for more options\">\n\n            <IconButton\n                size=\"small\"\n                disabled={disabled}\n                onClick={() => setMenuOpen(true)}\n                onDragStart={(e: any) => {\n                    setMenuOpen(false);\n                }}\n                className={`cursor-${disabled ? \"inherit\" : \"grab\"}`}>\n                <HandleIcon/>\n            </IconButton>\n\n            <Menu\n                portalContainer={iconRef.current}\n                open={menuOpen}\n                trigger={<div/>}>\n\n                <MenuItem dense onClick={(e) => {\n                    setMenuOpen(false);\n                    remove(index);\n                }}>\n                    <RemoveIcon size={\"small\"}/>\n                    Remove\n                </MenuItem>\n                <MenuItem dense onClick={() => {\n                    setMenuOpen(false);\n                    copy(index);\n                }}>\n                    <ContentCopyIcon size={\"small\"}/>\n                    Copy\n                </MenuItem>\n\n            </Menu>\n\n        </Tooltip>\n\n    </div>;\n}\n\nfunction arrayMove(value: any[], sourceIndex: number, destinationIndex: number) {\n    const result = Array.from(value);\n    const [removed] = result.splice(sourceIndex, 1);\n    result.splice(destinationIndex, 0, removed);\n    return result;\n}\n\nexport function getRandomId() {\n    return Math.floor(Math.random() * Math.floor(Number.MAX_SAFE_INTEGER));\n}\n","import React, { useCallback, useMemo } from \"react\";\n\nimport { Entity, EntityCollection, EntityReference, FilterValues } from \"../types\";\nimport { getReferenceFrom } from \"../util\";\nimport { PreviewSize, ReferencePreview } from \"../preview\";\nimport { useNavigationController, useReferenceDialog } from \"../hooks\";\nimport { Button, cn } from \"@firecms/ui\";\n\nexport type ReferenceWidgetProps<M extends Record<string, any>> = {\n    name?: string,\n    multiselect?: boolean,\n    value: EntityReference | EntityReference[] | null,\n    onReferenceSelected?: (params: {\n        reference: EntityReference | null,\n        entity: Entity<M> | null\n    }) => void,\n    onMultipleReferenceSelected?: (params: {\n        references: EntityReference[] | null,\n        entities: Entity<M>[] | null\n    }) => void,\n    path: string,\n    disabled?: boolean,\n    previewProperties?: string[];\n    /**\n     * Allow selection of entities that pass the given filter only.\n     */\n    forceFilter?: FilterValues<string>;\n    size: PreviewSize;\n    className?: string;\n};\n\n/**\n * This field allows selecting reference/s.\n */\nexport function ReferenceWidget<M extends Record<string, any>>({\n                                                                   name,\n                                                                   multiselect = false,\n                                                                   path,\n                                                                   disabled,\n                                                                   value,\n                                                                   onReferenceSelected,\n                                                                   onMultipleReferenceSelected,\n                                                                   previewProperties,\n                                                                   forceFilter,\n                                                                   size,\n                                                                   className\n                                                               }: ReferenceWidgetProps<M>) {\n\n    const navigationController = useNavigationController();\n\n    const collection: EntityCollection | undefined = useMemo(() => {\n        return navigationController.getCollection(path);\n    }, [path, navigationController.getCollection]);\n\n    // if (!collection) {\n    //     throw Error(`Couldn't find the corresponding collection for the path: ${path}`);\n    // }\n\n    const onSingleEntitySelected = useCallback((entity: Entity<M> | null) => {\n        if (disabled)\n            return;\n        if (onReferenceSelected) {\n            const reference = entity ? getReferenceFrom(entity) : null;\n            onReferenceSelected?.({ reference, entity });\n        }\n    }, [disabled, onReferenceSelected]);\n\n    const onMultipleEntitiesSelected = useCallback((entities: Entity<M>[]) => {\n        if (disabled)\n            return;\n        if (onMultipleReferenceSelected) {\n            const references = entities ? entities.map(e => getReferenceFrom(e)) : null;\n            onMultipleReferenceSelected({ references, entities });\n        }\n    }, [disabled, onReferenceSelected]);\n\n    const referenceDialogController = useReferenceDialog({\n            multiselect,\n            path,\n            collection,\n            onSingleEntitySelected,\n            onMultipleEntitiesSelected,\n            forceFilter\n        }\n    );\n\n    const clearValue = useCallback((e: React.MouseEvent) => {\n        e.stopPropagation();\n        if (multiselect) {\n            onMultipleEntitiesSelected([]);\n        } else {\n            onSingleEntitySelected(null);\n        }\n    }, [onReferenceSelected]);\n\n    let child: React.ReactNode;\n\n    const onEntryClick = () => {\n        if (disabled)\n            return;\n        referenceDialogController.open();\n    };\n\n    if (Array.isArray(value)) {\n        child = <div className={\"flex flex-col gap-4\"}>\n            {value.map((ref, index) => {\n                return <ReferencePreview\n                    key={`reference_preview_${index}`}\n                    onClick={onEntryClick}\n                    reference={ref}\n                    disabled={disabled}\n                    previewProperties={previewProperties}\n                    size={size}/>\n            })}\n        </div>\n    } else if (value?.isEntityReference && value?.isEntityReference()) {\n        child = <ReferencePreview\n            reference={value}\n            onClick={onEntryClick}\n            disabled={disabled}\n            previewProperties={previewProperties}\n            size={size}/>\n\n    }\n    return <div className={cn(\"text-sm font-medium text-gray-500\",\n        \"min-w-80 flex flex-col gap-4\",\n        \"relative transition-colors duration-200 ease-in rounded font-medium\",\n        disabled ? \"bg-opacity-50\" : \"hover:bg-opacity-75\",\n        \"text-opacity-50 dark:text-white dark:text-opacity-50\",\n        className\n    )}\n    >\n\n        {child}\n        {!value && <div className=\"justify-center text-left\">\n            <Button variant=\"outlined\"\n                    color=\"primary\"\n                    disabled={disabled}\n                    onClick={onEntryClick}>\n                Edit {name}\n            </Button>\n        </div>}\n\n    </div>;\n}\n","import React from \"react\";\n\nimport { coolIconKeys, debounce, Icon, IconButton, iconKeys, SearchBar, Tooltip } from \"@firecms/ui\";\nimport { icon_synonyms, iconsSearch } from \"../util\";\n\nconst UPDATE_SEARCH_INDEX_WAIT_MS = 220;\n\nif (process.env.NODE_ENV !== \"production\") {\n    Object.keys(icon_synonyms).forEach((icon: string) => {\n        if (!iconKeys.includes(icon)) {\n            console.warn(`The icon ${icon} no longer exists. Remove it from \\`icon_synonyms\\``);\n        }\n    });\n}\n\nexport interface SearchIconsProps {\n    selectedIcon?: string;\n    onIconSelected?: (icon: string) => void;\n}\n\nexport function SearchIconsView({\n                                selectedIcon = \"\",\n                                onIconSelected\n                            }: SearchIconsProps) {\n    const [keys, setKeys] = React.useState<string[] | null>(null);\n    const [query, setQuery] = React.useState<string>(\"\");\n\n    const updateSearchResults = React.useMemo(() =>\n        debounce((value: string) => {\n            if (!value || value === \"\") {\n                setKeys(null);\n            } else {\n                const searchResult = iconsSearch.search(value);\n                setKeys(searchResult.map((e: any) => e.key));\n            }\n        }, UPDATE_SEARCH_INDEX_WAIT_MS), []\n    );\n\n    React.useEffect(() => {\n        updateSearchResults(query);\n        return () => {\n            updateSearchResults.clear();\n        };\n    }, [query, updateSearchResults]);\n\n    const icons = keys === null ? coolIconKeys : keys;\n\n    return (\n        <>\n            <SearchBar\n                autoFocus\n                innerClassName={\"w-full sticky top-0 z-10\"}\n                onTextSearch={(value?: string) => setQuery(value ?? \"\")}\n                placeholder=\"Search for more icons\"\n            />\n\n            <div className={\"flex max-w-full flex-wrap mt-4\"}>\n                {icons.map((icon: string) => {\n                    return (\n                        <Tooltip title={icon} key={icon}>\n                            <IconButton\n                                shape={\"square\"}\n                                toggled={selectedIcon === icon}\n                                onClick={onIconSelected ? () => onIconSelected(icon) : undefined}\n                                className=\"box-content m-1\"\n                            >\n                                <Icon iconKey={icon} size={24}/>\n                            </IconButton>\n                        </Tooltip>\n                    );\n                })}\n            </div>\n        </>\n    );\n}\n","import React from \"react\";\nimport { Typography } from \"@firecms/ui\";\n\nexport function FieldCaption({\n                                    error,\n                                    children\n                                }: { error?: boolean, children?: React.ReactNode }) {\n    if (!children) return null;\n    return (\n        <Typography variant={\"caption\"} color={error ? \"error\" : \"secondary\"} className={\"ml-3.5 mt-0.5\"}>\n            {children}\n        </Typography>\n    );\n}\n","import { useSideDialogsController } from \"./useSideDialogsController\";\nimport { ReferenceSelectionInnerProps, ReferenceSelectionTable } from \"../components\";\nimport { useCallback } from \"react\";\nimport { useNavigationController } from \"./useNavigationController\";\n\n/**\n * This hook is used to open a side dialog that allows the selection\n * of entities under a given path.\n * You can use it in custom views for selecting entities.\n * You need to specify the path of the target collection at least.\n * If your collection is not defined in your  top collection configuration\n * (in your `FireCMS` component), you need to specify explicitly.\n * This is the same hook used internally when a reference property is defined.\n * @group Hooks and utilities\n */\nexport function useReferenceDialog<M extends Record<string, any>>(referenceDialogProps: Omit<ReferenceSelectionInnerProps<M>, \"path\"> & {\n    path?: string | false;\n    onClose?: () => void;\n}): { open: () => void; close: () => void } {\n\n    const navigation = useNavigationController();\n    const sideDialogsController = useSideDialogsController();\n\n    const open = useCallback(() => {\n        if (referenceDialogProps.path) {\n            let usedCollection = referenceDialogProps.collection;\n            if (!usedCollection)\n                usedCollection = navigation.getCollection(referenceDialogProps.path);\n            if (!usedCollection)\n                throw Error(\"Not able to resolve the collection in useReferenceDialog. Make sure a collection is registered in path \" + referenceDialogProps.path);\n            sideDialogsController.open({\n                key: `reference_${referenceDialogProps.path}`,\n                component:\n                    <ReferenceSelectionTable\n                        collection={usedCollection}\n                        {...referenceDialogProps as ReferenceSelectionInnerProps<M>}/>,\n                width: \"90vw\",\n                onClose: () => {\n                    referenceDialogProps.onClose?.();\n                }\n            });\n        } else {\n            throw Error(\"useReferenceDialog: You are trying to open a reference dialog, but have not declared the `path`\")\n        }\n    }, [navigation, referenceDialogProps, sideDialogsController]);\n\n    const close = useCallback(() => {\n        sideDialogsController.close();\n    }, [sideDialogsController]);\n\n    return {\n        open,\n        close\n    }\n\n}\n","import { useEffect } from \"react\";\n\nconst fireCMSLogo = \"data:image/png;base64,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\\n\";\n\n/**\n * Internal hook to handle the browser title and icon\n * @param name\n * @param logo\n */\nexport function useBrowserTitleAndIcon(name: string, logo?: string) {\n    useEffect(() => {\n        if (document) {\n            document.title = `${name} - FireCMS`;\n            let link = document.querySelector(\"link[rel~='icon']\");\n            if (!link) {\n                link = document.createElement(\"link\");\n                // @ts-ignore\n                link.rel = \"icon\";\n                document.getElementsByTagName(\"head\")[0].appendChild(link);\n            }\n            // @ts-ignore\n            link.href = logo ?? fireCMSLogo;\n        }\n    }, [name, logo]);\n}\n","import { EntityCollection, EntityReference } from \"../types\";\nimport { getCollectionPathsCombinations, removeInitialAndTrailingSlashes } from \"./navigation_utils\";\n\nexport function getParentReferencesFromPath(props: {\n    path: string,\n    collections: EntityCollection[] | undefined,\n    currentFullPath?: string,\n}): EntityReference [] {\n\n    const {\n        path,\n        collections = [],\n        currentFullPath,\n    } = props;\n\n    const subpaths = removeInitialAndTrailingSlashes(path).split(\"/\");\n    const subpathCombinations = getCollectionPathsCombinations(subpaths);\n\n    const result: EntityReference[] = [];\n    for (let i = 0; i < subpathCombinations.length; i++) {\n        const subpathCombination = subpathCombinations[i];\n\n        const collection: EntityCollection<any> | undefined = collections && collections.find((entry) => entry.id === subpathCombination || entry.path === subpathCombination);\n\n        if (collection) {\n            const pathOrAlias = collection.id ?? collection.path;\n            const collectionPath = currentFullPath && currentFullPath.length > 0\n                ? (currentFullPath + \"/\" + pathOrAlias)\n                : pathOrAlias;\n\n            const restOfThePath = removeInitialAndTrailingSlashes(removeInitialAndTrailingSlashes(path).replace(subpathCombination, \"\"));\n            const nextSegments = restOfThePath.length > 0 ? restOfThePath.split(\"/\") : [];\n            if (nextSegments.length > 0) {\n                const entityId = nextSegments[0];\n                const fullPath = collectionPath + \"/\" + entityId;\n                result.push(new EntityReference(entityId, collectionPath));\n                if (nextSegments.length > 1) {\n                    const newPath = nextSegments.slice(1).join(\"/\");\n                    if (!collection) {\n                        throw Error(\"collection not found resolving path: \" + collection);\n                    }\n                    if (collection.subcollections) {\n                        result.push(...getParentReferencesFromPath({\n                            path: newPath,\n                            collections: collection.subcollections,\n                            currentFullPath: fullPath\n                        }));\n                    }\n                }\n            }\n            break;\n        }\n\n    }\n    return result;\n}\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport equal from \"react-fast-compare\"\n\nimport {\n    AuthController,\n    CMSView,\n    CMSViewsBuilder,\n    DataSourceDelegate,\n    EntityCollection,\n    EntityCollectionsBuilder,\n    EntityReference,\n    NavigationController,\n    PermissionsBuilder,\n    TopNavigationEntry,\n    TopNavigationResult,\n    User,\n    UserConfigurationPersistence\n} from \"../types\";\nimport {\n    applyPermissionsFunctionIfEmpty,\n    getCollectionByPathOrId,\n    mergeDeep,\n    removeInitialAndTrailingSlashes,\n    resolveCollectionPathIds,\n    resolvePermissions\n} from \"../util\";\nimport { getParentReferencesFromPath } from \"../util/parent_references_from_path\";\n\nconst DEFAULT_BASE_PATH = \"/\";\nconst DEFAULT_COLLECTION_PATH = \"/c\";\n\nexport type BuildNavigationContextProps<EC extends EntityCollection, UserType extends User> = {\n    basePath?: string,\n    baseCollectionPath?: string,\n    authController: AuthController<UserType>;\n    collections?: EC[] | EntityCollectionsBuilder<EC>;\n    collectionPermissions?: PermissionsBuilder;\n    views?: CMSView[] | CMSViewsBuilder;\n    adminViews?: CMSView[] | CMSViewsBuilder;\n    viewsOrder?: string[];\n    userConfigPersistence?: UserConfigurationPersistence;\n    dataSourceDelegate: DataSourceDelegate;\n    /**\n     * Use this method to inject collections to the CMS.\n     * You receive the current collections as a parameter, and you can return\n     * a new list of collections.\n     * @see {@link joinCollectionLists}\n     * @param collections\n     */\n    injectCollections?: (collections: EntityCollection[]) => EntityCollection[];\n};\n\nexport function useBuildNavigationController<EC extends EntityCollection, UserType extends User>(props: BuildNavigationContextProps<EC, UserType>): NavigationController {\n    const {\n        basePath = DEFAULT_BASE_PATH,\n        baseCollectionPath = DEFAULT_COLLECTION_PATH,\n        authController,\n        collections: collectionsProp,\n        collectionPermissions,\n        views: viewsProp,\n        adminViews: adminViewsProp,\n        viewsOrder,\n        userConfigPersistence,\n        dataSourceDelegate,\n        injectCollections\n    } = props;\n\n    const collectionsRef = useRef<EntityCollection[] | undefined>();\n    const viewsRef = useRef<CMSView[] | undefined>();\n    const adminViewsRef = useRef<CMSView[] | undefined>();\n\n    const [initialised, setInitialised] = useState<boolean>(false);\n\n    const [topLevelNavigation, setTopLevelNavigation] = useState<TopNavigationResult | undefined>(undefined);\n    const [navigationLoading, setNavigationLoading] = useState<boolean>(true);\n    const [navigationLoadingError, setNavigationLoadingError] = useState<Error | undefined>(undefined);\n\n    const cleanBasePath = removeInitialAndTrailingSlashes(basePath);\n    const cleanBaseCollectionPath = removeInitialAndTrailingSlashes(baseCollectionPath);\n\n    const homeUrl = cleanBasePath ? `/${cleanBasePath}` : \"/\";\n\n    const fullCollectionPath = cleanBasePath ? `/${cleanBasePath}/${cleanBaseCollectionPath}` : `/${cleanBaseCollectionPath}`;\n\n    const buildCMSUrlPath = useCallback((path: string): string => cleanBasePath ? `/${cleanBasePath}/${encodePath(path)}` : `/${encodePath(path)}`,\n        [cleanBasePath]);\n\n    const buildUrlCollectionPath = useCallback((path: string): string => `${removeInitialAndTrailingSlashes(baseCollectionPath)}/${encodePath(path)}`,\n        [baseCollectionPath]);\n\n    const computeTopNavigation = useCallback((collections: EntityCollection[], views: CMSView[], adminViews: CMSView[], viewsOrder?: string[]): TopNavigationResult => {\n        let navigationEntries: TopNavigationEntry[] = [\n            ...(collections ?? []).map(collection => (!collection.hideFromNavigation\n                ? ({\n                    url: buildUrlCollectionPath(collection.id ?? collection.path),\n                    type: \"collection\",\n                    name: collection.name.trim(),\n                    path: collection.id ?? collection.path,\n                    collection,\n                    description: collection.description?.trim(),\n                    group: getGroup(collection)\n                } satisfies TopNavigationEntry)\n                : undefined))\n                .filter(Boolean) as TopNavigationEntry[],\n            ...(views ?? []).map(view =>\n                !view.hideFromNavigation\n                    ? ({\n                        url: buildCMSUrlPath(Array.isArray(view.path) ? view.path[0] : view.path),\n                        name: view.name.trim(),\n                        type: \"view\",\n                        path: view.path,\n                        view,\n                        description: view.description?.trim(),\n                        group: getGroup(view)\n                    } satisfies TopNavigationEntry)\n                    : undefined)\n                .filter(Boolean) as TopNavigationEntry[],\n            ...(adminViews ?? []).map(view =>\n                !view.hideFromNavigation\n                    ? ({\n                        url: buildCMSUrlPath(Array.isArray(view.path) ? view.path[0] : view.path),\n                        name: view.name.trim(),\n                        type: \"admin\",\n                        path: view.path,\n                        view,\n                        description: view.description?.trim(),\n                        group: \"Admin\"\n                    } satisfies TopNavigationEntry)\n                    : undefined)\n                .filter(Boolean) as TopNavigationEntry[]\n        ];\n\n        // Sort by group, entries with group \"Admin\" will go last, and second to last will be the group \"Views\"\n        navigationEntries = navigationEntries.sort((a, b) => {\n            if (a.group !== \"Views\" && a.group !== \"Admin\" && (b.group === \"Views\" || b.group === \"Admin\")) {\n                return -1;\n            }\n            if (b.group !== \"Views\" && b.group !== \"Admin\" && (a.group === \"Views\" || a.group === \"Admin\")) {\n                return 1;\n            }\n            if (a.group === \"Admin\" && b.group !== \"Admin\") {\n                return 1;\n            }\n            if (a.group !== \"Admin\" && b.group === \"Admin\") {\n                return -1;\n            }\n            if (a.group === \"Views\" && b.group !== \"Views\") {\n                return -1;\n            }\n            if (a.group !== \"Views\" && b.group === \"Views\") {\n                return 1;\n            }\n            return 0;\n\n        });\n\n        if (viewsOrder) {\n            navigationEntries = navigationEntries.sort((a, b) => {\n                const aIndex = viewsOrder.indexOf(a.path);\n                const bIndex = viewsOrder.indexOf(b.path);\n                if (aIndex === -1 && bIndex === -1) {\n                    return 0;\n                }\n                if (aIndex === -1) {\n                    return 1;\n                }\n                if (bIndex === -1) {\n                    return -1;\n                }\n                return aIndex - bIndex;\n            });\n        }\n\n        const groups: string[] = Object.values(navigationEntries)\n            .map(e => e.group)\n            .filter(Boolean)\n            .filter((value, index, array) => array.indexOf(value) === index) as string[];\n\n        return {\n            navigationEntries,\n            groups\n        };\n    }, [buildCMSUrlPath, buildUrlCollectionPath]);\n\n    const refreshNavigation = useCallback(async () => {\n\n        if (authController.initialLoading)\n            return;\n\n        console.debug(\"Refreshing navigation\");\n\n        try {\n\n            const [resolvedCollections = [], resolvedViews, resolvedAdminViews = []] = await Promise.all([\n                    resolveCollections(collectionsProp, collectionPermissions, authController, dataSourceDelegate, injectCollections),\n                    resolveCMSViews(viewsProp, authController, dataSourceDelegate),\n                    resolveCMSViews(adminViewsProp, authController, dataSourceDelegate)\n                ]\n            );\n\n            let shouldUpdateTopLevelNav = false;\n            if (!areCollectionListsEqual(collectionsRef.current ?? [], resolvedCollections)) {\n                collectionsRef.current = resolvedCollections;\n                shouldUpdateTopLevelNav = true;\n            }\n            if (!equal(viewsRef.current, resolvedViews)) {\n                viewsRef.current = resolvedViews;\n                shouldUpdateTopLevelNav = true;\n            }\n            if (!equal(adminViewsRef.current, resolvedAdminViews)) {\n                adminViewsRef.current = resolvedAdminViews;\n                shouldUpdateTopLevelNav = true;\n            }\n\n            const computedTopLevelNav = computeTopNavigation(resolvedCollections, resolvedViews, resolvedAdminViews, viewsOrder);\n            if (shouldUpdateTopLevelNav && !equal(topLevelNavigation, computedTopLevelNav)) {\n                setTopLevelNavigation(computedTopLevelNav);\n            }\n        } catch (e) {\n            console.error(e);\n            setNavigationLoadingError(e as any);\n        }\n\n        setNavigationLoading(false);\n        setInitialised(true);\n\n    }, [\n        collectionsProp,\n        collectionPermissions,\n        authController.user,\n        authController.initialLoading,\n        viewsProp,\n        adminViewsProp,\n        computeTopNavigation,\n        injectCollections\n    ]);\n\n    useEffect(() => {\n        refreshNavigation();\n    }, [refreshNavigation]);\n\n    const getCollection = useCallback((\n        idOrPath: string,\n        entityId?: string,\n        includeUserOverride = false\n    ): EC | undefined => {\n        const collections = collectionsRef.current;\n        if (!collections)\n            return undefined;\n\n        const baseCollection = getCollectionByPathOrId(removeInitialAndTrailingSlashes(idOrPath), collections);\n\n        const userOverride = includeUserOverride ? userConfigPersistence?.getCollectionConfig(idOrPath) : undefined;\n        const overriddenCollection = baseCollection ? mergeDeep(baseCollection, userOverride) : undefined;\n\n        let result: Partial<EntityCollection> | undefined = overriddenCollection;\n\n        if (overriddenCollection) {\n            const subcollections = overriddenCollection.subcollections;\n            const callbacks = overriddenCollection.callbacks;\n            const permissions = overriddenCollection.permissions;\n            result = {\n                ...result,\n                subcollections: result?.subcollections ?? subcollections,\n                callbacks: result?.callbacks ?? callbacks,\n                permissions: result?.permissions ?? permissions\n            };\n        }\n\n        if (!result) return undefined;\n\n        return { ...overriddenCollection, ...result } as EC;\n\n    }, [userConfigPersistence]);\n\n    const getCollectionFromPaths = useCallback(<EC extends EntityCollection>(pathSegments: string[]): EC | undefined => {\n\n        const collections = collectionsRef.current;\n        if (collections === undefined)\n            throw Error(\"getCollectionFromPaths: Collections have not been initialised yet\");\n        let currentCollections: EntityCollection[] | undefined = [...(collections ?? [])];\n\n        for (let i = 0; i < pathSegments.length; i++) {\n            const pathSegment = pathSegments[i];\n            const collection: EntityCollection | undefined = currentCollections!.find(c => c.id === pathSegment || c.path === pathSegment);\n            if (!collection)\n                return undefined;\n            currentCollections = collection.subcollections;\n            if (i === pathSegments.length - 1)\n                return collection as EC;\n        }\n\n        return undefined;\n\n    }, []);\n\n    const getCollectionFromIds = useCallback(<EC extends EntityCollection>(ids: string[]): EC | undefined => {\n\n        const collections = collectionsRef.current;\n        if (collections === undefined)\n            throw Error(\"getCollectionFromIds: Collections have not been initialised yet\");\n        let currentCollections: EntityCollection[] | undefined = [...(collections ?? [])];\n\n        for (let i = 0; i < ids.length; i++) {\n            const id = ids[i];\n            const collection: EntityCollection | undefined = currentCollections!.find(c => c.id === id);\n            if (!collection)\n                return undefined;\n            currentCollections = collection.subcollections;\n            if (i === ids.length - 1)\n                return collection as EC;\n        }\n\n        return undefined;\n\n    }, []);\n\n    const isUrlCollectionPath = useCallback(\n        (path: string): boolean => removeInitialAndTrailingSlashes(path + \"/\").startsWith(removeInitialAndTrailingSlashes(fullCollectionPath) + \"/\"),\n        [fullCollectionPath]);\n\n    const urlPathToDataPath = useCallback((path: string): string => {\n        if (path.startsWith(fullCollectionPath))\n            return path.replace(fullCollectionPath, \"\");\n        throw Error(\"Expected path starting with \" + fullCollectionPath);\n    }, [fullCollectionPath]);\n\n    const buildUrlEditCollectionPath = useCallback(({\n                                                        path\n                                                    }: {\n            path: string\n        }): string => {\n            return `s/edit/${encodePath(path)}`;\n        },\n        []);\n\n    const resolveAliasesFrom = useCallback((path: string): string => {\n        const collections = collectionsRef.current ?? [];\n        return resolveCollectionPathIds(path, collections);\n    }, []);\n\n    const getAllParentReferencesForPath = useCallback((path: string): EntityReference[] => {\n        const collections = collectionsRef.current ?? [];\n        return getParentReferencesFromPath({\n            path,\n            collections\n        });\n    }, []);\n\n    const getParentCollectionIds = useCallback((path: string): string[] => {\n\n        const strings = path.split(\"/\");\n        const oddPathSegments = strings.filter((_, i) => i % 2 === 0);\n        oddPathSegments.pop();\n\n        const result: string[][] = [];\n\n        for (let i = 1; i <= oddPathSegments.length; i++) {\n            result.push(oddPathSegments.slice(0, i));\n        }\n\n        // for each odd path segment, get the collection\n        return result.map(r => getCollectionFromPaths(r)?.id).filter(Boolean) as string[];\n    }, [getAllParentReferencesForPath])\n\n    const convertIdsToPaths = useCallback((ids: string[]): string[] => {\n        const collections = collectionsRef.current;\n        let currentCollections = collections;\n        const paths: string[] = [];\n        for (let i = 0; i < ids.length; i++) {\n            const id = ids[i];\n            const collection: EntityCollection | undefined = currentCollections!.find(c => c.id === id);\n            if (!collection)\n                throw Error(`Collection with id ${id} not found`);\n            paths.push(collection.path);\n            currentCollections = collection.subcollections;\n        }\n        return paths;\n    }, [getCollectionFromIds]);\n\n    return {\n        collections: collectionsRef.current,\n        views: viewsRef.current,\n        adminViews: adminViewsRef.current,\n        loading: !initialised || navigationLoading,\n        navigationLoadingError,\n        homeUrl,\n        basePath,\n        baseCollectionPath,\n        initialised,\n        getCollection,\n        getCollectionFromPaths,\n        getCollectionFromIds,\n        isUrlCollectionPath,\n        urlPathToDataPath,\n        buildUrlCollectionPath,\n        buildUrlEditCollectionPath,\n        buildCMSUrlPath,\n        resolveAliasesFrom,\n        topLevelNavigation,\n        refreshNavigation,\n        getParentReferencesFromPath: getAllParentReferencesForPath,\n        getParentCollectionIds,\n        convertIdsToPaths\n    };\n}\n\nexport function getSidePanelKey(path: string, entityId?: string) {\n    if (entityId)\n        return `${removeInitialAndTrailingSlashes(path)}/${removeInitialAndTrailingSlashes(entityId)}`;\n    else\n        return removeInitialAndTrailingSlashes(path);\n}\n\nfunction encodePath(input: string) {\n    return encodeURIComponent(removeInitialAndTrailingSlashes(input))\n        .replaceAll(\"%2F\", \"/\")\n        .replaceAll(\"%23\", \"#\");\n}\n\nfunction filterOutNotAllowedCollections(resolvedCollections: EntityCollection[], authController: AuthController<User>): EntityCollection[] {\n    return resolvedCollections\n        .filter((c) => {\n            if (!c.permissions) return true;\n            const resolvedPermissions = resolvePermissions(c, authController, c.path, null)\n            return resolvedPermissions?.read !== false;\n        })\n        .map((c) => {\n            if (!c.subcollections) return c;\n            return {\n                ...c,\n                subcollections: filterOutNotAllowedCollections(c.subcollections, authController)\n            }\n        });\n}\n\nasync function resolveCollections(collections: undefined | EntityCollection[] | EntityCollectionsBuilder<any>,\n                                  collectionPermissions: PermissionsBuilder | undefined,\n                                  authController: AuthController,\n                                  dataSource: DataSourceDelegate,\n                                  injectCollections?: (collections: EntityCollection[]) => EntityCollection[]): Promise<EntityCollection[]> {\n    let resolvedCollections: EntityCollection[] = [];\n    if (typeof collections === \"function\") {\n        resolvedCollections = await collections({\n            user: authController.user,\n            authController,\n            dataSource\n        });\n    } else if (Array.isArray(collections)) {\n        resolvedCollections = collections;\n    }\n\n    if (injectCollections) {\n        resolvedCollections = injectCollections(resolvedCollections ?? []);\n    }\n\n    resolvedCollections = applyPermissionsFunctionIfEmpty(resolvedCollections, collectionPermissions);\n\n    resolvedCollections = filterOutNotAllowedCollections(resolvedCollections, authController);\n\n    return resolvedCollections;\n}\n\nasync function resolveCMSViews(baseViews: CMSView[] | CMSViewsBuilder | undefined, authController: AuthController, dataSource: DataSourceDelegate) {\n    let resolvedViews: CMSView[] = [];\n    if (typeof baseViews === \"function\") {\n        resolvedViews = await baseViews({\n            user: authController.user,\n            authController,\n            dataSource\n        });\n    } else if (Array.isArray(baseViews)) {\n        resolvedViews = baseViews;\n    }\n    return resolvedViews;\n}\n\nfunction getGroup(collectionOrView: EntityCollection<any, any> | CMSView) {\n    const trimmed = collectionOrView.group?.trim();\n    if (!trimmed || trimmed === \"\") {\n        return \"Views\";\n    }\n    return trimmed ?? \"Views\";\n}\n\nfunction areCollectionListsEqual(a: EntityCollection[], b: EntityCollection[]) {\n    if (a.length !== b.length) {\n        return false;\n    }\n    const aCopy = [...a];\n    const bCopy = [...b];\n    const aSorted = aCopy.sort((x, y) => x.id.localeCompare(y.id));\n    const bSorted = bCopy.sort((x, y) => x.id.localeCompare(y.id));\n    return aSorted.every((value, index) => areCollectionsEqual(value, bSorted[index]));\n}\n\nfunction areCollectionsEqual(a: EntityCollection, b: EntityCollection) {\n    const {\n        subcollections: subcollectionsA,\n        ...restA\n    } = a;\n    const {\n        subcollections: subcollectionsB,\n        ...restB\n    } = b;\n    if (!areCollectionListsEqual(subcollectionsA ?? [], subcollectionsB ?? [])) {\n        return false;\n    }\n    return equal(restA, restB);\n}\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport { PartialEntityCollection, UserConfigurationPersistence } from \"../types\";\nimport { mergeDeep, stripCollectionPath } from \"../util\";\n\nexport function useBuildLocalConfigurationPersistence(): UserConfigurationPersistence {\n\n    const configCache = useRef<Record<string, PartialEntityCollection>>({});\n\n    const getCollectionFromStorage = useCallback((storageKey: string) => {\n        const item = localStorage.getItem(storageKey);\n        return item ? JSON.parse(item) : {};\n    }, []);\n\n    const getCollectionConfig = useCallback(<M extends Record<string, any>>(path: string): PartialEntityCollection<M> => {\n        const storageKey = `collection_config::${stripCollectionPath(path)}`;\n        if (configCache.current[storageKey]) {\n            return configCache.current[storageKey] as PartialEntityCollection<M>;\n        }\n        return getCollectionFromStorage(storageKey);\n    }, [getCollectionFromStorage]);\n\n    const onCollectionModified = useCallback(<M extends Record<string, any>>(path: string, data: PartialEntityCollection<M>) => {\n        const storageKey = `collection_config::${stripCollectionPath(path)}`;\n        localStorage.setItem(storageKey, JSON.stringify(data));\n        const currentCache = configCache.current;\n        const cachedConfig = currentCache[storageKey];\n        const newConfig = mergeDeep(cachedConfig ?? getCollectionFromStorage(path), data);\n        configCache.current = mergeDeep(currentCache, newConfig);\n    }, [getCollectionFromStorage]);\n\n    const [recentlyVisitedPaths, _setRecentlyVisitedPaths] = useState<string[]>([]);\n    const [favouritePaths, _setFavouritePaths] = useState<string[]>([]);\n    const [collapsedGroups, _setCollapsedGroups] = useState<string[]>([]);\n\n    useEffect(() => {\n        _setRecentlyVisitedPaths(localStorage.getItem(\"recently_visited_paths\") ? JSON.parse(localStorage.getItem(\"recently_visited_paths\")!) : []);\n        _setFavouritePaths(localStorage.getItem(\"favourite_paths\") ? JSON.parse(localStorage.getItem(\"favourite_paths\")!) : []);\n        _setCollapsedGroups(localStorage.getItem(\"collapsed_groups\") ? JSON.parse(localStorage.getItem(\"collapsed_groups\")!) : []);\n    }, []);\n\n    const setRecentlyVisitedPaths = useCallback((paths: string[]) => {\n        localStorage.setItem(\"recently_visited_paths\", JSON.stringify(paths));\n        _setRecentlyVisitedPaths(paths);\n    }, []);\n\n    const setFavouritePaths = useCallback((paths: string[]) => {\n        localStorage.setItem(\"favourite_paths\", JSON.stringify(paths));\n        _setFavouritePaths(paths);\n    }, []);\n\n    const setCollapsedGroups = useCallback((paths: string[]) => {\n        localStorage.setItem(\"collapsed_groups\", JSON.stringify(paths));\n        _setCollapsedGroups(paths);\n    }, []);\n\n    return {\n        onCollectionModified,\n        getCollectionConfig,\n        recentlyVisitedPaths,\n        setRecentlyVisitedPaths,\n        favouritePaths,\n        setFavouritePaths,\n        collapsedGroups,\n        setCollapsedGroups\n    }\n}\n","import { useCallback, useEffect, useState } from \"react\";\n\nimport { ModeController } from \"./index\";\n\n/**\n * Use this hook to build a color mode controller that determines\n * the theme of the CMS\n */\nexport function useBuildModeController(): ModeController {\n\n    const prefersDarkModeQuery = useCallback((): boolean => {\n        if (typeof window === \"undefined\")\n            return false;\n        const mediaQueryList = window.matchMedia(\"(prefers-color-scheme: dark)\");\n        return mediaQueryList.matches;\n    }, []);\n\n    const prefersDarkModeStorage: boolean | null = localStorage.getItem(\"prefers-dark-mode\") != null ? localStorage.getItem(\"prefers-dark-mode\") === \"true\" : null;\n    const prefersDarkMode = prefersDarkModeStorage ?? prefersDarkModeQuery;\n    const [mode, setMode] = useState<\"light\" | \"dark\">(prefersDarkMode ? \"dark\" : \"light\");\n\n    useEffect(() => {\n        setMode(prefersDarkMode ? \"dark\" : \"light\");\n        setDocumentMode(prefersDarkMode ? \"dark\" : \"light\");\n    }, [prefersDarkMode]);\n\n    // color-scheme: dark;\n    const setDarkMode = useCallback(() => {\n        setMode(\"dark\");\n        setDocumentMode(\"dark\");\n    }, []);\n\n    const setLightMode = useCallback(() => {\n        setMode(\"light\");\n        setDocumentMode(\"light\");\n    }, []);\n\n    const setDocumentMode = (mode: \"light\" | \"dark\") => {\n        document.body.style.setProperty(\"color-scheme\", mode);\n        document.documentElement.dataset.theme = mode;\n    };\n\n    const toggleMode = useCallback(() => {\n\n        const prefersDarkModeQueryResult = prefersDarkModeQuery();\n        if (mode === \"light\") {\n            if (!prefersDarkModeQueryResult)\n                localStorage.setItem(\"prefers-dark-mode\", \"true\");\n            else\n                localStorage.removeItem(\"prefers-dark-mode\");\n            setDarkMode();\n        } else {\n            if (prefersDarkModeQueryResult)\n                localStorage.setItem(\"prefers-dark-mode\", \"false\");\n            else\n                localStorage.removeItem(\"prefers-dark-mode\");\n            setLightMode();\n        }\n    }, [mode, prefersDarkModeQuery]);\n\n    return {\n        mode,\n        setMode,\n        toggleMode\n    };\n}\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport equal from \"react-fast-compare\";\n\nimport { AuthController, Authenticator, DataSourceDelegate, StorageSource, User } from \"../index\";\n\n/**\n * This hook is used internally for validating an authenticator.\n *\n * @param authController\n * @param authentication\n * @param storageSource\n * @param dataSourceDelegate\n */\nexport function useValidateAuthenticator<UserType extends User = User, Controller extends AuthController<UserType> = AuthController<UserType>>({\n                                                                                                                                                   disabled,\n                                                                                                                                                   authController,\n                                                                                                                                                   authenticator,\n                                                                                                                                                   storageSource,\n                                                                                                                                                   dataSourceDelegate\n                                                                                                                                               }:\n                                                                                                                                                   {\n                                                                                                                                                       disabled?: boolean,\n                                                                                                                                                       authController: Controller,\n                                                                                                                                                       authenticator?: boolean | Authenticator<UserType, Controller>,\n                                                                                                                                                       dataSourceDelegate: DataSourceDelegate;\n                                                                                                                                                       storageSource: StorageSource;\n                                                                                                                                                   }): {\n    canAccessMainView: boolean,\n    authLoading: boolean,\n    notAllowedError: any,\n    authVerified: boolean,\n} {\n\n    const authenticationEnabled = Boolean(authenticator);\n\n    const [authLoading, setAuthLoading] = useState<boolean>(authenticationEnabled);\n    const [notAllowedError, setNotAllowedError] = useState<any>(false);\n    const [authVerified, setAuthVerified] = useState<boolean>(!authenticationEnabled || Boolean(authController.loginSkipped));\n\n    const canAccessMainView = (authVerified) &&\n        (!authenticationEnabled || Boolean(authController.user) || Boolean(authController.loginSkipped)) &&\n        !notAllowedError;\n\n    useEffect(() => {\n        if (authController.loginSkipped)\n            setAuthVerified(true);\n    }, [authController.loginSkipped]);\n\n    /**\n     * We use this ref to check the authentication only if the user has\n     * changed.\n     */\n    const checkedUserRef = useRef<User | undefined>();\n\n    const checkAuthentication = useCallback(async () => {\n\n        if (disabled) {\n            return;\n        }\n\n        if (authController.initialLoading) {\n            return;\n        }\n\n        if (!authController.user && !authController.loginSkipped) {\n            checkedUserRef.current = undefined;\n            setAuthLoading(false);\n            setAuthVerified(false);\n            return;\n        }\n\n        const delegateUser = authController.user;\n        console.debug(\"Checking authentication for user\", delegateUser);\n\n        if (authenticator instanceof Function && delegateUser && !equal(checkedUserRef.current?.uid, delegateUser.uid)) {\n            setAuthLoading(true);\n            try {\n                const allowed = await authenticator({\n                    user: delegateUser,\n                    authController,\n                    dataSourceDelegate,\n                    storageSource\n                });\n                if (!allowed) {\n                    authController.signOut();\n                    setNotAllowedError(true);\n                }\n            } catch (e) {\n                setNotAllowedError(e);\n                authController.signOut();\n            }\n            setAuthLoading(false);\n            setAuthVerified(true);\n            checkedUserRef.current = delegateUser;\n        } else {\n            setAuthLoading(false);\n        }\n\n        if (!authController.initialLoading && !delegateUser) {\n            setAuthVerified(true);\n        }\n\n    }, [disabled, authController, authenticator, dataSourceDelegate, storageSource]);\n\n    useEffect(() => {\n        checkAuthentication();\n    }, [checkAuthentication]);\n\n    return {\n        canAccessMainView,\n        authLoading: authenticationEnabled && authLoading,\n        notAllowedError,\n        authVerified\n    }\n}\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport {\n    Entity,\n    EntityCollection,\n    EntityCustomView,\n    EntityStatus,\n    EntityValues,\n    FireCMSPlugin,\n    FormContext,\n    User\n} from \"../types\";\nimport { CircularProgressCenter, EntityCollectionView, EntityView, ErrorBoundary, } from \"../components\";\nimport {\n    canEditEntity,\n    removeInitialAndTrailingSlashes,\n    resolveDefaultSelectedView,\n    resolveEntityView,\n    useDebouncedCallback\n} from \"../util\";\n\nimport {\n    saveEntityWithCallbacks,\n    useAuthController,\n    useCustomizationController,\n    useDataSource,\n    useEntityFetch,\n    useFireCMSContext,\n    useSideEntityController,\n    useSnackbarController\n} from \"../hooks\";\nimport { EntityForm } from \"../form\";\nimport { CircularProgress, CloseIcon, cn, defaultBorderMixin, IconButton, Tab, Tabs, Typography } from \"@firecms/ui\";\nimport { EntityFormSaveParams } from \"../form/EntityForm\";\nimport { FORM_CONTAINER_WIDTH } from \"../internal/common\";\nimport { useSideDialogContext } from \"./index\";\n\nconst MAIN_TAB_VALUE = \"main_##Q$SC^#S6\";\n\nexport interface EntityEditViewProps<M extends Record<string, any>> {\n    path: string;\n    collection: EntityCollection<M>;\n    entityId?: string;\n    copy?: boolean;\n    selectedSubPath?: string;\n    parentCollectionIds: string[];\n    formWidth?: number | string;\n    onValuesAreModified: (modified: boolean) => void;\n    onUpdate?: (params: { entity: Entity<any> }) => void;\n    onClose?: () => void;\n}\n\n/**\n * This is the default view that is used as the content of a side panel when\n * an entity is opened.\n * You probably don't want to use this view directly since it is bound to the\n * side panel. Instead, you might want to use {@link EntityForm} or {@link EntityCollectionView}\n */\nexport function EntityEditView<M extends Record<string, any>, UserType extends User>({\n                                                                                         path,\n                                                                                         entityId,\n                                                                                         selectedSubPath,\n                                                                                         copy,\n                                                                                         collection,\n                                                                                         parentCollectionIds,\n                                                                                         onValuesAreModified,\n                                                                                         formWidth,\n                                                                                         onUpdate,\n                                                                                         onClose,\n                                                                                     }: EntityEditViewProps<M>) {\n\n    if (collection.customId && collection.formAutoSave) {\n        console.warn(`The collection ${collection.path} has customId and formAutoSave enabled. This is not supported and formAutoSave will be ignored`);\n    }\n\n    const [saving, setSaving] = useState(false);\n    /**\n     * These are the values that are being saved. They are debounced.\n     * We use this only when autoSave is enabled.\n     */\n    const [valuesToBeSaved, setValuesToBeSaved] = useState<EntityValues<M> | undefined>(undefined);\n    useDebouncedCallback(valuesToBeSaved, () => {\n        if (valuesToBeSaved)\n            saveEntity({\n                entityId: usedEntity?.id,\n                collection,\n                path,\n                values: valuesToBeSaved,\n                closeAfterSave: false\n            });\n    }, false, 2000);\n\n    // const largeLayout = useLargeLayout();\n    // const largeLayoutTabSelected = useRef(!largeLayout);\n\n    const resolvedFormWidth: string = typeof formWidth === \"number\" ? `${formWidth}px` : formWidth ?? FORM_CONTAINER_WIDTH;\n\n    const dataSource = useDataSource(collection);\n    const sideDialogContext = useSideDialogContext();\n    const sideEntityController = useSideEntityController();\n    const snackbarController = useSnackbarController();\n    const customizationController = useCustomizationController();\n    const context = useFireCMSContext();\n    const authController = useAuthController<UserType>();\n\n    const [formContext, setFormContext] = useState<FormContext<M> | undefined>(undefined);\n\n    const [status, setStatus] = useState<EntityStatus>(copy ? \"copy\" : (entityId ? \"existing\" : \"new\"));\n\n    const modifiedValuesRef = useRef<EntityValues<M> | undefined>(undefined);\n    const modifiedValues = modifiedValuesRef.current;\n\n    const subcollections = (collection.subcollections ?? []).filter(c => !c.hideFromNavigation);\n    const subcollectionsCount = subcollections?.length ?? 0;\n    const customViews = collection.entityViews;\n    const customViewsCount = customViews?.length ?? 0;\n    const autoSave = collection.formAutoSave && !collection.customId;\n\n    const hasAdditionalViews = customViewsCount > 0 || subcollectionsCount > 0;\n\n    const defaultSelectedView = selectedSubPath ?? resolveDefaultSelectedView(\n        collection ? collection.defaultSelectedView : undefined,\n        {\n            status,\n            entityId\n        }\n    );\n\n    const selectedTabRef = useRef<string>(defaultSelectedView ?? MAIN_TAB_VALUE);\n\n    const mainViewVisible = selectedTabRef.current === MAIN_TAB_VALUE;\n\n    const {\n        entity,\n        dataLoading,\n        // eslint-disable-next-line no-unused-vars\n        dataLoadingError\n    } = useEntityFetch<M, UserType>({\n        path,\n        entityId,\n        collection,\n        useCache: false\n    });\n\n    const [usedEntity, setUsedEntity] = useState<Entity<M> | undefined>(entity);\n    const [readOnly, setReadOnly] = useState<boolean | undefined>(undefined);\n\n    useEffect(() => {\n        if (entity)\n            setUsedEntity(entity);\n    }, [entity]);\n\n    useEffect(() => {\n        if (status === \"new\") {\n            setReadOnly(false);\n        } else {\n            const editEnabled = usedEntity ? canEditEntity(collection, authController, path, usedEntity ?? null) : false;\n            if (usedEntity)\n                setReadOnly(!editEnabled);\n        }\n    }, [authController, usedEntity, status]);\n\n    const onPreSaveHookError = useCallback((e: Error) => {\n        setSaving(false);\n        snackbarController.open({\n            type: \"error\",\n            message: \"Error before saving: \" + e?.message\n        });\n        console.error(e);\n    }, [snackbarController]);\n\n    const onSaveSuccessHookError = useCallback((e: Error) => {\n        setSaving(false);\n        snackbarController.open({\n            type: \"error\",\n            message: \"Error after saving (entity is saved): \" + e?.message\n        });\n        console.error(e);\n    }, [snackbarController]);\n\n    const onSaveSuccess = (updatedEntity: Entity<M>, closeAfterSave: boolean) => {\n\n        setSaving(false);\n        if (!autoSave)\n            snackbarController.open({\n                type: \"success\",\n                message: `${collection.singularName ?? collection.name}: Saved correctly`\n            });\n\n        setUsedEntity(updatedEntity);\n        setStatus(\"existing\");\n\n        onValuesAreModified(false);\n\n        if (onUpdate)\n            onUpdate({ entity: updatedEntity });\n\n        if (closeAfterSave) {\n            sideDialogContext.setBlocked(false);\n            sideDialogContext.close(true);\n            onClose?.();\n        } else if (status !== \"existing\") {\n            sideEntityController.replace({\n                path,\n                entityId: updatedEntity.id,\n                selectedSubPath: selectedTabRef.current,\n                updateUrl: true,\n                collection,\n            });\n        }\n\n    };\n\n    const onSaveFailure = useCallback((e: Error) => {\n\n        setSaving(false);\n        snackbarController.open({\n            type: \"error\",\n            message: \"Error saving: \" + e?.message\n        });\n\n        console.error(\"Error saving entity\", path, entityId);\n        console.error(e);\n    }, [entityId, path, snackbarController]);\n\n    const saveEntity = ({\n                            values,\n                            previousValues,\n                            closeAfterSave,\n                            entityId,\n                            collection,\n                            path\n                        }: {\n        collection: EntityCollection<M>,\n        path: string,\n        entityId: string | undefined,\n        values: M,\n        previousValues?: M,\n        closeAfterSave: boolean,\n    }) => {\n        setSaving(true);\n        saveEntityWithCallbacks({\n            path,\n            entityId,\n            values,\n            previousValues,\n            collection,\n            status,\n            dataSource,\n            context,\n            onSaveSuccess: (updatedEntity: Entity<M>) => onSaveSuccess(updatedEntity, closeAfterSave),\n            onSaveFailure,\n            onPreSaveHookError,\n            onSaveSuccessHookError\n        }).then();\n    };\n\n    const onSaveEntityRequest = async ({\n                                           collection,\n                                           path,\n                                           entityId,\n                                           values,\n                                           previousValues,\n                                           closeAfterSave,\n                                           autoSave\n                                       }: EntityFormSaveParams<M>): Promise<void> => {\n        if (!status)\n            return;\n\n        if (autoSave) {\n            setValuesToBeSaved(values);\n        } else {\n            saveEntity({\n                collection,\n                path,\n                entityId,\n                values,\n                previousValues,\n                closeAfterSave\n            });\n        }\n    };\n\n    const resolvedEntityViews = customViews ? customViews\n            .map(e => resolveEntityView(e, customizationController.entityViews))\n            .filter(Boolean) as EntityCustomView[]\n        : [];\n\n    const customViewsView: React.ReactNode[] | undefined = customViews && resolvedEntityViews\n        .map(\n            (customView, colIndex) => {\n                if (!customView)\n                    return null;\n                if (selectedTabRef.current !== customView.key)\n                    return null;\n                const Builder = customView.Builder;\n                if (!Builder) {\n                    console.error(\"customView.Builder is not defined\");\n                    return null;\n                }\n                return <div\n                    className={cn(defaultBorderMixin,\n                        \"relative flex-grow w-full h-full overflow-auto \")}\n                    key={`custom_view_${customView.key}`}\n                    role=\"tabpanel\">\n                    <ErrorBoundary>\n                        {formContext && <Builder\n                            collection={collection}\n                            entity={usedEntity}\n                            modifiedValues={modifiedValues ?? usedEntity?.values}\n                            formContext={formContext}\n                        />}\n                    </ErrorBoundary>\n                </div>;\n            }\n        ).filter(Boolean);\n\n    const globalLoading = (dataLoading && !usedEntity) ||\n        ((!usedEntity || readOnly === undefined) && (status === \"existing\" || status === \"copy\"));\n\n    const loading = globalLoading || saving;\n\n    const subCollectionsViews = subcollections && subcollections.map(\n        (subcollection, colIndex) => {\n            const subcollectionId = subcollection.id ?? subcollection.path;\n            const fullPath = usedEntity ? `${path}/${usedEntity?.id}/${removeInitialAndTrailingSlashes(subcollectionId)}` : undefined;\n            if (selectedTabRef.current !== subcollectionId)\n                return null;\n            return (\n                <div\n                    className={\"relative flex-grow h-full overflow-auto w-full\"}\n                    key={`subcol_${subcollectionId}`}\n                    role=\"tabpanel\">\n\n                    {loading && <CircularProgressCenter/>}\n\n                    {!globalLoading &&\n                        (usedEntity && fullPath\n                            ? <EntityCollectionView\n                                fullPath={fullPath}\n                                parentCollectionIds={[...parentCollectionIds, collection.id]}\n                                isSubCollection={true}\n                                {...subcollection}/>\n                            : <div\n                                className=\"flex items-center justify-center w-full h-full p-3\">\n                                <Typography variant={\"label\"}>\n                                    You need to save your entity before\n                                    adding additional collections\n                                </Typography>\n                            </div>)\n                    }\n\n                </div>\n            );\n        }\n    ).filter(Boolean);\n\n    const onDiscard = useCallback(() => {\n        onValuesAreModified(false);\n    }, []);\n\n    const onSideTabClick = (value: string) => {\n        selectedTabRef.current = value;\n        sideEntityController.replace({\n            path,\n            entityId,\n            selectedSubPath: value === MAIN_TAB_VALUE ? undefined : value,\n            updateUrl: true,\n            collection,\n        });\n    };\n\n    const onValuesChanged = useCallback((values?: EntityValues<M>) => {\n        modifiedValuesRef.current = values;\n    }, []);\n\n    // eslint-disable-next-line n/handle-callback-err\n    const onIdUpdateError = useCallback((error: any) => {\n        snackbarController.open({\n            type: \"error\",\n            message: \"Error updating id, check the console\"\n        });\n    }, []);\n\n    const onIdChange = useCallback((id: string) => {\n        setUsedEntity((prevEntity) => prevEntity\n            ? {\n                ...prevEntity,\n                id\n            }\n            : undefined);\n    }, []);\n\n    const onModified = (dirty: boolean) => {\n        if (!autoSave)\n            onValuesAreModified(dirty);\n    }\n\n    function buildForm() {\n        const plugins = customizationController.plugins;\n        let form = <EntityForm\n            status={status}\n            path={path}\n            collection={collection}\n            onEntitySaveRequested={onSaveEntityRequest}\n            onDiscard={onDiscard}\n            onValuesChanged={onValuesChanged}\n            onModified={onModified}\n            entity={usedEntity}\n            onIdChange={onIdChange}\n            onFormContextChange={setFormContext}\n            hideId={collection.hideIdFromForm}\n            autoSave={autoSave}\n            onIdUpdateError={onIdUpdateError}\n        />;\n        if (plugins) {\n            plugins.forEach((plugin: FireCMSPlugin) => {\n                if (plugin.form?.provider) {\n                    form = (\n                        <plugin.form.provider.Component\n                            status={status}\n                            path={path}\n                            collection={collection}\n                            onDiscard={onDiscard}\n                            onValuesChanged={onValuesChanged}\n                            onModified={onModified}\n                            entity={usedEntity}\n                            context={context}\n                            formContext={formContext}\n                            {...plugin.form.provider.props}>\n                            {form}\n                        </plugin.form.provider.Component>\n                    );\n                }\n            });\n        }\n        return <ErrorBoundary>{form}</ErrorBoundary>;\n    }\n\n    const form = (readOnly === undefined)\n        ? <></>\n        : (!readOnly\n            ? buildForm()\n            : (\n                <>\n                    <Typography\n                        className={\"mt-16 mb-8 mx-8\"}\n                        variant={\"h4\"}>{collection.singularName ?? collection.name}\n                    </Typography>\n                    <EntityView\n                        className={\"px-12\"}\n                        entity={usedEntity as Entity<M>}\n                        path={path}\n                        collection={collection}/>\n                </>\n            ));\n\n    const subcollectionTabs = subcollections && subcollections.map(\n        (subcollection) =>\n            <Tab\n                className=\"text-sm min-w-[140px]\"\n                value={subcollection.id}\n                key={`entity_detail_collection_tab_${subcollection.name}`}>\n                {subcollection.name}\n            </Tab>\n    );\n\n    const customViewTabs = resolvedEntityViews.map(\n        (view) =>\n\n            <Tab\n                className=\"text-sm min-w-[140px]\"\n                value={view.key}\n                key={`entity_detail_collection_tab_${view.name}`}>\n                {view.name}\n            </Tab>\n    );\n\n    return (\n        <div\n            className=\"flex flex-col h-full w-full transition-width duration-250 ease-in-out\">\n            {\n                <>\n\n                    <div\n                        className={cn(defaultBorderMixin, \"no-scrollbar border-b pl-2 pr-2 pt-1 flex items-end overflow-scroll bg-gray-50 dark:bg-gray-950\")}>\n\n                        <div\n                            className=\"pb-1 self-center\">\n                            <IconButton\n                                onClick={() => {\n                                    onClose?.();\n                                    return sideDialogContext.close(false);\n                                }}\n                                size=\"large\">\n                                <CloseIcon/>\n                            </IconButton>\n                        </div>\n\n                        <div className={\"flex-grow\"}/>\n\n                        {globalLoading && <div\n                            className=\"self-center\">\n                            <CircularProgress size={\"small\"}/>\n                        </div>}\n\n                        <Tabs\n                            value={selectedTabRef.current}\n                            onValueChange={(value) => {\n                                onSideTabClick(value);\n                            }}\n                            className=\"pl-4 pr-4 pt-0\">\n\n                            <Tab\n                                disabled={!hasAdditionalViews}\n                                value={MAIN_TAB_VALUE}\n                                className={`${\n                                    !hasAdditionalViews ? \"hidden\" : \"\"\n                                } text-sm min-w-[140px]`}\n                            >{collection.singularName ?? collection.name}</Tab>\n\n                            {customViewTabs}\n\n                            {subcollectionTabs}\n                        </Tabs>\n\n                    </div>\n\n                    <div\n                        className={\"flex-grow h-full flex overflow-auto flex-row w-full \"}\n                        style={{\n                            // width: `calc(${ADDITIONAL_TAB_WIDTH} + ${resolvedFormWidth})`,\n                            // maxWidth: \"100%\",\n                            // [`@media (max-width: ${resolvedFormWidth})`]: {\n                            //     width: resolvedFormWidth\n                            // }\n                        }}>\n\n                        <div\n                            role=\"tabpanel\"\n                            hidden={!mainViewVisible}\n                            id={`form_${path}`}\n                            className={\" w-full\"}>\n\n                            {globalLoading\n                                ? <CircularProgressCenter/>\n                                : form}\n\n                        </div>\n\n                        {customViewsView}\n\n                        {subCollectionsViews}\n\n                    </div>\n\n                </>\n            }\n\n        </div>\n    );\n}\n","import React, { useCallback } from \"react\";\nimport { Blocker, Transition } from \"history\";\nimport { UNSAFE_NavigationContext, useNavigate } from \"react-router-dom\";\nimport { Button, Dialog, DialogActions, DialogContent, Typography } from \"@firecms/ui\";\n\nexport function useNavigationUnsavedChangesDialog(when: boolean, onSuccess: () => void):\n    {\n        navigationWasBlocked: boolean,\n        handleCancel: () => void,\n        handleOk: () => void\n    } {\n\n    const [nextLocation, setNextLocation] = React.useState<any | undefined>();\n    const { navigator } = React.useContext(UNSAFE_NavigationContext);\n\n    const navigate = useNavigate();\n\n    const handleCancel = () => {\n        setNextLocation(undefined);\n    };\n\n    const handleOk = () => {\n        onSuccess();\n        setNextLocation(undefined);\n        navigate(-1);\n    };\n\n    const blocker: Blocker = useCallback(({\n                                              action,\n                                              location: nextLocation,\n                                              retry\n                                          }) => {\n        switch (action) {\n            case \"REPLACE\": {\n                retry();\n                return;\n            }\n            case \"POP\": {\n                setNextLocation(nextLocation);\n            }\n        }\n    }, []);\n\n    React.useEffect(() => {\n        if (!when) return;\n        if (nextLocation) return;\n        if (!(\"block\" in navigator)) return;\n        const unblock = (navigator as any).block((tx: Transition) => {\n            const autoUnblockingTx = {\n                ...tx,\n                retry() {\n                    unblock();\n                    tx.retry();\n                }\n            };\n            blocker(autoUnblockingTx);\n        });\n\n        return unblock;\n    }, [navigator, blocker, when, nextLocation]);\n\n    return {\n        navigationWasBlocked: Boolean(nextLocation),\n        handleCancel,\n        handleOk\n    };\n}\n\nexport interface UnsavedChangesDialogProps {\n    open: boolean;\n    body?: React.ReactNode;\n    title?: string;\n    handleOk: () => void;\n    handleCancel: () => void;\n}\n\nexport function UnsavedChangesDialog({\n                                         open,\n                                         handleOk,\n                                         handleCancel,\n                                         body,\n                                         title\n                                     }: UnsavedChangesDialogProps) {\n\n    return (\n        <Dialog\n            open={open}\n            onOpenChange={(open) => open ? handleCancel() : handleOk()}\n        >\n            <DialogContent>\n                <Typography variant={\"h6\"}>{title}</Typography>\n\n                {body}\n\n                <Typography>\n                    Are you sure you want to leave this page?\n                </Typography>\n\n            </DialogContent>\n            <DialogActions>\n                <Button variant=\"text\" onClick={handleCancel} autoFocus> Cancel </Button>\n                <Button onClick={handleOk}> Ok </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { useSideDialogsController } from \"../hooks\";\nimport { SideDialogPanelProps } from \"../types\";\nimport { Sheet } from \"@firecms/ui\";\nimport { UnsavedChangesDialog, useNavigationUnsavedChangesDialog } from \"../internal/useUnsavedChangesDialog\";\nimport { ErrorBoundary } from \"../components\";\n\nexport type SideDialogContextProps = {\n    blocked: boolean,\n    setBlocked: (blocked: boolean) => void,\n    setBlockedNavigationMessage: (message?: React.ReactNode) => void,\n    width?: string,\n    close: (force?: boolean) => void\n}\n\nconst SideDialogContext = React.createContext<SideDialogContextProps>({\n    width: \"\",\n    blocked: false,\n    setBlocked: (blocked: boolean) => {\n    },\n    setBlockedNavigationMessage: (message?: React.ReactNode) => {\n    },\n    close: () => {\n    }\n});\n\n/**\n * This hook is used to access the properties of a particular side dialog,\n * in contrast with {@link useSideDialogsController} which handles the\n * state of all the dialogs.\n */\nexport const useSideDialogContext = () => useContext<SideDialogContextProps>(SideDialogContext);\n\n/**\n * This is the component in charge of rendering the side dialogs used\n * for editing entities. Use the {@link useSideEntityController} to open\n * and control the dialogs.\n * This component needs a parent {@link FireCMS}\n * {@link useSideDialogsController}\n * @group Components\n */\nexport function SideDialogs() {\n\n    const sideDialogsController = useSideDialogsController();\n\n    const sidePanels = sideDialogsController.sidePanels;\n\n    const panels: (SideDialogPanelProps | undefined)[] = [...sidePanels];\n    panels.push(undefined);\n\n    return <>\n        {\n            panels.map((panel, index) =>\n                <SideDialogView\n                    key={`side_dialog_${index}`}\n                    panel={panel}\n                    offsetPosition={sidePanels.length - index - 1}/>)\n        }\n    </>;\n}\n\nfunction SideDialogView({\n                            offsetPosition,\n                            panel\n                        }: {\n    offsetPosition: number,\n    panel?: SideDialogPanelProps\n}) {\n\n    // was the closing of the dialog requested by the drawer\n    const [drawerCloseRequested, setDrawerCloseRequested] = useState<boolean>(false);\n    const [blocked, setBlocked] = useState(false);\n    const [blockedNavigationMessage, setBlockedNavigationMessage] = useState<React.ReactNode | undefined>();\n\n    const widthRef = React.useRef<string | undefined>(panel?.width);\n    const width = widthRef.current;\n\n    const sideDialogsController = useSideDialogsController();\n\n    const {\n        navigationWasBlocked,\n        handleOk: handleNavigationOk,\n        handleCancel: handleNavigationCancel\n    } = useNavigationUnsavedChangesDialog(\n        blocked && !drawerCloseRequested,\n        () => setBlocked(false)\n    );\n\n    useEffect(() => {\n        if (panel)\n            widthRef.current = panel.width;\n    }, [panel])\n\n    const handleDrawerCloseOk = () => {\n        setBlocked(false);\n        setDrawerCloseRequested(false);\n        sideDialogsController.close();\n        panel?.onClose?.();\n    };\n\n    const handleDrawerCloseCancel = () => {\n        setDrawerCloseRequested(false);\n    };\n\n    const onCloseRequest = (force?: boolean) => {\n        if (blocked && !force) {\n            setDrawerCloseRequested(true);\n        } else {\n            sideDialogsController.close();\n            panel?.onClose?.();\n        }\n    };\n\n    // const offsetClass = offsetPosition > 0 ? `transform translate-x-${offsetPosition}` : \"\";\n\n    return (\n        <SideDialogContext.Provider\n            value={{\n                blocked,\n                setBlocked,\n                setBlockedNavigationMessage,\n                width,\n                close: onCloseRequest\n            }}>\n\n            <Sheet\n                open={Boolean(panel)}\n                onOpenChange={(open) => !open && onCloseRequest()}\n            >\n                {panel &&\n                    <div\n                        className={\"transform max-w-[100vw] lg:max-w-[95vw] flex flex-col h-full transition-all duration-250 ease-in-out bg-white dark:bg-gray-900 \"}\n                        style={{\n                            width: panel.width,\n                            transform: `translateX(-${offsetPosition * 200}px)`\n                        }}\n                    >\n                        <ErrorBoundary>\n                            {panel.component}\n                        </ErrorBoundary>\n                    </div>}\n\n                {!panel && <div style={{ width }}/>}\n\n            </Sheet>\n\n            <UnsavedChangesDialog\n                open={navigationWasBlocked || drawerCloseRequested}\n                handleOk={drawerCloseRequested ? handleDrawerCloseOk : handleNavigationOk}\n                handleCancel={drawerCloseRequested ? handleDrawerCloseCancel : handleNavigationCancel}\n                body={blockedNavigationMessage}/>\n\n        </SideDialogContext.Provider>\n\n    );\n}\n","import React, { useCallback, useEffect, useMemo } from \"react\";\n\nimport { EntitySidePanelProps } from \"../types\";\nimport { useNavigationController } from \"../hooks\";\n\nimport { ErrorBoundary } from \"../components\";\nimport { EntityEditView } from \"./EntityEditView\";\nimport { useSideDialogContext } from \"./SideDialogs\";\n\n/**\n * This is the component in charge of rendering the side dialog used\n * for editing entities. Use the {@link useSideEntityController} to open\n * and control the dialogs.\n * This component needs a parent {@link FireCMS}\n * {@link useSideEntityController}\n * @group Components\n */\nexport function EntitySidePanel(props: EntitySidePanelProps) {\n\n    const {\n        blocked,\n        setBlocked,\n        setBlockedNavigationMessage\n    } = useSideDialogContext();\n\n    const navigationController = useNavigationController();\n\n    const parentCollectionIds = useMemo(() => {\n        return navigationController.getParentCollectionIds(props.path);\n    }, [navigationController, props.path]);\n\n    const collection = useMemo(() => {\n        if (!props) return undefined;\n        let usedCollection = props.collection;\n\n        const registryCollection = navigationController.getCollection(props.path, props.entityId);\n        if (registryCollection) {\n            usedCollection = registryCollection;\n        }\n        if (!usedCollection) {\n            console.error(\"ERROR: No collection found in path `\", props.path, \"`. Entity id: \", props.entityId);\n            throw Error(\"ERROR: No collection found in path `\" + props.path + \"`. Make sure you have defined a collection for this path in the root navigation.\");\n        }\n\n        return usedCollection;\n    }, [navigationController, props]);\n\n    useEffect(() => {\n        function beforeunload(e: any) {\n            if (blocked && collection) {\n                e.preventDefault();\n                e.returnValue = `You have unsaved changes in this ${collection.name}. Are you sure you want to leave this page?`;\n            }\n        }\n\n        if (typeof window !== \"undefined\")\n            window.addEventListener(\"beforeunload\", beforeunload);\n\n        return () => {\n            if (typeof window !== \"undefined\")\n                window.removeEventListener(\"beforeunload\", beforeunload);\n        };\n\n    }, [blocked, collection]);\n\n    const onValuesAreModified = useCallback((modified: boolean) => {\n        setBlocked(modified);\n        setBlockedNavigationMessage(modified\n            ? <> You have unsaved changes in this <b>{collection?.singularName ?? collection?.name}</b>.</>\n            : undefined)\n    }, [collection?.name, setBlocked, setBlockedNavigationMessage]);\n\n    if (!props || !collection) {\n        return <div className={\"w-full\"}/>;\n    }\n\n    return (\n        <>\n            <ErrorBoundary>\n                <EntityEditView\n                    {...props}\n                    formWidth={props.width}\n                    collection={collection}\n                    parentCollectionIds={parentCollectionIds}\n                    onValuesAreModified={onValuesAreModified}\n                />\n            </ErrorBoundary>\n\n        </>\n    );\n}\n","import { useCallback, useEffect, useRef } from \"react\";\nimport {\n    EntityCollection,\n    EntitySidePanelProps,\n    NavigationController,\n    SideDialogPanelProps,\n    SideDialogsController,\n    SideEntityController\n} from \"../types\";\nimport { getNavigationEntriesFromPathInternal, NavigationViewInternal } from \"../util/navigation_from_path\";\nimport { useLocation } from \"react-router-dom\";\nimport { removeInitialAndTrailingSlashes, resolveDefaultSelectedView } from \"../util\";\nimport { ADDITIONAL_TAB_WIDTH, CONTAINER_FULL_WIDTH, FORM_CONTAINER_WIDTH } from \"./common\";\nimport { useLargeLayout } from \"../hooks\";\nimport { EntitySidePanel } from \"../core/EntitySidePanel\";\n\nconst NEW_URL_HASH = \"new\";\n\nexport function getEntityViewWidth(props: EntitySidePanelProps<any>, small: boolean): string {\n    if (small) return CONTAINER_FULL_WIDTH;\n    const mainViewSelected = !props.selectedSubPath;\n    const resolvedWidth: string | undefined = typeof props.width === \"number\" ? `${props.width}px` : props.width;\n    return !mainViewSelected ? `calc(${ADDITIONAL_TAB_WIDTH} + ${resolvedWidth ?? FORM_CONTAINER_WIDTH})` : resolvedWidth ?? FORM_CONTAINER_WIDTH\n}\n\nexport const useBuildSideEntityController = (navigation: NavigationController,\n                                             sideDialogsController: SideDialogsController): SideEntityController => {\n\n    const location = useLocation();\n    const initialised = useRef<boolean>(false);\n\n    const smallLayout = !useLargeLayout();\n\n    // only on initialisation, create panels from URL\n    useEffect(() => {\n        if (!navigation.loading && !initialised.current) {\n            console.debug(\"Initialising side entity controller\");\n            if (navigation.isUrlCollectionPath(location.pathname)) {\n                const newFlag = location.hash === `#${NEW_URL_HASH}`;\n                const entityOrCollectionPath = navigation.urlPathToDataPath(location.pathname);\n                const panelsFromUrl = buildSidePanelsFromUrl(entityOrCollectionPath, navigation.collections ?? [], newFlag);\n                for (let i = 0; i < panelsFromUrl.length; i++) {\n                    const panel = panelsFromUrl[i];\n                    setTimeout(() => {\n                        if (i === 0)\n                            sideDialogsController.replace(propsToSidePanel(panel, navigation.buildUrlCollectionPath, navigation.resolveAliasesFrom, smallLayout));\n                        else\n                            sideDialogsController.open(propsToSidePanel(panel, navigation.buildUrlCollectionPath, navigation.resolveAliasesFrom, smallLayout))\n                    }, 1);\n                }\n            } else {\n                // console.warn(\"Location path is not a collection path\");\n            }\n            initialised.current = true;\n        }\n    }, [location, navigation.loading, navigation.isUrlCollectionPath, navigation.buildUrlCollectionPath, navigation.resolveAliasesFrom, sideDialogsController, smallLayout, navigation]);\n\n    const close = useCallback(() => {\n        sideDialogsController.close();\n    }, [sideDialogsController]);\n\n    const open = useCallback((props: EntitySidePanelProps<any>) => {\n\n        if (props.copy && !props.entityId) {\n            throw Error(\"If you want to copy an entity you need to provide an entityId\");\n        }\n\n        const defaultSelectedView = resolveDefaultSelectedView(\n            props.collection ? props.collection.defaultSelectedView : undefined,\n            {\n                status: props.copy ? \"copy\" : (props.entityId ? \"existing\" : \"new\"),\n                entityId: props.entityId\n            }\n        );\n\n        sideDialogsController.open(propsToSidePanel({\n            selectedSubPath: defaultSelectedView,\n            ...props,\n        }, navigation.buildUrlCollectionPath, navigation.resolveAliasesFrom, smallLayout));\n\n    }, [sideDialogsController, navigation.buildUrlCollectionPath, navigation.resolveAliasesFrom, smallLayout]);\n\n    const replace = useCallback((props: EntitySidePanelProps<any>) => {\n\n        if (props.copy && !props.entityId) {\n            throw Error(\"If you want to copy an entity you need to provide an entityId\");\n        }\n\n        sideDialogsController.replace(propsToSidePanel(props, navigation.buildUrlCollectionPath, navigation.resolveAliasesFrom, smallLayout));\n\n    }, [navigation.buildUrlCollectionPath, navigation.resolveAliasesFrom, sideDialogsController, smallLayout]);\n\n    return {\n        close,\n        open,\n        replace\n    };\n};\n\nexport function buildSidePanelsFromUrl(path: string, collections: EntityCollection[], newFlag: boolean): EntitySidePanelProps<any>[] {\n\n    const navigationViewsForPath: NavigationViewInternal<any>[] = getNavigationEntriesFromPathInternal({\n        path,\n        collections\n    });\n\n    const sidePanels: EntitySidePanelProps<any>[] = [];\n    let lastCollectionPath = \"\";\n    for (let i = 0; i < navigationViewsForPath.length; i++) {\n        const navigationEntry = navigationViewsForPath[i];\n\n        if (navigationEntry.type === \"collection\") {\n            lastCollectionPath = navigationEntry.path;\n        }\n\n        if (i > 0) { // the first collection is handled by the main navigation\n            const previousEntry = navigationViewsForPath[i - 1];\n            if (navigationEntry.type === \"entity\") {\n                sidePanels.push({\n                        path: navigationEntry.path,\n                        entityId: navigationEntry.entityId,\n                        copy: false\n                    }\n                );\n            } else if (navigationEntry.type === \"custom_view\") {\n                if (previousEntry.type === \"entity\") {\n                    const lastSidePanel: EntitySidePanelProps<any> = sidePanels[sidePanels.length - 1];\n                    if (lastSidePanel)\n                        lastSidePanel.selectedSubPath = navigationEntry.view.key;\n                }\n            } else if (navigationEntry.type === \"collection\") {\n                if (previousEntry.type === \"entity\") {\n                    const lastSidePanel: EntitySidePanelProps<any> = sidePanels[sidePanels.length - 1];\n                    if (lastSidePanel)\n                        lastSidePanel.selectedSubPath = navigationEntry.collection.id ?? navigationEntry.collection.path;\n                }\n            }\n        }\n\n    }\n\n    if (newFlag) {\n        sidePanels.push({\n            path: lastCollectionPath,\n            copy: false\n        });\n    }\n\n    return sidePanels;\n}\n\nconst propsToSidePanel = (props: EntitySidePanelProps<any>,\n                          buildUrlCollectionPath: (path: string) => string,\n                          resolveAliasesFrom: (pathWithAliases: string) => string,\n                          smallLayout: boolean): SideDialogPanelProps => {\n\n        const collectionPath = removeInitialAndTrailingSlashes(props.path);\n\n        const newPath = props.entityId\n            ? buildUrlCollectionPath(`${collectionPath}/${props.entityId}/${props.selectedSubPath || \"\"}`)\n            : buildUrlCollectionPath(`${collectionPath}#${NEW_URL_HASH}`);\n        const resolvedPath = resolveAliasesFrom(props.path);\n\n        const resolvedPanelProps: EntitySidePanelProps<any> = {\n            ...props,\n            path: resolvedPath\n        };\n\n        return ({\n            key: `${props.path}/${props.entityId}`,\n            component: <EntitySidePanel {...resolvedPanelProps}/>,\n            urlPath: newPath,\n            parentUrlPath: buildUrlCollectionPath(collectionPath),\n            width: getEntityViewWidth(props, smallLayout),\n            onClose: props.onClose\n        });\n    }\n;\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { SideDialogPanelProps, SideDialogsController } from \"../types\";\nimport equal from \"react-fast-compare\"\n\nexport function useBuildSideDialogsController(): SideDialogsController {\n\n    const location = useLocation();\n    const navigate = useNavigate();\n\n    const [sidePanels, setSidePanels] = useState<SideDialogPanelProps[]>([]);\n    const sidePanelsRef = useRef<SideDialogPanelProps[]>(sidePanels);\n\n    const routesStore = useRef<Record<string, SideDialogPanelProps>>({});\n    const routesCount = useRef<number>(0);\n\n    const updateSidePanels = (newPanels: SideDialogPanelProps[]) => {\n        sidePanelsRef.current = newPanels;\n        setSidePanels(newPanels);\n    };\n\n    useEffect(() => {\n        const state = location.state as any;\n        const panelKeys: string[] = state?.panels ?? [];\n        const newPanels = panelKeys\n            .map(key => routesStore.current[key])\n            .filter(p => Boolean(p)) as SideDialogPanelProps[];\n        if (!equal(sidePanelsRef.current.map(p => p.key), newPanels.map(p => p.key)))\n            updateSidePanels(newPanels);\n    }, [location]);\n\n    const close = useCallback(() => {\n\n        if (sidePanels.length === 0)\n            return;\n\n        const lastSidePanel = sidePanels[sidePanels.length - 1];\n        const updatedPanels = [...sidePanels.slice(0, -1)];\n        updateSidePanels(updatedPanels);\n\n        if (routesCount.current > 0) {\n            if (lastSidePanel.urlPath)\n                navigate(-1);\n            routesCount.current--;\n        } else if (lastSidePanel.parentUrlPath) {\n            const baseLocation = (location.state as any)?.base_location ?? location;\n            navigate(\n                lastSidePanel.parentUrlPath,\n                {\n                    replace: true,\n                    state: {\n                        base_location: baseLocation,\n                        panels: updatedPanels.map(p => p.key)\n                    }\n                }\n            );\n        }\n    }, [sidePanels, navigate, location]);\n\n    const open = useCallback((panelProps: SideDialogPanelProps | SideDialogPanelProps[]) => {\n\n        const newPanels: SideDialogPanelProps[] = Array.isArray(panelProps) ? panelProps : [panelProps];\n\n        newPanels.forEach((panel) => {\n            routesStore.current[panel.key] = panel;\n        });\n        routesCount.current = routesCount.current + newPanels.length;\n\n        const baseLocation = (location.state as any)?.base_location ?? location;\n\n        const updatedPanels = [...sidePanels, ...newPanels];\n        updateSidePanels(updatedPanels);\n\n        newPanels.forEach((panel) => {\n            if (panel.urlPath) {\n                navigate(\n                    panel.urlPath,\n                    {\n                        state: {\n                            base_location: baseLocation,\n                            panels: updatedPanels.map(p => p.key)\n                        }\n                    }\n                );\n            }\n        });\n\n    }, [location, navigate, sidePanels]);\n\n    const replace = useCallback((panelProps: SideDialogPanelProps | SideDialogPanelProps[]) => {\n\n        const newPanels: SideDialogPanelProps[] = Array.isArray(panelProps) ? panelProps : [panelProps];\n        newPanels.forEach((panel) => {\n            routesStore.current[panel.key] = panel;\n        });\n\n        const baseLocation = (location.state as any)?.base_location ?? location;\n\n        const updatedPanels = [...sidePanels.slice(0, -newPanels.length), ...newPanels];\n        updateSidePanels(updatedPanels);\n\n        newPanels.forEach((panel) => {\n            if (panel.urlPath) {\n                navigate(\n                    panel.urlPath,\n                    {\n                        replace: true,\n                        state: {\n                            base_location: baseLocation,\n                            panels: updatedPanels.map(p => p.key)\n                        }\n                    }\n                );\n            }\n        });\n\n    }, [location, navigate, sidePanels]);\n\n    return {\n        sidePanels,\n        close,\n        open,\n        replace\n    };\n}\n","import { useCallback } from \"react\";\nimport {\n    DataSource,\n    DataSourceDelegate,\n    DeleteEntityProps,\n    Entity,\n    EntityCollection,\n    EntityValues,\n    FetchCollectionProps,\n    FetchEntityProps,\n    FilterValues,\n    ListenCollectionProps,\n    ListenEntityProps,\n    NavigationController,\n    PropertyConfig,\n    ResolvedProperties,\n    SaveEntityProps\n} from \"../types\";\nimport { resolveCollection, updateDateAutoValues } from \"../util\";\n\n/**\n * Use this hook to build a {@link DataSource} based on Firestore\n * @param firebaseApp\n * @group Firebase\n */\nexport function useBuildDataSource({\n                                       delegate,\n                                       propertyConfigs,\n                                       navigationController\n                                   }: {\n    delegate: DataSourceDelegate,\n    propertyConfigs?: Record<string, PropertyConfig>;\n    navigationController: NavigationController;\n}): DataSource {\n\n    return {\n\n        /**\n         * Fetch entities in a Firestore path\n         * @param path\n         * @param collection\n         * @param filter\n         * @param limit\n         * @param startAfter\n         * @param searchString\n         * @param orderBy\n         * @param order\n         * @return Function to cancel subscription\n         * @see useCollectionFetch if you need this functionality implemented as a hook\n         * @group Firestore\n         */\n        fetchCollection: useCallback(<M extends Record<string, any>>({\n                                                                         path,\n                                                                         collection: collectionProp,\n                                                                         filter,\n                                                                         limit,\n                                                                         startAfter,\n                                                                         searchString,\n                                                                         orderBy,\n                                                                         order\n                                                                     }: FetchCollectionProps<M>\n        ): Promise<Entity<M>[]> => {\n            return delegate.fetchCollection<M>({\n                path,\n                filter,\n                limit,\n                startAfter,\n                searchString,\n                orderBy,\n                order\n            });\n        }, [delegate]),\n\n        /**\n         * Listen to a entities in a given path\n         * @param path\n         * @param collection\n         * @param onError\n         * @param filter\n         * @param limit\n         * @param startAfter\n         * @param searchString\n         * @param orderBy\n         * @param order\n         * @param onUpdate\n         * @return Function to cancel subscription\n         * @see useCollectionFetch if you need this functionality implemented as a hook\n         * @group Firestore\n         */\n        listenCollection: delegate.listenCollection\n            // eslint-disable-next-line react-hooks/rules-of-hooks\n            ? useCallback(<M extends Record<string, any>>(\n                {\n                    path,\n                    collection: collectionProp,\n                    filter,\n                    limit,\n                    startAfter,\n                    searchString,\n                    orderBy,\n                    order,\n                    onUpdate,\n                    onError\n                }: ListenCollectionProps<M>\n            ): () => void => {\n\n                const collection = collectionProp ?? navigationController.getCollection(path);\n                const isCollectionGroup = Boolean(collection?.collectionGroup) ?? false;\n                if (!delegate.listenCollection)\n                    throw Error(\"useBuildDataSource delegate not initialised\");\n\n                return delegate.listenCollection<M>({\n                    path,\n                    filter,\n                    limit,\n                    startAfter,\n                    searchString,\n                    orderBy,\n                    order,\n                    onUpdate,\n                    onError,\n                    isCollectionGroup,\n                    collection\n                });\n            }, [delegate, navigationController.getCollection])\n            : undefined,\n\n        /**\n         * Retrieve an entity given a path and a collection\n         * @param path\n         * @param entityId\n         * @param collection\n         * @group Firestore\n         */\n        fetchEntity: useCallback(<M extends Record<string, any>>({\n                                                                     path,\n                                                                     entityId\n                                                                 }: FetchEntityProps<M>\n        ): Promise<Entity<M> | undefined> => delegate.fetchEntity({\n            path,\n            entityId\n        }), [delegate]),\n\n        /**\n         *\n         * @param path\n         * @param entityId\n         * @param collection\n         * @param onUpdate\n         * @param onError\n         * @return Function to cancel subscription\n         * @group Firestore\n         */\n        listenEntity: delegate.listenEntity\n            // eslint-disable-next-line react-hooks/rules-of-hooks\n            ? useCallback(<M extends Record<string, any>>(\n                {\n                    path,\n                    entityId,\n                    collection,\n                    onUpdate,\n                    onError\n                }: ListenEntityProps<M>): () => void => {\n                if (!delegate.listenEntity)\n                    throw Error(\"useBuildDataSource delegate not initialised\");\n\n                return delegate.listenEntity<M>({\n                    path,\n                    entityId,\n                    onUpdate,\n                    onError\n                })\n            }, [delegate.listenEntity]) : undefined,\n\n        /**\n         * Save entity to the specified path. Note that Firestore does not allow\n         * undefined values.\n         * @param path\n         * @param entityId\n         * @param values\n         * @param schemaId\n         * @param collection\n         * @param status\n         * @group Firestore\n         */\n        saveEntity: useCallback(<M extends Record<string, any>>(\n            {\n                path,\n                entityId,\n                values,\n                collection: collectionProp,\n                status\n            }: SaveEntityProps<M>): Promise<Entity<M>> => {\n\n            const collection = collectionProp ?? navigationController.getCollection(path);\n\n            const resolvedCollection = collection\n                ? resolveCollection<M>({\n                    collection,\n                    path,\n                    entityId,\n                    fields: propertyConfigs\n                })\n                : undefined;\n\n            const properties: ResolvedProperties<M> | undefined = resolvedCollection?.properties;\n\n            const firestoreValues = delegate.cmsToDelegateModel(\n                values,\n            );\n\n            const updatedFirestoreValues: EntityValues<M> = properties\n                ? updateDateAutoValues(\n                    {\n                        inputValues: firestoreValues,\n                        properties,\n                        status,\n                        timestampNowValue: delegate.currentTime(),\n                        setDateToMidnight: delegate.setDateToMidnight\n                    })\n                : firestoreValues;\n\n            return delegate.saveEntity({\n                path,\n                entityId,\n                values: updatedFirestoreValues,\n                status\n            }).then((res) => {\n                return {\n                    id: res.id,\n                    path: res.path,\n                    values: delegate.delegateToCMSModel(updatedFirestoreValues)\n                } as Entity<M>;\n            });\n        }, [delegate.saveEntity, navigationController.getCollection]),\n\n        /**\n         * Delete an entity\n         * @param entity\n         * @param collection\n         * @group Firestore\n         */\n        deleteEntity: useCallback(<M extends Record<string, any>>(\n            {\n                entity\n            }: DeleteEntityProps<M>\n        ): Promise<void> => {\n            return delegate.deleteEntity({ entity });\n        }, [delegate.deleteEntity]),\n\n        /**\n         * Check if the given property is unique in the given collection\n         * @param path Collection path\n         * @param name of the property\n         * @param value\n         * @param property\n         * @param entityId\n         * @return `true` if there are no other fields besides the given entity\n         * @group Firestore\n         */\n        checkUniqueField: useCallback((\n            path: string,\n            name: string,\n            value: any,\n            entityId?: string\n        ): Promise<boolean> => {\n            return delegate.checkUniqueField(path, name, value, entityId);\n        }, [delegate.checkUniqueField]),\n\n        generateEntityId: useCallback((path: string): string => {\n            return delegate.generateEntityId(path,);\n        }, [delegate.generateEntityId]),\n\n        countEntities: delegate.countEntities ? async ({\n                                                           path,\n                                                           collection,\n                                                           filter,\n                                                           order,\n                                                           orderBy\n                                                       }: {\n            path: string,\n            collection: EntityCollection<any>,\n            filter?: FilterValues<Extract<keyof any, string>>,\n            orderBy?: string,\n            order?: \"desc\" | \"asc\",\n        }): Promise<number> => {\n            return delegate.countEntities!({\n                path,\n                filter,\n                orderBy,\n                order,\n                isCollectionGroup: Boolean(collection.collectionGroup) ?? false\n            });\n        } : undefined,\n\n        isFilterCombinationValid: useCallback(({\n                                                   path,\n                                                   filterValues,\n                                                   sortBy\n                                               }: {\n            path: string,\n            filterValues: FilterValues<any>,\n            sortBy?: [string, \"asc\" | \"desc\"]\n        }): boolean => {\n            if (!delegate.isFilterCombinationValid)\n                return true;\n            return delegate.isFilterCombinationValid(\n                {\n                    path,\n                    filterValues,\n                    sortBy\n                }\n            )\n        }, [delegate.isFilterCombinationValid]),\n\n    };\n\n}\n\n// /**\n//  * Recursive function that converts Firestore data types into CMS or plain\n//  * JS types.\n//  * FireCMS uses Javascript dates internally instead of Firestore timestamps.\n//  * This makes it easier to interact with the rest of the libraries and\n//  * bindings.\n//  * Also, Firestore references are replaced with {@link EntityReference}\n//  * @param data\n//  * @param buildReference\n//  * @param buildGeoPoint\n//  * @param buildDate\n//  * @param buildDelete\n//  * @group Firestore\n//  */\n// export function cmsToDelegateModel(data: any,\n//                                    buildReference: (reference: EntityReference) => any,\n//                                    buildGeoPoint: (geoPoint: GeoPoint) => any,\n//                                    buildDate: (date: Date) => any,\n//                                    buildDelete: () => any\n// ): any {\n//     if (data === undefined) {\n//         return buildDelete();\n//     } else if (data === null) {\n//         return null;\n//     } else if (Array.isArray(data)) {\n//         return data.map(v => cmsToDelegateModel(v, buildReference, buildGeoPoint, buildDate, buildDelete));\n//     } else if (data.isEntityReference && data.isEntityReference()) {\n//         return buildReference(data);\n//     } else if (data instanceof GeoPoint) {\n//         return buildGeoPoint(data);\n//     } else if (data instanceof Date) {\n//         return buildDate(data);\n//     } else if (data && typeof data === \"object\") {\n//         return Object.entries(data)\n//             .map(([key, v]) => ({ [key]: cmsToDelegateModel(v, buildReference, buildGeoPoint, buildDate, buildDelete) }))\n//             .reduce((a, b) => ({ ...a, ...b }), {});\n//     }\n//     return data;\n// }\n","import { useEffect, useRef, useState } from \"react\";\nimport { AuthController, FireCMSPlugin } from \"../types\";\n\nexport const DEFAULT_SERVER_DEV = \"https://api-kdoe6pj3qq-ey.a.run.app\";\nexport const DEFAULT_SERVER = \"https://api-drplyi3b6q-ey.a.run.app\";\n\nexport type AccessResponse = {\n    blocked?: boolean;\n    message?: string;\n}\n\nasync function makeRequest(authController: AuthController, pluginKeys: string[] | undefined) {\n    const firebaseToken = await authController.getAuthToken();\n    return fetch(DEFAULT_SERVER + \"/access_log\",\n        {\n            // mode: \"no-cors\",\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: `Basic ${firebaseToken}`,\n            },\n            body: JSON.stringify({ plugins: pluginKeys })\n        })\n        .then(async (res) => {\n            return res.json();\n        });\n}\n\nexport function useProjectLog(authController: AuthController,\n                              plugins?: FireCMSPlugin<any, any, any>[]): AccessResponse | null {\n    const [accessResponse, setAccessResponse] = useState<AccessResponse | null>(null);\n    const accessedUserRef = useRef<string | null>(null);\n    const pluginKeys = plugins?.map(plugin => plugin.key);\n    useEffect(() => {\n        if (authController.user && authController.user.uid !== accessedUserRef.current && !authController.initialLoading) {\n            makeRequest(authController, pluginKeys).then(setAccessResponse);\n            accessedUserRef.current = authController.user.uid;\n        }\n    }, [authController, pluginKeys]);\n    return accessResponse;\n}\n","import React, { useMemo } from \"react\";\n\nimport { EntityCollection, FireCMSContext, FireCMSPlugin, FireCMSProps, User } from \"../types\";\nimport { AuthControllerContext, ModeControllerContext } from \"../contexts\";\nimport { useBuildSideEntityController } from \"../internal/useBuildSideEntityController\";\nimport { useCustomizationController, useFireCMSContext, useModeController } from \"../hooks\";\nimport { useBuildSideDialogsController } from \"../internal/useBuildSideDialogsController\";\nimport { ErrorView } from \"../components\";\nimport { StorageSourceContext } from \"../contexts/StorageSourceContext\";\nimport { UserConfigurationPersistenceContext } from \"../contexts/UserConfigurationPersistenceContext\";\nimport { DataSourceContext } from \"../contexts/DataSourceContext\";\nimport { SideEntityControllerContext } from \"../contexts/SideEntityControllerContext\";\nimport { NavigationContext } from \"../contexts/NavigationContext\";\nimport { SideDialogsControllerContext } from \"../contexts/SideDialogsControllerContext\";\nimport { CenteredView, Typography, useLocaleConfig } from \"@firecms/ui\";\nimport { DialogsProvider } from \"../contexts/DialogsProvider\";\nimport { useBuildDataSource } from \"../internal/useBuildDataSource\";\nimport { useBuildCustomizationController } from \"../internal/useBuildCustomizationController\";\nimport { CustomizationControllerContext } from \"../contexts/CustomizationControllerContext\";\nimport { AnalyticsContext } from \"../contexts/AnalyticsContext\";\nimport { useProjectLog } from \"../hooks/useProjectLog\";\n\n/**\n * If you are using independent components of the CMS\n * you need to wrap them with this main component, so the internal hooks work.\n *\n * This is the main component of FireCMS. It acts as the provider of all the\n * internal contexts and hooks.\n *\n * You only need to use this component if you are building a custom app.\n *\n * @constructor\n * @group Core\n */\nexport function FireCMS<UserType extends User, EC extends EntityCollection>(props: FireCMSProps<UserType, EC>) {\n\n    const modeController = useModeController();\n    const {\n        children,\n        entityLinkBuilder,\n        userConfigPersistence,\n        dateTimeFormat,\n        locale,\n        authController,\n        storageSource,\n        dataSourceDelegate,\n        plugins,\n        onAnalyticsEvent,\n        propertyConfigs,\n        entityViews,\n        components,\n        navigationController,\n    } = props;\n\n    useLocaleConfig(locale);\n\n    /**\n     * Controller in charge of fetching and persisting data\n     */\n    const dataSource = useBuildDataSource({\n        delegate: dataSourceDelegate,\n        propertyConfigs,\n        navigationController\n    });\n\n    const sideDialogsController = useBuildSideDialogsController();\n    const sideEntityController = useBuildSideEntityController(navigationController, sideDialogsController);\n\n    const pluginsLoading = plugins?.some(p => p.loading) ?? false;\n\n    const loading = authController.initialLoading || navigationController.loading || pluginsLoading;\n\n    const customizationController = useBuildCustomizationController({\n        dateTimeFormat,\n        locale,\n        entityLinkBuilder,\n        plugins,\n        entityViews: entityViews ?? [],\n        propertyConfigs: propertyConfigs ?? {},\n        components\n    });\n\n    const analyticsController = useMemo(() => ({\n        onAnalyticsEvent\n    }), []);\n\n    const accessResponse = useProjectLog(authController, plugins);\n\n    if (navigationController.navigationLoadingError) {\n        return (\n            <CenteredView maxWidth={\"md\"}>\n                <ErrorView\n                    title={\"Error loading navigation\"}\n                    error={navigationController.navigationLoadingError}/>\n            </CenteredView>\n        );\n    }\n\n    if (authController.authError) {\n        return (\n            <CenteredView maxWidth={\"md\"}>\n                <ErrorView\n                    title={\"Error loading auth\"}\n                    error={authController.authError}/>\n            </CenteredView>\n        );\n    }\n\n    if (accessResponse?.blocked) {\n        return (\n            <CenteredView maxWidth={\"md\"} fullScreen={true}>\n                <Typography variant={\"h4\"}>\n                    Access blocked\n                </Typography>\n                <Typography>\n                    This app has been blocked. Please reach out at <a\n                    href={\"mailto:hello@firecms.co\"}>hello@firecms.co</a> for more information.\n                </Typography>\n                {accessResponse?.message &&\n                    <Typography>Response from the server: {accessResponse?.message}</Typography>}\n            </CenteredView>\n        );\n    }\n\n    return (\n        <ModeControllerContext.Provider value={modeController}>\n            <AnalyticsContext.Provider value={analyticsController}>\n                <CustomizationControllerContext.Provider value={customizationController}>\n                    <UserConfigurationPersistenceContext.Provider\n                        value={userConfigPersistence}>\n                        <StorageSourceContext.Provider\n                            value={storageSource}>\n                            <DataSourceContext.Provider\n                                value={dataSource}>\n                                <AuthControllerContext.Provider\n                                    value={authController}>\n                                    <SideDialogsControllerContext.Provider\n                                        value={sideDialogsController}>\n                                        <SideEntityControllerContext.Provider\n                                            value={sideEntityController}>\n                                            <NavigationContext.Provider\n                                                value={navigationController}>\n                                                <DialogsProvider>\n                                                    <FireCMSInternal\n                                                        loading={loading}>\n                                                        {children}\n                                                    </FireCMSInternal>\n                                                </DialogsProvider>\n                                            </NavigationContext.Provider>\n                                        </SideEntityControllerContext.Provider>\n                                    </SideDialogsControllerContext.Provider>\n                                </AuthControllerContext.Provider>\n                            </DataSourceContext.Provider>\n                        </StorageSourceContext.Provider>\n                    </UserConfigurationPersistenceContext.Provider>\n                </CustomizationControllerContext.Provider>\n            </AnalyticsContext.Provider>\n        </ModeControllerContext.Provider>\n    );\n\n}\n\nfunction FireCMSInternal({\n                             loading,\n                             children\n                         }: {\n    loading: boolean;\n    children: (props: {\n        context: FireCMSContext;\n        loading: boolean;\n    }) => React.ReactNode;\n}) {\n\n    const context = useFireCMSContext();\n    const customizationController = useCustomizationController();\n\n    let childrenResult = children({\n        context,\n        loading\n    });\n\n    const plugins = customizationController.plugins;\n    if (!loading && plugins) {\n        plugins.forEach((plugin: FireCMSPlugin) => {\n            if (plugin.provider) {\n                childrenResult = (\n                    <plugin.provider.Component {...plugin.provider.props}\n                                               context={context}>\n                        {childrenResult}\n                    </plugin.provider.Component>\n                );\n            }\n        });\n    }\n\n    return <>{childrenResult}</>;\n}\n","import React, { useCallback } from \"react\";\n\nimport { useLargeLayout, useNavigationController } from \"../hooks\";\n\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport { CMSAnalyticsEvent, TopNavigationEntry, TopNavigationResult } from \"../types\";\nimport { IconForView } from \"../util\";\nimport { cn, IconButton, Menu, MenuItem, MoreVertIcon, Tooltip, Typography } from \"@firecms/ui\";\nimport { useAnalyticsController } from \"../hooks/useAnalyticsController\";\n\n/**\n * Props used in case you need to override the default drawer\n * @group Core\n */\nexport type DrawerProps<T = {}> = T & {\n    hovered: boolean,\n    drawerOpen: boolean,\n    closeDrawer: () => any,\n}\n\n/**\n * Default drawer used in the CMS\n * @group Core\n */\nexport function Drawer({\n                           hovered,\n                           drawerOpen,\n                           closeDrawer\n                       }: DrawerProps) {\n\n    const analyticsController = useAnalyticsController();\n    const navigation = useNavigationController();\n\n    const tooltipsOpen = hovered && !drawerOpen;\n    const largeLayout = useLargeLayout();\n    const navigate = useNavigate();\n\n    const [adminMenuOpen, setAdminMenuOpen] = React.useState(false);\n\n    if (!navigation.topLevelNavigation)\n        throw Error(\"Navigation not ready in Drawer\");\n\n    const {\n        navigationEntries,\n        groups\n    }: TopNavigationResult = navigation.topLevelNavigation;\n\n    const adminViews = navigationEntries.filter(e => e.type === \"admin\") ?? [];\n    const groupsWithoutAdmin = groups.filter(g => g !== \"Admin\");\n\n    const buildGroupHeader = useCallback((group?: string) => {\n        if (!drawerOpen) return <div className=\"h-12 w-full\"/>;\n        return <div\n            className=\"pt-8 pl-6 pr-8 pb-2 flex flex-row items-center\">\n            <Typography variant={\"caption\"}\n                        color={\"secondary\"}\n                        className=\"font-medium flex-grow line-clamp-1\">\n                {group ? group.toUpperCase() : \"Views\".toUpperCase()}\n            </Typography>\n\n        </div>;\n    }, [drawerOpen]);\n\n    const onClick = (view: TopNavigationEntry) => {\n        const eventName: CMSAnalyticsEvent = view.type === \"collection\"\n            ? \"drawer_navigate_to_collection\"\n            : (view.type === \"view\" ? \"drawer_navigate_to_view\" : \"unmapped_event\");\n        analyticsController.onAnalyticsEvent?.(eventName, { url: view.url });\n        if (!largeLayout)\n            closeDrawer();\n    };\n\n    return (\n        <>\n\n            <div className={\"flex-grow overflow-scroll no-scrollbar\"}>\n\n                {groupsWithoutAdmin.map((group) => (\n                    <React.Fragment\n                        key={`drawer_group_${group}`}>\n                        {buildGroupHeader(group)}\n                        {Object.values(navigationEntries)\n                            .filter(e => e.group === group)\n                            .map((view, index) =>\n                                <DrawerNavigationItem\n                                    key={`navigation_${index}`}\n                                    icon={<IconForView collectionOrView={view.collection ?? view.view}/>}\n                                    tooltipsOpen={tooltipsOpen}\n                                    drawerOpen={drawerOpen}\n                                    onClick={() => onClick(view)}\n                                    url={view.url}\n                                    name={view.name}/>)}\n                    </React.Fragment>\n                ))}\n\n            </div>\n\n            {adminViews.length > 0 && <Menu\n                open={adminMenuOpen}\n                onOpenChange={setAdminMenuOpen}\n                trigger={\n                    <IconButton\n                        shape={\"square\"}\n                        className={\"m-4 text-gray-900 dark:text-white w-fit\"}>\n                        <Tooltip title={\"Admin\"}\n                                 open={tooltipsOpen}\n                                 side={\"right\"} sideOffset={28}>\n                            <MoreVertIcon/>\n                        </Tooltip>\n                        {drawerOpen && <div\n                            className={cn(\n                                drawerOpen ? \"opacity-100\" : \"opacity-0 hidden\",\n                                \"mx-4 font-inherit text-inherit\"\n                            )}>\n                            ADMIN\n                        </div>}\n                    </IconButton>}\n            >\n                {adminViews.map((entry, index) =>\n                    <MenuItem\n                        onClick={(event) => {\n                            event.preventDefault();\n                            navigate(entry.path);\n                        }}\n                        key={`navigation_${index}`}>\n                        {<IconForView collectionOrView={entry.view}/>}\n                        {entry.name}\n                    </MenuItem>)}\n\n            </Menu>}\n        </>\n    );\n}\n\nexport function DrawerNavigationItem({\n                                         name,\n                                         icon,\n                                         drawerOpen,\n                                         tooltipsOpen,\n                                         url,\n                                         onClick\n                                     }: {\n    icon: React.ReactElement,\n    name: string,\n    tooltipsOpen: boolean,\n    drawerOpen: boolean,\n    url: string,\n    onClick?: () => void,\n}) {\n\n    const iconWrap = <div\n        className={\"text-gray-600 dark:text-gray-500\"}>\n        {icon}\n    </div>;\n\n    const listItem = <NavLink\n        onClick={onClick}\n        style={{\n            width: !drawerOpen ? \"72px\" : \"280px\",\n            transition: drawerOpen ? \"width 150ms ease-in\" : undefined\n        }}\n        className={({ isActive }: any) => cn(\"rounded-r-xl truncate\",\n            \"hover:bg-slate-300 hover:bg-opacity-75 dark:hover:bg-gray-700 dark:hover:bg-opacity-75 text-gray-800 dark:text-gray-200 hover:text-gray-900 hover:dark:text-white\",\n            \"flex flex-row items-center mr-8\",\n            // \"transition-all ease-in-out delay-100 duration-300\",\n            // drawerOpen ? \"w-full\" : \"w-18\",\n            drawerOpen ? \"pl-8 h-12\" : \"pl-6 h-11\",\n            \"font-medium text-sm\",\n            isActive ? \"bg-slate-200 bg-opacity-75 dark:bg-gray-800\" : \"\"\n        )}\n        to={url}\n    >\n\n        {iconWrap}\n\n        <div\n            className={cn(\n                drawerOpen ? \"opacity-100\" : \"opacity-0 hidden\",\n                \"ml-4 font-inherit text-inherit\"\n            )}>\n            {name.toUpperCase()}\n        </div>\n    </NavLink>;\n\n    return <Tooltip\n        open={drawerOpen ? false : tooltipsOpen}\n        side=\"right\"\n        title={name}>\n        {listItem}\n    </Tooltip>;\n}\n","import React, { PropsWithChildren, useCallback } from \"react\";\nimport equal from \"react-fast-compare\"\nimport { Link } from \"react-router-dom\";\n\nimport { Drawer as DefaultDrawer, DrawerProps } from \"./Drawer\";\nimport { useLargeLayout, useNavigationController } from \"../hooks\";\nimport { ErrorBoundary, FireCMSAppBar as DefaultFireCMSAppBar, FireCMSAppBarProps, FireCMSLogo } from \"../components\";\nimport { ChevronLeftIcon, cn, defaultBorderMixin, IconButton, MenuIcon, Sheet, Tooltip } from \"@firecms/ui\";\n\nexport const DRAWER_WIDTH = 280;\n\n/**\n * @group Core\n */\nexport interface ScaffoldProps<ExtraDrawerProps = object, ExtraAppbarProps = object> {\n\n    /**\n     * Name of the app, displayed as the main title and in the tab title\n     */\n    name: string;\n\n    /**\n     * Logo to be displayed in the drawer of the CMS\n     */\n    logo?: string;\n\n    /**\n     * Whether to include the drawer in the scaffold\n     */\n    includeDrawer?: boolean;\n\n    /**\n     * In case you need to override the view that gets rendered as a drawer\n     * @see DefaultDrawer\n     */\n    Drawer?: React.ComponentType<DrawerProps<ExtraDrawerProps>>;\n\n    /**\n     * Additional props passed to the custom Drawer\n     */\n    drawerProps?: Partial<DrawerProps> & ExtraDrawerProps;\n\n    /**\n     * Open the drawer on hover\n     */\n    autoOpenDrawer?: boolean;\n\n    /**\n     * A component that gets rendered on the upper side of the main toolbar.\n     * `toolbarExtraWidget` has no effect if this is set.\n     */\n    FireCMSAppBar?: React.ComponentType<FireCMSAppBarProps<ExtraAppbarProps>>;\n\n    /**\n     * Additional props passed to the custom AppBar\n     */\n    fireCMSAppBarProps?: Partial<FireCMSAppBarProps> & ExtraAppbarProps;\n\n}\n\n/**\n * This view acts as a scaffold for FireCMS.\n *\n * It is in charge of displaying the navigation drawer, top bar and main\n * collection views.\n * This component needs a parent {@link FireCMS}\n *\n * @param props\n * @constructor\n * @group Core\n */\nexport const Scaffold = React.memo<PropsWithChildren<ScaffoldProps>>(\n    function Scaffold(props: PropsWithChildren<ScaffoldProps>) {\n\n        const {\n            children,\n            name,\n            logo,\n            includeDrawer = true,\n            autoOpenDrawer,\n            Drawer = DefaultDrawer,\n            drawerProps,\n            FireCMSAppBar = DefaultFireCMSAppBar,\n            fireCMSAppBarProps,\n        } = props;\n\n        const largeLayout = useLargeLayout();\n\n        const [drawerOpen, setDrawerOpen] = React.useState(false);\n        const [onHover, setOnHover] = React.useState(false);\n\n        const setOnHoverTrue = useCallback(() => setOnHover(true), []);\n        const setOnHoverFalse = useCallback(() => setOnHover(false), []);\n\n        const handleDrawerClose = useCallback(() => {\n            setDrawerOpen(false);\n        }, []);\n\n        const computedDrawerOpen: boolean = drawerOpen || Boolean(largeLayout && autoOpenDrawer && onHover);\n        return (\n            <div\n                className=\"flex h-screen w-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white overflow-hidden\"\n                style={{\n                    paddingTop: \"env(safe-area-inset-top)\",\n                    paddingLeft: \"env(safe-area-inset-left)\",\n                    paddingRight: \"env(safe-area-inset-right)\",\n                    paddingBottom: \"env(safe-area-inset-bottom)\",\n                    height: \"100dvh\"\n                    // \"@supports (height: 100dvh)\": {\n                    //     height: \"100dvh\"\n                    // }\n                }}>\n\n                <FireCMSAppBar title={name}\n                                        includeDrawer={includeDrawer}\n                                        drawerOpen={computedDrawerOpen}\n                                        {...fireCMSAppBarProps}/>\n\n                <StyledDrawer\n                    displayed={includeDrawer}\n                    onMouseEnter={setOnHoverTrue}\n                    onMouseMove={setOnHoverTrue}\n                    onMouseLeave={setOnHoverFalse}\n                    open={computedDrawerOpen}\n                    logo={logo}\n                    hovered={onHover}\n                    setDrawerOpen={setDrawerOpen}>\n                    {includeDrawer && (\n                        <Drawer\n                            hovered={onHover}\n                            drawerOpen={computedDrawerOpen}\n                            closeDrawer={handleDrawerClose}\n                            {...drawerProps}/>)}\n                </StyledDrawer>\n\n                <main\n                    className=\"flex flex-col flex-grow overflow-auto\">\n                    <DrawerHeader/>\n                    <div\n                        className={cn(defaultBorderMixin, \"flex-grow overflow-auto lg:m-0 lg:mx-4 lg:mb-4 lg:rounded-lg lg:border lg:border-solid m-0 mt-1\")}>\n\n                        <ErrorBoundary>\n                            {children}\n                        </ErrorBoundary>\n\n                    </div>\n                </main>\n            </div>\n        );\n    },\n    equal\n)\n\nconst DrawerHeader = () => {\n    return (\n        <div className=\"flex flex-col min-h-[68px]\"></div>\n    );\n};\n\nfunction StyledDrawer(props: {\n    children: React.ReactNode,\n    displayed: boolean,\n    open: boolean,\n    logo?: string,\n    hovered: boolean,\n    setDrawerOpen: (open: boolean) => void,\n    onMouseEnter: () => void,\n    onMouseMove: () => void,\n    onMouseLeave: () => void\n}) {\n\n    const navigation = useNavigationController();\n\n    const width = !props.displayed ? 0 : (props.open ? DRAWER_WIDTH : 72);\n    const innerDrawer = <div\n        className={\"relative h-full no-scrollbar overflow-y-auto overflow-x-hidden\"}\n        style={{\n            width,\n            transition: \"left 100ms cubic-bezier(0.4, 0, 0.6, 1) 0ms, opacity 100ms cubic-bezier(0.4, 0, 0.6, 1) 0ms, width 100ms cubic-bezier(0.4, 0, 0.6, 1) 0ms\"\n        }}\n    >\n\n        {!props.open && props.displayed && (\n            <Tooltip title=\"Open menu\"\n                     side=\"right\"\n                     sideOffset={12}\n                     className=\"fixed top-2 left-3 !bg-gray-50 dark:!bg-gray-900 rounded-full w-fit\"\n            >\n                <IconButton\n                    color=\"inherit\"\n                    aria-label=\"Open menu\"\n                    className=\"sticky top-2 left-3 \"\n                    onClick={() => props.setDrawerOpen(true)}\n                    size=\"large\"\n                >\n                    <MenuIcon/>\n                </IconButton>\n            </Tooltip>\n        )}\n\n        <div className={\"flex flex-col h-full\"}>\n            <div\n                style={{\n                    transition: \"padding 100ms cubic-bezier(0.4, 0, 0.6, 1) 0ms\",\n                    padding: props.open ? \"32px 144px 0px 24px\" : \"72px 16px 0px\"\n                }}\n                className={cn(\"cursor-pointer\")}>\n\n                <Tooltip title={\"Home\"}\n                         sideOffset={20}\n                         side=\"right\">\n                    <Link\n                        to={navigation.basePath}>\n                        {props.logo\n                            ? <img src={props.logo}\n                                   alt=\"Logo\"\n                                   className={cn(\"max-w-full max-h-full\",\n                                       props.open ?? \"w-[112px] h-[112px]\")}/>\n                            : <FireCMSLogo/>}\n\n                    </Link>\n                </Tooltip>\n            </div>\n\n            {props.children}\n        </div>\n\n    </div>;\n\n    const largeLayout = useLargeLayout();\n    if (!largeLayout) {\n        if (!props.displayed)\n            return null;\n        return <>\n            <IconButton\n                color=\"inherit\"\n                aria-label=\"Open drawer\"\n                onClick={() => props.setDrawerOpen(true)}\n                size=\"large\"\n                className=\"absolute top-2 left-6\"\n            >\n                <MenuIcon/>\n            </IconButton>\n            <Sheet side={\"left\"}\n                   transparent={true}\n                   open={props.open}\n                   onOpenChange={props.setDrawerOpen}\n            >\n                {innerDrawer}\n            </Sheet>\n        </>;\n    }\n\n    return (\n        <div\n            className=\"relative\"\n            onMouseEnter={props.onMouseEnter}\n            onMouseMove={props.onMouseMove}\n            onMouseLeave={props.onMouseLeave}\n            style={{\n                width,\n                transition: \"left 100ms cubic-bezier(0.4, 0, 0.6, 1) 0ms, opacity 100ms cubic-bezier(0.4, 0, 0.6, 1) 0ms, width 100ms cubic-bezier(0.4, 0, 0.6, 1) 0ms\"\n            }}>\n\n            {innerDrawer}\n\n            <div\n                className={`absolute right-0 top-4 ${\n                    props.open ? \"opacity-100\" : \"opacity-0 invisible\"\n                } transition-opacity duration-1000 ease-in-out`}>\n                <IconButton\n                    aria-label=\"Close drawer\"\n                    onClick={() => props.setDrawerOpen(false)}\n                >\n                    <ChevronLeftIcon/>\n                </IconButton>\n            </div>\n\n        </div>\n    );\n}\n","import React from \"react\";\n\nimport { ArrayProperty, FieldProps, Property, PropertyConfig, ResolvedProperty } from \"../types\";\nimport {\n    ArrayCustomShapedFieldBinding,\n    ArrayOfReferencesFieldBinding,\n    BlockFieldBinding,\n    DateTimeFieldBinding,\n    KeyValueFieldBinding,\n    MapFieldBinding,\n    MarkdownFieldBinding,\n    MultiSelectBinding,\n    ReferenceFieldBinding,\n    RepeatFieldBinding,\n    SelectFieldBinding,\n    StorageUploadFieldBinding,\n    SwitchFieldBinding,\n    TextFieldBinding\n} from \"../form\";\nimport { isPropertyBuilder, mergeDeep } from \"../util\";\n\nimport {\n    AddLinkIcon,\n    BallotIcon,\n    DriveFolderUploadIcon,\n    EmailIcon,\n    FlagIcon,\n    FormatListNumberedIcon,\n    FormatQuoteIcon,\n    HttpIcon,\n    LinkIcon,\n    ListAltIcon,\n    ListIcon,\n    NumbersIcon,\n    RepeatIcon,\n    ScheduleIcon,\n    ShortTextIcon,\n    SubjectIcon,\n    UploadFileIcon,\n    ViewStreamIcon\n} from \"@firecms/ui\";\n\nexport function isDefaultFieldConfigId(id: string) {\n    return Object.keys(DEFAULT_FIELD_CONFIGS).includes(id);\n}\n\nexport const DEFAULT_FIELD_CONFIGS: Record<string, PropertyConfig<any>> = {\n    text_field: {\n        key: \"text_field\",\n        name: \"Text field\",\n        description: \"Simple short text\",\n        Icon: ShortTextIcon,\n        color: \"#2d7ff9\",\n        property: {\n            dataType: \"string\",\n            Field: TextFieldBinding\n        }\n    },\n    multiline: {\n        key: \"multiline\",\n        name: \"Multiline\",\n        description: \"Text with multiple lines\",\n        Icon: SubjectIcon,\n        color: \"#2d7ff9\",\n        property: {\n            dataType: \"string\",\n            multiline: true,\n            Field: TextFieldBinding\n        }\n    },\n    markdown: {\n        key: \"markdown\",\n        name: \"Markdown\",\n        description: \"Text with advanced markdown syntax\",\n        Icon: FormatQuoteIcon,\n        color: \"#2d7ff9\",\n        property: {\n            dataType: \"string\",\n            markdown: true,\n            Field: MarkdownFieldBinding\n        }\n    },\n    url: {\n        key: \"url\",\n        name: \"Url\",\n        description: \"Text with URL validation\",\n        Icon: HttpIcon,\n        color: \"#154fb3\",\n        property: {\n            dataType: \"string\",\n            url: true,\n            Field: TextFieldBinding\n        }\n    },\n    email: {\n        key: \"email\",\n        name: \"Email\",\n        description: \"Text with email validation\",\n        Icon: EmailIcon,\n        color: \"#154fb3\",\n        property: {\n            dataType: \"string\",\n            email: true,\n            Field: TextFieldBinding\n        }\n    },\n    switch: {\n        key: \"switch\",\n        name: \"Switch\",\n        description: \"Boolean true or false field (or yes or no, 0 or 1...)\",\n        Icon: FlagIcon,\n        color: \"#20d9d2\",\n        property: {\n            dataType: \"boolean\",\n            Field: SwitchFieldBinding\n        }\n    },\n    select: {\n        key: \"select\",\n        name: \"Select/enum\",\n        description: \"Select one text value from within an enumeration\",\n        Icon: ListIcon,\n        color: \"#4223c9\",\n        property: {\n            dataType: \"string\",\n            enumValues: [],\n            Field: SelectFieldBinding\n        }\n    },\n    multi_select: {\n        key: \"multi_select\",\n        name: \"Multi select\",\n        description: \"Select multiple text values from within an enumeration\",\n        Icon: ListAltIcon,\n        color: \"#4223c9\",\n        property: {\n            dataType: \"array\",\n            of: {\n                dataType: \"string\",\n                enumValues: [],\n            },\n            Field: MultiSelectBinding\n        }\n    },\n    number_input: {\n        key: \"number_input\",\n        name: \"Number input\",\n        description: \"Simple number field with validation\",\n        Icon: NumbersIcon,\n        color: \"#bec920\",\n        property: {\n            dataType: \"number\",\n            Field: TextFieldBinding\n        }\n    },\n    number_select: {\n        key: \"number_select\",\n        name: \"Number select\",\n        description: \"Select a number value from within an enumeration\",\n        Icon: FormatListNumberedIcon,\n        color: \"#bec920\",\n        property: {\n            dataType: \"number\",\n            enumValues: [],\n            Field: SelectFieldBinding\n        }\n    },\n    multi_number_select: {\n        key: \"multi_number_select\",\n        name: \"Multiple number select\",\n        description: \"Select multiple number values from within an enumeration\",\n        Icon: FormatListNumberedIcon,\n        color: \"#bec920\",\n        property: {\n            dataType: \"array\",\n            of: {\n                dataType: \"number\",\n                enumValues: [],\n            },\n            Field: MultiSelectBinding\n        }\n    },\n    file_upload: {\n        key: \"file_upload\",\n        name: \"File upload\",\n        description: \"Input for uploading single files\",\n        Icon: UploadFileIcon,\n        color: \"#f92d9a\",\n        property: {\n            dataType: \"string\",\n            storage: {\n                storagePath: \"{path}\"\n            },\n            Field: StorageUploadFieldBinding as React.ComponentType<FieldProps<string>>\n        }\n    },\n    multi_file_upload: {\n        key: \"multi_file_upload\",\n        name: \"Multiple file upload\",\n        description: \"Input for uploading multiple files\",\n        Icon: DriveFolderUploadIcon,\n        color: \"#f92d9a\",\n        property: {\n            dataType: \"array\",\n            of: {\n                dataType: \"string\",\n                storage: {\n                    storagePath: \"{path}\"\n                }\n            },\n            Field: StorageUploadFieldBinding\n        }\n    },\n    reference: {\n        key: \"reference\",\n        name: \"Reference\",\n        description: \"The value refers to a different collection\",\n        Icon: LinkIcon,\n        color: \"#ff0042\",\n        property: {\n            dataType: \"reference\",\n            Field: ReferenceFieldBinding\n        }\n    },\n    multi_references: {\n        key: \"multi_references\",\n        name: \"Multiple references\",\n        description: \"Multiple values that refer to a different collection\",\n        Icon: AddLinkIcon,\n        color: \"#ff0042\",\n        property: {\n            dataType: \"array\",\n            of: {\n                dataType: \"reference\",\n            },\n            Field: ArrayOfReferencesFieldBinding\n        }\n    },\n    date_time: {\n        key: \"date_time\",\n        name: \"Date/time\",\n        description: \"A date time select field\",\n        Icon: ScheduleIcon,\n        color: \"#8b46ff\",\n        property: {\n            dataType: \"date\",\n            Field: DateTimeFieldBinding\n        }\n    },\n    group: {\n        key: \"group\",\n        name: \"Group\",\n        description: \"Group of multiple fields\",\n        Icon: BallotIcon,\n        color: \"#ff9408\",\n        property: {\n            dataType: \"map\",\n            properties: {},\n            Field: MapFieldBinding\n        }\n    },\n    key_value: {\n        key: \"key_value\",\n        name: \"Key-value\",\n        description: \"Flexible field that allows the user to add multiple key-value pairs\",\n        Icon: BallotIcon,\n        color: \"#ff9408\",\n        property: {\n            dataType: \"map\",\n            keyValue: true,\n            Field: KeyValueFieldBinding\n        }\n    },\n    repeat: {\n        key: \"repeat\",\n        name: \"Repeat/list\",\n        description: \"A field that gets repeated multiple times (e.g. multiple text fields)\",\n        Icon: RepeatIcon,\n        color: \"#ff9408\",\n        property: {\n            dataType: \"array\",\n            of: {\n                dataType: \"string\",\n            },\n            Field: RepeatFieldBinding\n        }\n    },\n    custom_array: {\n        key: \"custom_array\",\n        name: \"Custom array\",\n        description: \"A field that saved its value as an array of custom objects\",\n        Icon: RepeatIcon,\n        color: \"#ff9408\",\n        property: {\n            dataType: \"array\",\n            of: [],\n            Field: ArrayCustomShapedFieldBinding\n        }\n    },\n    block: {\n        key: \"block\",\n        name: \"Block\",\n        description: \"A complex field that allows the user to compose different fields together, with a key->value format\",\n        Icon: ViewStreamIcon,\n        color: \"#ff9408\",\n        property: {\n            dataType: \"array\",\n            oneOf: {\n                properties: {},\n            },\n            Field: BlockFieldBinding\n        }\n    }\n};\n\nexport function getDefaultFieldConfig(property: Property | ResolvedProperty): PropertyConfig | undefined {\n    const fieldId = getDefaultFieldId(property);\n    if (!fieldId) {\n        console.error(\"No field id found for property\", property);\n        return undefined;\n    }\n    return DEFAULT_FIELD_CONFIGS[fieldId];\n}\n\nexport function getFieldConfig(property: Property | ResolvedProperty, propertyConfigs: Record<string, PropertyConfig<any>>): PropertyConfig | undefined {\n    const fieldId = getFieldId(property);\n    const defaultFieldId = getDefaultFieldId(property);\n    if (!defaultFieldId) {\n        console.error(\"No field id found for property\", property);\n        return undefined;\n    }\n    const defaultFieldConfig = DEFAULT_FIELD_CONFIGS[defaultFieldId];\n    const customField = fieldId ? propertyConfigs[fieldId] : undefined;\n    return mergeDeep(defaultFieldConfig ?? {}, customField ?? {});\n}\n\nexport function getDefaultFieldId(property: Property | ResolvedProperty) {\n    if (property.dataType === \"string\") {\n        if (property.multiline) {\n            return \"multiline\";\n        } else if (property.markdown) {\n            return \"markdown\";\n        } else if (property.storage) {\n            return \"file_upload\";\n        } else if (property.url) {\n            return \"url\";\n        } else if (property.email) {\n            return \"email\";\n        } else if (property.enumValues) {\n            return \"select\";\n        } else {\n            return \"text_field\";\n        }\n    } else if (property.dataType === \"number\") {\n        if (property.enumValues) {\n            return \"number_select\";\n        }\n        return \"number_input\";\n    } else if (property.dataType === \"map\") {\n        if (property.keyValue)\n            return \"key_value\";\n        return \"group\";\n    } else if (property.dataType === \"array\") {\n        const of = (property as ArrayProperty).of;\n        const oneOf = (property as ArrayProperty).oneOf;\n        if (oneOf) {\n            return \"block\";\n        } else if (Array.isArray(of)) {\n            return \"custom_array\";\n        } else if (isPropertyBuilder(of)) {\n            return \"repeat\";\n        } else if (of?.dataType === \"string\" && of.enumValues) {\n            return \"multi_select\";\n        } else if (of?.dataType === \"number\" && of.enumValues) {\n            return \"multi_number_select\";\n        } else if (of?.dataType === \"string\" && of.storage) {\n            return \"multi_file_upload\";\n        } else if (of?.dataType === \"reference\") {\n            return \"multi_references\";\n        } else {\n            return \"repeat\";\n        }\n    } else if (property.dataType === \"boolean\") {\n        return \"switch\";\n    } else if (property.dataType === \"date\") {\n        return \"date_time\";\n    } else if (property.dataType === \"reference\") {\n        return \"reference\";\n    }\n\n    console.error(\"Unsupported field config mapping\", property);\n    return undefined;\n}\n\nexport function getFieldId(property: Property | ResolvedProperty): string | undefined {\n    if (property.propertyConfig)\n        return property.propertyConfig;\n    return getDefaultFieldId(property);\n}\n","import React from \"react\";\n\nimport { Route, Routes, useLocation } from \"react-router-dom\";\nimport { CMSView } from \"../types\";\nimport { DefaultHomePage, EntityCollectionView, ErrorBoundary, NotFoundPage } from \"../components\";\nimport { useNavigationController } from \"../hooks\";\nimport { toArray } from \"../util/arrays\";\n\n/**\n * @group Components\n */\nexport type NavigationRoutesProps = {\n    /**\n     * In case you need to override the home page\n     */\n    HomePage?: React.ComponentType;\n\n    customRoutes?: React.ReactNode[]\n\n};\n\n/**\n * This component is in charge of rendering\n * all the related routes (entity collection root views, custom views\n * or the home route) related to a {@link NavigationController}.\n * This component needs a parent {@link FireCMS}\n *\n * @constructor\n * @group Components\n */\n\nexport const NavigationRoutes = React.memo<NavigationRoutesProps>(\n    function NavigationRoutes({\n                                  HomePage = DefaultHomePage,\n                                  customRoutes\n                              }: NavigationRoutesProps) {\n\n        const location = useLocation();\n        const navigation = useNavigationController();\n\n        if (!navigation)\n            return <></>;\n\n        const state = location.state as any;\n\n        /**\n         * The location can be overridden if `base_location` is set in the\n         * state field of the current location. This can happen if you open\n         * a side entity, like `products`, from a different one, like `users`\n         */\n        const baseLocation = state && state.base_location ? state.base_location : location;\n\n        const cmsViews: React.ReactNode[] = [];\n        if (navigation.views) {\n            navigation.views.forEach((cmsView) => {\n                if (Array.isArray(cmsView.path))\n                    cmsViews.push(...cmsView.path.map(path => buildCMSViewRoute(path, cmsView)));\n                else\n                    cmsViews.push(buildCMSViewRoute(cmsView.path, cmsView));\n            });\n        }\n        if (navigation.adminViews) {\n            navigation.adminViews.forEach((cmsView) => {\n                if (Array.isArray(cmsView.path))\n                    cmsViews.push(...cmsView.path.map(path => buildCMSViewRoute(path, cmsView)));\n                else\n                    cmsViews.push(buildCMSViewRoute(cmsView.path, cmsView));\n            });\n        }\n\n        // we reorder collections so that nested paths are included first\n        const sortedCollections = [...(navigation.collections ?? [])]\n            .sort((a, b) => b.path.length - a.path.length);\n\n        const collectionRoutes = sortedCollections\n            .map((collection) => {\n                    const urlPath = navigation.buildUrlCollectionPath(collection.id ?? collection.path);\n                    return <Route path={urlPath + \"/*\"}\n                                  key={`navigation_${collection.id ?? collection.path}`}\n                                  element={\n                                      <ErrorBoundary>\n                                          <EntityCollectionView\n                                              key={`collection_view_${collection.id ?? collection.path}`}\n                                              isSubCollection={false}\n                                              parentCollectionIds={[]}\n                                              fullPath={collection.id ?? collection.path}\n                                              {...collection}\n                                              Actions={toArray(collection.Actions)}/>\n                                      </ErrorBoundary>\n                                  }/>;\n                }\n            );\n\n        const homeRoute = (\n            <Route path={\"/\"}\n                   element={<HomePage/>}/>\n        );\n\n        const notFoundRoute = <Route path={\"*\"}\n                                     element={\n                                         <NotFoundPage/>\n                                     }/>;\n\n        return (\n            <Routes location={baseLocation}>\n\n                {collectionRoutes}\n\n                {cmsViews}\n\n                {homeRoute}\n\n                {notFoundRoute}\n\n                {customRoutes}\n\n            </Routes>\n        );\n    });\n\nconst buildCMSViewRoute = (path: string, cmsView: CMSView) => {\n    return <Route\n        key={\"navigation_view_\" + path}\n        path={path}\n        element={cmsView.view}\n    />;\n};\n"],"names":["SnackbarProvider","children","jsx","NotistackSnackbarProvider","DEFAULT_MODE_STATE","mode","ModeControllerContext","React","ModeControllerProvider","AuthControllerContext","removeInitialAndTrailingSlashes","s","removeInitialSlash","removeTrailingSlash","addInitialSlash","getLastSegment","path","cleanPath","segments","resolveCollectionPathIds","allCollections","subpaths","aliasedCollection","col","resolvedAliased","segmentCollection","getCollectionByPathOrId","restOfThePath","pathOrId","collections","subpathCombinations","getCollectionPathsCombinations","result","i","subpathCombination","navigationEntry","a","b","entry","newPath","entries","length","EntityReference","id","GeoPoint","latitude","longitude","Vector","value","pick","obj","args","res","key","isObject","item","mergeDeep","target","source","targetIsObject","output","getValueInPath","o","pathSegments","segment","firstSegment","isArrayAndIndexExists","nextObject","nextPath","removeInPath","currentObject","parts","last","part","removeFunctions","_","v","getHashValue","hash","removeUndefined","removeEmptyStrings","isEmptyObject","childRes","isString","shouldKeepIfString","removePropsIfExisting","comparison","val","isArray","DEFAULT_ONE_OF_TYPE","DEFAULT_ONE_OF_VALUE","isReadOnly","property","isHidden","isPropertyBuilder","propertyOrBuilder","getDefaultValuesFor","properties","getDefaultValueFor","defaultValuesFor","getDefaultValueForDataType","dataType","updateDateAutoValues","inputValues","status","timestampNowValue","setDateToMidnight","traverseValuesProperties","inputValue","resultDate","sanitizeData","values","getReferenceFrom","entity","operation","updatedValues","updatedValue","traverseValueProperty","e","typeField","valueField","type","childProperty","enumToObjectEntries","enumValues","getLabelOrConfigFrom","getColorScheme","labelOrConfig","getColorSchemeForSeed","CHIP_COLORS","isEnumValueDisabled","buildEnumLabel","resolveCollection","collection","entityId","previousValues","userConfigPersistence","fields","collectionOverride","storedProperties","defaultValues","usedValues","usedPreviousValues","resolvedProperties","propertyValue","getIn","childResolvedProperty","resolveProperty","cleanedProperties","fromBuilder","props","resolvedProperty","resolveProperties","resolveArrayProperty","resolvePropertyEnum","isDefaultFieldConfigId","cmsFields","customField","configPropertyOrBuilder","customFieldProperty","propertyKey","p","index","of","ofProperty","thisPropertyValue","resolveEnumValues","input","resolveEntityView","entityView","contextEntityViews","getNavigationEntriesFromPathInternal","currentFullPath","pathOrAlias","collectionPath","nextSegments","fullPath","entityViews","customView","sortProperties","propertiesOrder","propertiesKeys","resolveDefaultSelectedView","defaultSelectedView","params","applyPermissionsFunctionIfEmpty","permissionsBuilder","kebabCaseRegex","toKebabCase","str","regExpMatchArray","x","snakeCaseRegex","toSnakeCase","randomString","strLength","randomColor","slugify","text","separator","lowercase","from","to","l","unslugify","slug","txt","defaultDateFormat","COLLECTION_PATH_SEPARATOR","stripCollectionPath","segmentsToStrippedPath","fullPathToCollectionSegments","paths","serializeRegExp","hydrateRegExp","fragments","isValidRegExp","useDebouncedCallback","callback","immediate","timeoutMs","pendingUpdate","performUpdate","handlerRef","isReferenceProperty","getIdIcon","size","CircleIcon","getIconForWidget","widget","Icon","getIconForProperty","FunctionsIcon","getFieldConfig","getColorForProperty","getPropertyInPath","getResolvedPropertyInPath","getBracketNotation","getPropertiesWithPropertiesOrder","getDefaultPropertiesOrder","field","DEFAULT_PERMISSIONS","resolvePermissions","authController","permission","canEditEntity","canCreateEntity","canDeleteEntity","icon_synonyms","iconsSearch","JsSearch","iconKeys","importName","hashString","chr","getIcon","iconKey","className","iconKeysMap","IconForView","collectionOrView","Fragment","icon","slugName","iconsCount","coolIconKeys","prevProps","nextProps","equal","acc","plural","word","amount","plurals","irregular","w","pattern","replace","reg","singular","singulars","getEntityPreviewKeys","targetCollection","previewProperties","limit","allProperties","listProperties","getEntityTitlePropertyKey","propertyConfigs","getEntityImagePreviewPropertyKey","flattenObject","parentKey","flatObj","newKey","getArrayValuesCount","array","nested","nestedKey","nestedCount","compoundKey","makePropertiesEditable","makePropertiesNonEditable","updated","applyModifyFunction","modifyCollection","parentPaths","resCollection","subcollection","joinCollectionLists","targetCollections","sourceCollections","updatedCollections","sourceCol","targetCol","mergeCollection","sourceCollectionIds","resultStoredCollections","subcollectionsMerged","propertiesMerged","mergePropertyOrBuilder","mergedCollection","targetPropertiesOrder","getCollectionKeys","sourcePropertiesOrder","mergedPropertiesOrder","mergedEntityViews","resultCollection","modifiedCollection","mergedProperty","targetEditable","sourceEditable","targetProperties","sourceProperties","mergedProperties","f","buildCollection","buildProperty","buildProperties","buildPropertiesOrBuilder","propertiesOrBuilder","buildEnumValues","buildEnumValueConfig","enumValueConfig","buildEntityCallbacks","callbacks","buildAdditionalFieldDelegate","additionalFieldDelegate","buildFieldConfig","propertyConfig","printChanged","prev","depth","maxDepth","useTraceUpdate","useRef","useEffect","CONTAINER_FULL_WIDTH","ADDITIONAL_TAB_WIDTH","FORM_CONTAINER_WIDTH","DataSourceContext","useDataSource","defaultDataSource","useContext","NavigationContext","useNavigationController","useAuthController","SideDialogsControllerContext","useSideDialogsController","SideEntityControllerContext","useSideEntityController","StorageSourceContext","useStorageSource","defaultStorageSource","useSnackbarController","enqueueSnackbar","closeSnackbar","useSnackbar","open","useCallback","message","autoHideDuration","close","useMemo","UserConfigurationPersistenceContext","useUserConfigurationPersistence","DialogsControllerContext","DialogsProvider","dialogEntries","setDialogEntries","useState","dialogEntriesRef","updateDialogEntries","newPanels","updatedPanels","dialogEntry","jsxs","useDialogsController","CustomizationControllerContext","useCustomizationController","AnalyticsContext","useAnalyticsController","useFireCMSContext","sideDialogsController","sideEntityController","navigation","dataSource","storageSource","snackbarController","dialogsController","customizationController","analyticsController","fireCMSContextRef","useCollectionFetch","inputPath","filterValues","sortBy","itemCount","searchString","sortByProperty","currentSort","context","data","setData","dataLoading","setDataLoading","dataLoadingError","setDataLoadingError","noMoreToLoad","setNoMoreToLoad","onEntitiesUpdate","entities","onError","error","CACHE","useEntityFetch","useCache","setEntity","onEntityUpdate","updatedEntity","saveEntityWithCallbacks","onSaveSuccess","onSaveFailure","onPreSaveHookError","onSaveSuccessHookError","resolvedPath","resolvedCollection","deleteEntityWithCallbacks","onDeleteSuccess","onDeleteFailure","onPreDeleteHookError","onDeleteSuccessHookError","entityDeleteProps","resolveNavigationFrom","resultPromises","useResolvedNavigationFrom","useModeController","useClipboard","options","onSuccess","disableClipboardAPI","copiedDuration","ref","isCoppied","setIsCoppied","clipboard","setClipbaord","isSupported","handleError","handleSuccess","copyToClipboard","err","clearClipboard","copy","action","cut","element","isInput","breakpoints","isLargeLayoutGlobal","checkLargeLayout","listeners","notifyListeners","listener","newIsLargeLayout","useLargeLayout","isLargeLayout","setIsLargeLayout","breakpoint","ErrorTooltip","Tooltip","ErrorView","title","tooltip","component","body","ErrorIcon","Typography","EmptyValue","TINY_THUMBNAIL","SMALL_THUMBNAIL","REGULAR_THUMBNAIL","getThumbnailMeasure","getPreviewSizeFrom","ImagePreview","url","onHover","setOnHover","imageSize","IconButton","ContentCopyIcon","OpenInNewIcon","UrlComponentPreview","previewType","hint","DescriptionIcon","SkeletonPropertyComponent","content","stringProperty","renderUrlComponent","renderSkeletonImageThumbnail","renderSkeletonText","arrayProperty","renderGenericArrayCell","renderArrayOfMaps","renderArrayEnumTableCell","renderArrayOfStrings","renderMap","renderReference","mapPropertyKeys","tableProperties","Skeleton","renderSkeletonIcon","renderUrlFile","width","renderSkeletonCaptionText","StorageThumbnail","StorageThumbnailInternal","areEqual","URL_CACHE","storeUrl","storagePathOrDownloadUrl","setError","storage","downloadConfig","setDownloadConfig","unmounted","filetype","getFiletype","EnumValuesChip","enumKey","enumValuesConfig","enumValue","label","colorScheme","Chip","StringPropertyPreview","ErrorBoundary","lines","cn","ArrayPropertyPreview","inputProperty","childSize","defaultBorderMixin","PropertyPreview","EntityPreview","actions","disabled","hover","collectionProp","onClick","includeEntityNavigation","navigationController","titleProperty","imagePropertyKey","imageProperty","restProperties","EntityPreviewContainer","KeyboardTabIcon","EntityPreviewContainerInner","style","fullwidth","event","ReferencePreview","reference","ReferencePreviewInternal","allowEntityNavigation","ReferencePreviewExisting","referencesCache","usedEntity","ArrayOfReferencesPreview","ArrayOfStorageComponentsPreview","ArrayEnumPreview","name","ArrayPropertyEnumPreview","ArrayOfStringsPreview","ArrayOneOfPreview","MapPropertyPreview","mapProperty","KeyValuePreview","childValue","DatePreview","date","dateUtilsLocale","locales","dateFormat","formattedDate","format","BooleanPreview","Checkbox","NumberPropertyPreview","height","createElement","Markdown","buildWrongValueType","ArrayOfMapsPreview","mapProperties","AsyncPreviewComponent","builder","loading","setLoading","setResult","EntityView","VirtualTableInput","multiline","updateValue","focused","prevValue","internalValue","setInternalValue","focusedState","doUpdate","TextareaAutosize","evt","newValue","VirtualTableSelect","small","multiple","valueType","validValue","onChange","renderValue","MultiSelect","enumConfig","MultiSelectItem","Select","SelectItem","VirtualTableNumberInput","align","propStringValue","numberValue","regexp","VirtualTableSwitch","BooleanSwitch","VirtualTableDateField","locale","DateTimeField","dateValue","errorInfo","resolveFilenameString","file","replacePlaceholders","resolveStoragePathString","ext","useStorageUploadController","entityValues","multipleFilesSupported","metadata","compression","internalInitialValue","getRandomId","initialValue","setInitialValue","fileNameBuilder","fileName","storagePathBuilder","onFileUploadComplete","uploadedPath","uploadPathOrDownloadUrl","removeDuplicates","fieldValue","onFilesAdded","acceptedFiles","newInternalValue","compressionFormat","resizeAndCompressImage","items","supportedTypes","defaultQuality","resolve","inputQuality","quality","Resizer","StorageUploadProgress","storagePath","simple","mounted","uploading","upload","paperMixin","EntityTableCellActions","showError","showExpandIcon","selected","openPopup","doOpenPopup","cellRect","iconRef","ErrorOutlineIcon","dropZoneClasses","activeDropClasses","acceptDropClasses","rejectDropClasses","TableStorageUpload","previewSize","StorageUpload","previewSizeInput","autoFocus","hasValue","snackbarContext","getRootProps","getInputProps","isDragActive","isDragAccept","isDragReject","useDropzone","fileRejections","fileRejection","rootProps","helpText","renderProperty","child","TableStorageItemPreview","EditIcon","TableReferenceField","TableReferenceFieldSuccess","multiselect","forceFilter","onSingleEntitySelected","onMultipleEntitiesSelected","selectedEntityIds","referenceDialogController","useReferenceDialog","handleOpen","valueNotSet","buildSingleReferenceField","buildMultipleReferenceField","Button","yup","mapper","getYupEntitySchema","customFieldValidator","objectSchema","mapPropertyToYup","propertyContext","getYupStringSchema","getYupNumberSchema","getYupBooleanSchema","getYupMapObjectSchema","getYupArraySchema","getYupDateSchema","getYupGeoPointSchema","getYupReferenceSchema","validation","childName","shape","parentProperty","regExp","hasUniqueInArrayModifier","arraySchema","yupProperties","object","arrayUniqueFields","getRowHeight","TableCellInner","justifyContent","scrollable","faded","fullHeight","EntityTableCell","disabledTooltip","saved","allowScroll","removePadding","onSelect","hideOverflow","measureRef","bounds","useMeasure","maxHeight","internalSaved","setInternalSaved","handler","onSelectCallback","onFocus","isOverflowing","isSelected","setOnHoverTrue","setOnHoverFalse","borderClass","RemoveCircleIcon","SelectableTableContext","useSelectableTableController","useClearRestoreValue","setValue","clearedValueRef","isStorageProperty","PropertyTableCell","readonly","disabledProp","onValueChange","selectedCell","select","setPopupCell","internalValueRef","validationError","setValidationError","setSaved","onValueUpdated","customPreview","readOnlyProperty","saveValues","innerComponent","includeActions","numberProperty","EntityCollectionRowActions","frozen","selectionEnabled","highlightEntity","onCollectionChange","unhighlightEntity","hideId","selectionController","largeLayout","onCheckedChange","checked","hasActions","hasCollapsedActions","collapsedActions","uncollapsedActions","Menu","MoreVertIcon","MenuItem","CollectionTableToolbar","actionsStart","onSizeChanged","onTextSearch","onTextSearchClick","textSearchLoading","searchInputRef","searchLoading","sizeSelect","CircularProgress","SearchBar","getTableCellAlignment","getTablePropertyColumnWidth","getSubcollectionColumnId","COLLECTION_GROUP_PARENT_ID","useColumnIds","includeSubcollections","hideAndExpandKeys","getDefaultColumnKeys","keys","getColumnKeysForProperty","subCol","includeSubCollections","propertyKeys","additionalFields","subCollections","columnIds","subCollectionIds","subColId","childKey","buildIdColumn","propertiesToColumns","sortable","disabledFilter","AdditionalHeaderWidget","filterable","filterableProperty","partOfArray","CircularProgressCenter","VirtualTableHeader","resizeHandleRef","columnIndex","isResizingIndex","sort","onColumnSort","onFilterUpdate","filter","column","onClickResizeColumn","createFilterField","openFilter","setOpenFilter","hidden","setHidden","handleSettingsClick","update","filterForProperty","newOpenFilterState","thisColumnIsResizing","hovered","Badge","ArrowUpwardIcon","Popover","FilterListIcon","FilterForm","filterInternal","setFilterInternal","submit","reset","filterIsSet","filterField","VirtualTableHeaderRow","columns","onColumnResize","onColumnResizeEnd","AddColumnComponent","columnRefs","createRef","isResizing","setIsResizing","adjustWidthColumn","end","minWidth","maxWidth","newWidth","getEventNewWidth","left","setCursorDocument","handleOnMouseMove","handleOnMouseUp","removeResizingListeners","attachResizeListeners","c","filterForThisProperty","VirtualTableRow","rowData","rowIndex","onRowClick","hoverRow","rowClassName","VirtualTableCell","VirtualListContext","createContext","innerElementType","forwardRef","rest","virtualTableProps","VirtualTable","onResetPagination","onEndReached","columnsProp","filterInput","checkFilterCombination","emptyComponent","onSortByUpdate","cellRenderer","endAdornment","setColumns","tableRef","endReachCallbackThreshold","onColumnResizeInternal","onColumnResizeEndInternal","filterRef","scrollToTop","isDesc","newSort","newSortProperty","newSortBy","maxScroll","onEndReachedInternal","scrollOffset","onScroll","scrollUpdateWasRequested","onFilterUpdateInternal","newFilterValue","buildEmptyView","AssignmentIcon","empty","CenteredView","SafeLinkRenderer","virtualListController","MemoizedList","outerRef","itemSize","includeAddColumn","Row","cellData","List","urlRegex","htmlContent","operationLabels","multipleSelectOperations","ReferenceFilterField","possibleOperations","fieldOperation","setOperation","updateFilter","op","prevOpIsArray","newOpIsArray","hasNewValue","doOpenDialog","buildEntry","Label","StringNumberFilterField","TextField","ClearIcon","BooleanFilterField","valueSetToTrue","BooleanSwitchWithLabel","DateTimeFilterField","SelectableTable","onEntityClick","inlineEditing","setFilterValues","setSortBy","setSearchString","clearFilter","setItemCount","pageSize","paginationEnabled","highlightedRow","setSelectedCell","loadNextPage","resetPagination","useOutsideAlerter","unselect","escFunction","cell","updatedFilterValues","filterValue","setFilterValue","baseProperty","EntityCollectionTable","tableRowActionsBuilder","uniqueFieldValidator","getPropertyFor","highlightedEntities","textSearchEnabled","displayedColumnIds","defaultSize","tableController","additionalIDHeaderWidget","getIdColumnWidth","disabledFilterChange","selectedEntities","setSize","updateSize","newSearchString","additionalFieldsMap","aC","propertyCellRenderer","additionalCellRenderer","additionalField","Builder","collectionColumns","columnsResult","additionalTableColumns","columnKey","useDataOrder","entitiesDisplayedFirst","displayedFirstId","useDebouncedData","deps","deferredData","setDeferredData","dataLength","currentDeps","haveDepsChanged","immediateUpdate","DEFAULT_PAGE_SIZE","useDataSourceEntityCollectionTableController","lastDeleteTimestamp","forceFilterFromProps","initialFilter","initialSort","forceFilterFromCollection","popupCell","initialSortInternal","rawData","setRawData","updateFilterValues","updatedFilter","orderedData","useSelectionController","onSelectionChange","setSelectedEntities","toggleEntitySelection","isEntitySelected","useTableSearchHelper","parentCollectionIds","setTextSearchLoading","textSearchInitialised","setTextSearchInitialised","ReferenceSelectionTable","pathInput","selectedEntityIdsProp","description","maxSelection","sideDialogContext","useSideDialogContext","setEntitiesDisplayedFirst","onClear","onNewClick","onDone","ReferenceDialogActions","DialogActions","addButton","AddIcon","toArray","NavigationGroup","group","userConfigurationPersistence","ExpandablePanel","expanded","g","NavigationCard","Card","ArrowForwardIcon","SmallNavigationCard","ReactLink","cardMixin","cardClickableMixin","focusedMixin","NavigationCardBinding","view","collectionIcon","navigate","useNavigate","favourite","actionsArray","StarIcon","StarBorderIcon","actionProps","plugin","NavigationChip","onIconClick","FavouritesView","favouriteCollections","Collapse","scrollsMap","useRestoreScroll","location","useLocation","containerRef","scroll","setScroll","direction","setDirection","handleScroll","container","search","DefaultHomePage","additionalActions","additionalChildrenStart","additionalChildrenEnd","navigationEntries","groups","filteredUrls","setFilteredUrls","filteredNavigationEntries","updateSearchResults","searchResult","allGroups","additionalPluginChildrenStart","additionalPluginChildrenEnd","additionalPluginSections","sectionProps","section","Container","AdditionalCards","thisGroupCollections","AdditionalCard","EntityCollectionViewActions","relativePath","onMultipleDeleteClick","collectionEntitiesCount","plugins","multipleDeleteEnabled","multipleDeleteButton","button","DeleteIcon","Action","j","useDraggable","innerRef","y","onMove","relX","relY","listeningRef","onMouseDown","onMouseMove","onMouseUp","onMouseDownInner","current","innerCurrent","useWindowSize","useLayoutEffect","ElementResizeListener","onResize","rafRef","objectRef","onResizeRef","_onResize","onLoad","FormikArrayContainer","addLabel","onInternalIdAdded","includeAddButton","newDefaultEntry","setFieldValue","ArrayContainer","FieldHelperText","includeDescription","hasDescription","InfoIcon","LabelWithIcon","required","SelectFieldBinding","touched","handleClearClick","option","MultiSelectBinding","list","CloseIcon","ArrayOfReferencesFieldBinding","isSubmitting","tableMode","onEntryClick","internalId","entryValue","fieldBackgroundMixin","StorageItemPreview","onRemove","RemoveIcon","disabledClasses","nonActiveDropClasses","StorageUploadFieldBinding","FileDropComponent","isDraggingOver","droppableProvided","fieldBackgroundDisabledMixin","fieldBackgroundHoverMixin","Draggable","provided","snapshot","moveItem","fromIndex","toIndex","onDragEnd","clearedStoragePathOrDownloadUrl","DragDropContext","Droppable","rubric","TextFieldBinding","inputType","isMultiline","SwitchFieldBinding","DateTimeFieldBinding","ReadOnlyFieldBinding","ReferenceFieldBinding","ReferenceFieldBindingInternal","PropertyFieldBinding","PropertyFieldBindingInternal","aIsBuilder","bIsBuilder","shouldPropertyReRender","underlyingValueHasChanged","partOfBlock","Field","fieldProps","Component","FieldInternal","customFieldProps","UsedComponent","useWrappedComponent","shouldValidate","otherPropertyKey","defAProperty","rerenderThisProperty","Wrapper","fieldId","getFieldId","enabled","MapFieldBinding","pickOnlySomeKeys","mapFormView","entryKey","KeyValueFieldBinding","MapEditView","fieldName","internalState","setInternalState","getDataType","currentKeys","newKeys","keysToAdd","keysToRemove","newRowIds","k","originalValue","updateDataType","rowId","row","fieldKey","MapKeyValueRow","currentRowId","onFieldKeyChange","onDeleteClick","buildInput","ArrayKeyValueRow","newArrayValue","doUpdateDataType","ArrowDropDownIcon","selectedDataType","setSelectedDataType","RepeatFieldBinding","lastAddedId","setLastAddedId","arrayContainer","BlockFieldBinding","BlockEntry","firstOneOfKey","typeInternal","setTypeInternal","formex","useFormex","updateType","enumValuesConfigs","typeFieldName","valueFieldName","newType","newSelectedProperty","value1","mdParser","MarkdownIt","MdEditor","Plugins","MarkdownFieldBinding","valueRef","useInjectStyles","markdownCss","deferred","useDeferredValue","html","ArrayCustomShapedFieldBinding","ErrorFocus","isValidating","errors","errorElement","scrollableParent","getScrollableParent","top","isScrollable","ele","hasScrollableContent","overflowYStyle","isOverflowHidden","CustomIdField","customId","idSetAutomatically","DeleteEntityDialog","entityOrEntitiesToDelete","onClose","onEntityDelete","onMultipleEntitiesDelete","entityOrEntities","setUsedEntityOrEntities","multipleEntities","setMultipleEntities","revisedEntityOrEntities","handleCancel","performDelete","handleOk","results","success","dialogTitle","Dialog","DialogContent","editEntityAction","copyEntityAction","FileCopyIcon","deleteEntityAction","closeDialog","PropertyIdCopyTooltipContent","propertyId","copied","setCopied","ContentPasteIcon","EntityForm","EntityFormInternal","getDataSourceEntityValues","initialResolvedCollection","inputCollection","onEntitySaveRequested","onDiscard","onModified","onValuesChanged","onIdChange","onFormContextChange","autoSave","onIdUpdateError","mustSetCustomId","initialEntityId","closeAfterSaveRef","baseDataSourceValuesRef","setEntityId","entityIdError","setEntityIdError","savingError","setSavingError","customIdLoading","setCustomIdLoading","internalValues","setInternalValues","save","eventName","onSubmit","formexController","useCreateFormex","validationSchema","yupToFormErrors","initialValues","setUnderlyingChanges","latestValue","doOnValuesChanges","titlePropertyKey","onIdUpdate","doOnIdUpdate","updatedId","underlyingChanges","getActionsForEntity","customEntityActions","createEnabled","deleteEnabled","pluginActions","formContext","Formex","Alert","InnerForm","handleSubmit","resetForm","dirty","entityActions","formActions","modified","formValue","formFields","cmsFormFieldProps","formRef","yupError","setIn","PopupFormField","PopupFormFieldInternal","tableKey","entityProp","onCellValueChange","fireCMSContext","popupLocation","setPopupLocation","windowSize","draggableRef","initialPositionSet","getInitialLocation","normalizePosition","draggableBoundingRect","updatePopupLocation","position","newPosition","adaptResize","saveValue","internalForm","form","draggable","Portal","ClearFilterSortButton","sortIsSet","FilterListOffIcon","EntityCollectionViewStartActions","EntityCollectionView","fullPathProp","isSubCollection","userOverride","collectionRef","canCreateEntities","selectedNavigationEntity","setSelectedNavigationEntity","deleteEntityClicked","setDeleteEntityClicked","setLastDeleteTimestamp","docsCount","setDocsCount","unselectNavigatedEntity","currentSelection","checkInlineEditing","popOverOpen","setPopOverOpen","usedSelectionController","onPopupClose","clickedEntity","internalOnEntityDelete","_path","internalOnMultipleEntitiesDelete","onCollectionModifiedForUser","partialCollection","currentStoredConfig","updatedConfig","localCollection","buildPropertyWidthOverwrite","saveProps","resolvedFullPath","subcollectionColumns","collectionGroupParentCollections","collectionsWithPath","updateLastDeleteTimestamp","actionsWidth","EntitiesCount","buildAdditionalHeaderWidget","HeaderAction","addColumnComponentInternal","EntityIdHeaderWidget","onCountChange","count","setCount","setOpenPopup","SearchIcon","PropertyConfigBadge","classes","defaultPropertyConfig","getDefaultFieldConfig","NotFoundPage","DeleteConfirmationDialog","onAccept","onCancel","LoadingButton","FireCMSLogo","FireCMSAppBar","startAdornment","drawerOpen","dropDownActions","includeDrawer","userProp","toggleMode","user","avatarComponent","Avatar","initial","DarkModeIcon","LightModeIcon","LogoutIcon","buildIdsMap","droppableId","internalIdsRef","internalIds","setInternalIds","newInternalIds","hashValue","newInternalId","insertInEnd","newIds","remove","copyingItem","sourceIndex","destinationIndex","temp","arrayMove","ArrayContainerItem","droppableSnapshot","isDragging","ArrayItemOptions","menuOpen","setMenuOpen","HandleIcon","removed","ReferenceWidget","onReferenceSelected","onMultipleReferenceSelected","references","UPDATE_SEARCH_INDEX_WAIT_MS","SearchIconsView","selectedIcon","onIconSelected","setKeys","query","setQuery","debounce","FieldCaption","referenceDialogProps","usedCollection","fireCMSLogo","useBrowserTitleAndIcon","logo","link","getParentReferencesFromPath","DEFAULT_BASE_PATH","DEFAULT_COLLECTION_PATH","useBuildNavigationController","basePath","baseCollectionPath","collectionsProp","collectionPermissions","viewsProp","adminViewsProp","viewsOrder","dataSourceDelegate","injectCollections","collectionsRef","viewsRef","adminViewsRef","initialised","setInitialised","topLevelNavigation","setTopLevelNavigation","navigationLoading","setNavigationLoading","navigationLoadingError","setNavigationLoadingError","cleanBasePath","cleanBaseCollectionPath","homeUrl","fullCollectionPath","buildCMSUrlPath","encodePath","buildUrlCollectionPath","computeTopNavigation","views","adminViews","getGroup","aIndex","bIndex","refreshNavigation","resolvedCollections","resolvedViews","resolvedAdminViews","resolveCollections","resolveCMSViews","shouldUpdateTopLevelNav","areCollectionListsEqual","computedTopLevelNav","getCollection","idOrPath","includeUserOverride","baseCollection","overriddenCollection","subcollections","permissions","getCollectionFromPaths","currentCollections","pathSegment","getCollectionFromIds","ids","isUrlCollectionPath","urlPathToDataPath","buildUrlEditCollectionPath","resolveAliasesFrom","getAllParentReferencesForPath","getParentCollectionIds","oddPathSegments","r","convertIdsToPaths","getSidePanelKey","filterOutNotAllowedCollections","baseViews","trimmed","aCopy","bCopy","aSorted","bSorted","areCollectionsEqual","subcollectionsA","restA","subcollectionsB","restB","useBuildLocalConfigurationPersistence","configCache","getCollectionFromStorage","storageKey","getCollectionConfig","onCollectionModified","currentCache","cachedConfig","newConfig","recentlyVisitedPaths","_setRecentlyVisitedPaths","favouritePaths","_setFavouritePaths","collapsedGroups","_setCollapsedGroups","setRecentlyVisitedPaths","setFavouritePaths","setCollapsedGroups","useBuildModeController","prefersDarkModeQuery","prefersDarkMode","setMode","setDocumentMode","setDarkMode","setLightMode","prefersDarkModeQueryResult","useValidateAuthenticator","authenticator","authenticationEnabled","authLoading","setAuthLoading","notAllowedError","setNotAllowedError","authVerified","setAuthVerified","canAccessMainView","checkedUserRef","checkAuthentication","delegateUser","MAIN_TAB_VALUE","EntityEditView","selectedSubPath","onValuesAreModified","formWidth","onUpdate","saving","setSaving","valuesToBeSaved","setValuesToBeSaved","saveEntity","setFormContext","setStatus","modifiedValuesRef","modifiedValues","subcollectionsCount","customViews","customViewsCount","hasAdditionalViews","selectedTabRef","mainViewVisible","setUsedEntity","readOnly","setReadOnly","editEnabled","closeAfterSave","onSaveEntityRequest","resolvedEntityViews","customViewsView","colIndex","globalLoading","subCollectionsViews","subcollectionId","onSideTabClick","prevEntity","buildForm","subcollectionTabs","Tab","customViewTabs","Tabs","useNavigationUnsavedChangesDialog","when","nextLocation","setNextLocation","navigator","UNSAFE_NavigationContext","blocker","retry","unblock","tx","autoUnblockingTx","UnsavedChangesDialog","SideDialogContext","blocked","SideDialogs","sidePanels","panels","panel","SideDialogView","offsetPosition","drawerCloseRequested","setDrawerCloseRequested","setBlocked","blockedNavigationMessage","setBlockedNavigationMessage","widthRef","navigationWasBlocked","handleNavigationOk","handleNavigationCancel","handleDrawerCloseOk","handleDrawerCloseCancel","onCloseRequest","force","Sheet","EntitySidePanel","registryCollection","beforeunload","NEW_URL_HASH","getEntityViewWidth","mainViewSelected","resolvedWidth","useBuildSideEntityController","smallLayout","newFlag","entityOrCollectionPath","panelsFromUrl","buildSidePanelsFromUrl","propsToSidePanel","navigationViewsForPath","lastCollectionPath","previousEntry","lastSidePanel","resolvedPanelProps","useBuildSideDialogsController","setSidePanels","sidePanelsRef","routesStore","routesCount","updateSidePanels","baseLocation","panelProps","useBuildDataSource","delegate","startAfter","orderBy","order","isCollectionGroup","firestoreValues","updatedFirestoreValues","DEFAULT_SERVER","makeRequest","pluginKeys","firebaseToken","useProjectLog","accessResponse","setAccessResponse","accessedUserRef","FireCMS","modeController","entityLinkBuilder","dateTimeFormat","onAnalyticsEvent","components","useLocaleConfig","pluginsLoading","FireCMSInternal","childrenResult","Drawer","closeDrawer","tooltipsOpen","adminMenuOpen","setAdminMenuOpen","groupsWithoutAdmin","buildGroupHeader","DrawerNavigationItem","listItem","NavLink","isActive","DRAWER_WIDTH","Scaffold","autoOpenDrawer","DefaultDrawer","drawerProps","DefaultFireCMSAppBar","fireCMSAppBarProps","setDrawerOpen","handleDrawerClose","computedDrawerOpen","StyledDrawer","DrawerHeader","innerDrawer","MenuIcon","Link","ChevronLeftIcon","DEFAULT_FIELD_CONFIGS","ShortTextIcon","SubjectIcon","FormatQuoteIcon","HttpIcon","EmailIcon","FlagIcon","ListIcon","ListAltIcon","NumbersIcon","FormatListNumberedIcon","UploadFileIcon","DriveFolderUploadIcon","LinkIcon","AddLinkIcon","ScheduleIcon","BallotIcon","RepeatIcon","ViewStreamIcon","getDefaultFieldId","defaultFieldId","defaultFieldConfig","NavigationRoutes","HomePage","customRoutes","state","cmsViews","cmsView","buildCMSViewRoute","collectionRoutes","urlPath","Route","Routes"],"mappings":"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A;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA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"}